2025-12-05 12:40:12 - root - WARNING - Keyframe directory not found: /app/app/data/keyframe
2025-12-05 12:40:12 - root - INFO - üöÄ Starting FastAPI application...
2025-12-05 12:40:12 - root - INFO - Log directory: logs/
2025-12-05 12:40:12 - root - INFO - Search queries log: logs/search_queries.log
2025-12-05 12:40:12 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-05 12:40:12 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-05 12:40:12 - app.database.db - INFO -    Current submissions count: 0
2025-12-05 12:40:30 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='s√¥ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-05 12:40:30 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-05 12:40:30 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-05 12:40:30 - app.routers.search - INFO - [ENSEMBLE] WORKAROUND: Queries array empty, using method 'ensemble' as fallback
2025-12-05 12:40:30 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-05 12:40:31 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-05 12:40:31 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'river'
2025-12-05 12:40:31 - app.routers.search - INFO - [ENSEMBLE] Running multimodal search
2025-12-05 12:49:36 - root - INFO - üõë Shutting down FastAPI application...
2025-12-05 12:50:27 - root - WARNING - Keyframe directory not found: /app/app/data/keyframe
2025-12-05 12:50:27 - root - INFO - üöÄ Starting FastAPI application...
2025-12-05 12:50:27 - root - INFO - Log directory: logs/
2025-12-05 12:50:27 - root - INFO - Search queries log: logs/search_queries.log
2025-12-05 12:50:27 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-05 12:50:27 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-05 12:50:27 - app.database.db - INFO -    Current submissions count: 0
2025-12-05 12:50:30 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='s√¥ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-05 12:50:30 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-05 12:50:30 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-05 12:50:30 - app.routers.search - INFO - [ENSEMBLE] WORKAROUND: Queries array empty, using method 'ensemble' as fallback
2025-12-05 12:50:30 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-05 12:50:30 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-05 12:50:30 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'river'
2025-12-05 12:50:30 - app.routers.search - INFO - [ENSEMBLE] Running multimodal search
2025-12-05 12:56:28 - root - INFO - üõë Shutting down FastAPI application...
2025-12-05 12:59:22 - root - WARNING - Keyframe directory not found: /app/app/data/keyframe
2025-12-05 12:59:22 - root - INFO - üöÄ Starting FastAPI application...
2025-12-05 12:59:22 - root - INFO - Log directory: logs/
2025-12-05 12:59:22 - root - INFO - Search queries log: logs/search_queries.log
2025-12-05 12:59:22 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-05 12:59:22 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-05 12:59:22 - app.database.db - INFO -    Current submissions count: 0
2025-12-05 12:59:41 - root - INFO - üõë Shutting down FastAPI application...
2025-12-05 13:03:28 - root - WARNING - Keyframe directory not found: /app/app/data/keyframe
2025-12-05 13:03:28 - root - INFO - üöÄ Starting FastAPI application...
2025-12-05 13:03:28 - root - INFO - Log directory: logs/
2025-12-05 13:03:28 - root - INFO - Search queries log: logs/search_queries.log
2025-12-05 13:03:28 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-05 13:03:28 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-05 13:03:28 - app.database.db - INFO -    Current submissions count: 0
2025-12-05 13:03:37 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='s√¥ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-05 13:03:37 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-05 13:03:37 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-05 13:03:37 - app.routers.search - INFO - [ENSEMBLE] WORKAROUND: Queries array empty, using method 'ensemble' as fallback
2025-12-05 13:03:37 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-05 13:03:37 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-05 13:03:37 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'river'
2025-12-05 13:03:37 - app.routers.search - INFO - [ENSEMBLE] Running multimodal search
2025-12-05 13:03:38 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-05 13:03:39 - app.services.vector_db.qdrant_client - ERROR - ‚ùå Search failed in clip: <_InactiveRpcError of RPC that terminated with:
	status = StatusCode.NOT_FOUND
	details = "Not found: Collection `clip` doesn't exist!"
	debug_error_string = "UNKNOWN:Error received from peer  {grpc_status:5, grpc_message:"Not found: Collection `clip` doesn\'t exist!"}"
>
2025-12-05 13:07:14 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='s√¥ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-05 13:07:14 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-05 13:07:14 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-05 13:07:14 - app.routers.search - INFO - [ENSEMBLE] WORKAROUND: Queries array empty, using method 'ensemble' as fallback
2025-12-05 13:07:14 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-05 13:07:15 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-05 13:07:15 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'river'
2025-12-05 13:07:15 - app.routers.search - INFO - [ENSEMBLE] Running multimodal search
2025-12-05 13:07:18 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 377:1.0000, 383:0.8582, 14:0.8402, 376:0.8073, 51:0.7831, 52:0.7808, 60:0.7730, 55:0.7695, 48:0.7663, 49:0.7577
2025-12-05 13:07:18 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 377:1.0000, 52:0.9678, 384:0.9244, 14:0.9072, 51:0.8703, 98:0.8349, 376:0.8244, 50:0.8210, 132:0.8134, 383:0.8072
2025-12-05 13:07:18 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 383:1.0000, 59:0.9722, 377:0.9517, 382:0.9292, 381:0.9101, 384:0.8900, 376:0.8508, 56:0.8465, 60:0.8435, 55:0.8341
2025-12-05 13:07:18 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 377:1.0000, 14:0.8523, 52:0.8509, 383:0.8490, 384:0.8238, 376:0.7956, 51:0.7773, 60:0.7665, 59:0.7093, 47:0.7043
2025-12-05 13:07:18 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-05 13:07:18 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-05 13:07:18 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-05 13:08:07 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='s√¥ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-05 13:08:07 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-05 13:08:07 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-05 13:08:07 - app.routers.search - INFO - [ENSEMBLE] WORKAROUND: Queries array empty, using method 'ensemble' as fallback
2025-12-05 13:08:07 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-05 13:08:08 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-05 13:08:08 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'river'
2025-12-05 13:08:08 - app.routers.search - INFO - [ENSEMBLE] Running multimodal search
2025-12-05 13:08:10 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 377:1.0000, 383:0.8582, 14:0.8402, 376:0.8073, 51:0.7831, 52:0.7808, 60:0.7730, 55:0.7695, 48:0.7663, 49:0.7577
2025-12-05 13:08:10 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 377:1.0000, 52:0.9678, 384:0.9244, 14:0.9072, 51:0.8703, 98:0.8349, 376:0.8244, 50:0.8210, 132:0.8134, 383:0.8072
2025-12-05 13:08:10 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 383:1.0000, 59:0.9722, 377:0.9517, 382:0.9292, 381:0.9101, 384:0.8900, 376:0.8508, 56:0.8465, 60:0.8435, 55:0.8341
2025-12-05 13:08:10 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 377:1.0000, 14:0.8523, 52:0.8509, 383:0.8490, 384:0.8238, 376:0.7956, 51:0.7773, 60:0.7665, 59:0.7093, 47:0.7043
2025-12-05 13:08:10 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-05 13:08:10 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-05 13:08:10 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-05 13:11:22 - root - INFO - üõë Shutting down FastAPI application...
2025-12-05 13:12:12 - root - INFO - Mounted keyframe directory at /keyframes: /app/app/data/keyframe
2025-12-05 13:12:12 - root - INFO - üöÄ Starting FastAPI application...
2025-12-05 13:12:12 - root - INFO - Log directory: logs/
2025-12-05 13:12:12 - root - INFO - Search queries log: logs/search_queries.log
2025-12-05 13:12:12 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-05 13:12:12 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-05 13:12:12 - app.database.db - INFO -    Current submissions count: 0
2025-12-05 13:12:21 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='s√¥ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-05 13:12:21 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-05 13:12:21 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-05 13:12:21 - app.routers.search - INFO - [ENSEMBLE] WORKAROUND: Queries array empty, using method 'ensemble' as fallback
2025-12-05 13:12:21 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-05 13:12:21 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-05 13:12:21 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'river'
2025-12-05 13:12:21 - app.routers.search - INFO - [ENSEMBLE] Running multimodal search
2025-12-05 13:12:21 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-05 13:12:24 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 377:1.0000, 383:0.8582, 14:0.8402, 376:0.8073, 51:0.7831, 52:0.7808, 60:0.7730, 55:0.7695, 48:0.7663, 49:0.7577
2025-12-05 13:12:24 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 377:1.0000, 52:0.9678, 384:0.9244, 14:0.9072, 51:0.8703, 98:0.8349, 376:0.8244, 50:0.8210, 132:0.8134, 383:0.8072
2025-12-05 13:12:24 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 383:1.0000, 59:0.9722, 377:0.9517, 382:0.9292, 381:0.9101, 384:0.8900, 376:0.8508, 56:0.8465, 60:0.8435, 55:0.8341
2025-12-05 13:12:24 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 377:1.0000, 14:0.8523, 52:0.8509, 383:0.8490, 384:0.8238, 376:0.7956, 51:0.7773, 60:0.7665, 59:0.7093, 47:0.7043
2025-12-05 13:12:24 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-05 13:12:24 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-05 13:12:24 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-05 13:12:35 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='s√¥ng', ocrText='', toggles={'multimodal': False, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-05 13:12:35 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: caption
2025-12-05 13:12:35 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-05 13:12:35 - app.routers.search - INFO - [ENSEMBLE] WORKAROUND: Queries array empty, using method 'caption' as fallback
2025-12-05 13:12:35 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ic'}, Total: 1
2025-12-05 13:12:36 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-05 13:12:36 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'river'
2025-12-05 13:12:36 - app.routers.search - INFO - [ENSEMBLE] Running IC search
2025-12-05 13:12:36 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-05 13:12:36 - app.services.method.ic_search - INFO - IC.json loaded: 647 entries
2025-12-05 13:12:37 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 416:0.9410, 424:0.9410, 617:0.9410, 211:0.9410, 436:0.9410, 429:0.9410, 222:0.9410, 216:0.9410, 245:0.9410, 230:0.9410, 280:0.9410, 608:0.9410, 199:0.9410, 351:0.9410, 611:0.9410, 630:0.9410, 636:0.9410, 331:0.9410, 638:0.9410, 248:0.9410
2025-12-05 13:12:38 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 13:12:38 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 51:0.4991, 383:0.4453, 55:0.3000, 131:0.2862, 130:0.2699, 47:0.2608, 104:0.0856, 292:0.0824, 38:0.0679, 137:0.0637, 44:0.0214, 40:0.0192, 417:0.0184, 141:0.0176, 446:0.0149, 646:0.0138, 221:0.0127, 13:0.0118, 618:0.0110, 284:0.0103
2025-12-05 13:12:38 - app.routers.search - INFO - [ENSEMBLE] IC top results (scaled): 51:1.0000, 383:0.8922, 55:0.6011, 131:0.5733, 130:0.5407, 47:0.5224, 104:0.1713, 292:0.1649, 38:0.1359, 137:0.1275
2025-12-05 13:12:38 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ic']
2025-12-05 13:12:38 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ic']
2025-12-05 13:12:38 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-05 13:13:05 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='r·ª´ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-05 13:13:05 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-05 13:13:05 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-05 13:13:05 - app.routers.search - INFO - [ENSEMBLE] WORKAROUND: Queries array empty, using method 'ensemble' as fallback
2025-12-05 13:13:05 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-05 13:13:05 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-05 13:13:05 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'forest'
2025-12-05 13:13:05 - app.routers.search - INFO - [ENSEMBLE] Running multimodal search
2025-12-05 13:13:07 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 377:1.0000, 327:0.8852, 328:0.8522, 329:0.8479, 80:0.8410, 74:0.8375, 75:0.7882, 52:0.7132, 60:0.6900, 330:0.6866
2025-12-05 13:13:07 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 55:1.0000, 195:0.9311, 327:0.8759, 120:0.8582, 14:0.8368, 517:0.7754, 97:0.7709, 48:0.7700, 328:0.7619, 80:0.7483
2025-12-05 13:13:07 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 183:1.0000, 645:0.9129, 164:0.7097, 159:0.6736, 158:0.6580, 353:0.6559, 628:0.6274, 377:0.6081, 14:0.5736, 629:0.5654
2025-12-05 13:13:07 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 377:1.0000, 327:0.9276, 14:0.8588, 645:0.8560, 328:0.8439, 183:0.8054, 329:0.7747, 55:0.7743, 628:0.6647, 164:0.6343
2025-12-05 13:13:07 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-05 13:13:07 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-05 13:13:07 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-05 13:13:40 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='r·ª´ng', ocrText='', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-05 13:13:40 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: caption
2025-12-05 13:13:40 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-05 13:13:40 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal', 'ic'}, Total: 2
2025-12-05 13:13:41 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-05 13:13:41 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'forest'
2025-12-05 13:13:41 - app.routers.search - INFO - [ENSEMBLE] Running multimodal search
2025-12-05 13:13:43 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 377:1.0000, 327:0.8852, 328:0.8522, 329:0.8479, 80:0.8410, 74:0.8375, 75:0.7882, 52:0.7132, 60:0.6900, 330:0.6866
2025-12-05 13:13:43 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 55:1.0000, 195:0.9311, 327:0.8759, 120:0.8582, 14:0.8368, 517:0.7754, 97:0.7709, 48:0.7700, 328:0.7619, 80:0.7483
2025-12-05 13:13:43 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 183:1.0000, 645:0.9129, 164:0.7097, 159:0.6736, 158:0.6580, 353:0.6559, 628:0.6274, 377:0.6081, 14:0.5736, 629:0.5654
2025-12-05 13:13:43 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 377:1.0000, 327:0.9276, 14:0.8588, 645:0.8560, 328:0.8439, 183:0.8054, 329:0.7747, 55:0.7743, 628:0.6647, 164:0.6343
2025-12-05 13:13:43 - app.routers.search - INFO - [ENSEMBLE] Running IC search
2025-12-05 13:13:44 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 416:0.9438, 199:0.9438, 617:0.9438, 211:0.9438, 243:0.9438, 280:0.9438, 345:0.9438, 216:0.9438, 245:0.9438, 637:0.9438, 431:0.9438, 626:0.9438, 217:0.9438, 616:0.9438, 209:0.9438, 630:0.9438, 636:0.9438, 331:0.9438, 638:0.9438, 248:0.9438
2025-12-05 13:13:44 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 13:13:44 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 270:0.2050, 193:0.0818, 646:0.0345, 208:0.0313, 211:0.0284, 329:0.0283, 103:0.0248, 284:0.0222, 446:0.0208, 437:0.0206, 328:0.0196, 505:0.0196, 418:0.0193, 225:0.0191, 130:0.0187, 631:0.0183, 419:0.0172, 287:0.0170, 234:0.0166, 47:0.0165
2025-12-05 13:13:44 - app.routers.search - INFO - [ENSEMBLE] IC top results (scaled): 270:1.0000, 193:0.3986, 646:0.1676, 208:0.1521, 211:0.1380, 329:0.1375, 103:0.1202, 284:0.1078, 446:0.1009, 437:0.1000
2025-12-05 13:13:44 - app.routers.search - INFO - [ENSEMBLE] Check: 2 enabled methods, per_method_results keys: ['multimodal', 'ic']
2025-12-05 13:13:44 - app.routers.search - INFO - [ENSEMBLE] Ensembling 2 methods: {'multimodal', 'ic'}
2025-12-05 13:13:44 - app.routers.search - INFO - [ENSEMBLE] Final ensemble top results: 377:0.5000, 270:0.5000, 327:0.4638, 14:0.4294, 645:0.4280, 328:0.4220, 183:0.4027, 329:0.3874, 55:0.3872, 628:0.3324, 164:0.3172, 75:0.3110, 80:0.3041, 52:0.3022, 51:0.2982, 35:0.2948, 263:0.2903, 60:0.2893, 330:0.2793, 103:0.2723
2025-12-05 13:13:44 - app.routers.search - INFO - [ENSEMBLE] Mode=M, always returning per_method_results for mode switching flexibility
2025-12-05 13:14:48 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='hai ng∆∞·ªùi ƒë√†n √¥ng', ocrText='', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-05 13:14:48 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: caption
2025-12-05 13:14:48 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-05 13:14:48 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal', 'ic'}, Total: 2
2025-12-05 13:14:49 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'hai ng∆∞·ªùi ƒë√†n √¥ng' ‚Üí 'two men'
2025-12-05 13:14:49 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'two men'
2025-12-05 13:14:49 - app.routers.search - INFO - [ENSEMBLE] Running multimodal search
2025-12-05 13:14:51 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 225:1.0000, 172:0.9964, 455:0.9438, 231:0.9288, 235:0.9263, 227:0.9190, 614:0.9156, 173:0.9001, 221:0.8485, 632:0.8441
2025-12-05 13:14:51 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 173:1.0000, 455:0.9078, 172:0.8931, 225:0.8866, 231:0.8736, 613:0.8598, 221:0.8521, 227:0.8440, 69:0.7894, 235:0.7726
2025-12-05 13:14:51 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 183:1.0000, 614:0.8058, 645:0.7952, 353:0.7236, 354:0.7109, 455:0.7080, 333:0.7049, 632:0.6251, 334:0.6250, 612:0.6227
2025-12-05 13:14:51 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 455:1.0000, 173:0.9649, 614:0.9136, 172:0.9058, 613:0.8497, 225:0.7936, 231:0.7640, 221:0.7378, 227:0.7374, 235:0.6662
2025-12-05 13:14:51 - app.routers.search - INFO - [ENSEMBLE] Running IC search
2025-12-05 13:14:52 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 62:0.9744, 92:0.9744, 23:0.9744, 57:0.9744, 319:0.9744, 557:0.9744, 112:0.9744, 58:0.9744, 95:0.9744, 67:0.9744, 63:0.9744, 153:0.9744, 93:0.9744, 135:0.9744, 90:0.9744, 455:0.9744, 122:0.9744, 72:0.9744, 64:0.9744, 136:0.9744
2025-12-05 13:14:53 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 13:14:53 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 220:0.9992, 465:0.9853, 614:0.8727, 633:0.8716, 68:0.8260, 225:0.8073, 324:0.7985, 69:0.7832, 325:0.7805, 91:0.7504, 319:0.7480, 323:0.7375, 154:0.7356, 95:0.7265, 92:0.7054, 73:0.7051, 236:0.7044, 320:0.6885, 321:0.6756, 28:0.6608
2025-12-05 13:14:53 - app.routers.search - INFO - [ENSEMBLE] IC top results (scaled): 220:1.0000, 465:0.9861, 614:0.8734, 633:0.8723, 68:0.8267, 225:0.8079, 324:0.7991, 69:0.7838, 325:0.7811, 91:0.7510
2025-12-05 13:14:53 - app.routers.search - INFO - [ENSEMBLE] Check: 2 enabled methods, per_method_results keys: ['multimodal', 'clip', 'beit3', 'bigg', 'ic']
2025-12-05 13:14:53 - app.routers.search - INFO - [ENSEMBLE] Ensembling 2 methods: {'multimodal', 'ic'}
2025-12-05 13:14:53 - app.routers.search - INFO - [ENSEMBLE] Final ensemble top results: 455:0.7119, 173:0.6791, 614:0.6777, 172:0.6625, 613:0.6232, 225:0.5990, 231:0.5794, 227:0.5668, 221:0.5621, 632:0.5445, 235:0.5342, 353:0.5127, 236:0.4864, 165:0.4848, 612:0.4658, 171:0.4602, 286:0.4581, 73:0.4571, 167:0.4538, 176:0.4446
2025-12-05 13:14:53 - app.routers.search - INFO - [ENSEMBLE] Mode=A, always returning per_method_results for mode switching flexibility
2025-12-05 13:15:06 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='con c√°', ocrText='', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-05 13:15:06 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: caption
2025-12-05 13:15:06 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-05 13:15:06 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal', 'ic'}, Total: 2
2025-12-05 13:15:06 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'con c√°' ‚Üí 'fish'
2025-12-05 13:15:06 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'fish'
2025-12-05 13:15:06 - app.routers.search - INFO - [ENSEMBLE] Running multimodal search
2025-12-05 13:15:08 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 376:1.0000, 375:0.9915, 273:0.8111, 262:0.8090, 454:0.7966, 130:0.7419, 56:0.7282, 120:0.7046, 628:0.6903, 265:0.6783
2025-12-05 13:15:08 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 375:1.0000, 454:0.9989, 396:0.9514, 376:0.8817, 262:0.8768, 157:0.8768, 149:0.8567, 377:0.8444, 247:0.7754, 14:0.7724
2025-12-05 13:15:08 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 183:1.0000, 262:0.8740, 130:0.8571, 431:0.7789, 375:0.7586, 645:0.7345, 192:0.7077, 603:0.6870, 376:0.6737, 261:0.6716
2025-12-05 13:15:08 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 375:1.0000, 376:0.8841, 262:0.8804, 454:0.7922, 130:0.7557, 396:0.6675, 192:0.6461, 261:0.6153, 183:0.5808, 191:0.5725
2025-12-05 13:15:08 - app.routers.search - INFO - [ENSEMBLE] Running IC search
2025-12-05 13:15:09 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 232:0.9249, 424:0.9249, 346:0.9249, 287:0.9249, 193:0.9249, 608:0.9249, 441:0.9249, 276:0.9249, 245:0.9249, 345:0.9249, 280:0.9249, 436:0.9249, 635:0.9249, 351:0.9249, 611:0.9249, 636:0.9249, 630:0.9249, 223:0.9249, 264:0.9249, 209:0.9249
2025-12-05 13:15:09 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 13:15:10 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 137:0.0615, 141:0.0489, 202:0.0331, 130:0.0307, 646:0.0271, 264:0.0252, 284:0.0185, 610:0.0165, 338:0.0152, 199:0.0140, 240:0.0133, 609:0.0128, 247:0.0126, 336:0.0126, 287:0.0125, 258:0.0121, 286:0.0121, 616:0.0120, 197:0.0120, 223:0.0116
2025-12-05 13:15:10 - app.routers.search - INFO - [ENSEMBLE] IC top results (scaled): 137:1.0000, 141:0.7949, 202:0.5376, 130:0.4982, 646:0.4393, 264:0.4085, 284:0.2985, 610:0.2658, 338:0.2460, 199:0.2249
2025-12-05 13:15:10 - app.routers.search - INFO - [ENSEMBLE] Check: 2 enabled methods, per_method_results keys: ['multimodal', 'clip', 'beit3', 'bigg', 'ic']
2025-12-05 13:15:10 - app.routers.search - INFO - [ENSEMBLE] Ensembling 2 methods: {'multimodal', 'ic'}
2025-12-05 13:15:10 - app.routers.search - INFO - [ENSEMBLE] Final ensemble top results: 375:0.7500, 262:0.6881, 376:0.6879, 130:0.6214, 454:0.6044, 192:0.5472, 261:0.5304, 183:0.5277, 396:0.5276, 191:0.5058, 273:0.4900, 131:0.4789, 121:0.4602, 645:0.4572, 56:0.4562, 133:0.4464, 150:0.4315, 149:0.4160, 14:0.4118, 377:0.4020
2025-12-05 13:15:10 - app.routers.search - INFO - [ENSEMBLE] Mode=A, always returning per_method_results for mode switching flexibility
2025-12-05 13:15:45 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='ng∆∞·ªùi ƒë√†n √¥ng ƒë·ªôi m≈© ƒë·ªè', ocrText='', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-05 13:15:45 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: caption
2025-12-05 13:15:45 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-05 13:15:45 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal', 'ic'}, Total: 2
2025-12-05 13:15:47 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'ng∆∞·ªùi ƒë√†n √¥ng ƒë·ªôi m≈© ƒë·ªè' ‚Üí 'man wearing red hat'
2025-12-05 13:15:47 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'man wearing red hat'
2025-12-05 13:15:47 - app.routers.search - INFO - [ENSEMBLE] Running multimodal search
2025-12-05 13:15:49 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 125:1.0000, 126:0.9792, 171:0.9677, 127:0.9621, 170:0.8776, 172:0.8535, 131:0.7557, 462:0.6133, 195:0.5964, 173:0.5929
2025-12-05 13:15:49 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 126:1.0000, 125:0.8907, 170:0.8269, 131:0.7816, 127:0.7752, 172:0.6743, 176:0.6115, 456:0.6046, 136:0.6037, 457:0.5943
2025-12-05 13:15:49 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 126:1.0000, 127:0.9227, 125:0.8522, 171:0.6454, 131:0.6136, 455:0.5764, 140:0.5727, 456:0.5586, 114:0.5551, 176:0.5399
2025-12-05 13:15:49 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 126:1.0000, 125:0.8941, 127:0.8355, 170:0.7105, 131:0.6832, 172:0.5917, 171:0.5812, 456:0.5111, 176:0.4980, 457:0.4840
2025-12-05 13:15:49 - app.routers.search - INFO - [ENSEMBLE] Running IC search
2025-12-05 13:15:50 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 339:0.9507, 282:0.9507, 421:0.9507, 337:0.9507, 639:0.9507, 333:0.9507, 334:0.9507, 632:0.9507, 268:0.9507, 340:0.9507, 4:0.9507, 175:0.9507, 574:0.9507, 576:0.9507, 642:0.9507, 577:0.9507, 483:0.9507, 591:0.9507, 8:0.9507, 6:0.9507
2025-12-05 13:15:50 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 13:15:50 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 614:0.7222, 339:0.6582, 612:0.6360, 616:0.4182, 234:0.1273, 338:0.0920, 232:0.0899, 168:0.0891, 204:0.0630, 629:0.0517, 621:0.0448, 6:0.0405, 427:0.0402, 631:0.0338, 500:0.0241, 282:0.0220, 641:0.0214, 424:0.0181, 575:0.0169, 623:0.0147
2025-12-05 13:15:50 - app.routers.search - INFO - [ENSEMBLE] IC top results (scaled): 614:1.0000, 339:0.9113, 612:0.8806, 616:0.5790, 234:0.1763, 338:0.1274, 232:0.1245, 168:0.1234, 204:0.0873, 629:0.0717
2025-12-05 13:15:50 - app.routers.search - INFO - [ENSEMBLE] Check: 2 enabled methods, per_method_results keys: ['multimodal', 'ic']
2025-12-05 13:15:50 - app.routers.search - INFO - [ENSEMBLE] Ensembling 2 methods: {'multimodal', 'ic'}
2025-12-05 13:15:50 - app.routers.search - INFO - [ENSEMBLE] Final ensemble top results: 126:0.5000, 614:0.5000, 339:0.4557, 125:0.4471, 612:0.4403, 127:0.4178, 170:0.3553, 131:0.3416, 172:0.2959, 171:0.2906, 616:0.2895, 456:0.2556, 176:0.2490, 457:0.2420, 173:0.2205, 462:0.2160, 136:0.1893, 155:0.1763, 140:0.1762, 135:0.1718
2025-12-05 13:15:50 - app.routers.search - INFO - [ENSEMBLE] Mode=M, always returning per_method_results for mode switching flexibility
2025-12-05 13:16:38 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='tr·∫ßn anh tu·∫•n', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-05 13:16:38 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-05 13:16:38 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-05 13:16:38 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-05 13:16:38 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'tr·∫ßn anh tu·∫•n'
2025-12-05 13:16:38 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'tr·∫ßn anh tu·∫•n'
2025-12-05 13:16:38 - elastic_transport.transport - INFO - GET http://elasticsearch:9200/ [status:200 duration:0.006s]
2025-12-05 13:16:38 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.257s]
2025-12-05 13:16:38 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 596337:0.9990, 314353:0.9491, 13849:0.9287, 13850:0.9159, 13851:0.9015, 364605:0.8958, 598671:0.8956, 598672:0.8956, 399546:0.8903, 399549:0.8903
2025-12-05 13:16:38 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-05 13:16:38 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-05 13:16:38 - app.routers.search - INFO - [ENSEMBLE] Mode=M, always returning per_method_results for mode switching flexibility
2025-12-05 13:21:55 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='tr·∫ßn anh tu·∫•n', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-05 13:21:55 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-05 13:21:55 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-05 13:21:55 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-05 13:21:55 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'tr·∫ßn anh tu·∫•n'
2025-12-05 13:21:55 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'tr·∫ßn anh tu·∫•n'
2025-12-05 13:21:55 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.033s]
2025-12-05 13:21:55 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 82:0.9893, 81:0.9878, 83:0.9878, 84:0.9843, 85:0.9779, 86:0.9579, 87:0.9579, 88:0.9498, 89:0.9498, 132:0.8969
2025-12-05 13:21:55 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-05 13:21:55 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-05 13:21:55 - app.routers.search - INFO - [ENSEMBLE] Mode=M, always returning per_method_results for mode switching flexibility
2025-12-05 13:25:00 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='tr·∫ßn anh tu·∫•n', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-05 13:25:00 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-05 13:25:00 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-05 13:25:00 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-05 13:25:00 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'tr·∫ßn anh tu·∫•n'
2025-12-05 13:25:00 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'tr·∫ßn anh tu·∫•n'
2025-12-05 13:25:00 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.015s]
2025-12-05 13:25:00 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 82:0.9893, 81:0.9878, 83:0.9878, 84:0.9843, 85:0.9779, 86:0.9579, 87:0.9579, 88:0.9498, 89:0.9498, 132:0.8969
2025-12-05 13:25:00 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-05 13:25:00 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-05 13:25:00 - app.routers.search - INFO - [ENSEMBLE] Mode=M, always returning per_method_results for mode switching flexibility
2025-12-05 13:27:45 - root - INFO - üõë Shutting down FastAPI application...
2025-12-05 13:28:38 - root - INFO - Mounted keyframe directory at /keyframes: /app/app/data/keyframe
2025-12-05 13:28:38 - root - INFO - üöÄ Starting FastAPI application...
2025-12-05 13:28:38 - root - INFO - Log directory: logs/
2025-12-05 13:28:38 - root - INFO - Search queries log: logs/search_queries.log
2025-12-05 13:28:38 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-05 13:28:38 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-05 13:28:38 - app.database.db - INFO -    Current submissions count: 0
2025-12-05 13:28:49 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='s√¥ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-05 13:28:49 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-05 13:28:49 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-05 13:28:49 - app.routers.search - INFO - [ENSEMBLE] WORKAROUND: Queries array empty, using method 'ensemble' as fallback
2025-12-05 13:28:49 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-05 13:28:50 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-05 13:28:50 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'river'
2025-12-05 13:28:50 - app.routers.search - INFO - [ENSEMBLE] Running multimodal search
2025-12-05 13:28:50 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-05 13:28:52 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 377:1.0000, 383:0.8582, 14:0.8402, 376:0.8073, 51:0.7831, 52:0.7808, 60:0.7730, 55:0.7695, 48:0.7663, 49:0.7577
2025-12-05 13:28:52 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 377:1.0000, 52:0.9678, 384:0.9244, 14:0.9072, 51:0.8703, 98:0.8349, 376:0.8244, 50:0.8210, 132:0.8134, 383:0.8072
2025-12-05 13:28:52 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 383:1.0000, 59:0.9722, 377:0.9517, 382:0.9292, 381:0.9101, 384:0.8900, 376:0.8508, 56:0.8465, 60:0.8435, 55:0.8341
2025-12-05 13:28:52 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 377:1.0000, 14:0.8523, 52:0.8509, 383:0.8490, 384:0.8238, 376:0.7956, 51:0.7773, 60:0.7665, 59:0.7093, 47:0.7043
2025-12-05 13:28:52 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-05 13:28:52 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-05 13:28:52 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-05 13:31:10 - root - INFO - üõë Shutting down FastAPI application...
2025-12-05 13:31:14 - root - INFO - Mounted keyframe directory at /keyframes: /app/app/data/keyframe
2025-12-05 13:31:14 - root - INFO - üöÄ Starting FastAPI application...
2025-12-05 13:31:14 - root - INFO - Log directory: logs/
2025-12-05 13:31:14 - root - INFO - Search queries log: logs/search_queries.log
2025-12-05 13:31:14 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-05 13:31:14 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-05 13:31:14 - app.database.db - INFO -    Current submissions count: 0
2025-12-05 13:31:27 - root - INFO - üõë Shutting down FastAPI application...
2025-12-05 13:31:31 - root - INFO - Mounted keyframe directory at /keyframes: /app/app/data/keyframe
2025-12-05 13:31:31 - root - INFO - üöÄ Starting FastAPI application...
2025-12-05 13:31:31 - root - INFO - Log directory: logs/
2025-12-05 13:31:31 - root - INFO - Search queries log: logs/search_queries.log
2025-12-05 13:31:31 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-05 13:31:31 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-05 13:31:31 - app.database.db - INFO -    Current submissions count: 0
2025-12-05 13:32:15 - root - INFO - üõë Shutting down FastAPI application...
2025-12-05 13:32:26 - root - INFO - Mounted keyframe directory at /keyframes: /app/app/data/keyframe
2025-12-05 13:32:26 - root - INFO - üöÄ Starting FastAPI application...
2025-12-05 13:32:26 - root - INFO - Log directory: logs/
2025-12-05 13:32:26 - root - INFO - Search queries log: logs/search_queries.log
2025-12-05 13:32:26 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-05 13:32:26 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-05 13:32:26 - app.database.db - INFO -    Current submissions count: 0
2025-12-05 13:32:31 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='s√¥ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-05 13:32:31 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-05 13:32:31 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-05 13:32:31 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-05 13:32:32 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-05 13:32:32 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'river'
2025-12-05 13:32:32 - app.routers.search - INFO - [ENSEMBLE] Running multimodal search
2025-12-05 13:32:32 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-05 13:32:34 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 377:1.0000, 383:0.8582, 14:0.8402, 376:0.8073, 51:0.7831, 52:0.7808, 60:0.7730, 55:0.7695, 48:0.7663, 49:0.7577
2025-12-05 13:32:34 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 377:1.0000, 52:0.9678, 384:0.9244, 14:0.9072, 51:0.8703, 98:0.8349, 376:0.8244, 50:0.8210, 132:0.8134, 383:0.8072
2025-12-05 13:32:34 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 383:1.0000, 59:0.9722, 377:0.9517, 382:0.9292, 381:0.9101, 384:0.8900, 376:0.8508, 56:0.8465, 60:0.8435, 55:0.8341
2025-12-05 13:32:34 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 377:1.0000, 14:0.8523, 52:0.8509, 383:0.8490, 384:0.8238, 376:0.7956, 51:0.7773, 60:0.7665, 59:0.7093, 47:0.7043
2025-12-05 13:32:34 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-05 13:32:34 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-05 13:32:34 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-05 13:34:03 - root - INFO - üõë Shutting down FastAPI application...
2025-12-05 13:34:07 - root - INFO - Mounted keyframe directory at /keyframes: /app/app/data/keyframe
2025-12-05 13:34:07 - root - INFO - üöÄ Starting FastAPI application...
2025-12-05 13:34:07 - root - INFO - Log directory: logs/
2025-12-05 13:34:07 - root - INFO - Search queries log: logs/search_queries.log
2025-12-05 13:34:07 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-05 13:34:07 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-05 13:34:07 - app.database.db - INFO -    Current submissions count: 0
2025-12-05 13:34:50 - root - INFO - üõë Shutting down FastAPI application...
2025-12-05 13:34:55 - root - INFO - Mounted keyframe directory at /keyframes: /app/app/data/keyframe
2025-12-05 13:34:55 - root - INFO - üöÄ Starting FastAPI application...
2025-12-05 13:34:55 - root - INFO - Log directory: logs/
2025-12-05 13:34:55 - root - INFO - Search queries log: logs/search_queries.log
2025-12-05 13:34:55 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-05 13:34:55 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-05 13:34:55 - app.database.db - INFO -    Current submissions count: 0
2025-12-05 13:39:59 - root - INFO - üõë Shutting down FastAPI application...
2025-12-05 13:40:10 - root - INFO - Mounted keyframe directory at /keyframes: /app/app/data/keyframe
2025-12-05 13:40:10 - root - INFO - üöÄ Starting FastAPI application...
2025-12-05 13:40:10 - root - INFO - Log directory: logs/
2025-12-05 13:40:10 - root - INFO - Search queries log: logs/search_queries.log
2025-12-05 13:40:10 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-05 13:40:10 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-05 13:40:10 - app.database.db - INFO -    Current submissions count: 0
2025-12-05 13:40:11 - app.routers.search_augmented - INFO - [AUGMENTED SEARCH] Enabled methods: {'multimodal', 'ic'}
2025-12-05 13:40:12 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-05 13:40:12 - app.routers.search_augmented - INFO - [TRANSLATE] 's√¥ng' ‚Üí 'river'
2025-12-05 13:40:12 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 13:40:12 - app.routers.search_augmented - INFO - [AUGMENTED SEARCH] Parallel search: Q0='river', Q1='river', Q2='river'
2025-12-05 13:40:12 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-05 13:40:12 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-05 13:40:12 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-05 13:40:14 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-05 13:40:14 - app.services.method.ic_search - INFO - IC.json loaded: 647 entries
2025-12-05 13:40:14 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-05 13:40:14 - app.services.method.ic_search - INFO - IC.json loaded: 647 entries
2025-12-05 13:40:14 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-05 13:40:14 - app.services.method.ic_search - INFO - IC.json loaded: 647 entries
2025-12-05 13:40:15 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 335:0.9410, 338:0.9410, 625:0.9410, 259:0.9410, 209:0.9410, 281:0.9410, 445:0.9410, 249:0.9410, 273:0.9410, 329:0.9410, 212:0.9410, 441:0.9410, 619:0.9410, 257:0.9410, 232:0.9410, 234:0.9410, 271:0.9410, 258:0.9410, 430:0.9410
2025-12-05 13:40:15 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 335:0.9410, 338:0.9410, 625:0.9410, 259:0.9410, 209:0.9410, 281:0.9410, 445:0.9410, 249:0.9410, 273:0.9410, 329:0.9410, 212:0.9410, 441:0.9410, 619:0.9410, 257:0.9410, 232:0.9410, 234:0.9410, 271:0.9410, 258:0.9410, 430:0.9410
2025-12-05 13:40:15 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 335:0.9410, 338:0.9410, 625:0.9410, 259:0.9410, 209:0.9410, 281:0.9410, 445:0.9410, 249:0.9410, 273:0.9410, 329:0.9410, 212:0.9410, 441:0.9410, 619:0.9410, 257:0.9410, 232:0.9410, 234:0.9410, 271:0.9410, 258:0.9410, 430:0.9410
2025-12-05 13:40:16 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 13:40:16 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 52:0.6792, 381:0.6514, 149:0.3268, 144:0.0930, 382:0.0421, 124:0.0393, 87:0.0212, 565:0.0202, 417:0.0184, 446:0.0149, 35:0.0131, 221:0.0127, 618:0.0110, 284:0.0103, 240:0.0086, 437:0.0083, 287:0.0083, 385:0.0081, 419:0.0081, 418:0.0079
2025-12-05 13:40:16 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 13:40:16 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 52:0.6792, 381:0.6514, 149:0.3268, 144:0.0930, 382:0.0421, 124:0.0393, 87:0.0212, 565:0.0202, 417:0.0184, 446:0.0149, 35:0.0131, 221:0.0127, 618:0.0110, 284:0.0103, 240:0.0086, 437:0.0083, 287:0.0083, 385:0.0081, 419:0.0081, 418:0.0079
2025-12-05 13:40:16 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 13:40:16 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 52:0.6792, 381:0.6514, 149:0.3268, 144:0.0930, 382:0.0421, 124:0.0393, 87:0.0212, 565:0.0202, 417:0.0184, 446:0.0149, 35:0.0131, 221:0.0127, 618:0.0110, 284:0.0103, 240:0.0086, 437:0.0083, 287:0.0083, 385:0.0081, 419:0.0081, 418:0.0079
2025-12-05 13:40:16 - app.routers.search_augmented - INFO - [AUGMENTED SEARCH] Parallel search completed
2025-12-05 13:40:16 - app.routers.search_augmented - INFO - [AUGMENTED SEARCH] Completed in 5104.02ms
2025-12-05 13:40:21 - app.routers.search_augmented - INFO - [AUGMENTED SEARCH] Enabled methods: {'multimodal', 'ic'}
2025-12-05 13:40:21 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-05 13:40:21 - app.routers.search_augmented - INFO - [TRANSLATE] 's√¥ng' ‚Üí 'river'
2025-12-05 13:40:21 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 13:40:21 - app.routers.search_augmented - INFO - [AUGMENTED SEARCH] Parallel search: Q0='river', Q1='river', Q2='river'
2025-12-05 13:40:24 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 335:0.9410, 338:0.9410, 625:0.9410, 259:0.9410, 209:0.9410, 281:0.9410, 445:0.9410, 249:0.9410, 273:0.9410, 329:0.9410, 212:0.9410, 441:0.9410, 619:0.9410, 257:0.9410, 232:0.9410, 234:0.9410, 271:0.9410, 258:0.9410, 430:0.9410
2025-12-05 13:40:24 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 335:0.9410, 338:0.9410, 625:0.9410, 259:0.9410, 209:0.9410, 281:0.9410, 445:0.9410, 249:0.9410, 273:0.9410, 329:0.9410, 212:0.9410, 441:0.9410, 619:0.9410, 257:0.9410, 232:0.9410, 234:0.9410, 271:0.9410, 258:0.9410, 430:0.9410
2025-12-05 13:40:24 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 335:0.9410, 338:0.9410, 625:0.9410, 259:0.9410, 209:0.9410, 281:0.9410, 445:0.9410, 249:0.9410, 273:0.9410, 329:0.9410, 212:0.9410, 441:0.9410, 619:0.9410, 257:0.9410, 232:0.9410, 234:0.9410, 271:0.9410, 258:0.9410, 430:0.9410
2025-12-05 13:40:25 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 13:40:25 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 52:0.6792, 381:0.6514, 149:0.3268, 144:0.0930, 382:0.0421, 124:0.0393, 87:0.0212, 565:0.0202, 417:0.0184, 446:0.0149, 35:0.0131, 221:0.0127, 618:0.0110, 284:0.0103, 240:0.0086, 437:0.0083, 287:0.0083, 385:0.0081, 419:0.0081, 418:0.0079
2025-12-05 13:40:25 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 13:40:25 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 52:0.6792, 381:0.6514, 149:0.3268, 144:0.0930, 382:0.0421, 124:0.0393, 87:0.0212, 565:0.0202, 417:0.0184, 446:0.0149, 35:0.0131, 221:0.0127, 618:0.0110, 284:0.0103, 240:0.0086, 437:0.0083, 287:0.0083, 385:0.0081, 419:0.0081, 418:0.0079
2025-12-05 13:40:25 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 13:40:25 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 52:0.6792, 381:0.6514, 149:0.3268, 144:0.0930, 382:0.0421, 124:0.0393, 87:0.0212, 565:0.0202, 417:0.0184, 446:0.0149, 35:0.0131, 221:0.0127, 618:0.0110, 284:0.0103, 240:0.0086, 437:0.0083, 287:0.0083, 385:0.0081, 419:0.0081, 418:0.0079
2025-12-05 13:40:25 - app.routers.search_augmented - INFO - [AUGMENTED SEARCH] Parallel search completed
2025-12-05 13:40:25 - app.routers.search_augmented - INFO - [AUGMENTED SEARCH] Completed in 4235.77ms
2025-12-05 13:40:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-05 13:40:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='s√¥ng', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 13:40:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='r·ª´ng', toggles={'multimodal': False, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 13:40:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 's√¥ng'
2025-12-05 13:40:54 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-05 13:40:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'river'
2025-12-05 13:40:54 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 13:40:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='river', Q1='river', Q2='river'
2025-12-05 13:40:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'r·ª´ng'
2025-12-05 13:40:55 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-05 13:40:55 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'forest'
2025-12-05 13:40:55 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 13:40:55 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='forest', Q1='forest', Q2='forest'
2025-12-05 13:40:56 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9438, 335:0.9438, 338:0.9438, 625:0.9438, 259:0.9438, 202:0.9438, 281:0.9438, 445:0.9438, 249:0.9438, 273:0.9438, 329:0.9438, 212:0.9438, 214:0.9438, 619:0.9438, 257:0.9438, 232:0.9438, 234:0.9438, 271:0.9438, 258:0.9438, 430:0.9438
2025-12-05 13:40:56 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9438, 335:0.9438, 338:0.9438, 625:0.9438, 259:0.9438, 202:0.9438, 281:0.9438, 445:0.9438, 249:0.9438, 273:0.9438, 329:0.9438, 212:0.9438, 214:0.9438, 619:0.9438, 257:0.9438, 232:0.9438, 234:0.9438, 271:0.9438, 258:0.9438, 430:0.9438
2025-12-05 13:40:57 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 13:40:57 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 13:40:57 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 270:0.2050, 193:0.0818, 208:0.0313, 211:0.0284, 329:0.0283, 284:0.0222, 446:0.0208, 437:0.0206, 80:0.0198, 328:0.0196, 381:0.0195, 418:0.0193, 225:0.0191, 631:0.0183, 419:0.0172, 287:0.0170, 234:0.0166, 343:0.0155, 445:0.0147, 327:0.0144
2025-12-05 13:40:57 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 270:0.2050, 193:0.0818, 208:0.0313, 211:0.0284, 329:0.0283, 284:0.0222, 446:0.0208, 437:0.0206, 80:0.0198, 328:0.0196, 381:0.0195, 418:0.0193, 225:0.0191, 631:0.0183, 419:0.0172, 287:0.0170, 234:0.0166, 343:0.0155, 445:0.0147, 327:0.0144
2025-12-05 13:40:58 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9438, 335:0.9438, 338:0.9438, 625:0.9438, 259:0.9438, 202:0.9438, 281:0.9438, 445:0.9438, 249:0.9438, 273:0.9438, 329:0.9438, 212:0.9438, 214:0.9438, 619:0.9438, 257:0.9438, 232:0.9438, 234:0.9438, 271:0.9438, 258:0.9438, 430:0.9438
2025-12-05 13:40:58 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 335:0.9410, 338:0.9410, 625:0.9410, 259:0.9410, 209:0.9410, 281:0.9410, 445:0.9410, 249:0.9410, 273:0.9410, 329:0.9410, 212:0.9410, 441:0.9410, 619:0.9410, 257:0.9410, 232:0.9410, 234:0.9410, 271:0.9410, 258:0.9410, 430:0.9410
2025-12-05 13:40:58 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 335:0.9410, 338:0.9410, 625:0.9410, 259:0.9410, 209:0.9410, 281:0.9410, 445:0.9410, 249:0.9410, 273:0.9410, 329:0.9410, 212:0.9410, 441:0.9410, 619:0.9410, 257:0.9410, 232:0.9410, 234:0.9410, 271:0.9410, 258:0.9410, 430:0.9410
2025-12-05 13:40:58 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 335:0.9410, 338:0.9410, 625:0.9410, 259:0.9410, 209:0.9410, 281:0.9410, 445:0.9410, 249:0.9410, 273:0.9410, 329:0.9410, 212:0.9410, 441:0.9410, 619:0.9410, 257:0.9410, 232:0.9410, 234:0.9410, 271:0.9410, 258:0.9410, 430:0.9410
2025-12-05 13:40:58 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 13:40:58 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 270:0.2050, 193:0.0818, 208:0.0313, 211:0.0284, 329:0.0283, 284:0.0222, 446:0.0208, 437:0.0206, 80:0.0198, 328:0.0196, 381:0.0195, 418:0.0193, 225:0.0191, 631:0.0183, 419:0.0172, 287:0.0170, 234:0.0166, 343:0.0155, 445:0.0147, 327:0.0144
2025-12-05 13:40:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 13:40:59 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 13:40:59 - app.routers.search_multistage - ERROR - [MULTISTAGE] Error: headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '1b28b5259e8ba6c9872a266bd1d27042', 'date': 'Fri, 05 Dec 2025 13:40:58 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '42b7221c-6ab1-4815-817b-6abe8a00db8d', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
Traceback (most recent call last):
  File "/app/app/routers/search_multistage.py", line 381, in search_multistage
    stage_results = await asyncio.gather(*stage_tasks)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/routers/search_multistage.py", line 272, in _process_single_stage
    (q0_per_method, q0_results), (q1_per_method, q1_results), (q2_per_method, q2_results) = await asyncio.gather(
                                                                                            ^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/routers/search_multistage.py", line 207, in _search_single_query_async
    return await loop.run_in_executor(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/routers/search_multistage.py", line 167, in _search_single_query_sync
    ic_results = get_ic_search().search(query_text, top_k)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/services/method/ic_search.py", line 87, in search
    rerank = co.rerank(
             ^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/cohere/base_client.py", line 1206, in rerank
    _response = self._raw_client.rerank(
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/cohere/raw_base_client.py", line 1943, in rerank
    raise TooManyRequestsError(
cohere.errors.too_many_requests_error.TooManyRequestsError: headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '1b28b5259e8ba6c9872a266bd1d27042', 'date': 'Fri, 05 Dec 2025 13:40:58 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '42b7221c-6ab1-4815-817b-6abe8a00db8d', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 13:40:59 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 13:40:59 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 52:0.6792, 381:0.6514, 149:0.3268, 144:0.0930, 382:0.0421, 124:0.0393, 87:0.0212, 565:0.0202, 417:0.0184, 446:0.0149, 35:0.0131, 221:0.0127, 618:0.0110, 284:0.0103, 240:0.0086, 437:0.0083, 287:0.0083, 385:0.0081, 419:0.0081, 418:0.0079
2025-12-05 13:40:59 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 13:49:04 - root - INFO - üõë Shutting down FastAPI application...
2025-12-05 13:49:58 - root - INFO - Mounted keyframe directory at /keyframes: /app/app/data/keyframe
2025-12-05 13:49:58 - root - INFO - üöÄ Starting FastAPI application...
2025-12-05 13:49:58 - root - INFO - Log directory: logs/
2025-12-05 13:49:58 - root - INFO - Search queries log: logs/search_queries.log
2025-12-05 13:49:58 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-05 13:49:58 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-05 13:49:58 - app.database.db - INFO -    Current submissions count: 0
2025-12-05 13:50:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-05 13:50:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='s√¥ng', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 13:50:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='r·ª´ng', toggles={'multimodal': False, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 13:50:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 's√¥ng'
2025-12-05 13:50:18 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-05 13:50:18 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'river'
2025-12-05 13:50:18 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 13:50:18 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='river', Q1='river', Q2='river'
2025-12-05 13:50:18 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'r·ª´ng'
2025-12-05 13:50:18 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-05 13:50:18 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'forest'
2025-12-05 13:50:18 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 13:50:18 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='forest', Q1='forest', Q2='forest'
2025-12-05 13:50:18 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-05 13:50:18 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-05 13:50:18 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-05 13:50:18 - app.services.method.ic_search - INFO - IC.json loaded: 647 entries
2025-12-05 13:50:18 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-05 13:50:18 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-05 13:50:18 - app.services.method.ic_search - INFO - IC.json loaded: 647 entries
2025-12-05 13:50:19 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9438, 438:0.9438, 345:0.9438, 338:0.9438, 281:0.9438, 237:0.9438, 248:0.9438, 445:0.9438, 249:0.9438, 251:0.9438, 257:0.9438, 234:0.9438, 246:0.9438, 335:0.9438, 441:0.9438, 611:0.9438, 214:0.9438, 275:0.9438, 238:0.9438, 274:0.9438
2025-12-05 13:50:20 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9438, 438:0.9438, 345:0.9438, 338:0.9438, 281:0.9438, 237:0.9438, 248:0.9438, 445:0.9438, 249:0.9438, 251:0.9438, 257:0.9438, 234:0.9438, 246:0.9438, 335:0.9438, 441:0.9438, 611:0.9438, 214:0.9438, 275:0.9438, 238:0.9438, 274:0.9438
2025-12-05 13:50:21 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 13:50:21 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 270:0.2050, 193:0.0818, 208:0.0313, 211:0.0284, 329:0.0283, 284:0.0222, 446:0.0208, 437:0.0206, 80:0.0198, 328:0.0196, 381:0.0195, 418:0.0193, 225:0.0191, 631:0.0183, 419:0.0172, 287:0.0170, 234:0.0166, 343:0.0155, 445:0.0147, 327:0.0144
2025-12-05 13:50:21 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 13:50:21 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 270:0.2050, 193:0.0818, 208:0.0313, 211:0.0284, 329:0.0283, 284:0.0222, 446:0.0208, 437:0.0206, 80:0.0198, 328:0.0196, 381:0.0195, 418:0.0193, 225:0.0191, 631:0.0183, 419:0.0172, 287:0.0170, 234:0.0166, 343:0.0155, 445:0.0147, 327:0.0144
2025-12-05 13:50:21 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 13:50:22 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 13:50:22 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9439, 438:0.9439, 345:0.9439, 338:0.9439, 281:0.9439, 237:0.9439, 248:0.9439, 445:0.9439, 249:0.9439, 251:0.9439, 257:0.9439, 234:0.9439, 246:0.9439, 335:0.9439, 441:0.9439, 611:0.9439, 214:0.9439, 275:0.9439, 238:0.9439, 274:0.9439
2025-12-05 13:50:22 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 13:50:22 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 13:50:22 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 52:0.6792, 381:0.6514, 149:0.3268, 144:0.0930, 382:0.0421, 124:0.0393, 87:0.0212, 565:0.0202, 417:0.0184, 446:0.0149, 35:0.0131, 221:0.0127, 618:0.0110, 284:0.0103, 240:0.0086, 437:0.0083, 287:0.0083, 385:0.0081, 419:0.0081, 418:0.0079
2025-12-05 13:50:22 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 13:50:22 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 270:0.2050, 193:0.0818, 208:0.0313, 211:0.0284, 329:0.0283, 284:0.0222, 446:0.0208, 437:0.0206, 80:0.0198, 328:0.0196, 381:0.0195, 418:0.0193, 225:0.0191, 631:0.0183, 419:0.0172, 287:0.0170, 234:0.0166, 343:0.0155, 445:0.0147, 327:0.0144
2025-12-05 13:50:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 13:50:22 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 13:50:22 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 52:0.6792, 381:0.6514, 149:0.3268, 144:0.0930, 382:0.0421, 124:0.0393, 87:0.0212, 565:0.0202, 417:0.0184, 446:0.0149, 35:0.0131, 221:0.0127, 618:0.0110, 284:0.0103, 240:0.0086, 437:0.0083, 287:0.0083, 385:0.0081, 419:0.0081, 418:0.0079
2025-12-05 13:50:22 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 13:50:22 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 52:0.6792, 381:0.6514, 149:0.3268, 144:0.0930, 382:0.0421, 124:0.0393, 87:0.0212, 565:0.0202, 417:0.0184, 446:0.0149, 35:0.0131, 221:0.0127, 618:0.0110, 284:0.0103, 240:0.0086, 437:0.0083, 287:0.0083, 385:0.0081, 419:0.0081, 418:0.0079
2025-12-05 13:50:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 13:50:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 5224.59ms
2025-12-05 13:50:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-05 13:50:22 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 379 unique ids from 2 stages
2025-12-05 13:50:22 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 379 unique ids
2025-12-05 13:50:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-05 13:50:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='s√¥ng', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 13:50:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='r·ª´ng', toggles={'multimodal': False, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 13:50:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 's√¥ng'
2025-12-05 13:50:37 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-05 13:50:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'river'
2025-12-05 13:50:37 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 13:50:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='river', Q1='river', Q2='river'
2025-12-05 13:50:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'r·ª´ng'
2025-12-05 13:50:37 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-05 13:50:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'forest'
2025-12-05 13:50:37 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 13:50:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='forest', Q1='forest', Q2='forest'
2025-12-05 13:50:38 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9438, 438:0.9438, 345:0.9438, 338:0.9438, 281:0.9438, 237:0.9438, 248:0.9438, 445:0.9438, 249:0.9438, 251:0.9438, 257:0.9438, 234:0.9438, 246:0.9438, 335:0.9438, 441:0.9438, 611:0.9438, 214:0.9438, 275:0.9438, 238:0.9438, 274:0.9438
2025-12-05 13:50:38 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9438, 438:0.9438, 345:0.9438, 338:0.9438, 281:0.9438, 237:0.9438, 248:0.9438, 445:0.9438, 249:0.9438, 251:0.9438, 257:0.9438, 234:0.9438, 246:0.9438, 335:0.9438, 441:0.9438, 611:0.9438, 214:0.9438, 275:0.9438, 238:0.9438, 274:0.9438
2025-12-05 13:50:39 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 13:50:39 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 270:0.2050, 193:0.0818, 208:0.0313, 211:0.0284, 329:0.0283, 284:0.0222, 446:0.0208, 437:0.0206, 80:0.0198, 328:0.0196, 381:0.0195, 418:0.0193, 225:0.0191, 631:0.0183, 419:0.0172, 287:0.0170, 234:0.0166, 343:0.0155, 445:0.0147, 327:0.0144
2025-12-05 13:50:39 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 13:50:39 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 270:0.2050, 193:0.0818, 208:0.0313, 211:0.0284, 329:0.0283, 284:0.0222, 446:0.0208, 437:0.0206, 80:0.0198, 328:0.0196, 381:0.0195, 418:0.0193, 225:0.0191, 631:0.0183, 419:0.0172, 287:0.0170, 234:0.0166, 343:0.0155, 445:0.0147, 327:0.0144
2025-12-05 13:50:40 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 13:50:40 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9439, 438:0.9439, 345:0.9439, 338:0.9439, 281:0.9439, 237:0.9439, 248:0.9439, 445:0.9439, 249:0.9439, 251:0.9439, 257:0.9439, 234:0.9439, 246:0.9439, 335:0.9439, 441:0.9439, 611:0.9439, 214:0.9439, 275:0.9439, 238:0.9439, 274:0.9439
2025-12-05 13:50:40 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 13:50:40 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 13:50:41 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 13:50:41 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 52:0.6792, 381:0.6514, 149:0.3268, 144:0.0930, 382:0.0421, 124:0.0393, 87:0.0212, 565:0.0202, 417:0.0184, 446:0.0149, 35:0.0131, 221:0.0127, 618:0.0110, 284:0.0103, 240:0.0086, 437:0.0083, 287:0.0083, 385:0.0081, 419:0.0081, 418:0.0079
2025-12-05 13:50:41 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 13:50:41 - app.routers.search_multistage - ERROR - [MULTISTAGE] Error: headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'f790488745e9ea5358e8f4375e915d3e', 'date': 'Fri, 05 Dec 2025 13:50:41 GMT', 'x-envoy-upstream-service-time': '2', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'd7f9566f-7c0d-4f37-b7d0-e57d8c74c29d', 'message': 'Please wait and try again later'}
Traceback (most recent call last):
  File "/app/app/routers/search_multistage.py", line 381, in search_multistage
    stage_results = await asyncio.gather(*stage_tasks)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/routers/search_multistage.py", line 272, in _process_single_stage
    (q0_per_method, q0_results), (q1_per_method, q1_results), (q2_per_method, q2_results) = await asyncio.gather(
                                                                                            ^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/routers/search_multistage.py", line 207, in _search_single_query_async
    return await loop.run_in_executor(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/routers/search_multistage.py", line 167, in _search_single_query_sync
    ic_results = get_ic_search().search(query_text, top_k)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/services/method/ic_search.py", line 87, in search
    rerank = co.rerank(
             ^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/cohere/base_client.py", line 1206, in rerank
    _response = self._raw_client.rerank(
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/cohere/raw_base_client.py", line 1943, in rerank
    raise TooManyRequestsError(
cohere.errors.too_many_requests_error.TooManyRequestsError: headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'f790488745e9ea5358e8f4375e915d3e', 'date': 'Fri, 05 Dec 2025 13:50:41 GMT', 'x-envoy-upstream-service-time': '2', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'd7f9566f-7c0d-4f37-b7d0-e57d8c74c29d', 'message': 'Please wait and try again later'}
2025-12-05 13:50:41 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 13:50:41 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 52:0.6792, 381:0.6514, 149:0.3268, 144:0.0930, 382:0.0421, 124:0.0393, 87:0.0212, 565:0.0202, 417:0.0184, 446:0.0149, 35:0.0131, 221:0.0127, 618:0.0110, 284:0.0103, 240:0.0086, 437:0.0083, 287:0.0083, 385:0.0081, 419:0.0081, 418:0.0079
2025-12-05 13:50:41 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 13:51:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-05 13:51:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='r·ª´ng', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 13:51:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='s√¥ng', toggles={'multimodal': False, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 13:51:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'r·ª´ng'
2025-12-05 13:51:01 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-05 13:51:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'forest'
2025-12-05 13:51:02 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 13:51:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='forest', Q1='forest', Q2='forest'
2025-12-05 13:51:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 's√¥ng'
2025-12-05 13:51:02 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-05 13:51:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'river'
2025-12-05 13:51:02 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 13:51:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='river', Q1='river', Q2='river'
2025-12-05 13:51:03 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 13:51:03 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 13:51:04 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 13:51:04 - app.routers.search_multistage - ERROR - [MULTISTAGE] Error: headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'fee0822174230ff808873e24e9a1dc57', 'date': 'Fri, 05 Dec 2025 13:51:04 GMT', 'x-envoy-upstream-service-time': '2', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '735be3b3-57a1-4f82-a108-967bf7bc97a6', 'message': 'Please wait and try again later'}
Traceback (most recent call last):
  File "/app/app/routers/search_multistage.py", line 381, in search_multistage
    stage_results = await asyncio.gather(*stage_tasks)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/routers/search_multistage.py", line 272, in _process_single_stage
    (q0_per_method, q0_results), (q1_per_method, q1_results), (q2_per_method, q2_results) = await asyncio.gather(
                                                                                            ^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/routers/search_multistage.py", line 207, in _search_single_query_async
    return await loop.run_in_executor(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/routers/search_multistage.py", line 167, in _search_single_query_sync
    ic_results = get_ic_search().search(query_text, top_k)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/services/method/ic_search.py", line 87, in search
    rerank = co.rerank(
             ^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/cohere/base_client.py", line 1206, in rerank
    _response = self._raw_client.rerank(
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/cohere/raw_base_client.py", line 1943, in rerank
    raise TooManyRequestsError(
cohere.errors.too_many_requests_error.TooManyRequestsError: headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'fee0822174230ff808873e24e9a1dc57', 'date': 'Fri, 05 Dec 2025 13:51:04 GMT', 'x-envoy-upstream-service-time': '2', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '735be3b3-57a1-4f82-a108-967bf7bc97a6', 'message': 'Please wait and try again later'}
2025-12-05 13:51:04 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 13:51:05 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 13:51:05 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9438, 438:0.9438, 345:0.9438, 338:0.9438, 281:0.9438, 237:0.9438, 248:0.9438, 445:0.9438, 249:0.9438, 251:0.9438, 257:0.9438, 234:0.9438, 246:0.9438, 335:0.9438, 441:0.9438, 611:0.9438, 214:0.9438, 275:0.9438, 238:0.9438, 274:0.9438
2025-12-05 13:51:05 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9439, 438:0.9439, 345:0.9439, 338:0.9439, 281:0.9439, 237:0.9439, 248:0.9439, 445:0.9439, 249:0.9439, 251:0.9439, 257:0.9439, 234:0.9439, 246:0.9439, 335:0.9439, 441:0.9439, 611:0.9439, 214:0.9439, 275:0.9439, 238:0.9439, 274:0.9439
2025-12-05 13:51:05 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9439, 438:0.9439, 345:0.9439, 338:0.9439, 281:0.9439, 237:0.9439, 248:0.9439, 445:0.9439, 249:0.9439, 251:0.9439, 257:0.9439, 234:0.9439, 246:0.9439, 335:0.9439, 441:0.9439, 611:0.9439, 214:0.9439, 275:0.9439, 238:0.9439, 274:0.9439
2025-12-05 13:51:05 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 13:51:06 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 13:51:06 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 13:51:06 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 13:51:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-05 13:51:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='r·ª´ng', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 13:51:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='s√¥ng', toggles={'multimodal': False, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 13:51:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'r·ª´ng'
2025-12-05 13:51:53 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-05 13:51:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'forest'
2025-12-05 13:51:53 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 13:51:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='forest', Q1='forest', Q2='forest'
2025-12-05 13:51:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 's√¥ng'
2025-12-05 13:51:54 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-05 13:51:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'river'
2025-12-05 13:51:54 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 13:51:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='river', Q1='river', Q2='river'
2025-12-05 13:51:55 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 13:51:55 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 13:51:55 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 13:51:55 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 52:0.6792, 381:0.6514, 149:0.3268, 144:0.0930, 382:0.0421, 124:0.0393, 87:0.0212, 565:0.0202, 417:0.0184, 446:0.0149, 35:0.0131, 221:0.0127, 618:0.0110, 284:0.0103, 240:0.0086, 437:0.0083, 287:0.0083, 385:0.0081, 419:0.0081, 418:0.0079
2025-12-05 13:51:56 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 13:51:56 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 52:0.6792, 381:0.6514, 149:0.3268, 144:0.0930, 382:0.0421, 124:0.0393, 87:0.0212, 565:0.0202, 417:0.0184, 446:0.0149, 35:0.0131, 221:0.0127, 618:0.0110, 284:0.0103, 240:0.0086, 437:0.0083, 287:0.0083, 385:0.0081, 419:0.0081, 418:0.0079
2025-12-05 13:51:56 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 13:51:57 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9438, 438:0.9438, 345:0.9438, 338:0.9438, 281:0.9438, 237:0.9438, 248:0.9438, 445:0.9438, 249:0.9438, 251:0.9438, 257:0.9438, 234:0.9438, 246:0.9438, 335:0.9438, 441:0.9438, 611:0.9438, 214:0.9438, 275:0.9438, 238:0.9438, 274:0.9438
2025-12-05 13:51:57 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9439, 438:0.9439, 345:0.9439, 338:0.9439, 281:0.9439, 237:0.9439, 248:0.9439, 445:0.9439, 249:0.9439, 251:0.9439, 257:0.9439, 234:0.9439, 246:0.9439, 335:0.9439, 441:0.9439, 611:0.9439, 214:0.9439, 275:0.9439, 238:0.9439, 274:0.9439
2025-12-05 13:51:57 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9439, 438:0.9439, 345:0.9439, 338:0.9439, 281:0.9439, 237:0.9439, 248:0.9439, 445:0.9439, 249:0.9439, 251:0.9439, 257:0.9439, 234:0.9439, 246:0.9439, 335:0.9439, 441:0.9439, 611:0.9439, 214:0.9439, 275:0.9439, 238:0.9439, 274:0.9439
2025-12-05 13:51:57 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 13:51:57 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 52:0.6792, 381:0.6514, 149:0.3268, 144:0.0930, 382:0.0421, 124:0.0393, 87:0.0212, 565:0.0202, 417:0.0184, 446:0.0149, 35:0.0131, 221:0.0127, 618:0.0110, 284:0.0103, 240:0.0086, 437:0.0083, 287:0.0083, 385:0.0081, 419:0.0081, 418:0.0079
2025-12-05 13:51:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 13:51:58 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 13:51:58 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 270:0.2050, 193:0.0818, 208:0.0313, 211:0.0284, 329:0.0283, 284:0.0222, 446:0.0208, 437:0.0206, 80:0.0198, 328:0.0196, 381:0.0195, 418:0.0193, 225:0.0191, 631:0.0183, 419:0.0172, 287:0.0170, 234:0.0166, 343:0.0155, 445:0.0147, 327:0.0144
2025-12-05 13:51:58 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 13:51:58 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 13:51:58 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 270:0.2050, 193:0.0818, 208:0.0313, 211:0.0284, 329:0.0283, 284:0.0222, 446:0.0208, 437:0.0206, 80:0.0198, 328:0.0196, 381:0.0195, 418:0.0193, 225:0.0191, 631:0.0183, 419:0.0172, 287:0.0170, 234:0.0166, 343:0.0155, 445:0.0147, 327:0.0144
2025-12-05 13:51:58 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 270:0.2050, 193:0.0818, 208:0.0313, 211:0.0284, 329:0.0283, 284:0.0222, 446:0.0208, 437:0.0206, 80:0.0198, 328:0.0196, 381:0.0195, 418:0.0193, 225:0.0191, 631:0.0183, 419:0.0172, 287:0.0170, 234:0.0166, 343:0.0155, 445:0.0147, 327:0.0144
2025-12-05 13:51:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 13:51:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 4921.98ms
2025-12-05 13:51:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-05 13:51:58 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 2 stages
2025-12-05 13:51:58 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 1 videos with results
2025-12-05 13:51:58 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 1 videos with results
2025-12-05 13:51:58 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 1 common videos across all stages
2025-12-05 13:51:58 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 200 valid tuples
2025-12-05 13:51:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 200 valid tuples
2025-12-05 13:53:16 - app.routers.search_augmented - INFO - [AUGMENTED SEARCH] Enabled methods: {'multimodal', 'ic'}
2025-12-05 13:53:17 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-05 13:53:17 - app.routers.search_augmented - INFO - [TRANSLATE] 'r·ª´ng' ‚Üí 'forest'
2025-12-05 13:53:17 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 13:53:17 - app.routers.search_augmented - INFO - [AUGMENTED SEARCH] Parallel search: Q0='forest', Q1='forest', Q2='forest'
2025-12-05 13:53:20 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9438, 438:0.9438, 345:0.9438, 338:0.9438, 281:0.9438, 237:0.9438, 248:0.9438, 445:0.9438, 249:0.9438, 251:0.9438, 257:0.9438, 234:0.9438, 246:0.9438, 335:0.9438, 441:0.9438, 611:0.9438, 214:0.9438, 275:0.9438, 238:0.9438, 274:0.9438
2025-12-05 13:53:20 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9439, 438:0.9439, 345:0.9439, 338:0.9439, 281:0.9439, 237:0.9439, 248:0.9439, 445:0.9439, 249:0.9439, 251:0.9439, 257:0.9439, 234:0.9439, 246:0.9439, 335:0.9439, 441:0.9439, 611:0.9439, 214:0.9439, 275:0.9439, 238:0.9439, 274:0.9439
2025-12-05 13:53:20 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9439, 438:0.9439, 345:0.9439, 338:0.9439, 281:0.9439, 237:0.9439, 248:0.9439, 445:0.9439, 249:0.9439, 251:0.9439, 257:0.9439, 234:0.9439, 246:0.9439, 335:0.9439, 441:0.9439, 611:0.9439, 214:0.9439, 275:0.9439, 238:0.9439, 274:0.9439
2025-12-05 13:53:20 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 13:53:20 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 270:0.2050, 193:0.0818, 208:0.0313, 211:0.0284, 329:0.0283, 284:0.0222, 446:0.0208, 437:0.0206, 80:0.0198, 328:0.0196, 381:0.0195, 418:0.0193, 225:0.0191, 631:0.0183, 419:0.0172, 287:0.0170, 234:0.0166, 343:0.0155, 445:0.0147, 327:0.0144
2025-12-05 13:53:21 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 13:53:21 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 270:0.2050, 193:0.0818, 208:0.0313, 211:0.0284, 329:0.0283, 284:0.0222, 446:0.0208, 437:0.0206, 80:0.0198, 328:0.0196, 381:0.0195, 418:0.0193, 225:0.0191, 631:0.0183, 419:0.0172, 287:0.0170, 234:0.0166, 343:0.0155, 445:0.0147, 327:0.0144
2025-12-05 13:53:21 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 13:53:21 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 270:0.2050, 193:0.0818, 208:0.0313, 211:0.0284, 329:0.0283, 284:0.0222, 446:0.0208, 437:0.0206, 80:0.0198, 328:0.0196, 381:0.0195, 418:0.0193, 225:0.0191, 631:0.0183, 419:0.0172, 287:0.0170, 234:0.0166, 343:0.0155, 445:0.0147, 327:0.0144
2025-12-05 13:53:21 - app.routers.search_augmented - INFO - [AUGMENTED SEARCH] Parallel search completed
2025-12-05 13:53:21 - app.routers.search_augmented - INFO - [AUGMENTED SEARCH] Completed in 4341.22ms
2025-12-05 13:54:43 - root - INFO - üõë Shutting down FastAPI application...
2025-12-05 13:54:49 - root - INFO - Mounted keyframe directory at /keyframes: /app/app/data/keyframe
2025-12-05 13:54:49 - root - INFO - üöÄ Starting FastAPI application...
2025-12-05 13:54:49 - root - INFO - Log directory: logs/
2025-12-05 13:54:49 - root - INFO - Search queries log: logs/search_queries.log
2025-12-05 13:54:49 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-05 13:54:49 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-05 13:54:49 - app.database.db - INFO -    Current submissions count: 0
2025-12-05 14:00:04 - root - INFO - üì• Received submit request: query_text='forest...', keyframe_path='/keyframes/L01_V001/19333.webp', result_id='377', username='user1'
2025-12-05 14:00:04 - root - INFO - ‚úÖ Submission created: id=1, query='forest...', user=user1
2025-12-05 14:06:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-05 14:06:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='skyscrapper', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 14:06:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 14:06:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'skyscrapper'
2025-12-05 14:06:39 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 14:06:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='skyscrapper', Q1='skyscrapper', Q2='skyscrapper'
2025-12-05 14:06:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-05 14:06:39 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-05 14:06:39 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-05 14:06:39 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-05 14:06:39 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-05 14:06:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 14:06:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2582.43ms
2025-12-05 14:06:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-05 14:06:41 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-05 14:06:41 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-05 14:09:06 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='skyscrapper', ocrText='', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-05 14:09:06 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: caption
2025-12-05 14:09:06 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-05 14:09:06 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal', 'ic'}, Total: 2
2025-12-05 14:09:06 - app.routers.search - INFO - [ENSEMBLE] Running multimodal search
2025-12-05 14:09:09 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 312:1.0000, 299:0.9735, 17:0.8575, 579:0.6238, 315:0.6139, 298:0.5875, 198:0.5874, 597:0.5684, 0:0.5545, 314:0.5523
2025-12-05 14:09:09 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 312:1.0000, 248:0.9280, 17:0.9210, 299:0.8402, 245:0.7611, 204:0.7137, 202:0.7121, 201:0.7060, 198:0.6840, 598:0.6802
2025-12-05 14:09:09 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 299:1.0000, 312:0.9962, 183:0.9432, 17:0.7975, 598:0.7618, 597:0.7598, 337:0.7306, 579:0.7197, 645:0.7182, 596:0.7103
2025-12-05 14:09:09 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 312:1.0000, 299:0.8921, 17:0.8292, 198:0.5418, 598:0.5256, 597:0.5122, 579:0.5038, 248:0.4830, 599:0.4597, 600:0.4519
2025-12-05 14:09:09 - app.routers.search - INFO - [ENSEMBLE] Running IC search
2025-12-05 14:09:09 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-05 14:09:09 - app.services.method.ic_search - INFO - IC.json loaded: 647 entries
2025-12-05 14:09:10 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 118:0.8524, 486:0.8524, 300:0.8524, 162:0.8524, 46:0.8524, 113:0.8524, 306:0.8524, 502:0.8524, 119:0.8524, 311:0.8524, 498:0.8524, 182:0.8524, 56:0.8524, 362:0.8524, 3:0.8524, 32:0.8524, 494:0.8524, 123:0.8524, 19:0.8524, 479:0.8524
2025-12-05 14:09:10 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 14:09:10 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 312:0.7698, 17:0.1154, 299:0.0933, 314:0.0608, 361:0.0588, 79:0.0380, 301:0.0329, 362:0.0170, 367:0.0170, 370:0.0155, 296:0.0150, 371:0.0108, 179:0.0104, 563:0.0099, 596:0.0086, 178:0.0084, 530:0.0083, 598:0.0071, 597:0.0071, 125:0.0063
2025-12-05 14:09:10 - app.routers.search - INFO - [ENSEMBLE] IC top results (scaled): 312:1.0000, 17:0.1496, 299:0.1210, 314:0.0787, 361:0.0761, 79:0.0491, 301:0.0425, 362:0.0219, 367:0.0218, 370:0.0199
2025-12-05 14:09:10 - app.routers.search - INFO - [ENSEMBLE] Check: 2 enabled methods, per_method_results keys: ['multimodal', 'ic']
2025-12-05 14:09:10 - app.routers.search - INFO - [ENSEMBLE] Ensembling 2 methods: {'multimodal', 'ic'}
2025-12-05 14:09:10 - app.routers.search - INFO - [ENSEMBLE] Final ensemble top results: 312:0.5000, 312:0.5000, 299:0.4461, 17:0.4146, 198:0.2709, 598:0.2628, 597:0.2561, 579:0.2519, 248:0.2415, 599:0.2299, 600:0.2259, 596:0.2252, 298:0.2234, 315:0.2146, 204:0.2087, 203:0.2000, 183:0.1994, 202:0.1963, 201:0.1898, 237:0.1890
2025-12-05 14:09:10 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-05 14:13:49 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-05 14:13:49 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='r·ª´ng', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 14:13:49 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='s√¥ng', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 14:13:49 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'r·ª´ng'
2025-12-05 14:13:50 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-05 14:13:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'forest'
2025-12-05 14:13:50 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 14:13:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='forest', Q1='forest', Q2='forest'
2025-12-05 14:13:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 's√¥ng'
2025-12-05 14:13:50 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-05 14:13:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'river'
2025-12-05 14:13:50 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 14:13:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='river', Q1='river', Q2='river'
2025-12-05 14:13:53 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 14:13:53 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 14:13:53 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9439, 438:0.9439, 345:0.9439, 338:0.9439, 281:0.9439, 237:0.9439, 248:0.9439, 445:0.9439, 249:0.9439, 251:0.9439, 257:0.9439, 234:0.9439, 246:0.9439, 335:0.9439, 441:0.9439, 611:0.9439, 214:0.9439, 275:0.9439, 238:0.9439, 274:0.9439
2025-12-05 14:13:53 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9439, 438:0.9439, 345:0.9439, 338:0.9439, 281:0.9439, 237:0.9439, 248:0.9439, 445:0.9439, 249:0.9439, 251:0.9439, 257:0.9439, 234:0.9439, 246:0.9439, 335:0.9439, 441:0.9439, 611:0.9439, 214:0.9439, 275:0.9439, 238:0.9439, 274:0.9439
2025-12-05 14:13:53 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9439, 438:0.9439, 345:0.9439, 338:0.9439, 281:0.9439, 237:0.9439, 248:0.9439, 445:0.9439, 249:0.9439, 251:0.9439, 257:0.9439, 234:0.9439, 246:0.9439, 335:0.9439, 441:0.9439, 611:0.9439, 214:0.9439, 275:0.9439, 238:0.9439, 274:0.9439
2025-12-05 14:13:54 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 14:13:54 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 52:0.6792, 381:0.6514, 149:0.3268, 144:0.0930, 382:0.0421, 124:0.0393, 87:0.0212, 565:0.0202, 417:0.0184, 446:0.0149, 35:0.0131, 221:0.0127, 618:0.0110, 284:0.0103, 240:0.0086, 437:0.0083, 287:0.0083, 385:0.0081, 419:0.0081, 418:0.0079
2025-12-05 14:13:54 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 14:13:54 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 14:13:54 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 14:13:54 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 14:13:54 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 52:0.6792, 381:0.6514, 149:0.3268, 144:0.0930, 382:0.0421, 124:0.0393, 87:0.0212, 565:0.0202, 417:0.0184, 446:0.0149, 35:0.0131, 221:0.0127, 618:0.0110, 284:0.0103, 240:0.0086, 437:0.0083, 287:0.0083, 385:0.0081, 419:0.0081, 418:0.0079
2025-12-05 14:13:54 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 270:0.2050, 193:0.0818, 208:0.0313, 211:0.0284, 329:0.0283, 284:0.0222, 446:0.0208, 437:0.0206, 80:0.0198, 328:0.0196, 381:0.0195, 418:0.0193, 225:0.0191, 631:0.0183, 419:0.0172, 287:0.0170, 234:0.0166, 343:0.0155, 445:0.0147, 327:0.0144
2025-12-05 14:13:54 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 270:0.2050, 193:0.0818, 208:0.0313, 211:0.0284, 329:0.0283, 284:0.0222, 446:0.0208, 437:0.0206, 80:0.0198, 328:0.0196, 381:0.0195, 418:0.0193, 225:0.0191, 631:0.0183, 419:0.0172, 287:0.0170, 234:0.0166, 343:0.0155, 445:0.0147, 327:0.0144
2025-12-05 14:13:55 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 270:0.2050, 193:0.0818, 208:0.0313, 211:0.0284, 329:0.0283, 284:0.0222, 446:0.0208, 437:0.0206, 80:0.0198, 328:0.0196, 381:0.0195, 418:0.0193, 225:0.0191, 631:0.0183, 419:0.0172, 287:0.0170, 234:0.0166, 343:0.0155, 445:0.0147, 327:0.0144
2025-12-05 14:13:55 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 14:13:57 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 14:13:58 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 14:13:58 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 52:0.6792, 381:0.6514, 149:0.3268, 144:0.0930, 382:0.0421, 124:0.0393, 87:0.0212, 565:0.0202, 417:0.0184, 446:0.0149, 35:0.0131, 221:0.0127, 618:0.0110, 284:0.0103, 240:0.0086, 437:0.0083, 287:0.0083, 385:0.0081, 419:0.0081, 418:0.0079
2025-12-05 14:13:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 14:13:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 8831.24ms
2025-12-05 14:13:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-05 14:13:58 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 302 unique ids from 2 stages
2025-12-05 14:13:58 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 302 unique ids
2025-12-05 14:14:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-05 14:14:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='r·ª´ng', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 14:14:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='s√¥ng', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 14:14:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'r·ª´ng'
2025-12-05 14:14:00 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-05 14:14:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'forest'
2025-12-05 14:14:00 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 14:14:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='forest', Q1='forest', Q2='forest'
2025-12-05 14:14:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 's√¥ng'
2025-12-05 14:14:00 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-05 14:14:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'river'
2025-12-05 14:14:01 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 14:14:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='river', Q1='river', Q2='river'
2025-12-05 14:14:03 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9438, 438:0.9438, 345:0.9438, 338:0.9438, 281:0.9438, 237:0.9438, 248:0.9438, 445:0.9438, 249:0.9438, 251:0.9438, 257:0.9438, 234:0.9438, 246:0.9438, 335:0.9438, 441:0.9438, 611:0.9438, 214:0.9438, 275:0.9438, 238:0.9438, 274:0.9438
2025-12-05 14:14:03 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 14:14:03 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9439, 438:0.9439, 345:0.9439, 338:0.9439, 281:0.9439, 237:0.9439, 248:0.9439, 445:0.9439, 249:0.9439, 251:0.9439, 257:0.9439, 234:0.9439, 246:0.9439, 335:0.9439, 441:0.9439, 611:0.9439, 214:0.9439, 275:0.9439, 238:0.9439, 274:0.9439
2025-12-05 14:14:03 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9439, 438:0.9439, 345:0.9439, 338:0.9439, 281:0.9439, 237:0.9439, 248:0.9439, 445:0.9439, 249:0.9439, 251:0.9439, 257:0.9439, 234:0.9439, 246:0.9439, 335:0.9439, 441:0.9439, 611:0.9439, 214:0.9439, 275:0.9439, 238:0.9439, 274:0.9439
2025-12-05 14:14:04 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 14:14:04 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 14:14:04 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 14:14:04 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 270:0.2050, 193:0.0818, 208:0.0313, 211:0.0284, 329:0.0283, 284:0.0222, 446:0.0208, 437:0.0206, 80:0.0198, 328:0.0196, 381:0.0195, 418:0.0193, 225:0.0191, 631:0.0183, 419:0.0172, 287:0.0170, 234:0.0166, 343:0.0155, 445:0.0147, 327:0.0144
2025-12-05 14:14:04 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 270:0.2050, 193:0.0818, 208:0.0313, 211:0.0284, 329:0.0283, 284:0.0222, 446:0.0208, 437:0.0206, 80:0.0198, 328:0.0196, 381:0.0195, 418:0.0193, 225:0.0191, 631:0.0183, 419:0.0172, 287:0.0170, 234:0.0166, 343:0.0155, 445:0.0147, 327:0.0144
2025-12-05 14:14:04 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 14:14:04 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 270:0.2050, 193:0.0818, 208:0.0313, 211:0.0284, 329:0.0283, 284:0.0222, 446:0.0208, 437:0.0206, 80:0.0198, 328:0.0196, 381:0.0195, 418:0.0193, 225:0.0191, 631:0.0183, 419:0.0172, 287:0.0170, 234:0.0166, 343:0.0155, 445:0.0147, 327:0.0144
2025-12-05 14:14:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 14:14:04 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 14:14:04 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 52:0.6792, 381:0.6514, 149:0.3268, 144:0.0930, 382:0.0421, 124:0.0393, 87:0.0212, 565:0.0202, 417:0.0184, 446:0.0149, 35:0.0131, 221:0.0127, 618:0.0110, 284:0.0103, 240:0.0086, 437:0.0083, 287:0.0083, 385:0.0081, 419:0.0081, 418:0.0079
2025-12-05 14:14:04 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 14:14:04 - app.routers.search_multistage - ERROR - [MULTISTAGE] Error: headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '7247fb7d0c6dd9363a53c5edb01feaa4', 'date': 'Fri, 05 Dec 2025 14:14:04 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '18efb815-1ca7-4b21-9d85-a3c22a05082b', 'message': 'Please wait and try again later'}
Traceback (most recent call last):
  File "/app/app/routers/search_multistage.py", line 381, in search_multistage
    stage_results = await asyncio.gather(*stage_tasks)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/routers/search_multistage.py", line 272, in _process_single_stage
    (q0_per_method, q0_results), (q1_per_method, q1_results), (q2_per_method, q2_results) = await asyncio.gather(
                                                                                            ^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/routers/search_multistage.py", line 207, in _search_single_query_async
    return await loop.run_in_executor(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/routers/search_multistage.py", line 167, in _search_single_query_sync
    ic_results = get_ic_search().search(query_text, top_k)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/services/method/ic_search.py", line 87, in search
    rerank = co.rerank(
             ^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/cohere/base_client.py", line 1206, in rerank
    _response = self._raw_client.rerank(
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/cohere/raw_base_client.py", line 1943, in rerank
    raise TooManyRequestsError(
cohere.errors.too_many_requests_error.TooManyRequestsError: headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '7247fb7d0c6dd9363a53c5edb01feaa4', 'date': 'Fri, 05 Dec 2025 14:14:04 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '18efb815-1ca7-4b21-9d85-a3c22a05082b', 'message': 'Please wait and try again later'}
2025-12-05 14:14:07 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 14:14:08 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 14:14:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-05 14:14:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='r·ª´ng', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 14:14:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='s√¥ng', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 14:14:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'r·ª´ng'
2025-12-05 14:14:08 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-05 14:14:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'forest'
2025-12-05 14:14:09 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 14:14:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='forest', Q1='forest', Q2='forest'
2025-12-05 14:14:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 's√¥ng'
2025-12-05 14:14:09 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-05 14:14:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'river'
2025-12-05 14:14:09 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 14:14:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='river', Q1='river', Q2='river'
2025-12-05 14:14:12 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 14:14:12 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9439, 438:0.9439, 345:0.9439, 338:0.9439, 281:0.9439, 237:0.9439, 248:0.9439, 445:0.9439, 249:0.9439, 251:0.9439, 257:0.9439, 234:0.9439, 246:0.9439, 335:0.9439, 441:0.9439, 611:0.9439, 214:0.9439, 275:0.9439, 238:0.9439, 274:0.9439
2025-12-05 14:14:12 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9439, 438:0.9439, 345:0.9439, 338:0.9439, 281:0.9439, 237:0.9439, 248:0.9439, 445:0.9439, 249:0.9439, 251:0.9439, 257:0.9439, 234:0.9439, 246:0.9439, 335:0.9439, 441:0.9439, 611:0.9439, 214:0.9439, 275:0.9439, 238:0.9439, 274:0.9439
2025-12-05 14:14:12 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 14:14:12 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9439, 438:0.9439, 345:0.9439, 338:0.9439, 281:0.9439, 237:0.9439, 248:0.9439, 445:0.9439, 249:0.9439, 251:0.9439, 257:0.9439, 234:0.9439, 246:0.9439, 335:0.9439, 441:0.9439, 611:0.9439, 214:0.9439, 275:0.9439, 238:0.9439, 274:0.9439
2025-12-05 14:14:13 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 14:14:13 - app.routers.search_multistage - ERROR - [MULTISTAGE] Error: headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'cd9739aef89ca7f518b6e87ab938c7b7', 'date': 'Fri, 05 Dec 2025 14:14:13 GMT', 'x-envoy-upstream-service-time': '6', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '6f136517-08e0-4b89-a75e-a8f6bf3d3524', 'message': 'Please wait and try again later'}
Traceback (most recent call last):
  File "/app/app/routers/search_multistage.py", line 381, in search_multistage
    stage_results = await asyncio.gather(*stage_tasks)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/routers/search_multistage.py", line 272, in _process_single_stage
    (q0_per_method, q0_results), (q1_per_method, q1_results), (q2_per_method, q2_results) = await asyncio.gather(
                                                                                            ^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/routers/search_multistage.py", line 207, in _search_single_query_async
    return await loop.run_in_executor(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/routers/search_multistage.py", line 167, in _search_single_query_sync
    ic_results = get_ic_search().search(query_text, top_k)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/services/method/ic_search.py", line 87, in search
    rerank = co.rerank(
             ^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/cohere/base_client.py", line 1206, in rerank
    _response = self._raw_client.rerank(
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/cohere/raw_base_client.py", line 1943, in rerank
    raise TooManyRequestsError(
cohere.errors.too_many_requests_error.TooManyRequestsError: headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'cd9739aef89ca7f518b6e87ab938c7b7', 'date': 'Fri, 05 Dec 2025 14:14:13 GMT', 'x-envoy-upstream-service-time': '6', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '6f136517-08e0-4b89-a75e-a8f6bf3d3524', 'message': 'Please wait and try again later'}
2025-12-05 14:14:13 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 14:14:13 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 14:14:13 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 14:14:13 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 14:14:16 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 14:14:16 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 14:14:16 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-05 14:14:16 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='r·ª´ng', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 14:14:16 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='s√¥ng', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 14:14:16 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'r·ª´ng'
2025-12-05 14:14:16 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-05 14:14:16 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'forest'
2025-12-05 14:14:16 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 14:14:16 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='forest', Q1='forest', Q2='forest'
2025-12-05 14:14:16 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 's√¥ng'
2025-12-05 14:14:17 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-05 14:14:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'river'
2025-12-05 14:14:17 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 14:14:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='river', Q1='river', Q2='river'
2025-12-05 14:14:20 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 14:14:20 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 14:14:20 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9439, 438:0.9439, 345:0.9439, 338:0.9439, 281:0.9439, 237:0.9439, 248:0.9439, 445:0.9439, 249:0.9439, 251:0.9439, 257:0.9439, 234:0.9439, 246:0.9439, 335:0.9439, 441:0.9439, 611:0.9439, 214:0.9439, 275:0.9439, 238:0.9439, 274:0.9439
2025-12-05 14:14:20 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9438, 438:0.9438, 345:0.9438, 338:0.9438, 281:0.9438, 237:0.9438, 248:0.9438, 445:0.9438, 249:0.9438, 251:0.9438, 257:0.9438, 234:0.9438, 246:0.9438, 335:0.9438, 441:0.9438, 611:0.9438, 214:0.9438, 275:0.9438, 238:0.9438, 274:0.9438
2025-12-05 14:14:20 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9438, 438:0.9438, 345:0.9438, 338:0.9438, 281:0.9438, 237:0.9438, 248:0.9438, 445:0.9438, 249:0.9438, 251:0.9438, 257:0.9438, 234:0.9438, 246:0.9438, 335:0.9438, 441:0.9438, 611:0.9438, 214:0.9438, 275:0.9438, 238:0.9438, 274:0.9438
2025-12-05 14:14:20 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 14:14:20 - app.routers.search_multistage - ERROR - [MULTISTAGE] Error: headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '11de032d0d59808b7cce26b47b76c2b2', 'date': 'Fri, 05 Dec 2025 14:14:20 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'f077e73b-14b9-4660-9eb1-fe96fc1e5a89', 'message': 'Please wait and try again later'}
Traceback (most recent call last):
  File "/app/app/routers/search_multistage.py", line 381, in search_multistage
    stage_results = await asyncio.gather(*stage_tasks)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/routers/search_multistage.py", line 272, in _process_single_stage
    (q0_per_method, q0_results), (q1_per_method, q1_results), (q2_per_method, q2_results) = await asyncio.gather(
                                                                                            ^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/routers/search_multistage.py", line 207, in _search_single_query_async
    return await loop.run_in_executor(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/routers/search_multistage.py", line 167, in _search_single_query_sync
    ic_results = get_ic_search().search(query_text, top_k)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/services/method/ic_search.py", line 87, in search
    rerank = co.rerank(
             ^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/cohere/base_client.py", line 1206, in rerank
    _response = self._raw_client.rerank(
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/cohere/raw_base_client.py", line 1943, in rerank
    raise TooManyRequestsError(
cohere.errors.too_many_requests_error.TooManyRequestsError: headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '11de032d0d59808b7cce26b47b76c2b2', 'date': 'Fri, 05 Dec 2025 14:14:20 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'f077e73b-14b9-4660-9eb1-fe96fc1e5a89', 'message': 'Please wait and try again later'}
2025-12-05 14:14:20 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 14:14:20 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 14:14:20 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 14:14:21 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 14:14:23 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 14:14:23 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 14:14:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-05 14:14:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='r·ª´ng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 14:14:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='s√¥ng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 14:14:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'r·ª´ng'
2025-12-05 14:14:25 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-05 14:14:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'forest'
2025-12-05 14:14:25 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 14:14:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='forest', Q1='forest', Q2='forest'
2025-12-05 14:14:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 's√¥ng'
2025-12-05 14:14:25 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-05 14:14:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'river'
2025-12-05 14:14:25 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 14:14:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='river', Q1='river', Q2='river'
2025-12-05 14:14:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 14:14:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 14:14:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 4657.21ms
2025-12-05 14:14:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-05 14:14:29 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 290 unique ids from 2 stages
2025-12-05 14:14:29 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 290 unique ids
2025-12-05 14:14:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-05 14:14:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='r·ª´ng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 14:14:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='s√¥ng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 14:14:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'r·ª´ng'
2025-12-05 14:14:33 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-05 14:14:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'forest'
2025-12-05 14:14:33 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 14:14:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='forest', Q1='forest', Q2='forest'
2025-12-05 14:14:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 's√¥ng'
2025-12-05 14:14:33 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-05 14:14:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'river'
2025-12-05 14:14:33 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 14:14:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='river', Q1='river', Q2='river'
2025-12-05 14:14:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 14:14:35 - app.services.method.clip_client - ERROR - [CLIP] Batch request failed: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/clip/text/batch (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)'))), falling back
2025-12-05 14:14:35 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/clip/text (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))
2025-12-05 14:14:35 - app.routers.search_multistage - ERROR - [MULTISTAGE] Error: index 0 is out of bounds for axis 0 with size 0
Traceback (most recent call last):
  File "/app/app/routers/search_multistage.py", line 381, in search_multistage
    stage_results = await asyncio.gather(*stage_tasks)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/routers/search_multistage.py", line 272, in _process_single_stage
    (q0_per_method, q0_results), (q1_per_method, q1_results), (q2_per_method, q2_results) = await asyncio.gather(
                                                                                            ^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/routers/search_multistage.py", line 207, in _search_single_query_async
    return await loop.run_in_executor(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/routers/search_multistage.py", line 153, in _search_single_query_sync
    clip_res = multimodel_search.search_single_model(query_text, "clip", top_k * 2)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/services/method/multimodel_search.py", line 110, in search_single_model
    emb = self.clip_client.extract_text_embedding(query)[0]
          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^
IndexError: index 0 is out of bounds for axis 0 with size 0
2025-12-05 14:14:52 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-05 14:14:52 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='r·ª´ng', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 14:14:52 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='s√¥ng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 14:14:52 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'r·ª´ng'
2025-12-05 14:14:52 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-05 14:14:52 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'forest'
2025-12-05 14:14:52 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 14:14:52 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='forest', Q1='forest', Q2='forest'
2025-12-05 14:14:52 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 's√¥ng'
2025-12-05 14:14:53 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-05 14:14:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'river'
2025-12-05 14:14:53 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 14:14:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='river', Q1='river', Q2='river'
2025-12-05 14:14:53 - app.services.method.clip_client - ERROR - [CLIP] Batch request failed: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/clip/text/batch (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)'))), falling back
2025-12-05 14:14:53 - app.services.method.clip_client - ERROR - [CLIP] Batch request failed: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/clip/text/batch (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)'))), falling back
2025-12-05 14:14:53 - app.services.method.clip_client - ERROR - [CLIP] Batch request failed: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/clip/text/batch (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)'))), falling back
2025-12-05 14:14:53 - app.services.method.clip_client - ERROR - [CLIP] Batch request failed: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/clip/text/batch (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)'))), falling back
2025-12-05 14:14:53 - app.services.method.clip_client - ERROR - [CLIP] Batch request failed: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/clip/text/batch (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)'))), falling back
2025-12-05 14:14:53 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/clip/text (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))
2025-12-05 14:14:53 - app.routers.search_multistage - ERROR - [MULTISTAGE] Error: index 0 is out of bounds for axis 0 with size 0
Traceback (most recent call last):
  File "/app/app/routers/search_multistage.py", line 381, in search_multistage
    stage_results = await asyncio.gather(*stage_tasks)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/routers/search_multistage.py", line 272, in _process_single_stage
    (q0_per_method, q0_results), (q1_per_method, q1_results), (q2_per_method, q2_results) = await asyncio.gather(
                                                                                            ^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/routers/search_multistage.py", line 207, in _search_single_query_async
    return await loop.run_in_executor(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/routers/search_multistage.py", line 153, in _search_single_query_sync
    clip_res = multimodel_search.search_single_model(query_text, "clip", top_k * 2)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/services/method/multimodel_search.py", line 110, in search_single_model
    emb = self.clip_client.extract_text_embedding(query)[0]
          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^
IndexError: index 0 is out of bounds for axis 0 with size 0
2025-12-05 14:14:53 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/clip/text (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))
2025-12-05 14:14:53 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/clip/text (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))
2025-12-05 14:14:53 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/clip/text (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))
2025-12-05 14:14:53 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/clip/text (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))
2025-12-05 14:14:53 - app.services.method.clip_client - ERROR - [CLIP] Batch request failed: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/clip/text/batch (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)'))), falling back
2025-12-05 14:14:53 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/clip/text (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))
2025-12-05 14:15:27 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='s√¥ng', ocrText='', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-05 14:15:27 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: caption
2025-12-05 14:15:27 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-05 14:15:27 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal', 'ic'}, Total: 2
2025-12-05 14:15:27 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-05 14:15:27 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'river'
2025-12-05 14:15:27 - app.routers.search - INFO - [ENSEMBLE] Running multimodal search
2025-12-05 14:15:27 - app.services.method.clip_client - ERROR - [CLIP] Batch request failed: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/clip/text/batch (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)'))), falling back
2025-12-05 14:15:28 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/clip/text (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))
2025-12-05 14:15:31 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='s√¥ng', ocrText='', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-05 14:15:31 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: caption
2025-12-05 14:15:31 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-05 14:15:31 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal', 'ic'}, Total: 2
2025-12-05 14:15:31 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-05 14:15:31 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'river'
2025-12-05 14:15:31 - app.routers.search - INFO - [ENSEMBLE] Running multimodal search
2025-12-05 14:15:31 - app.services.method.clip_client - ERROR - [CLIP] Batch request failed: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/clip/text/batch (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)'))), falling back
2025-12-05 14:15:31 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/clip/text (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))
2025-12-05 14:16:38 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='r·ª´ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-05 14:16:38 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-05 14:16:38 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-05 14:16:38 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-05 14:16:38 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-05 14:16:38 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'forest'
2025-12-05 14:16:38 - app.routers.search - INFO - [ENSEMBLE] Running multimodal search
2025-12-05 14:16:40 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 377:1.0000, 327:0.8852, 328:0.8522, 329:0.8479, 80:0.8410, 74:0.8375, 75:0.7882, 52:0.7132, 60:0.6900, 330:0.6866
2025-12-05 14:16:40 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 55:1.0000, 195:0.9311, 327:0.8759, 120:0.8582, 14:0.8368, 517:0.7754, 97:0.7709, 48:0.7700, 328:0.7619, 80:0.7483
2025-12-05 14:16:40 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 183:1.0000, 645:0.9129, 164:0.7097, 159:0.6736, 158:0.6580, 353:0.6559, 628:0.6274, 377:0.6081, 14:0.5736, 629:0.5654
2025-12-05 14:16:40 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 377:1.0000, 327:0.9276, 14:0.8588, 645:0.8560, 328:0.8439, 183:0.8054, 329:0.7747, 55:0.7743, 628:0.6647, 164:0.6343
2025-12-05 14:16:40 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-05 14:16:40 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-05 14:16:40 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-05 14:17:20 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='r·ª´ng', ocrText='', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-05 14:17:20 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: caption
2025-12-05 14:17:20 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-05 14:17:20 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal', 'ic'}, Total: 2
2025-12-05 14:17:20 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-05 14:17:20 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'forest'
2025-12-05 14:17:20 - app.routers.search - INFO - [ENSEMBLE] Running multimodal search
2025-12-05 14:17:22 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 377:1.0000, 327:0.8852, 328:0.8522, 329:0.8479, 80:0.8410, 74:0.8375, 75:0.7882, 52:0.7132, 60:0.6900, 330:0.6866
2025-12-05 14:17:22 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 55:1.0000, 195:0.9311, 327:0.8759, 120:0.8582, 14:0.8368, 517:0.7754, 97:0.7709, 48:0.7700, 328:0.7619, 80:0.7483
2025-12-05 14:17:22 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 183:1.0000, 645:0.9129, 164:0.7097, 159:0.6736, 158:0.6580, 353:0.6559, 628:0.6274, 377:0.6081, 14:0.5736, 629:0.5654
2025-12-05 14:17:22 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 377:1.0000, 327:0.9276, 14:0.8588, 645:0.8560, 328:0.8439, 183:0.8054, 329:0.7747, 55:0.7743, 628:0.6647, 164:0.6343
2025-12-05 14:17:22 - app.routers.search - INFO - [ENSEMBLE] Running IC search
2025-12-05 14:17:23 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9438, 438:0.9438, 345:0.9438, 338:0.9438, 281:0.9438, 237:0.9438, 248:0.9438, 445:0.9438, 249:0.9438, 251:0.9438, 257:0.9438, 234:0.9438, 246:0.9438, 335:0.9438, 441:0.9438, 611:0.9438, 214:0.9438, 275:0.9438, 238:0.9438, 274:0.9438
2025-12-05 14:17:24 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 14:17:24 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 270:0.2050, 193:0.0818, 208:0.0313, 211:0.0284, 329:0.0283, 284:0.0222, 446:0.0208, 437:0.0206, 80:0.0198, 328:0.0196, 381:0.0195, 418:0.0193, 225:0.0191, 631:0.0183, 419:0.0172, 287:0.0170, 234:0.0166, 343:0.0155, 445:0.0147, 327:0.0144
2025-12-05 14:17:24 - app.routers.search - INFO - [ENSEMBLE] IC top results (scaled): 270:1.0000, 193:0.3986, 208:0.1521, 211:0.1380, 329:0.1375, 284:0.1078, 446:0.1009, 437:0.1000, 80:0.0956, 328:0.0949
2025-12-05 14:17:24 - app.routers.search - INFO - [ENSEMBLE] Check: 2 enabled methods, per_method_results keys: ['multimodal', 'ic']
2025-12-05 14:17:24 - app.routers.search - INFO - [ENSEMBLE] Ensembling 2 methods: {'multimodal', 'ic'}
2025-12-05 14:17:24 - app.routers.search - INFO - [ENSEMBLE] Final ensemble top results: 377:0.5000, 270:0.5000, 327:0.4638, 14:0.4294, 645:0.4280, 328:0.4220, 183:0.4027, 329:0.3874, 55:0.3872, 628:0.3324, 164:0.3172, 75:0.3110, 80:0.3041, 52:0.3022, 51:0.2982, 35:0.2948, 263:0.2903, 60:0.2893, 330:0.2793, 103:0.2723
2025-12-05 14:17:24 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-05 14:17:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-05 14:17:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='r·ª´ng', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 14:17:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='s√¥ng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 14:17:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'r·ª´ng'
2025-12-05 14:17:41 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-05 14:17:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'forest'
2025-12-05 14:17:41 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 14:17:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='forest', Q1='forest', Q2='forest'
2025-12-05 14:17:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 's√¥ng'
2025-12-05 14:17:42 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-05 14:17:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'river'
2025-12-05 14:17:42 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 14:17:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='river', Q1='river', Q2='river'
2025-12-05 14:17:45 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9438, 438:0.9438, 345:0.9438, 338:0.9438, 281:0.9438, 237:0.9438, 248:0.9438, 445:0.9438, 249:0.9438, 251:0.9438, 257:0.9438, 234:0.9438, 246:0.9438, 335:0.9438, 441:0.9438, 611:0.9438, 214:0.9438, 275:0.9438, 238:0.9438, 274:0.9438
2025-12-05 14:17:45 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9438, 438:0.9438, 345:0.9438, 338:0.9438, 281:0.9438, 237:0.9438, 248:0.9438, 445:0.9438, 249:0.9438, 251:0.9438, 257:0.9438, 234:0.9438, 246:0.9438, 335:0.9438, 441:0.9438, 611:0.9438, 214:0.9438, 275:0.9438, 238:0.9438, 274:0.9438
2025-12-05 14:17:45 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9438, 438:0.9438, 345:0.9438, 338:0.9438, 281:0.9438, 237:0.9438, 248:0.9438, 445:0.9438, 249:0.9438, 251:0.9438, 257:0.9438, 234:0.9438, 246:0.9438, 335:0.9438, 441:0.9438, 611:0.9438, 214:0.9438, 275:0.9438, 238:0.9438, 274:0.9438
2025-12-05 14:17:45 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 14:17:45 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 270:0.2050, 193:0.0818, 208:0.0313, 211:0.0284, 329:0.0283, 284:0.0222, 446:0.0208, 437:0.0206, 80:0.0198, 328:0.0196, 381:0.0195, 418:0.0193, 225:0.0191, 631:0.0183, 419:0.0172, 287:0.0170, 234:0.0166, 343:0.0155, 445:0.0147, 327:0.0144
2025-12-05 14:17:46 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 14:17:46 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 270:0.2050, 193:0.0818, 208:0.0313, 211:0.0284, 329:0.0283, 284:0.0222, 446:0.0208, 437:0.0206, 80:0.0198, 328:0.0196, 381:0.0195, 418:0.0193, 225:0.0191, 631:0.0183, 419:0.0172, 287:0.0170, 234:0.0166, 343:0.0155, 445:0.0147, 327:0.0144
2025-12-05 14:17:46 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 14:17:46 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 270:0.2050, 193:0.0818, 208:0.0313, 211:0.0284, 329:0.0283, 284:0.0222, 446:0.0208, 437:0.0206, 80:0.0198, 328:0.0196, 381:0.0195, 418:0.0193, 225:0.0191, 631:0.0183, 419:0.0172, 287:0.0170, 234:0.0166, 343:0.0155, 445:0.0147, 327:0.0144
2025-12-05 14:17:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 14:17:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 14:17:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 5275.42ms
2025-12-05 14:17:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-05 14:17:46 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 306 unique ids from 2 stages
2025-12-05 14:17:46 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 306 unique ids
2025-12-05 14:18:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-05 14:18:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='r·ª´ng', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 14:18:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='s√¥ng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 14:18:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'r·ª´ng'
2025-12-05 14:18:30 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-05 14:18:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'forest'
2025-12-05 14:18:30 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 14:18:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='forest', Q1='forest', Q2='forest'
2025-12-05 14:18:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 's√¥ng'
2025-12-05 14:18:30 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-05 14:18:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'river'
2025-12-05 14:18:31 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 14:18:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='river', Q1='river', Q2='river'
2025-12-05 14:18:34 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9438, 438:0.9438, 345:0.9438, 338:0.9438, 281:0.9438, 237:0.9438, 248:0.9438, 445:0.9438, 249:0.9438, 251:0.9438, 257:0.9438, 234:0.9438, 246:0.9438, 335:0.9438, 441:0.9438, 611:0.9438, 214:0.9438, 275:0.9438, 238:0.9438, 274:0.9438
2025-12-05 14:18:34 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9438, 438:0.9438, 345:0.9438, 338:0.9438, 281:0.9438, 237:0.9438, 248:0.9438, 445:0.9438, 249:0.9438, 251:0.9438, 257:0.9438, 234:0.9438, 246:0.9438, 335:0.9438, 441:0.9438, 611:0.9438, 214:0.9438, 275:0.9438, 238:0.9438, 274:0.9438
2025-12-05 14:18:34 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9438, 438:0.9438, 345:0.9438, 338:0.9438, 281:0.9438, 237:0.9438, 248:0.9438, 445:0.9438, 249:0.9438, 251:0.9438, 257:0.9438, 234:0.9438, 246:0.9438, 335:0.9438, 441:0.9438, 611:0.9438, 214:0.9438, 275:0.9438, 238:0.9438, 274:0.9438
2025-12-05 14:18:34 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 14:18:34 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 270:0.2050, 193:0.0818, 208:0.0313, 211:0.0284, 329:0.0283, 284:0.0222, 446:0.0208, 437:0.0206, 80:0.0198, 328:0.0196, 381:0.0195, 418:0.0193, 225:0.0191, 631:0.0183, 419:0.0172, 287:0.0170, 234:0.0166, 343:0.0155, 445:0.0147, 327:0.0144
2025-12-05 14:18:34 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 14:18:34 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 270:0.2050, 193:0.0818, 208:0.0313, 211:0.0284, 329:0.0283, 284:0.0222, 446:0.0208, 437:0.0206, 80:0.0198, 328:0.0196, 381:0.0195, 418:0.0193, 225:0.0191, 631:0.0183, 419:0.0172, 287:0.0170, 234:0.0166, 343:0.0155, 445:0.0147, 327:0.0144
2025-12-05 14:18:34 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 14:18:34 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 270:0.2050, 193:0.0818, 208:0.0313, 211:0.0284, 329:0.0283, 284:0.0222, 446:0.0208, 437:0.0206, 80:0.0198, 328:0.0196, 381:0.0195, 418:0.0193, 225:0.0191, 631:0.0183, 419:0.0172, 287:0.0170, 234:0.0166, 343:0.0155, 445:0.0147, 327:0.0144
2025-12-05 14:18:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 14:18:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 14:18:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 4968.13ms
2025-12-05 14:18:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-05 14:18:35 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 2 stages
2025-12-05 14:18:35 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 1 videos with results
2025-12-05 14:18:35 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 1 videos with results
2025-12-05 14:18:35 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 1 common videos across all stages
2025-12-05 14:18:35 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 200 valid tuples
2025-12-05 14:18:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 200 valid tuples
2025-12-05 14:18:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-05 14:18:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='r·ª´ng', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 14:18:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='s√¥ng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 14:18:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'r·ª´ng'
2025-12-05 14:18:41 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-05 14:18:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'forest'
2025-12-05 14:18:41 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 14:18:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='forest', Q1='forest', Q2='forest'
2025-12-05 14:18:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 's√¥ng'
2025-12-05 14:18:41 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-05 14:18:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'river'
2025-12-05 14:18:41 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 14:18:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='river', Q1='river', Q2='river'
2025-12-05 14:18:45 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9438, 438:0.9438, 345:0.9438, 338:0.9438, 281:0.9438, 237:0.9438, 248:0.9438, 445:0.9438, 249:0.9438, 251:0.9438, 257:0.9438, 234:0.9438, 246:0.9438, 335:0.9438, 441:0.9438, 611:0.9438, 214:0.9438, 275:0.9438, 238:0.9438, 274:0.9438
2025-12-05 14:18:45 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9439, 438:0.9439, 345:0.9439, 338:0.9439, 281:0.9439, 237:0.9439, 248:0.9439, 445:0.9439, 249:0.9439, 251:0.9439, 257:0.9439, 234:0.9439, 246:0.9439, 335:0.9439, 441:0.9439, 611:0.9439, 214:0.9439, 275:0.9439, 238:0.9439, 274:0.9439
2025-12-05 14:18:45 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9439, 438:0.9439, 345:0.9439, 338:0.9439, 281:0.9439, 237:0.9439, 248:0.9439, 445:0.9439, 249:0.9439, 251:0.9439, 257:0.9439, 234:0.9439, 246:0.9439, 335:0.9439, 441:0.9439, 611:0.9439, 214:0.9439, 275:0.9439, 238:0.9439, 274:0.9439
2025-12-05 14:18:45 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 14:18:45 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 270:0.2050, 193:0.0818, 208:0.0313, 211:0.0284, 329:0.0283, 284:0.0222, 446:0.0208, 437:0.0206, 80:0.0198, 328:0.0196, 381:0.0195, 418:0.0193, 225:0.0191, 631:0.0183, 419:0.0172, 287:0.0170, 234:0.0166, 343:0.0155, 445:0.0147, 327:0.0144
2025-12-05 14:18:45 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 14:18:45 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 270:0.2050, 193:0.0818, 208:0.0313, 211:0.0284, 329:0.0283, 284:0.0222, 446:0.0208, 437:0.0206, 80:0.0198, 328:0.0196, 381:0.0195, 418:0.0193, 225:0.0191, 631:0.0183, 419:0.0172, 287:0.0170, 234:0.0166, 343:0.0155, 445:0.0147, 327:0.0144
2025-12-05 14:18:46 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 14:18:46 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 270:0.2050, 193:0.0818, 208:0.0313, 211:0.0284, 329:0.0283, 284:0.0222, 446:0.0208, 437:0.0206, 80:0.0198, 328:0.0196, 381:0.0195, 418:0.0193, 225:0.0191, 631:0.0183, 419:0.0172, 287:0.0170, 234:0.0166, 343:0.0155, 445:0.0147, 327:0.0144
2025-12-05 14:18:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 14:18:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 14:18:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 4998.60ms
2025-12-05 14:18:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-05 14:18:46 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 306 unique ids from 2 stages
2025-12-05 14:18:46 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 306 unique ids
2025-12-05 14:19:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-05 14:19:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='r·ª´ng', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 14:19:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='s√¥ng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 14:19:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'r·ª´ng'
2025-12-05 14:19:47 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-05 14:19:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'forest'
2025-12-05 14:19:47 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 14:19:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='forest', Q1='forest', Q2='forest'
2025-12-05 14:19:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 's√¥ng'
2025-12-05 14:19:47 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-05 14:19:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'river'
2025-12-05 14:19:48 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 14:19:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='river', Q1='river', Q2='river'
2025-12-05 14:19:51 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9438, 438:0.9438, 345:0.9438, 338:0.9438, 281:0.9438, 237:0.9438, 248:0.9438, 445:0.9438, 249:0.9438, 251:0.9438, 257:0.9438, 234:0.9438, 246:0.9438, 335:0.9438, 441:0.9438, 611:0.9438, 214:0.9438, 275:0.9438, 238:0.9438, 274:0.9438
2025-12-05 14:19:51 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9439, 438:0.9439, 345:0.9439, 338:0.9439, 281:0.9439, 237:0.9439, 248:0.9439, 445:0.9439, 249:0.9439, 251:0.9439, 257:0.9439, 234:0.9439, 246:0.9439, 335:0.9439, 441:0.9439, 611:0.9439, 214:0.9439, 275:0.9439, 238:0.9439, 274:0.9439
2025-12-05 14:19:51 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9439, 438:0.9439, 345:0.9439, 338:0.9439, 281:0.9439, 237:0.9439, 248:0.9439, 445:0.9439, 249:0.9439, 251:0.9439, 257:0.9439, 234:0.9439, 246:0.9439, 335:0.9439, 441:0.9439, 611:0.9439, 214:0.9439, 275:0.9439, 238:0.9439, 274:0.9439
2025-12-05 14:19:51 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 14:19:51 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 270:0.2050, 193:0.0818, 208:0.0313, 211:0.0284, 329:0.0283, 284:0.0222, 446:0.0208, 437:0.0206, 80:0.0198, 328:0.0196, 381:0.0195, 418:0.0193, 225:0.0191, 631:0.0183, 419:0.0172, 287:0.0170, 234:0.0166, 343:0.0155, 445:0.0147, 327:0.0144
2025-12-05 14:19:51 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 14:19:52 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 270:0.2050, 193:0.0818, 208:0.0313, 211:0.0284, 329:0.0283, 284:0.0222, 446:0.0208, 437:0.0206, 80:0.0198, 328:0.0196, 381:0.0195, 418:0.0193, 225:0.0191, 631:0.0183, 419:0.0172, 287:0.0170, 234:0.0166, 343:0.0155, 445:0.0147, 327:0.0144
2025-12-05 14:19:52 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 14:19:52 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 270:0.2050, 193:0.0818, 208:0.0313, 211:0.0284, 329:0.0283, 284:0.0222, 446:0.0208, 437:0.0206, 80:0.0198, 328:0.0196, 381:0.0195, 418:0.0193, 225:0.0191, 631:0.0183, 419:0.0172, 287:0.0170, 234:0.0166, 343:0.0155, 445:0.0147, 327:0.0144
2025-12-05 14:19:52 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 14:19:52 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 14:19:52 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 5061.98ms
2025-12-05 14:19:52 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-05 14:19:52 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 2 stages
2025-12-05 14:19:52 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 1 videos with results
2025-12-05 14:19:52 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 1 videos with results
2025-12-05 14:19:52 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 1 common videos across all stages
2025-12-05 14:19:52 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 200 valid tuples
2025-12-05 14:19:52 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 200 valid tuples
2025-12-05 14:21:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-05 14:21:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='r·ª´ng', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 14:21:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='s√¥ng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 14:21:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'r·ª´ng'
2025-12-05 14:21:47 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-05 14:21:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'forest'
2025-12-05 14:21:47 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 14:21:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='forest', Q1='forest', Q2='forest'
2025-12-05 14:21:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 's√¥ng'
2025-12-05 14:21:47 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-05 14:21:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'river'
2025-12-05 14:21:47 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 14:21:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='river', Q1='river', Q2='river'
2025-12-05 14:21:50 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9438, 438:0.9438, 345:0.9438, 338:0.9438, 281:0.9438, 237:0.9438, 248:0.9438, 445:0.9438, 249:0.9438, 251:0.9438, 257:0.9438, 234:0.9438, 246:0.9438, 335:0.9438, 441:0.9438, 611:0.9438, 214:0.9438, 275:0.9438, 238:0.9438, 274:0.9438
2025-12-05 14:21:51 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9439, 438:0.9439, 345:0.9439, 338:0.9439, 281:0.9439, 237:0.9439, 248:0.9439, 445:0.9439, 249:0.9439, 251:0.9439, 257:0.9439, 234:0.9439, 246:0.9439, 335:0.9439, 441:0.9439, 611:0.9439, 214:0.9439, 275:0.9439, 238:0.9439, 274:0.9439
2025-12-05 14:21:51 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9439, 438:0.9439, 345:0.9439, 338:0.9439, 281:0.9439, 237:0.9439, 248:0.9439, 445:0.9439, 249:0.9439, 251:0.9439, 257:0.9439, 234:0.9439, 246:0.9439, 335:0.9439, 441:0.9439, 611:0.9439, 214:0.9439, 275:0.9439, 238:0.9439, 274:0.9439
2025-12-05 14:21:51 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='r·ª´ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-05 14:21:51 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-05 14:21:51 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-05 14:21:51 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-05 14:21:51 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 14:21:51 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 270:0.2050, 193:0.0818, 208:0.0313, 211:0.0284, 329:0.0283, 284:0.0222, 446:0.0208, 437:0.0206, 80:0.0198, 328:0.0196, 381:0.0195, 418:0.0193, 225:0.0191, 631:0.0183, 419:0.0172, 287:0.0170, 234:0.0166, 343:0.0155, 445:0.0147, 327:0.0144
2025-12-05 14:21:51 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-05 14:21:51 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'forest'
2025-12-05 14:21:51 - app.routers.search - INFO - [ENSEMBLE] Running multimodal search
2025-12-05 14:21:51 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 14:21:51 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 270:0.2050, 193:0.0818, 208:0.0313, 211:0.0284, 329:0.0283, 284:0.0222, 446:0.0208, 437:0.0206, 80:0.0198, 328:0.0196, 381:0.0195, 418:0.0193, 225:0.0191, 631:0.0183, 419:0.0172, 287:0.0170, 234:0.0166, 343:0.0155, 445:0.0147, 327:0.0144
2025-12-05 14:21:51 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 14:21:51 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 270:0.2050, 193:0.0818, 208:0.0313, 211:0.0284, 329:0.0283, 284:0.0222, 446:0.0208, 437:0.0206, 80:0.0198, 328:0.0196, 381:0.0195, 418:0.0193, 225:0.0191, 631:0.0183, 419:0.0172, 287:0.0170, 234:0.0166, 343:0.0155, 445:0.0147, 327:0.0144
2025-12-05 14:21:53 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 377:1.0000, 327:0.8852, 328:0.8522, 329:0.8479, 80:0.8410, 74:0.8375, 75:0.7882, 52:0.7132, 60:0.6900, 330:0.6866
2025-12-05 14:21:53 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 55:1.0000, 195:0.9311, 327:0.8759, 120:0.8582, 14:0.8368, 517:0.7754, 97:0.7709, 48:0.7700, 328:0.7619, 80:0.7483
2025-12-05 14:21:53 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 183:1.0000, 645:0.9129, 164:0.7097, 159:0.6736, 158:0.6580, 353:0.6559, 628:0.6274, 377:0.6081, 14:0.5736, 629:0.5654
2025-12-05 14:21:53 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 377:1.0000, 327:0.9276, 14:0.8588, 645:0.8560, 328:0.8439, 183:0.8054, 329:0.7747, 55:0.7743, 628:0.6647, 164:0.6343
2025-12-05 14:21:53 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-05 14:21:53 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-05 14:21:53 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-05 14:21:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 14:21:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 14:21:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 6800.32ms
2025-12-05 14:21:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-05 14:21:53 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 2 stages
2025-12-05 14:21:53 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 1 videos with results
2025-12-05 14:21:53 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 1 videos with results
2025-12-05 14:21:53 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 1 common videos across all stages
2025-12-05 14:21:53 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 200 valid tuples
2025-12-05 14:21:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 200 valid tuples
2025-12-05 14:22:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-05 14:22:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='r·ª´ng', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 14:22:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='n√∫i', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 14:22:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'r·ª´ng'
2025-12-05 14:22:01 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-05 14:22:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'forest'
2025-12-05 14:22:01 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 14:22:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='forest', Q1='forest', Q2='forest'
2025-12-05 14:22:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'n√∫i'
2025-12-05 14:22:02 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'n√∫i' ‚Üí 'mountain'
2025-12-05 14:22:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'mountain'
2025-12-05 14:22:02 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 14:22:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='mountain', Q1='mountain', Q2='mountain'
2025-12-05 14:22:05 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9438, 438:0.9438, 345:0.9438, 338:0.9438, 281:0.9438, 237:0.9438, 248:0.9438, 445:0.9438, 249:0.9438, 251:0.9438, 257:0.9438, 234:0.9438, 246:0.9438, 335:0.9438, 441:0.9438, 611:0.9438, 214:0.9438, 275:0.9438, 238:0.9438, 274:0.9438
2025-12-05 14:22:05 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9438, 438:0.9438, 345:0.9438, 338:0.9438, 281:0.9438, 237:0.9438, 248:0.9438, 445:0.9438, 249:0.9438, 251:0.9438, 257:0.9438, 234:0.9438, 246:0.9438, 335:0.9438, 441:0.9438, 611:0.9438, 214:0.9438, 275:0.9438, 238:0.9438, 274:0.9438
2025-12-05 14:22:05 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9438, 438:0.9438, 345:0.9438, 338:0.9438, 281:0.9438, 237:0.9438, 248:0.9438, 445:0.9438, 249:0.9438, 251:0.9438, 257:0.9438, 234:0.9438, 246:0.9438, 335:0.9438, 441:0.9438, 611:0.9438, 214:0.9438, 275:0.9438, 238:0.9438, 274:0.9438
2025-12-05 14:22:05 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 14:22:05 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 270:0.2050, 193:0.0818, 208:0.0313, 211:0.0284, 329:0.0283, 284:0.0222, 446:0.0208, 437:0.0206, 80:0.0198, 328:0.0196, 381:0.0195, 418:0.0193, 225:0.0191, 631:0.0183, 419:0.0172, 287:0.0170, 234:0.0166, 343:0.0155, 445:0.0147, 327:0.0144
2025-12-05 14:22:06 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 14:22:06 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 270:0.2050, 193:0.0818, 208:0.0313, 211:0.0284, 329:0.0283, 284:0.0222, 446:0.0208, 437:0.0206, 80:0.0198, 328:0.0196, 381:0.0195, 418:0.0193, 225:0.0191, 631:0.0183, 419:0.0172, 287:0.0170, 234:0.0166, 343:0.0155, 445:0.0147, 327:0.0144
2025-12-05 14:22:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 14:22:06 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 14:22:06 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 270:0.2050, 193:0.0818, 208:0.0313, 211:0.0284, 329:0.0283, 284:0.0222, 446:0.0208, 437:0.0206, 80:0.0198, 328:0.0196, 381:0.0195, 418:0.0193, 225:0.0191, 631:0.0183, 419:0.0172, 287:0.0170, 234:0.0166, 343:0.0155, 445:0.0147, 327:0.0144
2025-12-05 14:22:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 14:22:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 4849.14ms
2025-12-05 14:22:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-05 14:22:06 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 2 stages
2025-12-05 14:22:06 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 1 videos with results
2025-12-05 14:22:06 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 1 videos with results
2025-12-05 14:22:06 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 1 common videos across all stages
2025-12-05 14:22:06 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 200 valid tuples
2025-12-05 14:22:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 200 valid tuples
2025-12-05 14:22:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-05 14:22:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='r·ª´ng', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 14:22:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='s√¥ng', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 14:22:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'r·ª´ng'
2025-12-05 14:22:10 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-05 14:22:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'forest'
2025-12-05 14:22:10 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 14:22:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='forest', Q1='forest', Q2='forest'
2025-12-05 14:22:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 's√¥ng'
2025-12-05 14:22:10 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-05 14:22:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'river'
2025-12-05 14:22:11 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 14:22:11 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='river', Q1='river', Q2='river'
2025-12-05 14:22:11 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-05 14:22:11 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='r·ª´ng', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 14:22:11 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='n√∫i', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 14:22:11 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'r·ª´ng'
2025-12-05 14:22:11 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-05 14:22:11 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'forest'
2025-12-05 14:22:11 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 14:22:11 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='forest', Q1='forest', Q2='forest'
2025-12-05 14:22:11 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'n√∫i'
2025-12-05 14:22:11 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'n√∫i' ‚Üí 'mountain'
2025-12-05 14:22:11 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'mountain'
2025-12-05 14:22:12 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 14:22:12 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='mountain', Q1='mountain', Q2='mountain'
2025-12-05 14:22:13 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9438, 438:0.9438, 345:0.9438, 338:0.9438, 281:0.9438, 237:0.9438, 248:0.9438, 445:0.9438, 249:0.9438, 251:0.9438, 257:0.9438, 234:0.9438, 246:0.9438, 335:0.9438, 441:0.9438, 611:0.9438, 214:0.9438, 275:0.9438, 238:0.9438, 274:0.9438
2025-12-05 14:22:14 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 14:22:14 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9439, 438:0.9439, 345:0.9439, 338:0.9439, 281:0.9439, 237:0.9439, 248:0.9439, 445:0.9439, 249:0.9439, 251:0.9439, 257:0.9439, 234:0.9439, 246:0.9439, 335:0.9439, 441:0.9439, 611:0.9439, 214:0.9439, 275:0.9439, 238:0.9439, 274:0.9439
2025-12-05 14:22:14 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9439, 438:0.9439, 345:0.9439, 338:0.9439, 281:0.9439, 237:0.9439, 248:0.9439, 445:0.9439, 249:0.9439, 251:0.9439, 257:0.9439, 234:0.9439, 246:0.9439, 335:0.9439, 441:0.9439, 611:0.9439, 214:0.9439, 275:0.9439, 238:0.9439, 274:0.9439
2025-12-05 14:22:14 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 14:22:14 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 14:22:14 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 270:0.2050, 193:0.0818, 208:0.0313, 211:0.0284, 329:0.0283, 284:0.0222, 446:0.0208, 437:0.0206, 80:0.0198, 328:0.0196, 381:0.0195, 418:0.0193, 225:0.0191, 631:0.0183, 419:0.0172, 287:0.0170, 234:0.0166, 343:0.0155, 445:0.0147, 327:0.0144
2025-12-05 14:22:14 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 14:22:14 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 270:0.2050, 193:0.0818, 208:0.0313, 211:0.0284, 329:0.0283, 284:0.0222, 446:0.0208, 437:0.0206, 80:0.0198, 328:0.0196, 381:0.0195, 418:0.0193, 225:0.0191, 631:0.0183, 419:0.0172, 287:0.0170, 234:0.0166, 343:0.0155, 445:0.0147, 327:0.0144
2025-12-05 14:22:14 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 14:22:14 - app.routers.search_multistage - ERROR - [MULTISTAGE] Error: headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'fa5fbae1d8fa4928850022cf711e44bc', 'date': 'Fri, 05 Dec 2025 14:22:14 GMT', 'x-envoy-upstream-service-time': '5', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '80f3e681-9276-4adc-9724-80034889ace5', 'message': 'Please wait and try again later'}
Traceback (most recent call last):
  File "/app/app/routers/search_multistage.py", line 381, in search_multistage
    stage_results = await asyncio.gather(*stage_tasks)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/routers/search_multistage.py", line 272, in _process_single_stage
    (q0_per_method, q0_results), (q1_per_method, q1_results), (q2_per_method, q2_results) = await asyncio.gather(
                                                                                            ^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/routers/search_multistage.py", line 207, in _search_single_query_async
    return await loop.run_in_executor(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/routers/search_multistage.py", line 167, in _search_single_query_sync
    ic_results = get_ic_search().search(query_text, top_k)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/services/method/ic_search.py", line 87, in search
    rerank = co.rerank(
             ^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/cohere/base_client.py", line 1206, in rerank
    _response = self._raw_client.rerank(
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/cohere/raw_base_client.py", line 1943, in rerank
    raise TooManyRequestsError(
cohere.errors.too_many_requests_error.TooManyRequestsError: headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'fa5fbae1d8fa4928850022cf711e44bc', 'date': 'Fri, 05 Dec 2025 14:22:14 GMT', 'x-envoy-upstream-service-time': '5', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '80f3e681-9276-4adc-9724-80034889ace5', 'message': 'Please wait and try again later'}
2025-12-05 14:22:14 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 14:22:14 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 14:22:14 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 52:0.6792, 381:0.6514, 149:0.3268, 144:0.0930, 382:0.0421, 124:0.0393, 87:0.0212, 565:0.0202, 417:0.0184, 446:0.0149, 35:0.0131, 221:0.0127, 618:0.0110, 284:0.0103, 240:0.0086, 437:0.0083, 287:0.0083, 385:0.0081, 419:0.0081, 418:0.0079
2025-12-05 14:22:14 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 52:0.6792, 381:0.6514, 149:0.3268, 144:0.0930, 382:0.0421, 124:0.0393, 87:0.0212, 565:0.0202, 417:0.0184, 446:0.0149, 35:0.0131, 221:0.0127, 618:0.0110, 284:0.0103, 240:0.0086, 437:0.0083, 287:0.0083, 385:0.0081, 419:0.0081, 418:0.0079
2025-12-05 14:22:17 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 14:22:17 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9438, 438:0.9438, 345:0.9438, 338:0.9438, 281:0.9438, 237:0.9438, 248:0.9438, 445:0.9438, 249:0.9438, 251:0.9438, 257:0.9438, 234:0.9438, 246:0.9438, 335:0.9438, 441:0.9438, 611:0.9438, 214:0.9438, 275:0.9438, 238:0.9438, 274:0.9438
2025-12-05 14:22:17 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9438, 438:0.9438, 345:0.9438, 338:0.9438, 281:0.9438, 237:0.9438, 248:0.9438, 445:0.9438, 249:0.9438, 251:0.9438, 257:0.9438, 234:0.9438, 246:0.9438, 335:0.9438, 441:0.9438, 611:0.9438, 214:0.9438, 275:0.9438, 238:0.9438, 274:0.9438
2025-12-05 14:22:17 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 14:22:17 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9438, 438:0.9438, 345:0.9438, 338:0.9438, 281:0.9438, 237:0.9438, 248:0.9438, 445:0.9438, 249:0.9438, 251:0.9438, 257:0.9438, 234:0.9438, 246:0.9438, 335:0.9438, 441:0.9438, 611:0.9438, 214:0.9438, 275:0.9438, 238:0.9438, 274:0.9438
2025-12-05 14:22:18 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 14:22:18 - app.routers.search_multistage - ERROR - [MULTISTAGE] Error: headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'f8077e02b75e04180c461c2c74f87179', 'date': 'Fri, 05 Dec 2025 14:22:17 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '0957b05d-6d6a-48d4-9a0e-3b333c40ff7e', 'message': 'Please wait and try again later'}
Traceback (most recent call last):
  File "/app/app/routers/search_multistage.py", line 381, in search_multistage
    stage_results = await asyncio.gather(*stage_tasks)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/routers/search_multistage.py", line 272, in _process_single_stage
    (q0_per_method, q0_results), (q1_per_method, q1_results), (q2_per_method, q2_results) = await asyncio.gather(
                                                                                            ^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/routers/search_multistage.py", line 207, in _search_single_query_async
    return await loop.run_in_executor(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/routers/search_multistage.py", line 167, in _search_single_query_sync
    ic_results = get_ic_search().search(query_text, top_k)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/services/method/ic_search.py", line 87, in search
    rerank = co.rerank(
             ^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/cohere/base_client.py", line 1206, in rerank
    _response = self._raw_client.rerank(
                ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/cohere/raw_base_client.py", line 1943, in rerank
    raise TooManyRequestsError(
cohere.errors.too_many_requests_error.TooManyRequestsError: headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'f8077e02b75e04180c461c2c74f87179', 'date': 'Fri, 05 Dec 2025 14:22:17 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '0957b05d-6d6a-48d4-9a0e-3b333c40ff7e', 'message': 'Please wait and try again later'}
2025-12-05 14:22:18 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 14:22:18 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 14:22:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 14:23:10 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='b·∫Øc ninh', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-05 14:23:10 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-05 14:23:10 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-05 14:23:10 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-05 14:23:10 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'b·∫Øc ninh'
2025-12-05 14:23:10 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'b·∫Øc ninh'
2025-12-05 14:23:10 - elastic_transport.transport - INFO - GET http://elasticsearch:9200/ [status:200 duration:0.004s]
2025-12-05 14:23:10 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.054s]
2025-12-05 14:23:10 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 165:0.9545, 386:0.9508, 432:0.9308, 387:0.9176, 430:0.9106, 429:0.9052, 162:0.9048, 220:0.8827, 219:0.8764, 431:0.8760
2025-12-05 14:23:10 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-05 14:23:10 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-05 14:23:10 - app.routers.search - INFO - [ENSEMBLE] Mode=M, always returning per_method_results for mode switching flexibility
2025-12-05 14:24:55 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='b·∫Øc ninh', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}, selectedObjects=['Tree'])]
2025-12-05 14:24:55 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-05 14:24:55 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}
2025-12-05 14:24:55 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-05 14:24:55 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'b·∫Øc ninh'
2025-12-05 14:24:55 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'b·∫Øc ninh'
2025-12-05 14:24:55 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.020s]
2025-12-05 14:24:55 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 165:0.9545, 386:0.9508, 432:0.9308, 387:0.9176, 430:0.9106, 429:0.9052, 162:0.9048, 220:0.8827, 219:0.8764, 431:0.8760
2025-12-05 14:24:55 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-05 14:24:55 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-05 14:24:55 - app.routers.search - INFO - [ENSEMBLE] Applying object filter with 1 objects
2025-12-05 14:24:55 - elastic_transport.transport - INFO - GET http://elasticsearch:9200/ [status:200 duration:0.004s]
2025-12-05 14:24:55 - app.services.method.object_filter - INFO - ObjectFilterSearch connected to Elasticsearch
2025-12-05 14:24:55 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/object/_search [status:200 duration:0.015s]
2025-12-05 14:24:55 - app.services.method.object_filter - INFO - Object filter: 197 ‚Üí 17 results
2025-12-05 14:24:55 - app.routers.search - INFO - [ENSEMBLE] Mode=M, always returning per_method_results for mode switching flexibility
2025-12-05 14:25:00 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='b·∫Øc ninh', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}, selectedObjects=['Tree'])]
2025-12-05 14:25:00 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-05 14:25:00 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}
2025-12-05 14:25:00 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-05 14:25:00 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'b·∫Øc ninh'
2025-12-05 14:25:00 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'b·∫Øc ninh'
2025-12-05 14:25:00 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.012s]
2025-12-05 14:25:00 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 165:0.9545, 386:0.9508, 432:0.9308, 387:0.9176, 430:0.9106, 429:0.9052, 162:0.9048, 220:0.8827, 219:0.8764, 431:0.8760
2025-12-05 14:25:00 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-05 14:25:00 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-05 14:25:00 - app.routers.search - INFO - [ENSEMBLE] Applying object filter with 1 objects
2025-12-05 14:25:00 - elastic_transport.transport - INFO - GET http://elasticsearch:9200/ [status:200 duration:0.003s]
2025-12-05 14:25:00 - app.services.method.object_filter - INFO - ObjectFilterSearch connected to Elasticsearch
2025-12-05 14:25:00 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/object/_search [status:200 duration:0.007s]
2025-12-05 14:25:00 - app.services.method.object_filter - INFO - Object filter: 197 ‚Üí 17 results
2025-12-05 14:25:00 - app.routers.search - INFO - [ENSEMBLE] Mode=M, always returning per_method_results for mode switching flexibility
2025-12-05 14:25:26 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='b·∫Øc ninh', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}, selectedObjects=['Skyscraper'])]
2025-12-05 14:25:26 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-05 14:25:26 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}
2025-12-05 14:25:26 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-05 14:25:26 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'b·∫Øc ninh'
2025-12-05 14:25:26 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'b·∫Øc ninh'
2025-12-05 14:25:26 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.014s]
2025-12-05 14:25:26 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 165:0.9545, 386:0.9508, 432:0.9308, 387:0.9176, 430:0.9106, 429:0.9052, 162:0.9048, 220:0.8827, 219:0.8764, 431:0.8760
2025-12-05 14:25:26 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-05 14:25:26 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-05 14:25:26 - app.routers.search - INFO - [ENSEMBLE] Applying object filter with 1 objects
2025-12-05 14:25:26 - elastic_transport.transport - INFO - GET http://elasticsearch:9200/ [status:200 duration:0.004s]
2025-12-05 14:25:26 - app.services.method.object_filter - INFO - ObjectFilterSearch connected to Elasticsearch
2025-12-05 14:25:26 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/object/_search [status:200 duration:0.007s]
2025-12-05 14:25:26 - app.services.method.object_filter - INFO - Object filter: 197 ‚Üí 6 results
2025-12-05 14:25:26 - app.routers.search - INFO - [ENSEMBLE] Mode=M, always returning per_method_results for mode switching flexibility
2025-12-05 14:25:53 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='b·∫Øc ninh', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-05 14:25:53 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-05 14:25:53 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-05 14:25:53 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-05 14:25:53 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'b·∫Øc ninh'
2025-12-05 14:25:53 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'b·∫Øc ninh'
2025-12-05 14:25:53 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.012s]
2025-12-05 14:25:53 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 165:0.9545, 386:0.9508, 432:0.9308, 387:0.9176, 430:0.9106, 429:0.9052, 162:0.9048, 220:0.8827, 219:0.8764, 431:0.8760
2025-12-05 14:25:53 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-05 14:25:53 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-05 14:25:53 - app.routers.search - INFO - [ENSEMBLE] Mode=M, always returning per_method_results for mode switching flexibility
2025-12-05 14:26:14 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='b·∫Øc ninh', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}, selectedObjects=['Skyscraper'])]
2025-12-05 14:26:14 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-05 14:26:14 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}
2025-12-05 14:26:14 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-05 14:26:14 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'b·∫Øc ninh'
2025-12-05 14:26:14 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'b·∫Øc ninh'
2025-12-05 14:26:14 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.012s]
2025-12-05 14:26:14 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 165:0.9545, 386:0.9508, 432:0.9308, 387:0.9176, 430:0.9106, 429:0.9052, 162:0.9048, 220:0.8827, 219:0.8764, 431:0.8760
2025-12-05 14:26:14 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-05 14:26:14 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-05 14:26:14 - app.routers.search - INFO - [ENSEMBLE] Applying object filter with 1 objects
2025-12-05 14:26:14 - elastic_transport.transport - INFO - GET http://elasticsearch:9200/ [status:200 duration:0.003s]
2025-12-05 14:26:14 - app.services.method.object_filter - INFO - ObjectFilterSearch connected to Elasticsearch
2025-12-05 14:26:14 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/object/_search [status:200 duration:0.005s]
2025-12-05 14:26:14 - app.services.method.object_filter - INFO - Object filter: 197 ‚Üí 6 results
2025-12-05 14:26:14 - app.routers.search - INFO - [ENSEMBLE] Mode=M, always returning per_method_results for mode switching flexibility
2025-12-05 14:26:28 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='r·ª´ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-05 14:26:28 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-05 14:26:28 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-05 14:26:28 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-05 14:26:28 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-05 14:26:28 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'forest'
2025-12-05 14:26:28 - app.routers.search - INFO - [ENSEMBLE] Running multimodal search
2025-12-05 14:26:31 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 377:1.0000, 327:0.8852, 328:0.8522, 329:0.8479, 80:0.8410, 74:0.8375, 75:0.7882, 52:0.7132, 60:0.6900, 330:0.6866
2025-12-05 14:26:31 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 55:1.0000, 195:0.9311, 327:0.8759, 120:0.8582, 14:0.8368, 517:0.7754, 97:0.7709, 48:0.7700, 328:0.7619, 80:0.7483
2025-12-05 14:26:31 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 183:1.0000, 645:0.9129, 164:0.7097, 159:0.6736, 158:0.6580, 353:0.6559, 628:0.6274, 377:0.6081, 14:0.5736, 629:0.5654
2025-12-05 14:26:31 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 377:1.0000, 327:0.9276, 14:0.8588, 645:0.8560, 328:0.8439, 183:0.8054, 329:0.7747, 55:0.7743, 628:0.6647, 164:0.6343
2025-12-05 14:26:31 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-05 14:26:31 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-05 14:26:31 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-05 14:26:41 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='r·ª´ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': True}, selectedObjects=['Person'])]
2025-12-05 14:26:41 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-05 14:26:41 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': True}
2025-12-05 14:26:41 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-05 14:26:41 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-05 14:26:41 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'forest'
2025-12-05 14:26:41 - app.routers.search - INFO - [ENSEMBLE] Running multimodal search
2025-12-05 14:26:43 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 377:1.0000, 327:0.8852, 328:0.8522, 329:0.8479, 80:0.8410, 74:0.8375, 75:0.7882, 52:0.7132, 60:0.6900, 330:0.6866
2025-12-05 14:26:43 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 55:1.0000, 195:0.9311, 327:0.8759, 120:0.8582, 14:0.8368, 517:0.7754, 97:0.7709, 48:0.7700, 328:0.7619, 80:0.7483
2025-12-05 14:26:43 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 183:1.0000, 645:0.9129, 164:0.7097, 159:0.6736, 158:0.6580, 353:0.6559, 628:0.6274, 377:0.6081, 14:0.5736, 629:0.5654
2025-12-05 14:26:43 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 377:1.0000, 327:0.9276, 14:0.8588, 645:0.8560, 328:0.8439, 183:0.8054, 329:0.7747, 55:0.7743, 628:0.6647, 164:0.6343
2025-12-05 14:26:43 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-05 14:26:43 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-05 14:26:43 - app.routers.search - INFO - [ENSEMBLE] Applying object filter with 1 objects
2025-12-05 14:26:43 - elastic_transport.transport - INFO - GET http://elasticsearch:9200/ [status:200 duration:0.005s]
2025-12-05 14:26:43 - app.services.method.object_filter - INFO - ObjectFilterSearch connected to Elasticsearch
2025-12-05 14:26:43 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/object/_search [status:200 duration:0.009s]
2025-12-05 14:26:43 - app.services.method.object_filter - INFO - Object filter: 200 ‚Üí 46 results
2025-12-05 14:26:43 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-05 14:27:04 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='s√¥ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-05 14:27:04 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-05 14:27:04 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-05 14:27:04 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-05 14:27:04 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-05 14:27:05 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'river'
2025-12-05 14:27:05 - app.routers.search - INFO - [ENSEMBLE] Running multimodal search
2025-12-05 14:27:06 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 377:1.0000, 383:0.8582, 14:0.8402, 376:0.8073, 51:0.7831, 52:0.7808, 60:0.7730, 55:0.7695, 48:0.7663, 49:0.7577
2025-12-05 14:27:06 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 377:1.0000, 52:0.9678, 384:0.9244, 14:0.9072, 51:0.8703, 98:0.8349, 376:0.8244, 50:0.8210, 132:0.8134, 383:0.8072
2025-12-05 14:27:06 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 383:1.0000, 59:0.9722, 377:0.9517, 382:0.9292, 381:0.9101, 384:0.8900, 376:0.8508, 56:0.8465, 60:0.8435, 55:0.8341
2025-12-05 14:27:06 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 377:1.0000, 14:0.8523, 52:0.8509, 383:0.8490, 384:0.8238, 376:0.7956, 51:0.7773, 60:0.7665, 59:0.7093, 47:0.7043
2025-12-05 14:27:06 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-05 14:27:06 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-05 14:27:06 - app.routers.search - INFO - [ENSEMBLE] Mode=M, always returning per_method_results for mode switching flexibility
2025-12-05 14:27:33 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='s√¥ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': True}, selectedObjects=['Person'])]
2025-12-05 14:27:33 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-05 14:27:33 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': True}
2025-12-05 14:27:33 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-05 14:27:34 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-05 14:27:34 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'river'
2025-12-05 14:27:34 - app.routers.search - INFO - [ENSEMBLE] Running multimodal search
2025-12-05 14:27:36 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 377:1.0000, 383:0.8582, 14:0.8402, 376:0.8073, 51:0.7831, 52:0.7808, 60:0.7730, 55:0.7695, 48:0.7663, 49:0.7577
2025-12-05 14:27:36 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 377:1.0000, 52:0.9678, 384:0.9244, 14:0.9072, 51:0.8703, 98:0.8349, 376:0.8244, 50:0.8210, 132:0.8134, 383:0.8072
2025-12-05 14:27:36 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 383:1.0000, 59:0.9722, 377:0.9517, 382:0.9292, 381:0.9101, 384:0.8900, 376:0.8508, 56:0.8465, 60:0.8435, 55:0.8341
2025-12-05 14:27:36 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 377:1.0000, 14:0.8523, 52:0.8509, 383:0.8490, 384:0.8238, 376:0.7956, 51:0.7773, 60:0.7665, 59:0.7093, 47:0.7043
2025-12-05 14:27:36 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-05 14:27:36 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-05 14:27:36 - app.routers.search - INFO - [ENSEMBLE] Applying object filter with 1 objects
2025-12-05 14:27:36 - elastic_transport.transport - INFO - GET http://elasticsearch:9200/ [status:200 duration:0.004s]
2025-12-05 14:27:36 - app.services.method.object_filter - INFO - ObjectFilterSearch connected to Elasticsearch
2025-12-05 14:27:36 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/object/_search [status:200 duration:0.007s]
2025-12-05 14:27:36 - app.services.method.object_filter - INFO - Object filter: 200 ‚Üí 52 results
2025-12-05 14:27:36 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-05 14:27:53 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='b·∫Øc ninh', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-05 14:27:53 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-05 14:27:53 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-05 14:27:53 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-05 14:27:53 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'b·∫Øc ninh'
2025-12-05 14:27:53 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'b·∫Øc ninh'
2025-12-05 14:27:53 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.017s]
2025-12-05 14:27:53 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 165:0.9545, 386:0.9508, 432:0.9308, 387:0.9176, 430:0.9106, 429:0.9052, 162:0.9048, 220:0.8827, 219:0.8764, 431:0.8760
2025-12-05 14:27:53 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-05 14:27:53 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-05 14:27:53 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-05 14:28:01 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='b·∫Øc ninh', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}, selectedObjects=['Skyscraper'])]
2025-12-05 14:28:01 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-05 14:28:01 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}
2025-12-05 14:28:01 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-05 14:28:01 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'b·∫Øc ninh'
2025-12-05 14:28:01 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'b·∫Øc ninh'
2025-12-05 14:28:01 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.017s]
2025-12-05 14:28:01 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 165:0.9545, 386:0.9508, 432:0.9308, 387:0.9176, 430:0.9106, 429:0.9052, 162:0.9048, 220:0.8827, 219:0.8764, 431:0.8760
2025-12-05 14:28:01 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-05 14:28:01 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-05 14:28:01 - app.routers.search - INFO - [ENSEMBLE] Applying object filter with 1 objects
2025-12-05 14:28:01 - elastic_transport.transport - INFO - GET http://elasticsearch:9200/ [status:200 duration:0.004s]
2025-12-05 14:28:01 - app.services.method.object_filter - INFO - ObjectFilterSearch connected to Elasticsearch
2025-12-05 14:28:01 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/object/_search [status:200 duration:0.006s]
2025-12-05 14:28:01 - app.services.method.object_filter - INFO - Object filter: 197 ‚Üí 6 results
2025-12-05 14:28:01 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-05 14:29:24 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='s√¥ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-05 14:29:24 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-05 14:29:24 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-05 14:29:24 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-05 14:29:24 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-05 14:29:24 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'river'
2025-12-05 14:29:24 - app.routers.search - INFO - [ENSEMBLE] Running multimodal search
2025-12-05 14:29:26 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 377:1.0000, 383:0.8582, 14:0.8402, 376:0.8073, 51:0.7831, 52:0.7808, 60:0.7730, 55:0.7695, 48:0.7663, 49:0.7577
2025-12-05 14:29:26 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 377:1.0000, 52:0.9678, 384:0.9244, 14:0.9072, 51:0.8703, 98:0.8349, 376:0.8244, 50:0.8210, 132:0.8134, 383:0.8072
2025-12-05 14:29:26 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 383:1.0000, 59:0.9722, 377:0.9517, 382:0.9292, 381:0.9101, 384:0.8900, 376:0.8508, 56:0.8465, 60:0.8435, 55:0.8341
2025-12-05 14:29:26 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 377:1.0000, 14:0.8523, 52:0.8509, 383:0.8490, 384:0.8238, 376:0.7956, 51:0.7773, 60:0.7665, 59:0.7093, 47:0.7043
2025-12-05 14:29:26 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-05 14:29:26 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-05 14:29:26 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-05 14:29:45 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='b·ªã nh·∫•n ch√¨m', ocrText='', toggles={'multimodal': False, 'ic': False, 'asr': True, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-05 14:29:45 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: text
2025-12-05 14:29:45 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': True, 'ocr': False, 'objectFilter': False}
2025-12-05 14:29:45 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'asr'}, Total: 1
2025-12-05 14:29:45 - app.routers.search - INFO - [ENSEMBLE] Running ASR search
2025-12-05 14:29:45 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.016s]
2025-12-05 14:29:45 - app.routers.search - INFO - [ENSEMBLE] ASR top results (scaled): 17:0.9885, 11:0.9592, 20:0.7098, 99:0.7098, 150:0.6566, 37:0.6488, 10:0.5924, 9:0.5600, 193:0.5600, 247:0.5600
2025-12-05 14:29:45 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['asr']
2025-12-05 14:29:45 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['asr']
2025-12-05 14:29:45 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-05 14:34:25 - root - INFO - üì• Received submit request: query_text='b·ªã nh·∫•n ch√¨m...', keyframe_path='/keyframes/L01_V001/22210.webp', result_id='223', username='user1'
2025-12-05 14:34:25 - root - INFO - ‚úÖ Submission created: id=2, query='b·ªã nh·∫•n ch√¨m...', user=user1
2025-12-05 15:01:23 - root - INFO - üõë Shutting down FastAPI application...
2025-12-05 15:01:31 - root - INFO - Mounted keyframe directory at /keyframes: /app/app/data/keyframe
2025-12-05 15:01:31 - root - INFO - üöÄ Starting FastAPI application...
2025-12-05 15:01:31 - root - INFO - Log directory: logs/
2025-12-05 15:01:31 - root - INFO - Search queries log: logs/search_queries.log
2025-12-05 15:01:31 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-05 15:01:31 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-05 15:01:31 - app.database.db - INFO -    Current submissions count: 2
2025-12-05 15:01:40 - root - INFO - üõë Shutting down FastAPI application...
2025-12-05 15:01:44 - root - INFO - Mounted keyframe directory at /keyframes: /app/app/data/keyframe
2025-12-05 15:01:44 - root - INFO - üöÄ Starting FastAPI application...
2025-12-05 15:01:44 - root - INFO - Log directory: logs/
2025-12-05 15:01:44 - root - INFO - Search queries log: logs/search_queries.log
2025-12-05 15:01:44 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-05 15:01:44 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-05 15:01:44 - app.database.db - INFO -    Current submissions count: 2
2025-12-05 15:02:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 4 stages
2025-12-05 15:02:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='r·ª´ng', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 15:02:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='s√¥ng', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 15:02:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='n√∫i', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 15:02:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3: id=4, query='bi·ªÉn', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 15:02:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'r·ª´ng'
2025-12-05 15:02:22 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-05 15:02:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'forest'
2025-12-05 15:02:23 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 15:02:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='forest', Q1='forest', Q2='forest'
2025-12-05 15:02:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 's√¥ng'
2025-12-05 15:02:23 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-05 15:02:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'river'
2025-12-05 15:02:23 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 15:02:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='river', Q1='river', Q2='river'
2025-12-05 15:02:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: 'n√∫i'
2025-12-05 15:02:24 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'n√∫i' ‚Üí 'mountain'
2025-12-05 15:02:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 translated: 'mountain'
2025-12-05 15:02:24 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 15:02:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 queries: Q0='mountain', Q1='mountain', Q2='mountain'
2025-12-05 15:02:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 4: 'bi·ªÉn'
2025-12-05 15:02:24 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'bi·ªÉn' ‚Üí 'sea'
2025-12-05 15:02:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 4 translated: 'sea'
2025-12-05 15:02:25 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 15:02:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 4 queries: Q0='sea', Q1='sea', Q2='sea'
2025-12-05 15:02:25 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-05 15:02:25 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-05 15:02:25 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-05 15:02:25 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-05 15:02:25 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-05 15:02:27 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-05 15:02:27 - app.services.method.ic_search - INFO - IC.json loaded: 647 entries
2025-12-05 15:02:27 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-05 15:02:27 - app.services.method.ic_search - INFO - IC.json loaded: 647 entries
2025-12-05 15:02:28 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9438, 438:0.9438, 345:0.9438, 338:0.9438, 281:0.9438, 237:0.9438, 248:0.9438, 445:0.9438, 249:0.9438, 251:0.9438, 257:0.9438, 234:0.9438, 246:0.9438, 335:0.9438, 441:0.9438, 611:0.9438, 214:0.9438, 275:0.9438, 238:0.9438, 274:0.9438
2025-12-05 15:02:28 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9439, 438:0.9439, 345:0.9439, 338:0.9439, 281:0.9439, 237:0.9439, 248:0.9439, 445:0.9439, 249:0.9439, 251:0.9439, 257:0.9439, 234:0.9439, 246:0.9439, 335:0.9439, 441:0.9439, 611:0.9439, 214:0.9439, 275:0.9439, 238:0.9439, 274:0.9439
2025-12-05 15:02:28 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 15:02:28 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 15:02:28 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9438, 438:0.9438, 345:0.9438, 338:0.9438, 281:0.9438, 237:0.9438, 248:0.9438, 445:0.9438, 249:0.9438, 251:0.9438, 257:0.9438, 234:0.9438, 246:0.9438, 335:0.9438, 441:0.9438, 611:0.9438, 214:0.9438, 275:0.9438, 238:0.9438, 274:0.9438
2025-12-05 15:02:29 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:02:29 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:02:29 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 270:0.2050, 193:0.0818, 208:0.0313, 211:0.0284, 329:0.0283, 284:0.0222, 446:0.0208, 437:0.0206, 80:0.0198, 328:0.0196, 381:0.0195, 418:0.0193, 225:0.0191, 631:0.0183, 419:0.0172, 287:0.0170, 234:0.0166, 343:0.0155, 445:0.0147, 327:0.0144
2025-12-05 15:02:29 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 52:0.6792, 381:0.6514, 149:0.3268, 144:0.0930, 382:0.0421, 124:0.0393, 87:0.0212, 565:0.0202, 417:0.0184, 446:0.0149, 35:0.0131, 221:0.0127, 618:0.0110, 284:0.0103, 240:0.0086, 437:0.0083, 287:0.0083, 385:0.0081, 419:0.0081, 418:0.0079
2025-12-05 15:02:29 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:02:29 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 270:0.2050, 193:0.0818, 208:0.0313, 211:0.0284, 329:0.0283, 284:0.0222, 446:0.0208, 437:0.0206, 80:0.0198, 328:0.0196, 381:0.0195, 418:0.0193, 225:0.0191, 631:0.0183, 419:0.0172, 287:0.0170, 234:0.0166, 343:0.0155, 445:0.0147, 327:0.0144
2025-12-05 15:02:29 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:02:29 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 52:0.6792, 381:0.6514, 149:0.3268, 144:0.0930, 382:0.0421, 124:0.0393, 87:0.0212, 565:0.0202, 417:0.0184, 446:0.0149, 35:0.0131, 221:0.0127, 618:0.0110, 284:0.0103, 240:0.0086, 437:0.0083, 287:0.0083, 385:0.0081, 419:0.0081, 418:0.0079
2025-12-05 15:02:29 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:02:29 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 270:0.2050, 193:0.0818, 208:0.0313, 211:0.0284, 329:0.0283, 284:0.0222, 446:0.0208, 437:0.0206, 80:0.0198, 328:0.0196, 381:0.0195, 418:0.0193, 225:0.0191, 631:0.0183, 419:0.0172, 287:0.0170, 234:0.0166, 343:0.0155, 445:0.0147, 327:0.0144
2025-12-05 15:02:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 15:02:32 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 15:02:32 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 340:0.9209, 639:0.9209, 334:0.9209, 632:0.9209, 339:0.9209, 268:0.9209, 337:0.9209, 333:0.9209, 421:0.9209, 282:0.9209, 21:0.9209, 577:0.9209, 110:0.9209, 111:0.9209, 355:0.9209, 148:0.9209, 640:0.9209, 168:0.9209, 356:0.9209, 8:0.9209
2025-12-05 15:02:32 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 340:0.9209, 639:0.9209, 334:0.9209, 632:0.9209, 339:0.9209, 268:0.9209, 337:0.9209, 333:0.9209, 421:0.9209, 282:0.9209, 21:0.9209, 577:0.9209, 110:0.9209, 111:0.9209, 355:0.9209, 148:0.9209, 640:0.9209, 168:0.9209, 356:0.9209, 8:0.9209
2025-12-05 15:02:32 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 205:0.9392, 238:0.9392, 441:0.9392, 192:0.9392, 197:0.9392, 237:0.9392, 214:0.9392, 346:0.9392, 336:0.9392, 222:0.9392, 229:0.9392, 234:0.9392, 246:0.9392, 335:0.9392, 209:0.9392, 256:0.9392, 251:0.9392, 275:0.9392, 278:0.9392, 274:0.9392
2025-12-05 15:02:32 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 340:0.9209, 639:0.9209, 334:0.9209, 632:0.9209, 339:0.9209, 268:0.9209, 337:0.9209, 333:0.9209, 421:0.9209, 282:0.9209, 21:0.9209, 577:0.9209, 110:0.9209, 111:0.9209, 355:0.9209, 148:0.9209, 640:0.9209, 168:0.9209, 356:0.9209, 8:0.9209
2025-12-05 15:02:33 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:02:33 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 608:0.0444, 610:0.0433, 499:0.0217, 442:0.0203, 287:0.0177, 286:0.0156, 614:0.0151, 618:0.0143, 500:0.0143, 480:0.0138, 93:0.0133, 497:0.0128, 465:0.0126, 223:0.0125, 622:0.0116, 270:0.0114, 319:0.0107, 229:0.0107, 193:0.0105, 634:0.0102
2025-12-05 15:02:33 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:02:33 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 565:0.2090, 547:0.0957, 244:0.0804, 385:0.0477, 124:0.0354, 229:0.0330, 35:0.0323, 208:0.0313, 87:0.0289, 416:0.0269, 195:0.0262, 200:0.0258, 246:0.0237, 327:0.0218, 287:0.0214, 610:0.0212, 247:0.0204, 284:0.0191, 609:0.0189, 614:0.0189
2025-12-05 15:02:33 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:02:33 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 608:0.0444, 610:0.0433, 499:0.0217, 442:0.0203, 287:0.0177, 286:0.0156, 614:0.0151, 618:0.0143, 500:0.0143, 480:0.0138, 93:0.0133, 497:0.0128, 465:0.0126, 223:0.0125, 622:0.0116, 270:0.0114, 319:0.0107, 229:0.0107, 193:0.0105, 634:0.0102
2025-12-05 15:02:33 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:02:33 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 52:0.6792, 381:0.6514, 149:0.3268, 144:0.0930, 382:0.0421, 124:0.0393, 87:0.0212, 565:0.0202, 417:0.0184, 446:0.0149, 35:0.0131, 221:0.0127, 618:0.0110, 284:0.0103, 240:0.0086, 437:0.0083, 287:0.0083, 385:0.0081, 419:0.0081, 418:0.0079
2025-12-05 15:02:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 15:02:33 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:02:33 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 608:0.0444, 610:0.0433, 499:0.0217, 442:0.0203, 287:0.0177, 286:0.0156, 614:0.0151, 618:0.0143, 500:0.0143, 480:0.0138, 93:0.0133, 497:0.0128, 465:0.0126, 223:0.0125, 622:0.0116, 270:0.0114, 319:0.0107, 229:0.0107, 193:0.0105, 634:0.0102
2025-12-05 15:02:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 15:02:36 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 205:0.9392, 238:0.9392, 441:0.9392, 192:0.9392, 197:0.9392, 237:0.9392, 214:0.9392, 346:0.9392, 336:0.9392, 222:0.9392, 229:0.9392, 234:0.9392, 246:0.9392, 335:0.9392, 209:0.9392, 256:0.9392, 251:0.9392, 275:0.9392, 278:0.9392, 274:0.9392
2025-12-05 15:02:36 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 205:0.9392, 238:0.9392, 441:0.9392, 192:0.9392, 197:0.9392, 237:0.9392, 214:0.9392, 346:0.9392, 336:0.9392, 222:0.9392, 229:0.9392, 234:0.9392, 246:0.9392, 335:0.9392, 209:0.9392, 256:0.9392, 251:0.9392, 275:0.9392, 278:0.9392, 274:0.9392
2025-12-05 15:02:36 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:02:36 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '0a7c39ce4334738e0d61bed2faa929be', 'date': 'Fri, 05 Dec 2025 15:02:36 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '1a3dc370-5693-4e10-82eb-084e38c3959b', 'message': 'Please wait and try again later'}
2025-12-05 15:02:36 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:02:36 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:02:36 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '6e7dffdc05f3d8eea07e8ae949c062c8', 'date': 'Fri, 05 Dec 2025 15:02:36 GMT', 'x-envoy-upstream-service-time': '4', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '15a7743f-ab58-4972-b98b-6d08abc284a7', 'message': 'Please wait and try again later'}
2025-12-05 15:02:36 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:02:38 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:02:38 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 2/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '6c92f46764442f81245a8d40eb362a2b', 'date': 'Fri, 05 Dec 2025 15:02:38 GMT', 'x-envoy-upstream-service-time': '4', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '1ae2f6aa-dc8d-465b-9bf7-8137b4a3afb6', 'message': 'Please wait and try again later'}
2025-12-05 15:02:38 - app.services.method.ic_search - INFO - [IC] Retrying in 4s...
2025-12-05 15:02:39 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:02:39 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 2/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '00cb309fc76b306f024a1f8f9471f67e', 'date': 'Fri, 05 Dec 2025 15:02:39 GMT', 'x-envoy-upstream-service-time': '44', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'f6656587-8cce-4d7f-a44c-83eecdfd6774', 'message': 'Please wait and try again later'}
2025-12-05 15:02:39 - app.services.method.ic_search - INFO - [IC] Retrying in 4s...
2025-12-05 15:02:43 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:02:43 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 3/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '643b84a7e3670fd2b489afae00491f40', 'date': 'Fri, 05 Dec 2025 15:02:43 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '65f86701-416f-4793-a363-614bd54affe2', 'message': 'Please wait and try again later'}
2025-12-05 15:02:43 - app.services.method.ic_search - ERROR - [IC] Cohere rate limit exceeded after 3 attempts, using Qdrant results as fallback
2025-12-05 15:02:43 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:02:43 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 3/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '28df8ef1a54f4b784c06d070b828c358', 'date': 'Fri, 05 Dec 2025 15:02:43 GMT', 'x-envoy-upstream-service-time': '4', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '717e6d9e-207b-443c-a7e0-9d29c80740b2', 'message': 'Please wait and try again later'}
2025-12-05 15:02:43 - app.services.method.ic_search - ERROR - [IC] Cohere rate limit exceeded after 3 attempts, using Qdrant results as fallback
2025-12-05 15:02:43 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 4 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 15:02:43 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 4 stages in 21054.71ms
2025-12-05 15:02:43 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-05 15:02:43 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 495 unique ids from 4 stages
2025-12-05 15:02:43 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 495 unique ids
2025-12-05 15:02:43 - root - INFO - üõë Shutting down FastAPI application...
2025-12-05 15:02:50 - root - INFO - Mounted keyframe directory at /keyframes: /app/app/data/keyframe
2025-12-05 15:02:50 - root - INFO - üöÄ Starting FastAPI application...
2025-12-05 15:02:50 - root - INFO - Log directory: logs/
2025-12-05 15:02:50 - root - INFO - Search queries log: logs/search_queries.log
2025-12-05 15:02:50 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-05 15:02:50 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-05 15:02:50 - app.database.db - INFO -    Current submissions count: 2
2025-12-05 15:03:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 4 stages
2025-12-05 15:03:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='r·ª´ng', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 15:03:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='s√¥ng', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 15:03:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='n√∫i', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 15:03:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3: id=4, query='bi·ªÉn', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 15:03:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'r·ª´ng'
2025-12-05 15:03:09 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-05 15:03:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'forest'
2025-12-05 15:03:09 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 15:03:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='forest', Q1='forest', Q2='forest'
2025-12-05 15:03:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 's√¥ng'
2025-12-05 15:03:09 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-05 15:03:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'river'
2025-12-05 15:03:09 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 15:03:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='river', Q1='river', Q2='river'
2025-12-05 15:03:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: 'n√∫i'
2025-12-05 15:03:10 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'n√∫i' ‚Üí 'mountain'
2025-12-05 15:03:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 translated: 'mountain'
2025-12-05 15:03:10 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 15:03:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 queries: Q0='mountain', Q1='mountain', Q2='mountain'
2025-12-05 15:03:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 4: 'bi·ªÉn'
2025-12-05 15:03:11 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'bi·ªÉn' ‚Üí 'sea'
2025-12-05 15:03:11 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 4 translated: 'sea'
2025-12-05 15:03:11 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 15:03:11 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 4 queries: Q0='sea', Q1='sea', Q2='sea'
2025-12-05 15:03:11 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-05 15:03:11 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='r·ª´ng ', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 15:03:11 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='s√¥ng', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 15:03:11 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'r·ª´ng '
2025-12-05 15:03:11 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-05 15:03:11 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-05 15:03:11 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-05 15:03:11 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-05 15:03:11 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-05 15:03:11 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng ' ‚Üí 'forest'
2025-12-05 15:03:11 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'forest'
2025-12-05 15:03:12 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 15:03:12 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='forest', Q1='forest', Q2='forest'
2025-12-05 15:03:12 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 's√¥ng'
2025-12-05 15:03:12 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-05 15:03:12 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'river'
2025-12-05 15:03:12 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 15:03:12 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='river', Q1='river', Q2='river'
2025-12-05 15:03:13 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-05 15:03:13 - app.services.method.ic_search - INFO - IC.json loaded: 647 entries
2025-12-05 15:03:14 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9438, 438:0.9438, 345:0.9438, 338:0.9438, 281:0.9438, 237:0.9438, 248:0.9438, 445:0.9438, 249:0.9438, 251:0.9438, 257:0.9438, 234:0.9438, 246:0.9438, 335:0.9438, 441:0.9438, 611:0.9438, 214:0.9438, 275:0.9438, 238:0.9438, 274:0.9438
2025-12-05 15:03:14 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9439, 438:0.9439, 345:0.9439, 338:0.9439, 281:0.9439, 237:0.9439, 248:0.9439, 445:0.9439, 249:0.9439, 251:0.9439, 257:0.9439, 234:0.9439, 246:0.9439, 335:0.9439, 441:0.9439, 611:0.9439, 214:0.9439, 275:0.9439, 238:0.9439, 274:0.9439
2025-12-05 15:03:14 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 15:03:14 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 15:03:14 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9439, 438:0.9439, 345:0.9439, 338:0.9439, 281:0.9439, 237:0.9439, 248:0.9439, 445:0.9439, 249:0.9439, 251:0.9439, 257:0.9439, 234:0.9439, 246:0.9439, 335:0.9439, 441:0.9439, 611:0.9439, 214:0.9439, 275:0.9439, 238:0.9439, 274:0.9439
2025-12-05 15:03:15 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:03:15 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '6e8dc093ca67a060156624157c89472c', 'date': 'Fri, 05 Dec 2025 15:03:14 GMT', 'x-envoy-upstream-service-time': '4', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '131c9629-3ba5-4bc7-9a89-c3594483a6df', 'message': 'Please wait and try again later'}
2025-12-05 15:03:15 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:03:15 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:03:15 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '7b87c4eb6d45672068ae7e2fcc11e204', 'date': 'Fri, 05 Dec 2025 15:03:14 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'a956db4e-7389-4bdd-9fac-5d17f77254d0', 'message': 'Please wait and try again later'}
2025-12-05 15:03:15 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:03:15 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:03:15 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'a4ddb9150a3ccc968cb5943be6fe32f5', 'date': 'Fri, 05 Dec 2025 15:03:15 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '5a21bc98-54cd-4216-8fe6-112ab55203da', 'message': 'Please wait and try again later'}
2025-12-05 15:03:15 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:03:15 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:03:15 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '45fdf04453e5c875fbf08d91950bf7f8', 'date': 'Fri, 05 Dec 2025 15:03:15 GMT', 'x-envoy-upstream-service-time': '5', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '1fd38f1e-e901-44c9-bf59-5396b6d3f980', 'message': 'Please wait and try again later'}
2025-12-05 15:03:15 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:03:15 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:03:15 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '3bc3e858f5610e18a44c5d86e332214b', 'date': 'Fri, 05 Dec 2025 15:03:15 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'c101d07a-ce00-4101-a1fa-57fb988d1f97', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:03:15 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:03:17 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:03:17 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 2/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '42731228bbf91a6932175980c8136eff', 'date': 'Fri, 05 Dec 2025 15:03:17 GMT', 'x-envoy-upstream-service-time': '4', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'e03127c1-76ad-44b1-912a-42bb5e1dea59', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:03:17 - app.services.method.ic_search - INFO - [IC] Retrying in 4s...
2025-12-05 15:03:18 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:03:18 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 2/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'd4adb2195522366eb0080409164b9af6', 'date': 'Fri, 05 Dec 2025 15:03:17 GMT', 'x-envoy-upstream-service-time': '4', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '4c6cdaf4-f717-4578-8b56-a9af288fc614', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:03:18 - app.services.method.ic_search - INFO - [IC] Retrying in 4s...
2025-12-05 15:03:18 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:03:18 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 2/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'e093018899c49e9a7787e268da2a97ec', 'date': 'Fri, 05 Dec 2025 15:03:18 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'a0501701-16e9-4975-a09b-b456d8b2ccb2', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:03:18 - app.services.method.ic_search - INFO - [IC] Retrying in 4s...
2025-12-05 15:03:18 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:03:18 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 2/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '547c5978674fe80063fcb893ef8d7af8', 'date': 'Fri, 05 Dec 2025 15:03:18 GMT', 'x-envoy-upstream-service-time': '4', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '3562e764-93e4-4404-a9f6-b8b14b9738b7', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:03:18 - app.services.method.ic_search - INFO - [IC] Retrying in 4s...
2025-12-05 15:03:18 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:03:18 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 2/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '07ee3326f98ece3b458d582625aa9590', 'date': 'Fri, 05 Dec 2025 15:03:18 GMT', 'x-envoy-upstream-service-time': '12', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '83c2f1a0-a8b9-40cd-aadf-6c88432f46f1', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:03:18 - app.services.method.ic_search - INFO - [IC] Retrying in 4s...
2025-12-05 15:03:22 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:03:22 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 3/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'e081bf32e600a2ab5e6896567ffc6afe', 'date': 'Fri, 05 Dec 2025 15:03:22 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'ca573109-b2bd-47a7-8dd1-f4fbb520fd18', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:03:22 - app.services.method.ic_search - ERROR - [IC] Cohere rate limit exceeded after 3 attempts, using Qdrant results as fallback
2025-12-05 15:03:22 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:03:22 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 3/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'b6de6def00970ecb45f7a386bf4d1e0f', 'date': 'Fri, 05 Dec 2025 15:03:22 GMT', 'x-envoy-upstream-service-time': '11', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '39b16c2b-10a2-40da-9d41-d8d01b4031ea', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:03:22 - app.services.method.ic_search - ERROR - [IC] Cohere rate limit exceeded after 3 attempts, using Qdrant results as fallback
2025-12-05 15:03:22 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:03:22 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 3/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '75d33c41efe472d475f63e8c13e2be28', 'date': 'Fri, 05 Dec 2025 15:03:22 GMT', 'x-envoy-upstream-service-time': '8', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '2a534e05-d5a1-416b-a63e-9d1d157c3792', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:03:22 - app.services.method.ic_search - ERROR - [IC] Cohere rate limit exceeded after 3 attempts, using Qdrant results as fallback
2025-12-05 15:03:22 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:03:22 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 3/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '69ef25d77f1fbf620f9b3b65f005e618', 'date': 'Fri, 05 Dec 2025 15:03:22 GMT', 'x-envoy-upstream-service-time': '2', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '43e7274d-bbeb-44aa-9786-d3c1877293b8', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:03:22 - app.services.method.ic_search - ERROR - [IC] Cohere rate limit exceeded after 3 attempts, using Qdrant results as fallback
2025-12-05 15:03:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 15:03:23 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:03:23 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 3/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'dcd11f84c1862f4a485e1c7943b1c142', 'date': 'Fri, 05 Dec 2025 15:03:23 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'd8875f01-48c6-4ce0-8ffa-f1df16746232', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:03:23 - app.services.method.ic_search - ERROR - [IC] Cohere rate limit exceeded after 3 attempts, using Qdrant results as fallback
2025-12-05 15:03:25 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 15:03:25 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 340:0.9209, 639:0.9209, 334:0.9209, 632:0.9209, 339:0.9209, 268:0.9209, 337:0.9209, 333:0.9209, 421:0.9209, 282:0.9209, 21:0.9209, 577:0.9209, 110:0.9209, 111:0.9209, 355:0.9209, 148:0.9209, 640:0.9209, 168:0.9209, 356:0.9209, 8:0.9209
2025-12-05 15:03:25 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 340:0.9209, 639:0.9209, 334:0.9209, 632:0.9209, 339:0.9209, 268:0.9209, 337:0.9209, 333:0.9209, 421:0.9209, 282:0.9209, 21:0.9209, 577:0.9209, 110:0.9209, 111:0.9209, 355:0.9209, 148:0.9209, 640:0.9209, 168:0.9209, 356:0.9209, 8:0.9209
2025-12-05 15:03:25 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 340:0.9209, 639:0.9209, 334:0.9209, 632:0.9209, 339:0.9209, 268:0.9209, 337:0.9209, 333:0.9209, 421:0.9209, 282:0.9209, 21:0.9209, 577:0.9209, 110:0.9209, 111:0.9209, 355:0.9209, 148:0.9209, 640:0.9209, 168:0.9209, 356:0.9209, 8:0.9209
2025-12-05 15:03:26 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:03:26 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'fd2e120fd6146e72953f6525230f3615', 'date': 'Fri, 05 Dec 2025 15:03:25 GMT', 'x-envoy-upstream-service-time': '4', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'bd445682-fe8d-49fa-a765-bc77dedc6bc1', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:03:26 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:03:26 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 205:0.9392, 238:0.9392, 441:0.9392, 192:0.9392, 197:0.9392, 237:0.9392, 214:0.9392, 346:0.9392, 336:0.9392, 222:0.9392, 229:0.9392, 234:0.9392, 246:0.9392, 335:0.9392, 209:0.9392, 256:0.9392, 251:0.9392, 275:0.9392, 278:0.9392, 274:0.9392
2025-12-05 15:03:26 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:03:26 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'a4d767349d164a33e2917f265f844980', 'date': 'Fri, 05 Dec 2025 15:03:26 GMT', 'x-envoy-upstream-service-time': '4', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '215fc944-bc90-4fc5-a31f-4eea27370585', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:03:26 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:03:26 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:03:26 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'aaaf7e4513f72a6e04c00ad9b03acc69', 'date': 'Fri, 05 Dec 2025 15:03:26 GMT', 'x-envoy-upstream-service-time': '2', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '4c6a1ba4-b9d4-49e7-9d20-7b584f235c29', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:03:26 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:03:26 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:03:26 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '8ea1332ae8468db344391d7ab0241c26', 'date': 'Fri, 05 Dec 2025 15:03:26 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'f5557a39-dc0f-4ec1-af76-c83116df0ee1', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:03:26 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:03:26 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:03:26 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'd413fb8a3685116750ab4b570665537a', 'date': 'Fri, 05 Dec 2025 15:03:26 GMT', 'x-envoy-upstream-service-time': '2', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '3fc08711-488f-4547-9f5d-587fe40080d4', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:03:26 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:03:28 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:03:28 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 52:0.6792, 381:0.6514, 149:0.3268, 144:0.0930, 382:0.0421, 124:0.0393, 87:0.0212, 565:0.0202, 417:0.0184, 446:0.0149, 35:0.0131, 221:0.0127, 618:0.0110, 284:0.0103, 240:0.0086, 437:0.0083, 287:0.0083, 385:0.0081, 419:0.0081, 418:0.0079
2025-12-05 15:03:28 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 15:03:29 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:03:29 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 608:0.0444, 610:0.0433, 499:0.0217, 442:0.0203, 287:0.0177, 286:0.0156, 614:0.0151, 618:0.0143, 500:0.0143, 480:0.0138, 93:0.0133, 497:0.0128, 465:0.0126, 223:0.0125, 622:0.0116, 270:0.0114, 319:0.0107, 229:0.0107, 193:0.0105, 634:0.0102
2025-12-05 15:03:29 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:03:29 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 608:0.0444, 610:0.0433, 499:0.0217, 442:0.0203, 287:0.0177, 286:0.0156, 614:0.0151, 618:0.0143, 500:0.0143, 480:0.0138, 93:0.0133, 497:0.0128, 465:0.0126, 223:0.0125, 622:0.0116, 270:0.0114, 319:0.0107, 229:0.0107, 193:0.0105, 634:0.0102
2025-12-05 15:03:29 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:03:29 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 565:0.2090, 547:0.0957, 244:0.0804, 385:0.0477, 124:0.0354, 229:0.0330, 35:0.0323, 208:0.0313, 87:0.0289, 416:0.0269, 195:0.0262, 200:0.0258, 246:0.0237, 327:0.0218, 287:0.0214, 610:0.0212, 247:0.0204, 284:0.0191, 609:0.0189, 614:0.0189
2025-12-05 15:03:29 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:03:29 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 608:0.0444, 610:0.0433, 499:0.0217, 442:0.0203, 287:0.0177, 286:0.0156, 614:0.0151, 618:0.0143, 500:0.0143, 480:0.0138, 93:0.0133, 497:0.0128, 465:0.0126, 223:0.0125, 622:0.0116, 270:0.0114, 319:0.0107, 229:0.0107, 193:0.0105, 634:0.0102
2025-12-05 15:03:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 15:03:31 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 205:0.9392, 238:0.9392, 441:0.9392, 192:0.9392, 197:0.9392, 237:0.9392, 214:0.9392, 346:0.9392, 336:0.9392, 222:0.9392, 229:0.9392, 234:0.9392, 246:0.9392, 335:0.9392, 209:0.9392, 256:0.9392, 251:0.9392, 275:0.9392, 278:0.9392, 274:0.9392
2025-12-05 15:03:31 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 205:0.9392, 238:0.9392, 441:0.9392, 192:0.9392, 197:0.9392, 237:0.9392, 214:0.9392, 346:0.9392, 336:0.9392, 222:0.9392, 229:0.9392, 234:0.9392, 246:0.9392, 335:0.9392, 209:0.9392, 256:0.9392, 251:0.9392, 275:0.9392, 278:0.9392, 274:0.9392
2025-12-05 15:03:32 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9438, 438:0.9438, 345:0.9438, 338:0.9438, 281:0.9438, 237:0.9438, 248:0.9438, 445:0.9438, 249:0.9438, 251:0.9438, 257:0.9438, 234:0.9438, 246:0.9438, 335:0.9438, 441:0.9438, 611:0.9438, 214:0.9438, 275:0.9438, 238:0.9438, 274:0.9438
2025-12-05 15:03:32 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9438, 438:0.9438, 345:0.9438, 338:0.9438, 281:0.9438, 237:0.9438, 248:0.9438, 445:0.9438, 249:0.9438, 251:0.9438, 257:0.9438, 234:0.9438, 246:0.9438, 335:0.9438, 441:0.9438, 611:0.9438, 214:0.9438, 275:0.9438, 238:0.9438, 274:0.9438
2025-12-05 15:03:32 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9438, 438:0.9438, 345:0.9438, 338:0.9438, 281:0.9438, 237:0.9438, 248:0.9438, 445:0.9438, 249:0.9438, 251:0.9438, 257:0.9438, 234:0.9438, 246:0.9438, 335:0.9438, 441:0.9438, 611:0.9438, 214:0.9438, 275:0.9438, 238:0.9438, 274:0.9438
2025-12-05 15:03:32 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:03:32 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 565:0.2090, 547:0.0957, 244:0.0804, 385:0.0477, 124:0.0354, 229:0.0330, 35:0.0323, 208:0.0313, 87:0.0289, 416:0.0269, 195:0.0262, 200:0.0258, 246:0.0237, 327:0.0218, 287:0.0214, 610:0.0212, 247:0.0204, 284:0.0191, 609:0.0189, 614:0.0189
2025-12-05 15:03:32 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:03:32 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 565:0.2090, 547:0.0957, 244:0.0804, 385:0.0477, 124:0.0354, 229:0.0330, 35:0.0323, 208:0.0313, 87:0.0289, 416:0.0269, 195:0.0262, 200:0.0258, 246:0.0237, 327:0.0218, 287:0.0214, 610:0.0212, 247:0.0204, 284:0.0191, 609:0.0189, 614:0.0189
2025-12-05 15:03:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 4 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 15:03:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 4 stages in 24247.31ms
2025-12-05 15:03:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-05 15:03:32 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 420 unique ids from 4 stages
2025-12-05 15:03:32 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 420 unique ids
2025-12-05 15:03:32 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:03:32 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 270:0.2050, 193:0.0818, 208:0.0313, 211:0.0284, 329:0.0283, 284:0.0222, 446:0.0208, 437:0.0206, 80:0.0198, 328:0.0196, 381:0.0195, 418:0.0193, 225:0.0191, 631:0.0183, 419:0.0172, 287:0.0170, 234:0.0166, 343:0.0155, 445:0.0147, 327:0.0144
2025-12-05 15:03:33 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:03:33 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '35d95de3a756556dbd8a3901d5f68441', 'date': 'Fri, 05 Dec 2025 15:03:32 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'f3262577-ecc0-4678-8d4b-1f301b97d812', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:03:33 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:03:33 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:03:33 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 270:0.2050, 193:0.0818, 208:0.0313, 211:0.0284, 329:0.0283, 284:0.0222, 446:0.0208, 437:0.0206, 80:0.0198, 328:0.0196, 381:0.0195, 418:0.0193, 225:0.0191, 631:0.0183, 419:0.0172, 287:0.0170, 234:0.0166, 343:0.0155, 445:0.0147, 327:0.0144
2025-12-05 15:03:35 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 15:03:35 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 15:03:35 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:03:35 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 2/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '33ff3c72aef0893335dd7d7eefa10045', 'date': 'Fri, 05 Dec 2025 15:03:35 GMT', 'x-envoy-upstream-service-time': '4', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '6a86842b-8901-4cd1-8295-f8f472f41ef9', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:03:35 - app.services.method.ic_search - INFO - [IC] Retrying in 4s...
2025-12-05 15:03:35 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 15:03:36 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:03:36 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 52:0.6792, 381:0.6514, 149:0.3268, 144:0.0930, 382:0.0421, 124:0.0393, 87:0.0212, 565:0.0202, 417:0.0184, 446:0.0149, 35:0.0131, 221:0.0127, 618:0.0110, 284:0.0103, 240:0.0086, 437:0.0083, 287:0.0083, 385:0.0081, 419:0.0081, 418:0.0079
2025-12-05 15:03:36 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:03:36 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'aaf5e509477aa13de1bed11b5da461e9', 'date': 'Fri, 05 Dec 2025 15:03:36 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '24a40168-fa43-45f9-9d26-e7a1119cd35c', 'message': 'Please wait and try again later'}
2025-12-05 15:03:36 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:03:36 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:03:36 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '10e9fc69f02e82a4527f3bc54e602fb3', 'date': 'Fri, 05 Dec 2025 15:03:36 GMT', 'x-envoy-upstream-service-time': '4', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '2633c348-fcea-4c89-80a1-77ac34e1fe2a', 'message': 'Please wait and try again later'}
2025-12-05 15:03:36 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:03:38 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:03:38 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 2/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'a79866c65a3939a3a8128c57baabf8e3', 'date': 'Fri, 05 Dec 2025 15:03:38 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'df409dd5-14d7-404e-b7e2-a9cb54580d19', 'message': 'Please wait and try again later'}
2025-12-05 15:03:38 - app.services.method.ic_search - INFO - [IC] Retrying in 4s...
2025-12-05 15:03:39 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:03:39 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 2/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'e34ca3ef1c28db25c3ff30b7f3a9e75e', 'date': 'Fri, 05 Dec 2025 15:03:38 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'd8aace6f-238f-46b9-9d33-dbb27dfd2e21', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:03:39 - app.services.method.ic_search - INFO - [IC] Retrying in 4s...
2025-12-05 15:03:40 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:03:40 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 3/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'b624e6bd555b2e10d9aac1a4e5d5919c', 'date': 'Fri, 05 Dec 2025 15:03:40 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '473aa934-45d4-461c-be57-1a9f9bf4ebd0', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:03:40 - app.services.method.ic_search - ERROR - [IC] Cohere rate limit exceeded after 3 attempts, using Qdrant results as fallback
2025-12-05 15:03:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 15:03:43 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:03:43 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 3/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'd7e1fb04a821c6dd9d6bbd9f658c8e2e', 'date': 'Fri, 05 Dec 2025 15:03:43 GMT', 'x-envoy-upstream-service-time': '2', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'f00dcf53-49b6-4d63-bf48-f628259a0ab6', 'message': 'Please wait and try again later'}
2025-12-05 15:03:43 - app.services.method.ic_search - ERROR - [IC] Cohere rate limit exceeded after 3 attempts, using Qdrant results as fallback
2025-12-05 15:03:43 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:03:43 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 3/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '2f37d598456b3364985e97e96a8c120a', 'date': 'Fri, 05 Dec 2025 15:03:43 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '62f822ff-2a9b-4f73-8eb3-84f237f92afd', 'message': 'Please wait and try again later'}
2025-12-05 15:03:43 - app.services.method.ic_search - ERROR - [IC] Cohere rate limit exceeded after 3 attempts, using Qdrant results as fallback
2025-12-05 15:03:43 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 15:03:43 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 32286.93ms
2025-12-05 15:03:43 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-05 15:03:43 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 226 unique ids from 2 stages
2025-12-05 15:03:43 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 226 unique ids
2025-12-05 15:03:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 4 stages
2025-12-05 15:03:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='r·ª´ng', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 15:03:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='s√¥ng', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 15:03:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='n√∫i', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 15:03:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3: id=4, query='bi·ªÉn', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 15:03:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'r·ª´ng'
2025-12-05 15:03:59 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-05 15:03:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'forest'
2025-12-05 15:04:00 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 15:04:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='forest', Q1='forest', Q2='forest'
2025-12-05 15:04:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 's√¥ng'
2025-12-05 15:04:00 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-05 15:04:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'river'
2025-12-05 15:04:00 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 15:04:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='river', Q1='river', Q2='river'
2025-12-05 15:04:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: 'n√∫i'
2025-12-05 15:04:01 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'n√∫i' ‚Üí 'mountain'
2025-12-05 15:04:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 translated: 'mountain'
2025-12-05 15:04:01 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 15:04:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 queries: Q0='mountain', Q1='mountain', Q2='mountain'
2025-12-05 15:04:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 4: 'bi·ªÉn'
2025-12-05 15:04:01 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'bi·ªÉn' ‚Üí 'sea'
2025-12-05 15:04:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 4 translated: 'sea'
2025-12-05 15:04:01 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 15:04:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 4 queries: Q0='sea', Q1='sea', Q2='sea'
2025-12-05 15:04:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-05 15:04:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='r·ª´ng ', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 15:04:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='s√¥ng', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 15:04:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'r·ª´ng '
2025-12-05 15:04:02 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng ' ‚Üí 'forest'
2025-12-05 15:04:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'forest'
2025-12-05 15:04:02 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 15:04:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='forest', Q1='forest', Q2='forest'
2025-12-05 15:04:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 's√¥ng'
2025-12-05 15:04:02 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-05 15:04:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'river'
2025-12-05 15:04:03 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 15:04:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='river', Q1='river', Q2='river'
2025-12-05 15:04:04 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9438, 438:0.9438, 345:0.9438, 338:0.9438, 281:0.9438, 237:0.9438, 248:0.9438, 445:0.9438, 249:0.9438, 251:0.9438, 257:0.9438, 234:0.9438, 246:0.9438, 335:0.9438, 441:0.9438, 611:0.9438, 214:0.9438, 275:0.9438, 238:0.9438, 274:0.9438
2025-12-05 15:04:05 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9439, 438:0.9439, 345:0.9439, 338:0.9439, 281:0.9439, 237:0.9439, 248:0.9439, 445:0.9439, 249:0.9439, 251:0.9439, 257:0.9439, 234:0.9439, 246:0.9439, 335:0.9439, 441:0.9439, 611:0.9439, 214:0.9439, 275:0.9439, 238:0.9439, 274:0.9439
2025-12-05 15:04:05 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 15:04:05 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9439, 438:0.9439, 345:0.9439, 338:0.9439, 281:0.9439, 237:0.9439, 248:0.9439, 445:0.9439, 249:0.9439, 251:0.9439, 257:0.9439, 234:0.9439, 246:0.9439, 335:0.9439, 441:0.9439, 611:0.9439, 214:0.9439, 275:0.9439, 238:0.9439, 274:0.9439
2025-12-05 15:04:05 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 15:04:05 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:04:05 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '141b801e1139819e4abf0e3027f73eba', 'date': 'Fri, 05 Dec 2025 15:04:05 GMT', 'x-envoy-upstream-service-time': '5', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'cc3156e4-b509-4d44-9864-608cb215a297', 'message': 'Please wait and try again later'}
2025-12-05 15:04:05 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:04:05 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:04:05 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '977774f945a250acf81409dca1d4321d', 'date': 'Fri, 05 Dec 2025 15:04:05 GMT', 'x-envoy-upstream-service-time': '5', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '3bd8d361-5cb4-4a62-bf17-fdfb00ff99e1', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:04:05 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:04:05 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:04:05 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '3934bfe501dafab13d48ba5e7351b03a', 'date': 'Fri, 05 Dec 2025 15:04:05 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'eb5c66b0-eab7-48ef-a066-ede86cc3b452', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:04:05 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:04:05 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:04:05 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '325f297c08e64e3556cc81f22d598e68', 'date': 'Fri, 05 Dec 2025 15:04:05 GMT', 'x-envoy-upstream-service-time': '4', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '58a1dacf-83c2-415b-b56e-c53cd66648ce', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:04:05 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:04:05 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:04:05 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'e0370af1e8fa1b54206d40a5039a32c3', 'date': 'Fri, 05 Dec 2025 15:04:05 GMT', 'x-envoy-upstream-service-time': '2', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'c3aa6dcb-4760-48ef-9656-529b205dbbb2', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:04:05 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:04:08 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:04:08 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 2/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'f3662dc3661fe9d8e5ce8cfca7ea3c61', 'date': 'Fri, 05 Dec 2025 15:04:07 GMT', 'x-envoy-upstream-service-time': '2', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'd83e5404-c6c2-4405-860d-8c0073dbf266', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:04:08 - app.services.method.ic_search - INFO - [IC] Retrying in 4s...
2025-12-05 15:04:08 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:04:08 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 2/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '5a7111c88ce3855aaa5d3165e79b82d6', 'date': 'Fri, 05 Dec 2025 15:04:08 GMT', 'x-envoy-upstream-service-time': '2', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'c5687c2f-7a0a-48e8-b7fe-d01ec74da866', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:04:08 - app.services.method.ic_search - INFO - [IC] Retrying in 4s...
2025-12-05 15:04:08 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:04:08 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 2/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'e346bcdbcbef976def7e9103721a27d9', 'date': 'Fri, 05 Dec 2025 15:04:08 GMT', 'x-envoy-upstream-service-time': '4', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '52d7b831-ab38-4f94-8614-0bda35e633ab', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:04:08 - app.services.method.ic_search - INFO - [IC] Retrying in 4s...
2025-12-05 15:04:08 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:04:08 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 2/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '977e22928328385ea2aea5eb04c90efe', 'date': 'Fri, 05 Dec 2025 15:04:08 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'c84f35c0-911e-4fde-a369-6aab1989c484', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:04:08 - app.services.method.ic_search - INFO - [IC] Retrying in 4s...
2025-12-05 15:04:08 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:04:08 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 2/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '58c0378437dcb21e209a6f5477464f5e', 'date': 'Fri, 05 Dec 2025 15:04:08 GMT', 'x-envoy-upstream-service-time': '4', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '050b9915-9e8d-4193-834a-120e80cacf95', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:04:08 - app.services.method.ic_search - INFO - [IC] Retrying in 4s...
2025-12-05 15:04:12 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:04:12 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 3/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '97226097f72603407a3484f339e322eb', 'date': 'Fri, 05 Dec 2025 15:04:12 GMT', 'x-envoy-upstream-service-time': '2', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '7e6b6e89-e057-488a-a5fe-e435f0cac24f', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:04:12 - app.services.method.ic_search - ERROR - [IC] Cohere rate limit exceeded after 3 attempts, using Qdrant results as fallback
2025-12-05 15:04:12 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:04:12 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 3/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '36c170668b17517f17563bb7df8fb18c', 'date': 'Fri, 05 Dec 2025 15:04:12 GMT', 'x-envoy-upstream-service-time': '4', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'bd564235-6fb9-4520-ab8d-6dab2921fa71', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:04:12 - app.services.method.ic_search - ERROR - [IC] Cohere rate limit exceeded after 3 attempts, using Qdrant results as fallback
2025-12-05 15:04:12 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:04:12 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 3/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '09e81c13d422b218423acd21383d804d', 'date': 'Fri, 05 Dec 2025 15:04:12 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '272c6245-4ed9-4986-a7c9-64ed91540546', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:04:12 - app.services.method.ic_search - ERROR - [IC] Cohere rate limit exceeded after 3 attempts, using Qdrant results as fallback
2025-12-05 15:04:12 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:04:12 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 3/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '925630ed51e4f729e88eba37bbb17293', 'date': 'Fri, 05 Dec 2025 15:04:12 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '5004e7d3-4588-4406-8d2a-71127c475019', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:04:12 - app.services.method.ic_search - ERROR - [IC] Cohere rate limit exceeded after 3 attempts, using Qdrant results as fallback
2025-12-05 15:04:13 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:04:13 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 3/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'eb6121291b0290c59087975259f9cf19', 'date': 'Fri, 05 Dec 2025 15:04:13 GMT', 'x-envoy-upstream-service-time': '2', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'e793937a-1d5c-4399-8ebb-a1158b1bce15', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:04:13 - app.services.method.ic_search - ERROR - [IC] Cohere rate limit exceeded after 3 attempts, using Qdrant results as fallback
2025-12-05 15:04:13 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 15:04:15 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 15:04:15 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 340:0.9209, 639:0.9209, 334:0.9209, 632:0.9209, 339:0.9209, 268:0.9209, 337:0.9209, 333:0.9209, 421:0.9209, 282:0.9209, 21:0.9209, 577:0.9209, 110:0.9209, 111:0.9209, 355:0.9209, 148:0.9209, 640:0.9209, 168:0.9209, 356:0.9209, 8:0.9209
2025-12-05 15:04:15 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 340:0.9209, 639:0.9209, 334:0.9209, 632:0.9209, 339:0.9209, 268:0.9209, 337:0.9209, 333:0.9209, 421:0.9209, 282:0.9209, 21:0.9209, 577:0.9209, 110:0.9209, 111:0.9209, 355:0.9209, 148:0.9209, 640:0.9209, 168:0.9209, 356:0.9209, 8:0.9209
2025-12-05 15:04:15 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 340:0.9209, 639:0.9209, 334:0.9209, 632:0.9209, 339:0.9209, 268:0.9209, 337:0.9209, 333:0.9209, 421:0.9209, 282:0.9209, 21:0.9209, 577:0.9209, 110:0.9209, 111:0.9209, 355:0.9209, 148:0.9209, 640:0.9209, 168:0.9209, 356:0.9209, 8:0.9209
2025-12-05 15:04:15 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:04:15 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '8f498e9e0e1ed990d16d1951f4045f63', 'date': 'Fri, 05 Dec 2025 15:04:15 GMT', 'x-envoy-upstream-service-time': '6', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '474a175f-8b47-478c-bc98-99982d40f396', 'message': 'Please wait and try again later'}
2025-12-05 15:04:15 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:04:16 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 205:0.9392, 238:0.9392, 441:0.9392, 192:0.9392, 197:0.9392, 237:0.9392, 214:0.9392, 346:0.9392, 336:0.9392, 222:0.9392, 229:0.9392, 234:0.9392, 246:0.9392, 335:0.9392, 209:0.9392, 256:0.9392, 251:0.9392, 275:0.9392, 278:0.9392, 274:0.9392
2025-12-05 15:04:16 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:04:16 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '489faacc4e8b4e87b4f43581ea8c9774', 'date': 'Fri, 05 Dec 2025 15:04:15 GMT', 'x-envoy-upstream-service-time': '5', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '6d7a7ec0-1a91-48b0-9841-f040f2ecb780', 'message': 'Please wait and try again later'}
2025-12-05 15:04:16 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:04:16 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:04:16 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'bd090e081cffce2df93182e531eff053', 'date': 'Fri, 05 Dec 2025 15:04:16 GMT', 'x-envoy-upstream-service-time': '6', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'd3d6ad68-0526-4273-ae2b-3c80ec53f4f0', 'message': 'Please wait and try again later'}
2025-12-05 15:04:16 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:04:16 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:04:16 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '862ece8baf56ea70993f37b5d0b4fd7f', 'date': 'Fri, 05 Dec 2025 15:04:16 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'c830eb15-c7ab-47fc-aa6f-b1b0fe58a685', 'message': 'Please wait and try again later'}
2025-12-05 15:04:16 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:04:16 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:04:16 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'ccebedd1d577d7a43508d4b1f1439778', 'date': 'Fri, 05 Dec 2025 15:04:16 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '1ec020c9-c7ec-42e3-8cc2-8b54856e71be', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:04:16 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:04:18 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:04:18 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 2/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'c200561cdbe101a7ca4a03f2ac9cebf4', 'date': 'Fri, 05 Dec 2025 15:04:18 GMT', 'x-envoy-upstream-service-time': '4', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '84ee262f-2aa0-4216-84f1-ee65510ff5d7', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:04:18 - app.services.method.ic_search - INFO - [IC] Retrying in 4s...
2025-12-05 15:04:18 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:04:18 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 2/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '081fad527807297af40f837fc2fbb349', 'date': 'Fri, 05 Dec 2025 15:04:18 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '54e898e2-4915-42e3-9e2e-e0eda5589c24', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:04:18 - app.services.method.ic_search - INFO - [IC] Retrying in 4s...
2025-12-05 15:04:18 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:04:18 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 2/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '0895fab3a4cc4669f9cae32060629199', 'date': 'Fri, 05 Dec 2025 15:04:18 GMT', 'x-envoy-upstream-service-time': '2', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'b941088c-d512-47d7-940e-e08832efea1d', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:04:18 - app.services.method.ic_search - INFO - [IC] Retrying in 4s...
2025-12-05 15:04:18 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:04:18 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 2/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '6b93973e703104bdf538b9680908412a', 'date': 'Fri, 05 Dec 2025 15:04:18 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '386fd0f8-fb4c-43aa-91df-d9f9cdfd651f', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:04:18 - app.services.method.ic_search - INFO - [IC] Retrying in 4s...
2025-12-05 15:04:18 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:04:19 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 2/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'b2e9311a9df3bbd857ab8eefa51c47fa', 'date': 'Fri, 05 Dec 2025 15:04:18 GMT', 'x-envoy-upstream-service-time': '2', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '6ed1b30d-df4d-438b-a960-1e02cebed2e7', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:04:19 - app.services.method.ic_search - INFO - [IC] Retrying in 4s...
2025-12-05 15:04:22 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:04:22 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 3/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'ad43a5171bd077e51774bca9f7558237', 'date': 'Fri, 05 Dec 2025 15:04:22 GMT', 'x-envoy-upstream-service-time': '4', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'e47d58da-7470-4646-bdf0-f7c97cece023', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:04:22 - app.services.method.ic_search - ERROR - [IC] Cohere rate limit exceeded after 3 attempts, using Qdrant results as fallback
2025-12-05 15:04:22 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:04:22 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 3/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'f012969f1d759338ac2819c4591635fa', 'date': 'Fri, 05 Dec 2025 15:04:22 GMT', 'x-envoy-upstream-service-time': '2', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '2d6217e1-f334-4dd2-9c35-f252f2ba72f1', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:04:22 - app.services.method.ic_search - ERROR - [IC] Cohere rate limit exceeded after 3 attempts, using Qdrant results as fallback
2025-12-05 15:04:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 15:04:23 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:04:23 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 3/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '9f0d4bcf5fa26b19f6c9bc61f815b3e1', 'date': 'Fri, 05 Dec 2025 15:04:23 GMT', 'x-envoy-upstream-service-time': '2', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '4b389662-5915-41ab-b150-47423aee59fc', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:04:23 - app.services.method.ic_search - ERROR - [IC] Cohere rate limit exceeded after 3 attempts, using Qdrant results as fallback
2025-12-05 15:04:23 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:04:23 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 3/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '9a6204bbc11e9562bbec5d471c96e5c5', 'date': 'Fri, 05 Dec 2025 15:04:23 GMT', 'x-envoy-upstream-service-time': '2', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '7a821fe4-eabb-49e3-8d62-91428b55f972', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:04:23 - app.services.method.ic_search - ERROR - [IC] Cohere rate limit exceeded after 3 attempts, using Qdrant results as fallback
2025-12-05 15:04:23 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:04:23 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 3/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '92d83a01cffc6ff64aa4d076bb66997a', 'date': 'Fri, 05 Dec 2025 15:04:23 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '535aa847-fb39-4d13-a76a-f574cf5ffb04', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:04:23 - app.services.method.ic_search - ERROR - [IC] Cohere rate limit exceeded after 3 attempts, using Qdrant results as fallback
2025-12-05 15:04:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 15:04:25 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 205:0.9392, 238:0.9392, 441:0.9392, 192:0.9392, 197:0.9392, 237:0.9392, 214:0.9392, 346:0.9392, 336:0.9392, 222:0.9392, 229:0.9392, 234:0.9392, 246:0.9392, 335:0.9392, 209:0.9392, 256:0.9392, 251:0.9392, 275:0.9392, 278:0.9392, 274:0.9392
2025-12-05 15:04:25 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 205:0.9392, 238:0.9392, 441:0.9392, 192:0.9392, 197:0.9392, 237:0.9392, 214:0.9392, 346:0.9392, 336:0.9392, 222:0.9392, 229:0.9392, 234:0.9392, 246:0.9392, 335:0.9392, 209:0.9392, 256:0.9392, 251:0.9392, 275:0.9392, 278:0.9392, 274:0.9392
2025-12-05 15:04:26 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9438, 438:0.9438, 345:0.9438, 338:0.9438, 281:0.9438, 237:0.9438, 248:0.9438, 445:0.9438, 249:0.9438, 251:0.9438, 257:0.9438, 234:0.9438, 246:0.9438, 335:0.9438, 441:0.9438, 611:0.9438, 214:0.9438, 275:0.9438, 238:0.9438, 274:0.9438
2025-12-05 15:04:26 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:04:26 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '6496310c37331940f29ca8ae607c47f9', 'date': 'Fri, 05 Dec 2025 15:04:26 GMT', 'x-envoy-upstream-service-time': '4', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '9eab8b04-3025-4c05-83d2-6a15da1188f5', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:04:26 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:04:26 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:04:26 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'a331b001cce09cea8a64e63bdc8cbaee', 'date': 'Fri, 05 Dec 2025 15:04:26 GMT', 'x-envoy-upstream-service-time': '2', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '2144b9c3-8222-4a4a-85cc-0913578767ae', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:04:26 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:04:26 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9438, 438:0.9438, 345:0.9438, 338:0.9438, 281:0.9438, 237:0.9438, 248:0.9438, 445:0.9438, 249:0.9438, 251:0.9438, 257:0.9438, 234:0.9438, 246:0.9438, 335:0.9438, 441:0.9438, 611:0.9438, 214:0.9438, 275:0.9438, 238:0.9438, 274:0.9438
2025-12-05 15:04:26 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:04:26 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '6deb01a47f76ee1d0df8e15c02bb62cf', 'date': 'Fri, 05 Dec 2025 15:04:26 GMT', 'x-envoy-upstream-service-time': '2', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '2cd2cf6c-7a57-42af-8f2c-c4c2def7c6b6', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:04:26 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:04:26 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9438, 438:0.9438, 345:0.9438, 338:0.9438, 281:0.9438, 237:0.9438, 248:0.9438, 445:0.9438, 249:0.9438, 251:0.9438, 257:0.9438, 234:0.9438, 246:0.9438, 335:0.9438, 441:0.9438, 611:0.9438, 214:0.9438, 275:0.9438, 238:0.9438, 274:0.9438
2025-12-05 15:04:27 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:04:27 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '415778c94f5917b62049f8112719dd47', 'date': 'Fri, 05 Dec 2025 15:04:27 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'a7835ff6-7908-47c3-a2ae-725833630190', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:04:27 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:04:27 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:04:27 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '4a85ea4545089d7ef5c5e350fb2928b3', 'date': 'Fri, 05 Dec 2025 15:04:27 GMT', 'x-envoy-upstream-service-time': '2', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '05abbbae-50dd-4d6e-9b96-8a9be44f19ce', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:04:27 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:04:28 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:04:28 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 565:0.2090, 547:0.0957, 244:0.0804, 385:0.0477, 124:0.0354, 229:0.0330, 35:0.0323, 208:0.0313, 87:0.0289, 416:0.0269, 195:0.0262, 200:0.0258, 246:0.0237, 327:0.0218, 287:0.0214, 610:0.0212, 247:0.0204, 284:0.0191, 609:0.0189, 614:0.0189
2025-12-05 15:04:29 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:04:29 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 565:0.2090, 547:0.0957, 244:0.0804, 385:0.0477, 124:0.0354, 229:0.0330, 35:0.0323, 208:0.0313, 87:0.0289, 416:0.0269, 195:0.0262, 200:0.0258, 246:0.0237, 327:0.0218, 287:0.0214, 610:0.0212, 247:0.0204, 284:0.0191, 609:0.0189, 614:0.0189
2025-12-05 15:04:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 4 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 15:04:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 4 stages in 29569.33ms
2025-12-05 15:04:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-05 15:04:29 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 402 unique ids from 4 stages
2025-12-05 15:04:29 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 402 unique ids
2025-12-05 15:04:29 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:04:29 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 270:0.2050, 193:0.0818, 208:0.0313, 211:0.0284, 329:0.0283, 284:0.0222, 446:0.0208, 437:0.0206, 80:0.0198, 328:0.0196, 381:0.0195, 418:0.0193, 225:0.0191, 631:0.0183, 419:0.0172, 287:0.0170, 234:0.0166, 343:0.0155, 445:0.0147, 327:0.0144
2025-12-05 15:04:29 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:04:29 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 270:0.2050, 193:0.0818, 208:0.0313, 211:0.0284, 329:0.0283, 284:0.0222, 446:0.0208, 437:0.0206, 80:0.0198, 328:0.0196, 381:0.0195, 418:0.0193, 225:0.0191, 631:0.0183, 419:0.0172, 287:0.0170, 234:0.0166, 343:0.0155, 445:0.0147, 327:0.0144
2025-12-05 15:04:29 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:04:30 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 270:0.2050, 193:0.0818, 208:0.0313, 211:0.0284, 329:0.0283, 284:0.0222, 446:0.0208, 437:0.0206, 80:0.0198, 328:0.0196, 381:0.0195, 418:0.0193, 225:0.0191, 631:0.0183, 419:0.0172, 287:0.0170, 234:0.0166, 343:0.0155, 445:0.0147, 327:0.0144
2025-12-05 15:04:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 15:04:31 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 15:04:32 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 15:04:32 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 15:04:32 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:04:32 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 52:0.6792, 381:0.6514, 149:0.3268, 144:0.0930, 382:0.0421, 124:0.0393, 87:0.0212, 565:0.0202, 417:0.0184, 446:0.0149, 35:0.0131, 221:0.0127, 618:0.0110, 284:0.0103, 240:0.0086, 437:0.0083, 287:0.0083, 385:0.0081, 419:0.0081, 418:0.0079
2025-12-05 15:04:32 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:04:32 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 52:0.6792, 381:0.6514, 149:0.3268, 144:0.0930, 382:0.0421, 124:0.0393, 87:0.0212, 565:0.0202, 417:0.0184, 446:0.0149, 35:0.0131, 221:0.0127, 618:0.0110, 284:0.0103, 240:0.0086, 437:0.0083, 287:0.0083, 385:0.0081, 419:0.0081, 418:0.0079
2025-12-05 15:04:32 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:04:32 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 52:0.6792, 381:0.6514, 149:0.3268, 144:0.0930, 382:0.0421, 124:0.0393, 87:0.0212, 565:0.0202, 417:0.0184, 446:0.0149, 35:0.0131, 221:0.0127, 618:0.0110, 284:0.0103, 240:0.0086, 437:0.0083, 287:0.0083, 385:0.0081, 419:0.0081, 418:0.0079
2025-12-05 15:04:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 15:04:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 30986.95ms
2025-12-05 15:04:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-05 15:04:32 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 302 unique ids from 2 stages
2025-12-05 15:04:32 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 302 unique ids
2025-12-05 15:05:22 - root - INFO - üõë Shutting down FastAPI application...
2025-12-05 15:05:29 - root - INFO - Mounted keyframe directory at /keyframes: /app/app/data/keyframe
2025-12-05 15:05:29 - root - INFO - üöÄ Starting FastAPI application...
2025-12-05 15:05:29 - root - INFO - Log directory: logs/
2025-12-05 15:05:29 - root - INFO - Search queries log: logs/search_queries.log
2025-12-05 15:05:29 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-05 15:05:29 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-05 15:05:29 - app.database.db - INFO -    Current submissions count: 2
2025-12-05 15:05:49 - root - INFO - üõë Shutting down FastAPI application...
2025-12-05 15:05:54 - root - INFO - Mounted keyframe directory at /keyframes: /app/app/data/keyframe
2025-12-05 15:05:54 - root - INFO - üöÄ Starting FastAPI application...
2025-12-05 15:05:54 - root - INFO - Log directory: logs/
2025-12-05 15:05:54 - root - INFO - Search queries log: logs/search_queries.log
2025-12-05 15:05:54 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-05 15:05:54 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-05 15:05:54 - app.database.db - INFO -    Current submissions count: 2
2025-12-05 15:08:33 - root - INFO - üõë Shutting down FastAPI application...
2025-12-05 15:09:26 - root - INFO - Mounted keyframe directory at /keyframes: /app/app/data/keyframe
2025-12-05 15:09:26 - root - INFO - üöÄ Starting FastAPI application...
2025-12-05 15:09:26 - root - INFO - Log directory: logs/
2025-12-05 15:09:26 - root - INFO - Search queries log: logs/search_queries.log
2025-12-05 15:09:26 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-05 15:09:26 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-05 15:09:26 - app.database.db - INFO -    Current submissions count: 2
2025-12-05 15:10:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 4 stages
2025-12-05 15:10:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='s√¥ng', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 15:10:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='r·ª´ng', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 15:10:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='n√∫i', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 15:10:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3: id=4, query='bi·ªÉn', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 15:10:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 's√¥ng'
2025-12-05 15:10:02 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-05 15:10:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'river'
2025-12-05 15:10:02 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 15:10:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='river', Q1='river', Q2='river'
2025-12-05 15:10:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'r·ª´ng'
2025-12-05 15:10:02 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-05 15:10:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'forest'
2025-12-05 15:10:03 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 15:10:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='forest', Q1='forest', Q2='forest'
2025-12-05 15:10:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: 'n√∫i'
2025-12-05 15:10:03 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'n√∫i' ‚Üí 'mountain'
2025-12-05 15:10:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 translated: 'mountain'
2025-12-05 15:10:03 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 15:10:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 queries: Q0='mountain', Q1='mountain', Q2='mountain'
2025-12-05 15:10:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 4: 'bi·ªÉn'
2025-12-05 15:10:03 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'bi·ªÉn' ‚Üí 'sea'
2025-12-05 15:10:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 4 translated: 'sea'
2025-12-05 15:10:03 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 15:10:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 4 queries: Q0='sea', Q1='sea', Q2='sea'
2025-12-05 15:10:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-05 15:10:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='s√¥ng ', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 15:10:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='r·ª´ng', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 15:10:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 's√¥ng '
2025-12-05 15:10:03 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-05 15:10:03 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-05 15:10:03 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-05 15:10:03 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-05 15:10:03 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-05 15:10:03 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-05 15:10:03 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-05 15:10:03 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-05 15:10:03 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-05 15:10:03 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-05 15:10:03 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-05 15:10:03 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-05 15:10:03 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng ' ‚Üí 'river'
2025-12-05 15:10:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'river'
2025-12-05 15:10:04 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 15:10:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='river', Q1='river', Q2='river'
2025-12-05 15:10:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'r·ª´ng'
2025-12-05 15:10:04 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-05 15:10:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'forest'
2025-12-05 15:10:04 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 15:10:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='forest', Q1='forest', Q2='forest'
2025-12-05 15:10:05 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-05 15:10:05 - app.services.method.ic_search - INFO - IC.json loaded: 647 entries
2025-12-05 15:10:06 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 340:0.9209, 639:0.9209, 334:0.9209, 632:0.9209, 339:0.9209, 268:0.9209, 337:0.9209, 333:0.9209, 421:0.9209, 282:0.9209, 21:0.9209, 577:0.9209, 110:0.9209, 111:0.9209, 355:0.9209, 148:0.9209, 640:0.9209, 168:0.9209, 356:0.9209, 8:0.9209
2025-12-05 15:10:07 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9439, 438:0.9439, 345:0.9439, 338:0.9439, 281:0.9439, 237:0.9439, 248:0.9439, 445:0.9439, 249:0.9439, 251:0.9439, 257:0.9439, 234:0.9439, 246:0.9439, 335:0.9439, 441:0.9439, 611:0.9439, 214:0.9439, 275:0.9439, 238:0.9439, 274:0.9439
2025-12-05 15:10:07 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 205:0.9392, 238:0.9392, 441:0.9392, 192:0.9392, 197:0.9392, 237:0.9392, 214:0.9392, 346:0.9392, 336:0.9392, 222:0.9392, 229:0.9392, 234:0.9392, 246:0.9392, 335:0.9392, 209:0.9392, 256:0.9392, 251:0.9392, 275:0.9392, 278:0.9392, 274:0.9392
2025-12-05 15:10:07 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9439, 438:0.9439, 345:0.9439, 338:0.9439, 281:0.9439, 237:0.9439, 248:0.9439, 445:0.9439, 249:0.9439, 251:0.9439, 257:0.9439, 234:0.9439, 246:0.9439, 335:0.9439, 441:0.9439, 611:0.9439, 214:0.9439, 275:0.9439, 238:0.9439, 274:0.9439
2025-12-05 15:10:07 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 205:0.9392, 238:0.9392, 441:0.9392, 192:0.9392, 197:0.9392, 237:0.9392, 214:0.9392, 346:0.9392, 336:0.9392, 222:0.9392, 229:0.9392, 234:0.9392, 246:0.9392, 335:0.9392, 209:0.9392, 256:0.9392, 251:0.9392, 275:0.9392, 278:0.9392, 274:0.9392
2025-12-05 15:10:07 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 205:0.9392, 238:0.9392, 441:0.9392, 192:0.9392, 197:0.9392, 237:0.9392, 214:0.9392, 346:0.9392, 336:0.9392, 222:0.9392, 229:0.9392, 234:0.9392, 246:0.9392, 335:0.9392, 209:0.9392, 256:0.9392, 251:0.9392, 275:0.9392, 278:0.9392, 274:0.9392
2025-12-05 15:10:07 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 340:0.9209, 639:0.9209, 334:0.9209, 632:0.9209, 339:0.9209, 268:0.9209, 337:0.9209, 333:0.9209, 421:0.9209, 282:0.9209, 21:0.9209, 577:0.9209, 110:0.9209, 111:0.9209, 355:0.9209, 148:0.9209, 640:0.9209, 168:0.9209, 356:0.9209, 8:0.9209
2025-12-05 15:10:07 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 340:0.9209, 639:0.9209, 334:0.9209, 632:0.9209, 339:0.9209, 268:0.9209, 337:0.9209, 333:0.9209, 421:0.9209, 282:0.9209, 21:0.9209, 577:0.9209, 110:0.9209, 111:0.9209, 355:0.9209, 148:0.9209, 640:0.9209, 168:0.9209, 356:0.9209, 8:0.9209
2025-12-05 15:10:07 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 15:10:07 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 15:10:07 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 15:10:07 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9439, 438:0.9439, 345:0.9439, 338:0.9439, 281:0.9439, 237:0.9439, 248:0.9439, 445:0.9439, 249:0.9439, 251:0.9439, 257:0.9439, 234:0.9439, 246:0.9439, 335:0.9439, 441:0.9439, 611:0.9439, 214:0.9439, 275:0.9439, 238:0.9439, 274:0.9439
2025-12-05 15:10:07 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9439, 438:0.9439, 345:0.9439, 338:0.9439, 281:0.9439, 237:0.9439, 248:0.9439, 445:0.9439, 249:0.9439, 251:0.9439, 257:0.9439, 234:0.9439, 246:0.9439, 335:0.9439, 441:0.9439, 611:0.9439, 214:0.9439, 275:0.9439, 238:0.9439, 274:0.9439
2025-12-05 15:10:07 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 15:10:07 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9439, 438:0.9439, 345:0.9439, 338:0.9439, 281:0.9439, 237:0.9439, 248:0.9439, 445:0.9439, 249:0.9439, 251:0.9439, 257:0.9439, 234:0.9439, 246:0.9439, 335:0.9439, 441:0.9439, 611:0.9439, 214:0.9439, 275:0.9439, 238:0.9439, 274:0.9439
2025-12-05 15:10:07 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9439, 438:0.9439, 345:0.9439, 338:0.9439, 281:0.9439, 237:0.9439, 248:0.9439, 445:0.9439, 249:0.9439, 251:0.9439, 257:0.9439, 234:0.9439, 246:0.9439, 335:0.9439, 441:0.9439, 611:0.9439, 214:0.9439, 275:0.9439, 238:0.9439, 274:0.9439
2025-12-05 15:10:07 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 15:10:07 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:10:07 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 565:0.2090, 547:0.0957, 244:0.0804, 385:0.0477, 124:0.0354, 229:0.0330, 35:0.0323, 208:0.0313, 87:0.0289, 416:0.0269, 195:0.0262, 200:0.0258, 246:0.0237, 327:0.0218, 287:0.0214, 610:0.0212, 247:0.0204, 284:0.0191, 609:0.0189, 614:0.0189
2025-12-05 15:10:07 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:10:07 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 608:0.0444, 610:0.0433, 499:0.0217, 442:0.0203, 287:0.0177, 286:0.0156, 614:0.0151, 618:0.0143, 500:0.0143, 480:0.0138, 93:0.0133, 497:0.0128, 465:0.0126, 223:0.0125, 622:0.0116, 270:0.0114, 319:0.0107, 229:0.0107, 193:0.0105, 634:0.0102
2025-12-05 15:10:07 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:10:07 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 608:0.0444, 610:0.0433, 499:0.0217, 442:0.0203, 287:0.0177, 286:0.0156, 614:0.0151, 618:0.0143, 500:0.0143, 480:0.0138, 93:0.0133, 497:0.0128, 465:0.0126, 223:0.0125, 622:0.0116, 270:0.0114, 319:0.0107, 229:0.0107, 193:0.0105, 634:0.0102
2025-12-05 15:10:07 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:10:07 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:10:07 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 565:0.2090, 547:0.0957, 244:0.0804, 385:0.0477, 124:0.0354, 229:0.0330, 35:0.0323, 208:0.0313, 87:0.0289, 416:0.0269, 195:0.0262, 200:0.0258, 246:0.0237, 327:0.0218, 287:0.0214, 610:0.0212, 247:0.0204, 284:0.0191, 609:0.0189, 614:0.0189
2025-12-05 15:10:07 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:10:07 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:10:07 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 608:0.0444, 610:0.0433, 499:0.0217, 442:0.0203, 287:0.0177, 286:0.0156, 614:0.0151, 618:0.0143, 500:0.0143, 480:0.0138, 93:0.0133, 497:0.0128, 465:0.0126, 223:0.0125, 622:0.0116, 270:0.0114, 319:0.0107, 229:0.0107, 193:0.0105, 634:0.0102
2025-12-05 15:10:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 15:10:08 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:10:08 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 52:0.6792, 381:0.6514, 149:0.3268, 144:0.0930, 382:0.0421, 124:0.0393, 87:0.0212, 565:0.0202, 417:0.0184, 446:0.0149, 35:0.0131, 221:0.0127, 618:0.0110, 284:0.0103, 240:0.0086, 437:0.0083, 287:0.0083, 385:0.0081, 419:0.0081, 418:0.0079
2025-12-05 15:10:08 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 270:0.2050, 193:0.0818, 208:0.0313, 211:0.0284, 329:0.0283, 284:0.0222, 446:0.0208, 437:0.0206, 80:0.0198, 328:0.0196, 381:0.0195, 418:0.0193, 225:0.0191, 631:0.0183, 419:0.0172, 287:0.0170, 234:0.0166, 343:0.0155, 445:0.0147, 327:0.0144
2025-12-05 15:10:08 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 565:0.2090, 547:0.0957, 244:0.0804, 385:0.0477, 124:0.0354, 229:0.0330, 35:0.0323, 208:0.0313, 87:0.0289, 416:0.0269, 195:0.0262, 200:0.0258, 246:0.0237, 327:0.0218, 287:0.0214, 610:0.0212, 247:0.0204, 284:0.0191, 609:0.0189, 614:0.0189
2025-12-05 15:10:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 4 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 15:10:08 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:10:08 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:10:08 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:10:08 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 270:0.2050, 193:0.0818, 208:0.0313, 211:0.0284, 329:0.0283, 284:0.0222, 446:0.0208, 437:0.0206, 80:0.0198, 328:0.0196, 381:0.0195, 418:0.0193, 225:0.0191, 631:0.0183, 419:0.0172, 287:0.0170, 234:0.0166, 343:0.0155, 445:0.0147, 327:0.0144
2025-12-05 15:10:08 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'b2d2c1bdcdd8dfd4e789107aeef624ec', 'date': 'Fri, 05 Dec 2025 15:10:08 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'db432354-7819-48e0-b13a-42f3425ce8c2', 'message': 'Please wait and try again later'}
2025-12-05 15:10:08 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:10:08 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:10:08 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 270:0.2050, 193:0.0818, 208:0.0313, 211:0.0284, 329:0.0283, 284:0.0222, 446:0.0208, 437:0.0206, 80:0.0198, 328:0.0196, 381:0.0195, 418:0.0193, 225:0.0191, 631:0.0183, 419:0.0172, 287:0.0170, 234:0.0166, 343:0.0155, 445:0.0147, 327:0.0144
2025-12-05 15:10:08 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:10:08 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '45841b9cda6857140c95927462d8f796', 'date': 'Fri, 05 Dec 2025 15:10:08 GMT', 'x-envoy-upstream-service-time': '4', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '90ec73b7-6d19-4321-9750-87ac612ce969', 'message': 'Please wait and try again later'}
2025-12-05 15:10:08 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:10:08 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '3d903bac99d0de083fccd4783189be0f', 'date': 'Fri, 05 Dec 2025 15:10:07 GMT', 'x-envoy-upstream-service-time': '4', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '7b3b08a7-f414-435a-bbb1-5b31f6b4a5fe', 'message': 'Please wait and try again later'}
2025-12-05 15:10:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 15:10:08 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:10:08 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '52766c04c08d3afe5e39613248fadfb4', 'date': 'Fri, 05 Dec 2025 15:10:07 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '43afcf3f-ac34-4966-b67b-808f980eb836', 'message': 'Please wait and try again later'}
2025-12-05 15:10:08 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:10:08 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:10:08 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:10:08 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '7e8a7b042f338ca7040b5df8242d873f', 'date': 'Fri, 05 Dec 2025 15:10:08 GMT', 'x-envoy-upstream-service-time': '4', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '42167a2c-3724-4109-9985-3a6fa5e6d5c3', 'message': 'Please wait and try again later'}
2025-12-05 15:10:08 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:10:08 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:10:08 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'f507205f89ae2df5d58e1b428e9b85f2', 'date': 'Fri, 05 Dec 2025 15:10:08 GMT', 'x-envoy-upstream-service-time': '6', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '54e434a2-e15c-4f57-b015-ee70453e662a', 'message': 'Please wait and try again later'}
2025-12-05 15:10:08 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:10:08 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:10:08 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '37212b5c6439fa7be3f4d64fee9c38a7', 'date': 'Fri, 05 Dec 2025 15:10:08 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '7e6513df-e2d1-4a93-9dcd-f4c9e794e3e2', 'message': 'Please wait and try again later'}
2025-12-05 15:10:08 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:10:08 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 15:10:09 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:10:09 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'e2c6cc89c738abe80aa86c6d871886fe', 'date': 'Fri, 05 Dec 2025 15:10:08 GMT', 'x-envoy-upstream-service-time': '4', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '9d7439bc-d200-401b-a5c9-c3088a5f4896', 'message': 'Please wait and try again later'}
2025-12-05 15:10:09 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:10:10 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:10:10 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 2/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '7774f1ed80181a4ed11805dc914c72c4', 'date': 'Fri, 05 Dec 2025 15:10:10 GMT', 'x-envoy-upstream-service-time': '4', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'b758814a-b102-43b1-90ba-bcd781dce5fa', 'message': 'Please wait and try again later'}
2025-12-05 15:10:10 - app.services.method.ic_search - INFO - [IC] Retrying in 4s...
2025-12-05 15:10:10 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:10:10 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 2/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'cc3b35d010bf4ecf4064d2cf7f21ac0d', 'date': 'Fri, 05 Dec 2025 15:10:10 GMT', 'x-envoy-upstream-service-time': '2', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'd29492f9-24bf-4771-82e3-8aaa6746cb83', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:10:10 - app.services.method.ic_search - INFO - [IC] Retrying in 4s...
2025-12-05 15:10:10 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:10:10 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 2/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '9c3604d5231abb936432dc15dae6add7', 'date': 'Fri, 05 Dec 2025 15:10:10 GMT', 'x-envoy-upstream-service-time': '2', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'f526e2cf-915c-4de1-9e9b-f067b4f7fbea', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:10:10 - app.services.method.ic_search - INFO - [IC] Retrying in 4s...
2025-12-05 15:10:10 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:10:10 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 2/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '2c1f61b584ba7779da6d91ed8905c8ae', 'date': 'Fri, 05 Dec 2025 15:10:10 GMT', 'x-envoy-upstream-service-time': '2', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '998d1c6c-1fa0-4baa-a144-b6a49761bd29', 'message': 'Please wait and try again later'}
2025-12-05 15:10:10 - app.services.method.ic_search - INFO - [IC] Retrying in 4s...
2025-12-05 15:10:11 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:10:11 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 2/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'cc25a58a641ca6f37b9831b186e4aad3', 'date': 'Fri, 05 Dec 2025 15:10:10 GMT', 'x-envoy-upstream-service-time': '4', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '4e6a72b2-324b-4cd6-8ebe-152b72e94072', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:10:11 - app.services.method.ic_search - INFO - [IC] Retrying in 4s...
2025-12-05 15:10:11 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:10:11 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 2/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'b18e8bc3febc512817d1bb4b81377f4b', 'date': 'Fri, 05 Dec 2025 15:10:10 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '39068920-e6be-44ed-8914-c0fdaca7fb63', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:10:11 - app.services.method.ic_search - INFO - [IC] Retrying in 4s...
2025-12-05 15:10:11 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:10:11 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 2/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'f202cb1d50c9febe80ecea9a3b75866f', 'date': 'Fri, 05 Dec 2025 15:10:10 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'c19ecddf-fbf2-4cd2-8105-ca16dca43bb2', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:10:11 - app.services.method.ic_search - INFO - [IC] Retrying in 4s...
2025-12-05 15:10:11 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:10:11 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 2/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'b1b04d2281e633bdd08a9f6a302998a6', 'date': 'Fri, 05 Dec 2025 15:10:11 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '92c5d8fd-b340-429b-815c-ce194ec0a5ce', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:10:11 - app.services.method.ic_search - INFO - [IC] Retrying in 4s...
2025-12-05 15:10:15 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:10:15 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 3/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '389ce8be79b5302f6bee4a9198b46746', 'date': 'Fri, 05 Dec 2025 15:10:14 GMT', 'x-envoy-upstream-service-time': '4', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'edcc54f3-fff4-4aed-b823-534f96cf9b5b', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:10:15 - app.services.method.ic_search - ERROR - [IC] Cohere rate limit exceeded after 3 attempts, using Qdrant results as fallback
2025-12-05 15:10:15 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:10:15 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 3/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'd3a973bf1e5b7e7fe07824260f006ee7', 'date': 'Fri, 05 Dec 2025 15:10:15 GMT', 'x-envoy-upstream-service-time': '4', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'b36164a5-ff47-4192-82f2-86b3261fef5c', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:10:15 - app.services.method.ic_search - ERROR - [IC] Cohere rate limit exceeded after 3 attempts, using Qdrant results as fallback
2025-12-05 15:10:15 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:10:15 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 3/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '5f7cdd5baa58331a94d8f37a56cb6e53', 'date': 'Fri, 05 Dec 2025 15:10:15 GMT', 'x-envoy-upstream-service-time': '2', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '0e79334a-a303-4ed7-9dea-49ca0be248bd', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:10:15 - app.services.method.ic_search - ERROR - [IC] Cohere rate limit exceeded after 3 attempts, using Qdrant results as fallback
2025-12-05 15:10:15 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:10:15 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 3/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '7d2d720647960caaf4fbf30d3543f922', 'date': 'Fri, 05 Dec 2025 15:10:15 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '021761b6-5ae6-4e02-a214-511e64c4527f', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:10:15 - app.services.method.ic_search - ERROR - [IC] Cohere rate limit exceeded after 3 attempts, using Qdrant results as fallback
2025-12-05 15:10:15 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:10:15 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 3/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '1e585f7afbff746c3c14078f2f104cdc', 'date': 'Fri, 05 Dec 2025 15:10:15 GMT', 'x-envoy-upstream-service-time': '2', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '308be2d5-4944-4ba4-aea9-09ffb0efafa0', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:10:15 - app.services.method.ic_search - ERROR - [IC] Cohere rate limit exceeded after 3 attempts, using Qdrant results as fallback
2025-12-05 15:10:15 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:10:15 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 3/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'a7164f96c0849f16b867fa30c487c83f', 'date': 'Fri, 05 Dec 2025 15:10:15 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '3ecee09f-9579-4d3d-92b8-a8322168cd85', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:10:15 - app.services.method.ic_search - ERROR - [IC] Cohere rate limit exceeded after 3 attempts, using Qdrant results as fallback
2025-12-05 15:10:15 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 15:10:15 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:10:15 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 3/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '0dcf64999c851d8b38eb2478d90920aa', 'date': 'Fri, 05 Dec 2025 15:10:15 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '4cf1ec3a-66cb-472c-9921-6f281e5d00fb', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:10:15 - app.services.method.ic_search - ERROR - [IC] Cohere rate limit exceeded after 3 attempts, using Qdrant results as fallback
2025-12-05 15:10:15 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 15:10:15 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 4 stages in 13899.37ms
2025-12-05 15:10:15 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-05 15:10:15 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 484 unique ids from 4 stages
2025-12-05 15:10:15 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 484 unique ids
2025-12-05 15:10:16 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:10:16 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 3/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '4498a6d032ba5c520fca4bd771fcde2b', 'date': 'Fri, 05 Dec 2025 15:10:16 GMT', 'x-envoy-upstream-service-time': '4', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '40c3d8c7-b2a9-4f4a-913f-6cc6c20b014b', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:10:16 - app.services.method.ic_search - ERROR - [IC] Cohere rate limit exceeded after 3 attempts, using Qdrant results as fallback
2025-12-05 15:10:16 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 15:10:16 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 12681.95ms
2025-12-05 15:10:16 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-05 15:10:16 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 226 unique ids from 2 stages
2025-12-05 15:10:16 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 226 unique ids
2025-12-05 15:11:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 4 stages
2025-12-05 15:11:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='s√¥ng', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 15:11:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='r·ª´ng', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 15:11:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='n√∫i', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 15:11:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3: id=4, query='bi·ªÉn', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 15:11:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 's√¥ng'
2025-12-05 15:11:04 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-05 15:11:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'river'
2025-12-05 15:11:05 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 15:11:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='river', Q1='river', Q2='river'
2025-12-05 15:11:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'r·ª´ng'
2025-12-05 15:11:05 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-05 15:11:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'forest'
2025-12-05 15:11:05 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 15:11:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='forest', Q1='forest', Q2='forest'
2025-12-05 15:11:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: 'n√∫i'
2025-12-05 15:11:05 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'n√∫i' ‚Üí 'mountain'
2025-12-05 15:11:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 translated: 'mountain'
2025-12-05 15:11:05 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 15:11:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 queries: Q0='mountain', Q1='mountain', Q2='mountain'
2025-12-05 15:11:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 4: 'bi·ªÉn'
2025-12-05 15:11:05 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'bi·ªÉn' ‚Üí 'sea'
2025-12-05 15:11:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 4 translated: 'sea'
2025-12-05 15:11:06 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 15:11:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 4 queries: Q0='sea', Q1='sea', Q2='sea'
2025-12-05 15:11:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-05 15:11:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='s√¥ng ', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 15:11:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='r·ª´ng', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 15:11:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 's√¥ng '
2025-12-05 15:11:06 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng ' ‚Üí 'river'
2025-12-05 15:11:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'river'
2025-12-05 15:11:06 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 15:11:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='river', Q1='river', Q2='river'
2025-12-05 15:11:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'r·ª´ng'
2025-12-05 15:11:06 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-05 15:11:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'forest'
2025-12-05 15:11:06 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 15:11:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='forest', Q1='forest', Q2='forest'
2025-12-05 15:11:09 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9438, 438:0.9438, 345:0.9438, 338:0.9438, 281:0.9438, 237:0.9438, 248:0.9438, 445:0.9438, 249:0.9438, 251:0.9438, 257:0.9438, 234:0.9438, 246:0.9438, 335:0.9438, 441:0.9438, 611:0.9438, 214:0.9438, 275:0.9438, 238:0.9438, 274:0.9438
2025-12-05 15:11:09 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9439, 438:0.9439, 345:0.9439, 338:0.9439, 281:0.9439, 237:0.9439, 248:0.9439, 445:0.9439, 249:0.9439, 251:0.9439, 257:0.9439, 234:0.9439, 246:0.9439, 335:0.9439, 441:0.9439, 611:0.9439, 214:0.9439, 275:0.9439, 238:0.9439, 274:0.9439
2025-12-05 15:11:09 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 15:11:09 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 205:0.9392, 238:0.9392, 441:0.9392, 192:0.9392, 197:0.9392, 237:0.9392, 214:0.9392, 346:0.9392, 336:0.9392, 222:0.9392, 229:0.9392, 234:0.9392, 246:0.9392, 335:0.9392, 209:0.9392, 256:0.9392, 251:0.9392, 275:0.9392, 278:0.9392, 274:0.9392
2025-12-05 15:11:09 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 205:0.9392, 238:0.9392, 441:0.9392, 192:0.9392, 197:0.9392, 237:0.9392, 214:0.9392, 346:0.9392, 336:0.9392, 222:0.9392, 229:0.9392, 234:0.9392, 246:0.9392, 335:0.9392, 209:0.9392, 256:0.9392, 251:0.9392, 275:0.9392, 278:0.9392, 274:0.9392
2025-12-05 15:11:09 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 340:0.9209, 639:0.9209, 334:0.9209, 632:0.9209, 339:0.9209, 268:0.9209, 337:0.9209, 333:0.9209, 421:0.9209, 282:0.9209, 21:0.9209, 577:0.9209, 110:0.9209, 111:0.9209, 355:0.9209, 148:0.9209, 640:0.9209, 168:0.9209, 356:0.9209, 8:0.9209
2025-12-05 15:11:09 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9439, 438:0.9439, 345:0.9439, 338:0.9439, 281:0.9439, 237:0.9439, 248:0.9439, 445:0.9439, 249:0.9439, 251:0.9439, 257:0.9439, 234:0.9439, 246:0.9439, 335:0.9439, 441:0.9439, 611:0.9439, 214:0.9439, 275:0.9439, 238:0.9439, 274:0.9439
2025-12-05 15:11:09 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 15:11:09 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 205:0.9392, 238:0.9392, 441:0.9392, 192:0.9392, 197:0.9392, 237:0.9392, 214:0.9392, 346:0.9392, 336:0.9392, 222:0.9392, 229:0.9392, 234:0.9392, 246:0.9392, 335:0.9392, 209:0.9392, 256:0.9392, 251:0.9392, 275:0.9392, 278:0.9392, 274:0.9392
2025-12-05 15:11:09 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 340:0.9209, 639:0.9209, 334:0.9209, 632:0.9209, 339:0.9209, 268:0.9209, 337:0.9209, 333:0.9209, 421:0.9209, 282:0.9209, 21:0.9209, 577:0.9209, 110:0.9209, 111:0.9209, 355:0.9209, 148:0.9209, 640:0.9209, 168:0.9209, 356:0.9209, 8:0.9209
2025-12-05 15:11:09 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 15:11:09 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:11:09 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 52:0.6792, 381:0.6514, 149:0.3268, 144:0.0930, 382:0.0421, 124:0.0393, 87:0.0212, 565:0.0202, 417:0.0184, 446:0.0149, 35:0.0131, 221:0.0127, 618:0.0110, 284:0.0103, 240:0.0086, 437:0.0083, 287:0.0083, 385:0.0081, 419:0.0081, 418:0.0079
2025-12-05 15:11:09 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 340:0.9209, 639:0.9209, 334:0.9209, 632:0.9209, 339:0.9209, 268:0.9209, 337:0.9209, 333:0.9209, 421:0.9209, 282:0.9209, 21:0.9209, 577:0.9209, 110:0.9209, 111:0.9209, 355:0.9209, 148:0.9209, 640:0.9209, 168:0.9209, 356:0.9209, 8:0.9209
2025-12-05 15:11:09 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:11:09 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 270:0.2050, 193:0.0818, 208:0.0313, 211:0.0284, 329:0.0283, 284:0.0222, 446:0.0208, 437:0.0206, 80:0.0198, 328:0.0196, 381:0.0195, 418:0.0193, 225:0.0191, 631:0.0183, 419:0.0172, 287:0.0170, 234:0.0166, 343:0.0155, 445:0.0147, 327:0.0144
2025-12-05 15:11:09 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:11:09 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 15:11:09 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 270:0.2050, 193:0.0818, 208:0.0313, 211:0.0284, 329:0.0283, 284:0.0222, 446:0.0208, 437:0.0206, 80:0.0198, 328:0.0196, 381:0.0195, 418:0.0193, 225:0.0191, 631:0.0183, 419:0.0172, 287:0.0170, 234:0.0166, 343:0.0155, 445:0.0147, 327:0.0144
2025-12-05 15:11:09 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 15:11:09 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9439, 438:0.9439, 345:0.9439, 338:0.9439, 281:0.9439, 237:0.9439, 248:0.9439, 445:0.9439, 249:0.9439, 251:0.9439, 257:0.9439, 234:0.9439, 246:0.9439, 335:0.9439, 441:0.9439, 611:0.9439, 214:0.9439, 275:0.9439, 238:0.9439, 274:0.9439
2025-12-05 15:11:09 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 15:11:09 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9439, 438:0.9439, 345:0.9439, 338:0.9439, 281:0.9439, 237:0.9439, 248:0.9439, 445:0.9439, 249:0.9439, 251:0.9439, 257:0.9439, 234:0.9439, 246:0.9439, 335:0.9439, 441:0.9439, 611:0.9439, 214:0.9439, 275:0.9439, 238:0.9439, 274:0.9439
2025-12-05 15:11:10 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:11:10 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 565:0.2090, 547:0.0957, 244:0.0804, 385:0.0477, 124:0.0354, 229:0.0330, 35:0.0323, 208:0.0313, 87:0.0289, 416:0.0269, 195:0.0262, 200:0.0258, 246:0.0237, 327:0.0218, 287:0.0214, 610:0.0212, 247:0.0204, 284:0.0191, 609:0.0189, 614:0.0189
2025-12-05 15:11:10 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:11:10 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9438, 438:0.9438, 345:0.9438, 338:0.9438, 281:0.9438, 237:0.9438, 248:0.9438, 445:0.9438, 249:0.9438, 251:0.9438, 257:0.9438, 234:0.9438, 246:0.9438, 335:0.9438, 441:0.9438, 611:0.9438, 214:0.9438, 275:0.9438, 238:0.9438, 274:0.9438
2025-12-05 15:11:10 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 565:0.2090, 547:0.0957, 244:0.0804, 385:0.0477, 124:0.0354, 229:0.0330, 35:0.0323, 208:0.0313, 87:0.0289, 416:0.0269, 195:0.0262, 200:0.0258, 246:0.0237, 327:0.0218, 287:0.0214, 610:0.0212, 247:0.0204, 284:0.0191, 609:0.0189, 614:0.0189
2025-12-05 15:11:10 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:11:10 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 608:0.0444, 610:0.0433, 499:0.0217, 442:0.0203, 287:0.0177, 286:0.0156, 614:0.0151, 618:0.0143, 500:0.0143, 480:0.0138, 93:0.0133, 497:0.0128, 465:0.0126, 223:0.0125, 622:0.0116, 270:0.0114, 319:0.0107, 229:0.0107, 193:0.0105, 634:0.0102
2025-12-05 15:11:10 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:11:10 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:10 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 608:0.0444, 610:0.0433, 499:0.0217, 442:0.0203, 287:0.0177, 286:0.0156, 614:0.0151, 618:0.0143, 500:0.0143, 480:0.0138, 93:0.0133, 497:0.0128, 465:0.0126, 223:0.0125, 622:0.0116, 270:0.0114, 319:0.0107, 229:0.0107, 193:0.0105, 634:0.0102
2025-12-05 15:11:10 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '2068a1a87e6eec834908c7537b8f5cb8', 'date': 'Fri, 05 Dec 2025 15:11:10 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'd7c7304c-832d-4313-8288-18b7557217c6', 'message': 'Please wait and try again later'}
2025-12-05 15:11:10 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:11:10 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:10 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'a55955f10c69845f439fcd76fa0b5bbe', 'date': 'Fri, 05 Dec 2025 15:11:10 GMT', 'x-envoy-upstream-service-time': '5', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '34a44e71-9b4b-430a-b4cf-b95c4fb2c849', 'message': 'Please wait and try again later'}
2025-12-05 15:11:10 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:11:10 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:10 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '50ddf0395bea8714a6fb84161e6adc64', 'date': 'Fri, 05 Dec 2025 15:11:10 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '4f6f3b8d-9d89-4216-8b3f-2ca4a95eade8', 'message': 'Please wait and try again later'}
2025-12-05 15:11:10 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:11:10 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:11:10 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:11:10 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:11:10 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 270:0.2050, 193:0.0818, 208:0.0313, 211:0.0284, 329:0.0283, 284:0.0222, 446:0.0208, 437:0.0206, 80:0.0198, 328:0.0196, 381:0.0195, 418:0.0193, 225:0.0191, 631:0.0183, 419:0.0172, 287:0.0170, 234:0.0166, 343:0.0155, 445:0.0147, 327:0.0144
2025-12-05 15:11:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 15:11:10 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 52:0.6792, 381:0.6514, 149:0.3268, 144:0.0930, 382:0.0421, 124:0.0393, 87:0.0212, 565:0.0202, 417:0.0184, 446:0.0149, 35:0.0131, 221:0.0127, 618:0.0110, 284:0.0103, 240:0.0086, 437:0.0083, 287:0.0083, 385:0.0081, 419:0.0081, 418:0.0079
2025-12-05 15:11:10 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:10 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 608:0.0444, 610:0.0433, 499:0.0217, 442:0.0203, 287:0.0177, 286:0.0156, 614:0.0151, 618:0.0143, 500:0.0143, 480:0.0138, 93:0.0133, 497:0.0128, 465:0.0126, 223:0.0125, 622:0.0116, 270:0.0114, 319:0.0107, 229:0.0107, 193:0.0105, 634:0.0102
2025-12-05 15:11:10 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 15:11:10 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'c79d5e4181722a2d263ba3eb488bb488', 'date': 'Fri, 05 Dec 2025 15:11:10 GMT', 'x-envoy-upstream-service-time': '5', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '636b4954-5c01-43f7-b2fd-63c0fe647caf', 'message': 'Please wait and try again later'}
2025-12-05 15:11:10 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'd80184534da47c3f401bb0c4ce9f93f4', 'date': 'Fri, 05 Dec 2025 15:11:10 GMT', 'x-envoy-upstream-service-time': '4', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '6fd2bd11-b000-409e-9595-23e4ca63b68d', 'message': 'Please wait and try again later'}
2025-12-05 15:11:10 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:11:10 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:11:10 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:10 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '05f7ef7a994f350e4f0be1859428afde', 'date': 'Fri, 05 Dec 2025 15:11:10 GMT', 'x-envoy-upstream-service-time': '4', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '788b1154-dffa-4242-ba1d-404eb46c4f8c', 'message': 'Please wait and try again later'}
2025-12-05 15:11:10 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:11:10 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:10 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'dc842cdcf542d0d266301e58f76b3be1', 'date': 'Fri, 05 Dec 2025 15:11:10 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'e783811b-13bb-41fa-8044-d4a111853d77', 'message': 'Please wait and try again later'}
2025-12-05 15:11:10 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:11:10 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:10 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '1dec034a2afb0383770a7b0824f1c596', 'date': 'Fri, 05 Dec 2025 15:11:10 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '08910814-0e0b-499a-bc15-47a553d261f3', 'message': 'Please wait and try again later'}
2025-12-05 15:11:10 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:11:12 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:12 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 2/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '2a699d58d5c30410ceca8a6191de7926', 'date': 'Fri, 05 Dec 2025 15:11:12 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '92236bb4-907c-4c78-844b-bbc7bd949508', 'message': 'Please wait and try again later'}
2025-12-05 15:11:12 - app.services.method.ic_search - INFO - [IC] Retrying in 4s...
2025-12-05 15:11:12 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:12 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 2/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '3bde6a9ed7f2115f1273d21991a83dd0', 'date': 'Fri, 05 Dec 2025 15:11:12 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'e4db7c19-b153-4645-a7ce-2dd558974f48', 'message': 'Please wait and try again later'}
2025-12-05 15:11:12 - app.services.method.ic_search - INFO - [IC] Retrying in 4s...
2025-12-05 15:11:12 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:12 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 2/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '7c0479ffa0637b31e4475e4562261840', 'date': 'Fri, 05 Dec 2025 15:11:12 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'afdf35ae-32d6-4b3c-9f22-e1b3f720a0d9', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:11:12 - app.services.method.ic_search - INFO - [IC] Retrying in 4s...
2025-12-05 15:11:12 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:12 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 2/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'c90ea4d5ff2b2233cce25631ca3af392', 'date': 'Fri, 05 Dec 2025 15:11:12 GMT', 'x-envoy-upstream-service-time': '4', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '2b5a806a-c66d-473e-8181-466b21bbdbd6', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:11:12 - app.services.method.ic_search - INFO - [IC] Retrying in 4s...
2025-12-05 15:11:13 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:13 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 2/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'b95f79b74be620e8d99fede89676b2d6', 'date': 'Fri, 05 Dec 2025 15:11:12 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '9a4430b7-f7cc-480a-9554-ac6083cb98c5', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:11:13 - app.services.method.ic_search - INFO - [IC] Retrying in 4s...
2025-12-05 15:11:13 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:13 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 2/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'dd65c3080dacb1ae69ca9211dcaa0fb9', 'date': 'Fri, 05 Dec 2025 15:11:13 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '526c2b10-20fb-4a54-8782-e71dbf282ace', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:11:13 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:13 - app.services.method.ic_search - INFO - [IC] Retrying in 4s...
2025-12-05 15:11:13 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 2/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '524cd9deed1831cb27e471aed41ddc35', 'date': 'Fri, 05 Dec 2025 15:11:13 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '94f0c9f7-cd28-4ebf-96b3-4108d804488c', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:11:13 - app.services.method.ic_search - INFO - [IC] Retrying in 4s...
2025-12-05 15:11:13 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:13 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 2/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '0f1265c672519fadbd6a9ef4ee1f3b0f', 'date': 'Fri, 05 Dec 2025 15:11:13 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'd1dd8195-38ce-4f76-a78b-d491a0f1be70', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:11:13 - app.services.method.ic_search - INFO - [IC] Retrying in 4s...
2025-12-05 15:11:17 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:17 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 3/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'd0fb5f7acf4fd1045d630a539f0d9ff5', 'date': 'Fri, 05 Dec 2025 15:11:17 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'ce1a15af-435b-4b70-a5c5-2fb2ec75eb44', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:11:17 - app.services.method.ic_search - ERROR - [IC] Cohere rate limit exceeded after 3 attempts, using Qdrant results as fallback
2025-12-05 15:11:17 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:17 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 3/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '4f9afc032e16243ad4842b5ec65fcf54', 'date': 'Fri, 05 Dec 2025 15:11:17 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '98364b77-c12d-4e91-93e5-88c814f95983', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:11:17 - app.services.method.ic_search - ERROR - [IC] Cohere rate limit exceeded after 3 attempts, using Qdrant results as fallback
2025-12-05 15:11:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 4 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 15:11:17 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:17 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 3/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '515a7ffcc22cfe727146a41da76b439b', 'date': 'Fri, 05 Dec 2025 15:11:17 GMT', 'x-envoy-upstream-service-time': '4', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '5b1a5d03-06d9-4003-80b5-cfacd5e964dc', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:11:17 - app.services.method.ic_search - ERROR - [IC] Cohere rate limit exceeded after 3 attempts, using Qdrant results as fallback
2025-12-05 15:11:17 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:17 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 3/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '3cb706443317eb0900c36c047c7a0421', 'date': 'Fri, 05 Dec 2025 15:11:17 GMT', 'x-envoy-upstream-service-time': '2', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'e3eb3e5e-4507-45ef-bc53-e9e73be98bbc', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:11:17 - app.services.method.ic_search - ERROR - [IC] Cohere rate limit exceeded after 3 attempts, using Qdrant results as fallback
2025-12-05 15:11:17 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:17 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 3/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '2a3154d8461c153d4b1787718099398c', 'date': 'Fri, 05 Dec 2025 15:11:17 GMT', 'x-envoy-upstream-service-time': '2', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'f1bce931-f555-476e-8b5b-09783d473908', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:11:17 - app.services.method.ic_search - ERROR - [IC] Cohere rate limit exceeded after 3 attempts, using Qdrant results as fallback
2025-12-05 15:11:17 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 15:11:17 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 3/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '5fcdb9133d04f2584aded68fa26873c7', 'date': 'Fri, 05 Dec 2025 15:11:17 GMT', 'x-envoy-upstream-service-time': '4', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '51634c5a-4eaa-4d2b-94a9-46c5380d9211', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:11:17 - app.services.method.ic_search - ERROR - [IC] Cohere rate limit exceeded after 3 attempts, using Qdrant results as fallback
2025-12-05 15:11:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 15:11:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 4 stages in 12936.41ms
2025-12-05 15:11:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-05 15:11:17 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 433 unique ids from 4 stages
2025-12-05 15:11:17 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 433 unique ids
2025-12-05 15:11:17 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:17 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 3/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'd8a75050242fac5906c97c252953c192', 'date': 'Fri, 05 Dec 2025 15:11:17 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '787a2145-b668-45ee-889a-f685403b49b2', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:11:17 - app.services.method.ic_search - ERROR - [IC] Cohere rate limit exceeded after 3 attempts, using Qdrant results as fallback
2025-12-05 15:11:17 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:17 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 3/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '1c8266de13f430c8d83ad207113f77c7', 'date': 'Fri, 05 Dec 2025 15:11:17 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'c0a2b2f2-78f4-4319-a6fd-91e7d293f40d', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:11:17 - app.services.method.ic_search - ERROR - [IC] Cohere rate limit exceeded after 3 attempts, using Qdrant results as fallback
2025-12-05 15:11:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 15:11:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 11867.61ms
2025-12-05 15:11:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-05 15:11:17 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 226 unique ids from 2 stages
2025-12-05 15:11:17 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 226 unique ids
2025-12-05 15:11:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 4 stages
2025-12-05 15:11:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='s√¥ng', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 15:11:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='r·ª´ng', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 15:11:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='n√∫i', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 15:11:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3: id=4, query='bi·ªÉn', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 15:11:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 's√¥ng'
2025-12-05 15:11:20 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-05 15:11:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'river'
2025-12-05 15:11:20 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 15:11:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='river', Q1='river', Q2='river'
2025-12-05 15:11:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'r·ª´ng'
2025-12-05 15:11:21 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-05 15:11:21 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'forest'
2025-12-05 15:11:21 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 15:11:21 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='forest', Q1='forest', Q2='forest'
2025-12-05 15:11:21 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: 'n√∫i'
2025-12-05 15:11:21 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'n√∫i' ‚Üí 'mountain'
2025-12-05 15:11:21 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 translated: 'mountain'
2025-12-05 15:11:21 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 15:11:21 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 queries: Q0='mountain', Q1='mountain', Q2='mountain'
2025-12-05 15:11:21 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 4: 'bi·ªÉn'
2025-12-05 15:11:21 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'bi·ªÉn' ‚Üí 'sea'
2025-12-05 15:11:21 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 4 translated: 'sea'
2025-12-05 15:11:22 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 15:11:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 4 queries: Q0='sea', Q1='sea', Q2='sea'
2025-12-05 15:11:24 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9438, 438:0.9438, 345:0.9438, 338:0.9438, 281:0.9438, 237:0.9438, 248:0.9438, 445:0.9438, 249:0.9438, 251:0.9438, 257:0.9438, 234:0.9438, 246:0.9438, 335:0.9438, 441:0.9438, 611:0.9438, 214:0.9438, 275:0.9438, 238:0.9438, 274:0.9438
2025-12-05 15:11:25 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 340:0.9209, 639:0.9209, 334:0.9209, 632:0.9209, 339:0.9209, 268:0.9209, 337:0.9209, 333:0.9209, 421:0.9209, 282:0.9209, 21:0.9209, 577:0.9209, 110:0.9209, 111:0.9209, 355:0.9209, 148:0.9209, 640:0.9209, 168:0.9209, 356:0.9209, 8:0.9209
2025-12-05 15:11:25 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 15:11:25 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:25 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'b0ecad9a41dd5b6c55246e06944f594c', 'date': 'Fri, 05 Dec 2025 15:11:25 GMT', 'x-envoy-upstream-service-time': '4', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'fd194577-7b84-42c6-a68a-9271f7998a25', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:11:25 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:11:25 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 340:0.9209, 639:0.9209, 334:0.9209, 632:0.9209, 339:0.9209, 268:0.9209, 337:0.9209, 333:0.9209, 421:0.9209, 282:0.9209, 21:0.9209, 577:0.9209, 110:0.9209, 111:0.9209, 355:0.9209, 148:0.9209, 640:0.9209, 168:0.9209, 356:0.9209, 8:0.9209
2025-12-05 15:11:25 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 205:0.9392, 238:0.9392, 441:0.9392, 192:0.9392, 197:0.9392, 237:0.9392, 214:0.9392, 346:0.9392, 336:0.9392, 222:0.9392, 229:0.9392, 234:0.9392, 246:0.9392, 335:0.9392, 209:0.9392, 256:0.9392, 251:0.9392, 275:0.9392, 278:0.9392, 274:0.9392
2025-12-05 15:11:25 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9409, 267:0.9409, 222:0.9409, 338:0.9409, 281:0.9409, 237:0.9409, 248:0.9409, 445:0.9409, 249:0.9409, 202:0.9409, 257:0.9409, 234:0.9409, 246:0.9409, 335:0.9409, 633:0.9409, 215:0.9409, 441:0.9409, 275:0.9409, 238:0.9409, 256:0.9409
2025-12-05 15:11:25 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 205:0.9392, 238:0.9392, 441:0.9392, 192:0.9392, 197:0.9392, 237:0.9392, 214:0.9392, 346:0.9392, 336:0.9392, 222:0.9392, 229:0.9392, 234:0.9392, 246:0.9392, 335:0.9392, 209:0.9392, 256:0.9392, 251:0.9392, 275:0.9392, 278:0.9392, 274:0.9392
2025-12-05 15:11:25 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 205:0.9392, 238:0.9392, 441:0.9392, 192:0.9392, 197:0.9392, 237:0.9392, 214:0.9392, 346:0.9392, 336:0.9392, 222:0.9392, 229:0.9392, 234:0.9392, 246:0.9392, 335:0.9392, 209:0.9392, 256:0.9392, 251:0.9392, 275:0.9392, 278:0.9392, 274:0.9392
2025-12-05 15:11:25 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9409, 267:0.9409, 222:0.9409, 338:0.9409, 281:0.9409, 237:0.9409, 248:0.9409, 445:0.9409, 249:0.9409, 202:0.9409, 257:0.9409, 234:0.9409, 246:0.9409, 335:0.9409, 633:0.9409, 215:0.9409, 441:0.9409, 275:0.9409, 238:0.9409, 256:0.9409
2025-12-05 15:11:25 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9439, 438:0.9439, 345:0.9439, 338:0.9439, 281:0.9439, 237:0.9439, 248:0.9439, 445:0.9439, 249:0.9439, 251:0.9439, 257:0.9439, 234:0.9439, 246:0.9439, 335:0.9439, 441:0.9439, 611:0.9439, 214:0.9439, 275:0.9439, 238:0.9439, 274:0.9439
2025-12-05 15:11:25 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 340:0.9209, 639:0.9209, 334:0.9209, 632:0.9209, 339:0.9209, 268:0.9209, 337:0.9209, 333:0.9209, 421:0.9209, 282:0.9209, 21:0.9209, 577:0.9209, 110:0.9209, 111:0.9209, 355:0.9209, 148:0.9209, 640:0.9209, 168:0.9209, 356:0.9209, 8:0.9209
2025-12-05 15:11:25 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9439, 438:0.9439, 345:0.9439, 338:0.9439, 281:0.9439, 237:0.9439, 248:0.9439, 445:0.9439, 249:0.9439, 251:0.9439, 257:0.9439, 234:0.9439, 246:0.9439, 335:0.9439, 441:0.9439, 611:0.9439, 214:0.9439, 275:0.9439, 238:0.9439, 274:0.9439
2025-12-05 15:11:25 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:25 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '1415584809028ee9f2da1d2a7f89371d', 'date': 'Fri, 05 Dec 2025 15:11:25 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'f6036b80-11ff-401b-8e52-319a7d084367', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:11:25 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:11:25 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:25 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'b843887de597d7997cd57c7857e8dde7', 'date': 'Fri, 05 Dec 2025 15:11:25 GMT', 'x-envoy-upstream-service-time': '4', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '93f9e3d0-046a-4e46-bb0e-62bad2011f05', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:11:25 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:11:25 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:25 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'c66ee61c7a317a99ca55104a14cd0a4f', 'date': 'Fri, 05 Dec 2025 15:11:25 GMT', 'x-envoy-upstream-service-time': '4', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'de39654a-2a9a-43b5-9846-f810ff41af84', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:11:25 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:11:25 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:25 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '3ccbf8e2a85e2833e1932d6c73971d71', 'date': 'Fri, 05 Dec 2025 15:11:25 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '583e6c42-4767-40b6-8edd-37e2298595ca', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:11:25 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:11:25 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:25 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '9d5e0d47b46e690116715b92229dd4db', 'date': 'Fri, 05 Dec 2025 15:11:25 GMT', 'x-envoy-upstream-service-time': '7', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '7e4e2ed1-8302-4ffb-aa1a-98b60e1b7f19', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:11:25 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:11:25 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:25 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '02813ebb98ba9f36700e65d661ff5b17', 'date': 'Fri, 05 Dec 2025 15:11:25 GMT', 'x-envoy-upstream-service-time': '2', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '5072a9ed-a6e1-4c02-a15d-0e1b16a96e26', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:11:25 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:11:26 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:26 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'dba235cd322606f47166e45938e1c230', 'date': 'Fri, 05 Dec 2025 15:11:25 GMT', 'x-envoy-upstream-service-time': '2', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '2685a948-2d4e-429e-ae99-dc4bcd9252d6', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:11:26 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:11:26 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:26 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'e07656e6b28eb566c6f667625d910718', 'date': 'Fri, 05 Dec 2025 15:11:26 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '209c853e-100a-4f78-878b-6441eb086c0d', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:11:26 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:11:26 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:26 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '7ec6ee9978fc4cc25292a804c44e1dc6', 'date': 'Fri, 05 Dec 2025 15:11:26 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '913afcf6-b1cb-4492-b18a-a39c5741d8cc', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:11:26 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:11:26 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:26 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '271b94889ea4c27c0934a2613b581022', 'date': 'Fri, 05 Dec 2025 15:11:26 GMT', 'x-envoy-upstream-service-time': '4', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'd087b745-e094-4087-867c-2b94953a08f5', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:11:26 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:26 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:11:26 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 1/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'e086f91e37531519a6ced53a6a0a3250', 'date': 'Fri, 05 Dec 2025 15:11:26 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '771bb0cd-8b1c-446d-b4ea-658dbd1b734a', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:11:26 - app.services.method.ic_search - INFO - [IC] Retrying in 2s...
2025-12-05 15:11:27 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:27 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 2/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '5b894ed78a50b23a7d723da37d6e96fc', 'date': 'Fri, 05 Dec 2025 15:11:27 GMT', 'x-envoy-upstream-service-time': '4', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '24b9016a-4de1-498c-ab31-1d3349ed3206', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:11:27 - app.services.method.ic_search - INFO - [IC] Retrying in 4s...
2025-12-05 15:11:28 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:28 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 2/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '0509904bd36ccfd8722bdf5c3fd7f6d6', 'date': 'Fri, 05 Dec 2025 15:11:28 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '19108613-7ec9-41e6-b797-a77780aa0ee9', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:11:28 - app.services.method.ic_search - INFO - [IC] Retrying in 4s...
2025-12-05 15:11:28 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:28 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 2/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'c2c69c7d4219057a607247a83cc42b17', 'date': 'Fri, 05 Dec 2025 15:11:28 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '2e1b820e-24dd-45a5-9602-62aedbbf9b34', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:11:28 - app.services.method.ic_search - INFO - [IC] Retrying in 4s...
2025-12-05 15:11:28 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:28 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 2/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '3acb2b110d2ba9023938a5cfe9d77d77', 'date': 'Fri, 05 Dec 2025 15:11:28 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '39e8ef35-6dcb-40eb-a1bf-6e051fc14f85', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:11:28 - app.services.method.ic_search - INFO - [IC] Retrying in 4s...
2025-12-05 15:11:28 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:28 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 2/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'd0af88ccafe3d25d45c02fb6cde65548', 'date': 'Fri, 05 Dec 2025 15:11:28 GMT', 'x-envoy-upstream-service-time': '4', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '7e05801a-c94e-4701-b309-82d0f528a73c', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:11:28 - app.services.method.ic_search - INFO - [IC] Retrying in 4s...
2025-12-05 15:11:28 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:28 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 2/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'dc258f767c4db6a7a4ce69a6c8a3334b', 'date': 'Fri, 05 Dec 2025 15:11:28 GMT', 'x-envoy-upstream-service-time': '4', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'f6011eb6-a0d6-44e2-9410-0f564de51467', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:11:28 - app.services.method.ic_search - INFO - [IC] Retrying in 4s...
2025-12-05 15:11:28 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:28 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 2/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '350cccd6e69f58f89aa8e8ecd5c7fe34', 'date': 'Fri, 05 Dec 2025 15:11:28 GMT', 'x-envoy-upstream-service-time': '2', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'f89e16f4-2302-4fa2-ad1e-0b9c343e7847', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:11:28 - app.services.method.ic_search - INFO - [IC] Retrying in 4s...
2025-12-05 15:11:28 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:28 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 2/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'd88fa55599565b294885b6205d9c44f1', 'date': 'Fri, 05 Dec 2025 15:11:28 GMT', 'x-envoy-upstream-service-time': '2', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'ed5e87b1-a0ae-485f-972b-94e8d6978a56', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:11:28 - app.services.method.ic_search - INFO - [IC] Retrying in 4s...
2025-12-05 15:11:28 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:28 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 2/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '38af219647ed7e4388136915d6e6e98b', 'date': 'Fri, 05 Dec 2025 15:11:28 GMT', 'x-envoy-upstream-service-time': '2', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'b9fe7e29-19a4-4936-ac9a-9d129743bf16', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:11:28 - app.services.method.ic_search - INFO - [IC] Retrying in 4s...
2025-12-05 15:11:28 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:28 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 2/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '0cc2032a9f41b0df411b37461b8e0375', 'date': 'Fri, 05 Dec 2025 15:11:28 GMT', 'x-envoy-upstream-service-time': '17', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '9b61d9f0-2220-43e5-b6ee-c7228a984923', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:11:28 - app.services.method.ic_search - INFO - [IC] Retrying in 4s...
2025-12-05 15:11:28 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:28 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 2/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'ee5ee44f42afc8805b931b20a19945e9', 'date': 'Fri, 05 Dec 2025 15:11:28 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '81eb0fd4-4989-42c5-87aa-5bc37c26d5ff', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:11:28 - app.services.method.ic_search - INFO - [IC] Retrying in 4s...
2025-12-05 15:11:28 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:28 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 2/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '04af9b88418ae7527164bf450835c2fb', 'date': 'Fri, 05 Dec 2025 15:11:28 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '1164c73a-db43-4eea-8bcd-9d237472623a', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:11:28 - app.services.method.ic_search - INFO - [IC] Retrying in 4s...
2025-12-05 15:11:32 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:32 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 3/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '1bcb18a93b9c0c3175b0cdeabe7e09a2', 'date': 'Fri, 05 Dec 2025 15:11:32 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'ab3aa318-e221-4471-8efb-71aca7b0ccfe', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:11:32 - app.services.method.ic_search - ERROR - [IC] Cohere rate limit exceeded after 3 attempts, using Qdrant results as fallback
2025-12-05 15:11:32 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:32 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 3/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'f83848e1adb8363fe05e0654588bd9a0', 'date': 'Fri, 05 Dec 2025 15:11:32 GMT', 'x-envoy-upstream-service-time': '2', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'bec67da9-2b0c-40b4-9efd-86263821f00d', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:11:32 - app.services.method.ic_search - ERROR - [IC] Cohere rate limit exceeded after 3 attempts, using Qdrant results as fallback
2025-12-05 15:11:32 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:32 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 3/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '145439d3eab51c8f33f45814b0b23095', 'date': 'Fri, 05 Dec 2025 15:11:32 GMT', 'x-envoy-upstream-service-time': '2', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '4cee001f-d62d-457c-8080-47a845d594c7', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:11:32 - app.services.method.ic_search - ERROR - [IC] Cohere rate limit exceeded after 3 attempts, using Qdrant results as fallback
2025-12-05 15:11:32 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:32 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 3/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'bc715496791b9d9af27e7ff306ca720a', 'date': 'Fri, 05 Dec 2025 15:11:32 GMT', 'x-envoy-upstream-service-time': '38', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'bc4c4fbe-efca-4efb-8aae-ccbb33cd906e', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:11:32 - app.services.method.ic_search - ERROR - [IC] Cohere rate limit exceeded after 3 attempts, using Qdrant results as fallback
2025-12-05 15:11:33 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:33 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 3/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '7736af03e442ffa21562a392e5e14d86', 'date': 'Fri, 05 Dec 2025 15:11:32 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '2b13859e-7bf4-4746-aefc-f1b3c608ac04', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:11:33 - app.services.method.ic_search - ERROR - [IC] Cohere rate limit exceeded after 3 attempts, using Qdrant results as fallback
2025-12-05 15:11:33 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:33 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 3/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'f7b950fed729103a01bd977ca91453b2', 'date': 'Fri, 05 Dec 2025 15:11:32 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '66d8c9d7-2cc4-42c3-91f9-a1e34cf13df6', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:11:33 - app.services.method.ic_search - ERROR - [IC] Cohere rate limit exceeded after 3 attempts, using Qdrant results as fallback
2025-12-05 15:11:33 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:33 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 3/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '3596712e04eb04cb230267a67e2f3ac2', 'date': 'Fri, 05 Dec 2025 15:11:32 GMT', 'x-envoy-upstream-service-time': '2', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '76abe600-6ee3-485c-855b-1ed1c675ad28', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:11:33 - app.services.method.ic_search - ERROR - [IC] Cohere rate limit exceeded after 3 attempts, using Qdrant results as fallback
2025-12-05 15:11:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 15:11:33 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:33 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 3/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'fd5564de19581bcac2b2d2d2673fa70e', 'date': 'Fri, 05 Dec 2025 15:11:33 GMT', 'x-envoy-upstream-service-time': '4', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '11d55a70-cf7c-45c2-b3d7-3346f0ba5078', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:11:33 - app.services.method.ic_search - ERROR - [IC] Cohere rate limit exceeded after 3 attempts, using Qdrant results as fallback
2025-12-05 15:11:33 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:33 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 3/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '9370470ce44510045961f82209d2fd99', 'date': 'Fri, 05 Dec 2025 15:11:33 GMT', 'x-envoy-upstream-service-time': '4', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '85fb9739-d0ea-4b0a-a80d-62cb99292b69', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:11:33 - app.services.method.ic_search - ERROR - [IC] Cohere rate limit exceeded after 3 attempts, using Qdrant results as fallback
2025-12-05 15:11:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 4 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 15:11:33 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:33 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 3/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '233db8669455bef920c6a48a4a21e32a', 'date': 'Fri, 05 Dec 2025 15:11:33 GMT', 'x-envoy-upstream-service-time': '5', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': 'fec93286-d9e9-418f-9517-a1f8de5094f3', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:11:33 - app.services.method.ic_search - ERROR - [IC] Cohere rate limit exceeded after 3 attempts, using Qdrant results as fallback
2025-12-05 15:11:33 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:33 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 3/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': 'f5c1dc644eb4d767b990966eccc8923a', 'date': 'Fri, 05 Dec 2025 15:11:33 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '91303357-d45a-4b25-80ae-e99f6ff0d720', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:11:33 - app.services.method.ic_search - ERROR - [IC] Cohere rate limit exceeded after 3 attempts, using Qdrant results as fallback
2025-12-05 15:11:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 15:11:33 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 429 Too Many Requests"
2025-12-05 15:11:33 - app.services.method.ic_search - WARNING - [IC] Cohere rate limit hit (attempt 3/3): headers: {'access-control-expose-headers': 'X-Debug-Trace-ID', 'cache-control': 'no-cache, no-store, no-transform, must-revalidate, private, max-age=0', 'content-encoding': 'gzip', 'content-type': 'application/json', 'expires': 'Thu, 01 Jan 1970 00:00:00 GMT', 'pragma': 'no-cache', 'vary': 'Origin,Accept-Encoding', 'x-accel-expires': '0', 'x-debug-trace-id': '89f42f433392bd7dddc1d8b5b8ac2545', 'date': 'Fri, 05 Dec 2025 15:11:33 GMT', 'x-envoy-upstream-service-time': '3', 'server': 'envoy', 'via': '1.1 google', 'alt-svc': 'h3=":443"; ma=2592000,h3-29=":443"; ma=2592000', 'transfer-encoding': 'chunked'}, status_code: 429, body: {'id': '4521c111-9633-42b0-b46a-91604a62c7cf', 'message': "You are using a Trial key, which is limited to 10 API calls / minute. You can continue to use the Trial key for free or upgrade to a Production key with higher rate limits at 'https://dashboard.cohere.com/api-keys'. Contact us on 'https://discord.gg/XW44jPfYJu' or email us at support@cohere.com with any questions"}
2025-12-05 15:11:33 - app.services.method.ic_search - ERROR - [IC] Cohere rate limit exceeded after 3 attempts, using Qdrant results as fallback
2025-12-05 15:11:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 15:11:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 4 stages in 13133.82ms
2025-12-05 15:11:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-05 15:11:33 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 401 unique ids from 4 stages
2025-12-05 15:11:33 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 401 unique ids
2025-12-05 15:11:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-05 15:11:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='s√¥ng ', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 15:11:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='r·ª´ng', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 15:11:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 's√¥ng '
2025-12-05 15:11:34 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng ' ‚Üí 'river'
2025-12-05 15:11:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'river'
2025-12-05 15:11:34 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 15:11:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='river', Q1='river', Q2='river'
2025-12-05 15:11:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'r·ª´ng'
2025-12-05 15:11:34 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-05 15:11:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'forest'
2025-12-05 15:11:34 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 15:11:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='forest', Q1='forest', Q2='forest'
2025-12-05 15:11:35 - app.services.method.bigg_client - ERROR - [BIGG] Batch request failed: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/bigg/text/batch (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)'))), falling back
2025-12-05 15:11:35 - app.services.method.bigg_client - ERROR - [BIGG] Batch request failed: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/bigg/text/batch (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)'))), falling back
2025-12-05 15:11:35 - app.services.method.bigg_client - ERROR - [BIGG] Batch request failed: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/bigg/text/batch (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)'))), falling back
2025-12-05 15:11:36 - app.services.method.bigg_client - ERROR - [BIGG] Batch request failed: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/bigg/text/batch (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)'))), falling back
2025-12-05 15:11:36 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/bigg/text (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))
2025-12-05 15:11:36 - app.routers.search_multistage - ERROR - [MULTISTAGE] Error: index 0 is out of bounds for axis 0 with size 0
Traceback (most recent call last):
  File "/app/app/routers/search_multistage.py", line 382, in search_multistage
    stage_results = await asyncio.gather(*stage_tasks)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/routers/search_multistage.py", line 273, in _process_single_stage
    (q0_per_method, q0_results), (q1_per_method, q1_results), (q2_per_method, q2_results) = await asyncio.gather(
                                                                                            ^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/routers/search_multistage.py", line 208, in _search_single_query_async
    return await loop.run_in_executor(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/routers/search_multistage.py", line 156, in _search_single_query_sync
    bigg_res = multimodel_search.search_single_model(query_text, "bigg", top_k * 2)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/services/method/multimodel_search.py", line 118, in search_single_model
    emb = self.bigg_client.extract_text_embedding(query)[0]
          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^
IndexError: index 0 is out of bounds for axis 0 with size 0
2025-12-05 15:11:36 - app.services.method.bigg_client - ERROR - [BIGG] Batch request failed: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/bigg/text/batch (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)'))), falling back
2025-12-05 15:11:36 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/bigg/text (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))
2025-12-05 15:11:36 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/bigg/text (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))
2025-12-05 15:11:36 - app.services.method.bigg_client - ERROR - [BIGG] Batch request failed: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/bigg/text/batch (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)'))), falling back
2025-12-05 15:11:36 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/bigg/text (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))
2025-12-05 15:11:36 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/bigg/text (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))
2025-12-05 15:11:36 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/bigg/text (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))
2025-12-05 15:11:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-05 15:11:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='s√¥ng ', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 15:11:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='r·ª´ng', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 15:11:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 's√¥ng '
2025-12-05 15:11:37 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng ' ‚Üí 'river'
2025-12-05 15:11:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'river'
2025-12-05 15:11:37 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 15:11:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='river', Q1='river', Q2='river'
2025-12-05 15:11:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'r·ª´ng'
2025-12-05 15:11:37 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-05 15:11:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'forest'
2025-12-05 15:11:38 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 15:11:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='forest', Q1='forest', Q2='forest'
2025-12-05 15:11:38 - app.services.method.clip_client - ERROR - [CLIP] Batch request failed: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/clip/text/batch (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)'))), falling back
2025-12-05 15:11:38 - app.services.method.clip_client - ERROR - [CLIP] Batch request failed: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/clip/text/batch (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)'))), falling back
2025-12-05 15:11:38 - app.services.method.clip_client - ERROR - [CLIP] Batch request failed: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/clip/text/batch (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)'))), falling back
2025-12-05 15:11:38 - app.services.method.clip_client - ERROR - [CLIP] Batch request failed: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/clip/text/batch (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)'))), falling back
2025-12-05 15:11:38 - app.services.method.clip_client - ERROR - [CLIP] Batch request failed: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/clip/text/batch (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)'))), falling back
2025-12-05 15:11:38 - app.services.method.clip_client - ERROR - [CLIP] Batch request failed: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/clip/text/batch (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)'))), falling back
2025-12-05 15:11:38 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/clip/text (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))
2025-12-05 15:11:38 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/clip/text (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))
2025-12-05 15:11:38 - app.routers.search_multistage - ERROR - [MULTISTAGE] Error: index 0 is out of bounds for axis 0 with size 0
Traceback (most recent call last):
  File "/app/app/routers/search_multistage.py", line 382, in search_multistage
    stage_results = await asyncio.gather(*stage_tasks)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/routers/search_multistage.py", line 273, in _process_single_stage
    (q0_per_method, q0_results), (q1_per_method, q1_results), (q2_per_method, q2_results) = await asyncio.gather(
                                                                                            ^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/routers/search_multistage.py", line 208, in _search_single_query_async
    return await loop.run_in_executor(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/routers/search_multistage.py", line 154, in _search_single_query_sync
    clip_res = multimodel_search.search_single_model(query_text, "clip", top_k * 2)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/services/method/multimodel_search.py", line 112, in search_single_model
    emb = self.clip_client.extract_text_embedding(query)[0]
          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^
IndexError: index 0 is out of bounds for axis 0 with size 0
2025-12-05 15:11:38 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/clip/text (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))
2025-12-05 15:11:38 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/clip/text (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))
2025-12-05 15:11:38 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/clip/text (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))
2025-12-05 15:11:38 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/clip/text (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))
2025-12-05 15:12:11 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-05 15:12:11 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='s√¥ng ', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 15:12:11 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='r·ª´ng', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 15:12:11 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 's√¥ng '
2025-12-05 15:12:11 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng ' ‚Üí 'river'
2025-12-05 15:12:11 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'river'
2025-12-05 15:12:12 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 15:12:12 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='river', Q1='river', Q2='river'
2025-12-05 15:12:12 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'r·ª´ng'
2025-12-05 15:12:12 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-05 15:12:12 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'forest'
2025-12-05 15:12:12 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 15:12:12 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='forest', Q1='forest', Q2='forest'
2025-12-05 15:12:12 - app.services.method.clip_client - ERROR - [CLIP] Batch request failed: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/clip/text/batch (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)'))), falling back
2025-12-05 15:12:12 - app.services.method.clip_client - ERROR - [CLIP] Batch request failed: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/clip/text/batch (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)'))), falling back
2025-12-05 15:12:12 - app.services.method.clip_client - ERROR - [CLIP] Batch request failed: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/clip/text/batch (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)'))), falling back
2025-12-05 15:12:12 - app.services.method.clip_client - ERROR - [CLIP] Batch request failed: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/clip/text/batch (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)'))), falling back
2025-12-05 15:12:12 - app.services.method.clip_client - ERROR - [CLIP] Batch request failed: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/clip/text/batch (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)'))), falling back
2025-12-05 15:12:12 - app.services.method.clip_client - ERROR - [CLIP] Batch request failed: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/clip/text/batch (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)'))), falling back
2025-12-05 15:12:12 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/clip/text (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))
2025-12-05 15:12:12 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/clip/text (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))
2025-12-05 15:12:12 - app.routers.search_multistage - ERROR - [MULTISTAGE] Error: index 0 is out of bounds for axis 0 with size 0
Traceback (most recent call last):
  File "/app/app/routers/search_multistage.py", line 382, in search_multistage
    stage_results = await asyncio.gather(*stage_tasks)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/routers/search_multistage.py", line 273, in _process_single_stage
    (q0_per_method, q0_results), (q1_per_method, q1_results), (q2_per_method, q2_results) = await asyncio.gather(
                                                                                            ^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/routers/search_multistage.py", line 208, in _search_single_query_async
    return await loop.run_in_executor(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/routers/search_multistage.py", line 154, in _search_single_query_sync
    clip_res = multimodel_search.search_single_model(query_text, "clip", top_k * 2)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/services/method/multimodel_search.py", line 112, in search_single_model
    emb = self.clip_client.extract_text_embedding(query)[0]
          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^
IndexError: index 0 is out of bounds for axis 0 with size 0
2025-12-05 15:12:12 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/clip/text (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))
2025-12-05 15:12:12 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/clip/text (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))
2025-12-05 15:12:12 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/clip/text (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))
2025-12-05 15:12:12 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/clip/text (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))
2025-12-05 15:12:14 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-05 15:12:14 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='s√¥ng ', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 15:12:14 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='r·ª´ng', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 15:12:14 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 's√¥ng '
2025-12-05 15:12:14 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng ' ‚Üí 'river'
2025-12-05 15:12:14 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'river'
2025-12-05 15:12:14 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 15:12:14 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='river', Q1='river', Q2='river'
2025-12-05 15:12:14 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'r·ª´ng'
2025-12-05 15:12:14 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-05 15:12:14 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'forest'
2025-12-05 15:12:14 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 15:12:14 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='forest', Q1='forest', Q2='forest'
2025-12-05 15:12:15 - app.services.method.clip_client - ERROR - [CLIP] Batch request failed: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/clip/text/batch (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)'))), falling back
2025-12-05 15:12:15 - app.services.method.clip_client - ERROR - [CLIP] Batch request failed: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/clip/text/batch (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)'))), falling back
2025-12-05 15:12:15 - app.services.method.clip_client - ERROR - [CLIP] Batch request failed: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/clip/text/batch (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)'))), falling back
2025-12-05 15:12:15 - app.services.method.clip_client - ERROR - [CLIP] Batch request failed: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/clip/text/batch (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)'))), falling back
2025-12-05 15:12:15 - app.services.method.clip_client - ERROR - [CLIP] Batch request failed: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/clip/text/batch (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)'))), falling back
2025-12-05 15:12:15 - app.services.method.clip_client - ERROR - [CLIP] Batch request failed: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/clip/text/batch (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)'))), falling back
2025-12-05 15:12:15 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/clip/text (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))
2025-12-05 15:12:15 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/clip/text (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))
2025-12-05 15:12:15 - app.routers.search_multistage - ERROR - [MULTISTAGE] Error: index 0 is out of bounds for axis 0 with size 0
Traceback (most recent call last):
  File "/app/app/routers/search_multistage.py", line 382, in search_multistage
    stage_results = await asyncio.gather(*stage_tasks)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/routers/search_multistage.py", line 273, in _process_single_stage
    (q0_per_method, q0_results), (q1_per_method, q1_results), (q2_per_method, q2_results) = await asyncio.gather(
                                                                                            ^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/routers/search_multistage.py", line 208, in _search_single_query_async
    return await loop.run_in_executor(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/routers/search_multistage.py", line 154, in _search_single_query_sync
    clip_res = multimodel_search.search_single_model(query_text, "clip", top_k * 2)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/services/method/multimodel_search.py", line 112, in search_single_model
    emb = self.clip_client.extract_text_embedding(query)[0]
          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^
IndexError: index 0 is out of bounds for axis 0 with size 0
2025-12-05 15:12:15 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/clip/text (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))
2025-12-05 15:12:15 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/clip/text (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))
2025-12-05 15:12:15 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/clip/text (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))
2025-12-05 15:12:15 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/clip/text (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))
2025-12-05 15:12:20 - root - INFO - üõë Shutting down FastAPI application...
2025-12-05 15:12:25 - root - INFO - Mounted keyframe directory at /keyframes: /app/app/data/keyframe
2025-12-05 15:12:25 - root - INFO - üöÄ Starting FastAPI application...
2025-12-05 15:12:25 - root - INFO - Log directory: logs/
2025-12-05 15:12:25 - root - INFO - Search queries log: logs/search_queries.log
2025-12-05 15:12:25 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-05 15:12:25 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-05 15:12:25 - app.database.db - INFO -    Current submissions count: 2
2025-12-05 15:12:25 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='s√¥ng', ocrText='', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-05 15:12:25 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: caption
2025-12-05 15:12:25 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-05 15:12:25 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal', 'ic'}, Total: 2
2025-12-05 15:12:25 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-05 15:12:25 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'river'
2025-12-05 15:12:25 - app.routers.search - INFO - [ENSEMBLE] Running multimodal search
2025-12-05 15:12:25 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-05 15:12:25 - app.services.method.clip_client - INFO - [CLIP] Batch endpoint not available: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/clip/text/batch (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))
2025-12-05 15:12:26 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: HTTPSConnectionPool(host='privative-startingly-justa.ngrok-free.dev', port=443): Max retries exceeded with url: /embedding/clip/text (Caused by SSLError(SSLEOFError(8, '[SSL: UNEXPECTED_EOF_WHILE_READING] EOF occurred in violation of protocol (_ssl.c:1016)')))
2025-12-05 15:12:49 - root - INFO - üõë Shutting down FastAPI application...
2025-12-05 15:12:53 - root - INFO - Mounted keyframe directory at /keyframes: /app/app/data/keyframe
2025-12-05 15:12:53 - root - INFO - üöÄ Starting FastAPI application...
2025-12-05 15:12:53 - root - INFO - Log directory: logs/
2025-12-05 15:12:53 - root - INFO - Search queries log: logs/search_queries.log
2025-12-05 15:12:53 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-05 15:12:53 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-05 15:12:53 - app.database.db - INFO -    Current submissions count: 2
2025-12-05 15:14:06 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='s√¥ng', ocrText='', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-05 15:14:06 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: caption
2025-12-05 15:14:06 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-05 15:14:06 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal', 'ic'}, Total: 2
2025-12-05 15:14:06 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-05 15:14:06 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'river'
2025-12-05 15:14:06 - app.routers.search - INFO - [ENSEMBLE] Running multimodal search
2025-12-05 15:14:06 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-05 15:14:08 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 377:1.0000, 383:0.8582, 14:0.8402, 376:0.8073, 51:0.7831, 52:0.7808, 60:0.7730, 55:0.7695, 48:0.7663, 49:0.7577
2025-12-05 15:14:08 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 377:1.0000, 52:0.9678, 384:0.9244, 14:0.9072, 51:0.8703, 98:0.8349, 376:0.8244, 50:0.8210, 132:0.8134, 383:0.8072
2025-12-05 15:14:08 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 383:1.0000, 59:0.9722, 377:0.9517, 382:0.9292, 381:0.9101, 384:0.8900, 376:0.8508, 56:0.8465, 60:0.8435, 55:0.8341
2025-12-05 15:14:08 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 377:1.0000, 14:0.8523, 52:0.8509, 383:0.8490, 384:0.8238, 376:0.7956, 51:0.7773, 60:0.7665, 59:0.7093, 47:0.7043
2025-12-05 15:14:08 - app.routers.search - INFO - [ENSEMBLE] Running IC search
2025-12-05 15:14:08 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-05 15:14:08 - app.services.method.ic_search - INFO - IC.json loaded: 647 entries
2025-12-05 15:14:09 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 15:14:10 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:14:10 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 52:0.6792, 381:0.6514, 149:0.3268, 144:0.0930, 382:0.0421, 124:0.0393, 87:0.0212, 565:0.0202, 417:0.0184, 446:0.0149, 35:0.0131, 221:0.0127, 618:0.0110, 284:0.0103, 240:0.0086, 437:0.0083, 287:0.0083, 385:0.0081, 419:0.0081, 418:0.0079
2025-12-05 15:14:10 - app.routers.search - INFO - [ENSEMBLE] IC top results (scaled): 52:1.0000, 381:0.9590, 149:0.4811, 144:0.1368, 382:0.0618, 124:0.0578, 87:0.0311, 565:0.0296, 417:0.0270, 446:0.0218
2025-12-05 15:14:10 - app.routers.search - INFO - [ENSEMBLE] Check: 2 enabled methods, per_method_results keys: ['multimodal', 'ic']
2025-12-05 15:14:10 - app.routers.search - INFO - [ENSEMBLE] Ensembling 2 methods: {'multimodal', 'ic'}
2025-12-05 15:14:10 - app.routers.search - INFO - [ENSEMBLE] Final ensemble top results: 377:0.5000, 52:0.5000, 381:0.4795, 14:0.4261, 52:0.4254, 383:0.4245, 384:0.4119, 376:0.3978, 51:0.3887, 60:0.3833, 59:0.3546, 47:0.3521, 381:0.3516, 129:0.3510, 49:0.3490, 55:0.3459, 382:0.3415, 98:0.3408, 380:0.3376, 50:0.3342
2025-12-05 15:14:10 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-05 15:16:19 - root - INFO - üõë Shutting down FastAPI application...
2025-12-05 15:16:23 - root - INFO - Mounted keyframe directory at /keyframes: /app/app/data/keyframe
2025-12-05 15:16:23 - root - INFO - üöÄ Starting FastAPI application...
2025-12-05 15:16:23 - root - INFO - Log directory: logs/
2025-12-05 15:16:23 - root - INFO - Search queries log: logs/search_queries.log
2025-12-05 15:16:23 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-05 15:16:23 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-05 15:16:23 - app.database.db - INFO -    Current submissions count: 2
2025-12-05 15:19:38 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='s√¥ng', ocrText='', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-05 15:19:38 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: caption
2025-12-05 15:19:38 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-05 15:19:38 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ic', 'multimodal'}, Total: 2
2025-12-05 15:19:38 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-05 15:19:38 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'river'
2025-12-05 15:19:38 - app.routers.search - INFO - [ENSEMBLE] Running multimodal search
2025-12-05 15:19:38 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-05 15:19:40 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 377:1.0000, 383:0.8582, 14:0.8402, 376:0.8073, 51:0.7831, 52:0.7808, 60:0.7730, 55:0.7695, 48:0.7663, 49:0.7577
2025-12-05 15:19:40 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 377:1.0000, 52:0.9678, 384:0.9244, 14:0.9072, 51:0.8703, 98:0.8349, 376:0.8244, 50:0.8210, 132:0.8134, 383:0.8072
2025-12-05 15:19:40 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 383:1.0000, 59:0.9722, 377:0.9517, 382:0.9292, 381:0.9101, 384:0.8900, 376:0.8508, 56:0.8465, 60:0.8435, 55:0.8341
2025-12-05 15:19:40 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 377:1.0000, 14:0.8523, 52:0.8509, 383:0.8490, 384:0.8238, 376:0.7956, 51:0.7773, 60:0.7665, 59:0.7093, 47:0.7043
2025-12-05 15:19:40 - app.routers.search - INFO - [ENSEMBLE] Running IC search
2025-12-05 15:19:40 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-05 15:19:40 - app.services.method.ic_search - INFO - IC.json loaded: 647 entries
2025-12-05 15:19:41 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 15:19:42 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:19:42 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 52:0.6792, 381:0.6514, 149:0.3268, 144:0.0930, 382:0.0421, 124:0.0393, 87:0.0212, 565:0.0202, 417:0.0184, 446:0.0149, 35:0.0131, 221:0.0127, 618:0.0110, 284:0.0103, 240:0.0086, 437:0.0083, 287:0.0083, 385:0.0081, 419:0.0081, 418:0.0079
2025-12-05 15:19:42 - app.routers.search - INFO - [ENSEMBLE] IC top results (scaled): 52:1.0000, 381:0.9590, 149:0.4811, 144:0.1368, 382:0.0618, 124:0.0578, 87:0.0311, 565:0.0296, 417:0.0270, 446:0.0218
2025-12-05 15:19:42 - app.routers.search - INFO - [ENSEMBLE] Check: 2 enabled methods, per_method_results keys: ['multimodal', 'ic']
2025-12-05 15:19:42 - app.routers.search - INFO - [ENSEMBLE] Ensembling 2 methods: {'ic', 'multimodal'}
2025-12-05 15:19:42 - app.routers.search - INFO - [ENSEMBLE] Final ensemble top results: 377:0.5000, 52:0.5000, 381:0.4795, 14:0.4261, 52:0.4254, 383:0.4245, 384:0.4119, 376:0.3978, 51:0.3887, 60:0.3833, 59:0.3546, 47:0.3521, 381:0.3516, 129:0.3510, 49:0.3490, 55:0.3459, 382:0.3415, 98:0.3408, 380:0.3376, 50:0.3342
2025-12-05 15:19:42 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-05 15:20:31 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='r·ª´ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-05 15:20:31 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-05 15:20:31 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-05 15:20:31 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-05 15:20:31 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-05 15:20:31 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'forest'
2025-12-05 15:20:31 - app.routers.search - INFO - [ENSEMBLE] Running multimodal search
2025-12-05 15:20:33 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 377:1.0000, 327:0.8852, 328:0.8522, 329:0.8479, 80:0.8410, 74:0.8375, 75:0.7882, 52:0.7132, 60:0.6900, 330:0.6866
2025-12-05 15:20:33 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 55:1.0000, 195:0.9311, 327:0.8759, 120:0.8582, 14:0.8368, 517:0.7754, 97:0.7709, 48:0.7700, 328:0.7619, 80:0.7483
2025-12-05 15:20:33 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 183:1.0000, 645:0.9129, 164:0.7097, 159:0.6736, 158:0.6580, 353:0.6559, 628:0.6274, 377:0.6081, 14:0.5736, 629:0.5654
2025-12-05 15:20:33 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 377:1.0000, 327:0.9276, 14:0.8588, 645:0.8560, 328:0.8439, 183:0.8054, 329:0.7747, 55:0.7743, 628:0.6647, 164:0.6343
2025-12-05 15:20:33 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-05 15:20:33 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-05 15:20:33 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-05 15:23:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-05 15:23:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='r·ª´ng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 15:23:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='n√∫i', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 15:23:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'r·ª´ng'
2025-12-05 15:23:22 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-05 15:23:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'forest'
2025-12-05 15:23:22 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 15:23:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='forest', Q1='forest', Q2='forest'
2025-12-05 15:23:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'n√∫i'
2025-12-05 15:23:23 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'n√∫i' ‚Üí 'mountain'
2025-12-05 15:23:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'mountain'
2025-12-05 15:23:23 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 15:23:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='mountain', Q1='mountain', Q2='mountain'
2025-12-05 15:23:24 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='s√¥ng', ocrText='', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-05 15:23:24 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: caption
2025-12-05 15:23:24 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-05 15:23:24 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ic', 'multimodal'}, Total: 2
2025-12-05 15:23:24 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-05 15:23:24 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'river'
2025-12-05 15:23:24 - app.routers.search - INFO - [ENSEMBLE] Running multimodal search
2025-12-05 15:23:26 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 377:1.0000, 383:0.8582, 14:0.8402, 376:0.8073, 51:0.7831, 52:0.7808, 60:0.7730, 55:0.7695, 48:0.7663, 49:0.7577
2025-12-05 15:23:26 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 377:1.0000, 52:0.9678, 384:0.9244, 14:0.9072, 51:0.8703, 98:0.8349, 376:0.8244, 50:0.8210, 132:0.8134, 383:0.8072
2025-12-05 15:23:26 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 383:1.0000, 59:0.9722, 377:0.9517, 382:0.9292, 381:0.9101, 384:0.8900, 376:0.8508, 56:0.8465, 60:0.8435, 55:0.8341
2025-12-05 15:23:26 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 377:1.0000, 14:0.8523, 52:0.8509, 383:0.8490, 384:0.8238, 376:0.7956, 51:0.7773, 60:0.7665, 59:0.7093, 47:0.7043
2025-12-05 15:23:26 - app.routers.search - INFO - [ENSEMBLE] Running IC search
2025-12-05 15:23:27 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 15:23:28 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:23:28 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 52:0.6792, 381:0.6514, 149:0.3268, 144:0.0930, 382:0.0421, 124:0.0393, 87:0.0212, 565:0.0202, 417:0.0184, 446:0.0149, 35:0.0131, 221:0.0127, 618:0.0110, 284:0.0103, 240:0.0086, 437:0.0083, 287:0.0083, 385:0.0081, 419:0.0081, 418:0.0079
2025-12-05 15:23:28 - app.routers.search - INFO - [ENSEMBLE] IC top results (scaled): 52:1.0000, 381:0.9590, 149:0.4811, 144:0.1368, 382:0.0618, 124:0.0578, 87:0.0311, 565:0.0296, 417:0.0270, 446:0.0218
2025-12-05 15:23:28 - app.routers.search - INFO - [ENSEMBLE] Check: 2 enabled methods, per_method_results keys: ['multimodal', 'ic']
2025-12-05 15:23:28 - app.routers.search - INFO - [ENSEMBLE] Ensembling 2 methods: {'ic', 'multimodal'}
2025-12-05 15:23:28 - app.routers.search - INFO - [ENSEMBLE] Final ensemble top results: 377:0.5000, 52:0.5000, 381:0.4795, 14:0.4261, 52:0.4254, 383:0.4245, 384:0.4119, 376:0.3978, 51:0.3887, 60:0.3833, 59:0.3546, 47:0.3521, 381:0.3516, 129:0.3510, 49:0.3490, 55:0.3459, 382:0.3415, 98:0.3408, 380:0.3376, 50:0.3342
2025-12-05 15:23:28 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-05 15:23:28 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 15:23:28 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 15:23:28 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 6244.80ms
2025-12-05 15:23:28 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-05 15:23:28 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 293 unique ids from 2 stages
2025-12-05 15:23:28 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 293 unique ids
2025-12-05 15:23:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-05 15:23:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='s√¥ng', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 15:23:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 15:23:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 's√¥ng'
2025-12-05 15:23:29 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-05 15:23:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'river'
2025-12-05 15:23:29 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 15:23:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='river', Q1='river', Q2='river'
2025-12-05 15:23:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-05 15:23:29 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-05 15:23:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-05 15:23:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='r·ª´ng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 15:23:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='n√∫i', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 15:23:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'r·ª´ng'
2025-12-05 15:23:30 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-05 15:23:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'forest'
2025-12-05 15:23:31 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 15:23:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='forest', Q1='forest', Q2='forest'
2025-12-05 15:23:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'n√∫i'
2025-12-05 15:23:31 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'n√∫i' ‚Üí 'mountain'
2025-12-05 15:23:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'mountain'
2025-12-05 15:23:31 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 15:23:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='mountain', Q1='mountain', Q2='mountain'
2025-12-05 15:23:32 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 15:23:32 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 15:23:32 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 15:23:33 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:23:33 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 52:0.6792, 381:0.6514, 149:0.3268, 144:0.0930, 382:0.0421, 124:0.0393, 87:0.0212, 565:0.0202, 417:0.0184, 446:0.0149, 35:0.0131, 221:0.0127, 618:0.0110, 284:0.0103, 240:0.0086, 437:0.0083, 287:0.0083, 385:0.0081, 419:0.0081, 418:0.0079
2025-12-05 15:23:33 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:23:33 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:23:33 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 52:0.6792, 381:0.6514, 149:0.3268, 144:0.0930, 382:0.0421, 124:0.0393, 87:0.0212, 565:0.0202, 417:0.0184, 446:0.0149, 35:0.0131, 221:0.0127, 618:0.0110, 284:0.0103, 240:0.0086, 437:0.0083, 287:0.0083, 385:0.0081, 419:0.0081, 418:0.0079
2025-12-05 15:23:33 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 52:0.6792, 381:0.6514, 149:0.3268, 144:0.0930, 382:0.0421, 124:0.0393, 87:0.0212, 565:0.0202, 417:0.0184, 446:0.0149, 35:0.0131, 221:0.0127, 618:0.0110, 284:0.0103, 240:0.0086, 437:0.0083, 287:0.0083, 385:0.0081, 419:0.0081, 418:0.0079
2025-12-05 15:23:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 15:23:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 4639.09ms
2025-12-05 15:23:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-05 15:23:33 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-05 15:23:33 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-05 15:23:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 15:23:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 15:23:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3140.44ms
2025-12-05 15:23:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-05 15:23:33 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 2 stages
2025-12-05 15:23:33 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 1 videos with results
2025-12-05 15:23:33 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 1 videos with results
2025-12-05 15:23:33 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 1 common videos across all stages
2025-12-05 15:23:33 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 200 valid tuples
2025-12-05 15:23:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 200 valid tuples
2025-12-05 15:24:43 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-05 15:24:43 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='r·ª´ng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 15:24:43 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='n√∫i', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 15:24:43 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'r·ª´ng'
2025-12-05 15:24:44 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-05 15:24:44 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'forest'
2025-12-05 15:24:44 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 15:24:44 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='forest', Q1='forest', Q2='forest'
2025-12-05 15:24:44 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'n√∫i'
2025-12-05 15:24:44 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'n√∫i' ‚Üí 'mountain'
2025-12-05 15:24:44 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'mountain'
2025-12-05 15:24:45 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 15:24:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='mountain', Q1='mountain', Q2='mountain'
2025-12-05 15:24:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 15:24:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 15:24:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3514.50ms
2025-12-05 15:24:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-05 15:24:47 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 293 unique ids from 2 stages
2025-12-05 15:24:47 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 293 unique ids
2025-12-05 15:25:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-05 15:25:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='r·ª´ng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 15:25:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='n√∫i', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 15:25:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'r·ª´ng'
2025-12-05 15:25:24 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-05 15:25:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'forest'
2025-12-05 15:25:24 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 15:25:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='forest', Q1='forest', Q2='forest'
2025-12-05 15:25:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'n√∫i'
2025-12-05 15:25:24 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'n√∫i' ‚Üí 'mountain'
2025-12-05 15:25:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'mountain'
2025-12-05 15:25:25 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 15:25:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='mountain', Q1='mountain', Q2='mountain'
2025-12-05 15:25:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 15:25:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 15:25:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3470.57ms
2025-12-05 15:25:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-05 15:25:27 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 2 stages
2025-12-05 15:25:27 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 1 videos with results
2025-12-05 15:25:27 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 1 videos with results
2025-12-05 15:25:27 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 1 common videos across all stages
2025-12-05 15:25:27 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 200 valid tuples
2025-12-05 15:25:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 200 valid tuples
2025-12-05 15:26:19 - root - INFO - üõë Shutting down FastAPI application...
2025-12-05 15:26:26 - root - INFO - Mounted keyframe directory at /keyframes: /app/app/data/keyframe
2025-12-05 15:26:26 - root - INFO - üöÄ Starting FastAPI application...
2025-12-05 15:26:26 - root - INFO - Log directory: logs/
2025-12-05 15:26:26 - root - INFO - Search queries log: logs/search_queries.log
2025-12-05 15:26:26 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-05 15:26:26 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-05 15:26:26 - app.database.db - INFO -    Current submissions count: 2
2025-12-05 15:26:31 - root - INFO - üõë Shutting down FastAPI application...
2025-12-05 15:26:35 - root - INFO - Mounted keyframe directory at /keyframes: /app/app/data/keyframe
2025-12-05 15:26:35 - root - INFO - üöÄ Starting FastAPI application...
2025-12-05 15:26:35 - root - INFO - Log directory: logs/
2025-12-05 15:26:35 - root - INFO - Search queries log: logs/search_queries.log
2025-12-05 15:26:35 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-05 15:26:35 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-05 15:26:35 - app.database.db - INFO -    Current submissions count: 2
2025-12-05 15:26:59 - root - INFO - üõë Shutting down FastAPI application...
2025-12-05 15:27:03 - root - INFO - Mounted keyframe directory at /keyframes: /app/app/data/keyframe
2025-12-05 15:27:03 - root - INFO - üöÄ Starting FastAPI application...
2025-12-05 15:27:03 - root - INFO - Log directory: logs/
2025-12-05 15:27:03 - root - INFO - Search queries log: logs/search_queries.log
2025-12-05 15:27:03 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-05 15:27:03 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-05 15:27:03 - app.database.db - INFO -    Current submissions count: 2
2025-12-05 15:29:59 - root - INFO - üì• Received submit request: query_text='r·ª´ng + n√∫i...', keyframe_path='/keyframes/L01_V001/1786.webp', result_id='35', username='user1'
2025-12-05 15:30:00 - root - INFO - ‚úÖ Submission created: id=3, query='r·ª´ng + n√∫i...', user=user1
2025-12-05 15:30:52 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='l≈© l·ª•t', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-05 15:30:52 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-05 15:30:52 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-05 15:30:52 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-05 15:30:52 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'l≈© l·ª•t' ‚Üí 'flood'
2025-12-05 15:30:52 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'flood'
2025-12-05 15:30:52 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-05 15:30:53 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-05 15:30:55 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 43:1.0000, 38:0.9999, 12:0.9980, 39:0.9818, 33:0.9782, 49:0.9676, 32:0.9652, 44:0.9648, 48:0.9632, 46:0.9572
2025-12-05 15:30:55 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 51:1.0000, 49:0.9686, 52:0.9678, 39:0.9513, 40:0.9467, 60:0.9398, 50:0.9119, 98:0.9026, 14:0.8973, 97:0.8812
2025-12-05 15:30:55 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 45:1.0000, 43:0.9730, 44:0.9347, 46:0.9142, 41:0.9138, 37:0.9037, 40:0.8817, 42:0.8788, 38:0.8784, 39:0.8759
2025-12-05 15:30:55 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 39:1.0000, 49:0.9926, 40:0.9895, 52:0.9875, 43:0.9761, 51:0.9660, 60:0.9589, 45:0.9496, 38:0.9421, 46:0.9418
2025-12-05 15:30:55 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-05 15:30:55 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-05 15:30:55 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-05 15:31:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-05 15:31:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='r·ª´ng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 15:31:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='n√∫i', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 15:31:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'r·ª´ng'
2025-12-05 15:31:03 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-05 15:31:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'forest'
2025-12-05 15:31:04 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 15:31:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='forest', Q1='forest', Q2='forest'
2025-12-05 15:31:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'n√∫i'
2025-12-05 15:31:04 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'n√∫i' ‚Üí 'mountain'
2025-12-05 15:31:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'mountain'
2025-12-05 15:31:04 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 15:31:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='mountain', Q1='mountain', Q2='mountain'
2025-12-05 15:31:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 15:31:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 15:31:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3037.94ms
2025-12-05 15:31:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-05 15:31:06 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 2 stages
2025-12-05 15:31:06 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 1 videos with results
2025-12-05 15:31:06 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 1 videos with results
2025-12-05 15:31:06 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 1 common videos across all stages
2025-12-05 15:31:06 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 200 valid tuples
2025-12-05 15:31:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 200 valid tuples
2025-12-05 15:33:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-05 15:33:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='s√¥ng', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 15:33:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 15:33:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 's√¥ng'
2025-12-05 15:33:04 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-05 15:33:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'river'
2025-12-05 15:33:04 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 15:33:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='river', Q1='river', Q2='river'
2025-12-05 15:33:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-05 15:33:04 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-05 15:33:06 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-05 15:33:06 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-05 15:33:06 - app.services.method.ic_search - INFO - IC.json loaded: 647 entries
2025-12-05 15:33:06 - app.services.method.ic_search - INFO - IC.json loaded: 647 entries
2025-12-05 15:33:06 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-05 15:33:06 - app.services.method.ic_search - INFO - IC.json loaded: 647 entries
2025-12-05 15:33:07 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 15:33:08 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 15:33:08 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 15:33:08 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:33:08 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:33:08 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 52:0.6792, 381:0.6514, 149:0.3268, 144:0.0930, 382:0.0421, 124:0.0393, 87:0.0212, 565:0.0202, 417:0.0184, 446:0.0149, 35:0.0131, 221:0.0127, 618:0.0110, 284:0.0103, 240:0.0086, 437:0.0083, 287:0.0083, 385:0.0081, 419:0.0081, 418:0.0079
2025-12-05 15:33:08 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 52:0.6792, 381:0.6514, 149:0.3268, 144:0.0930, 382:0.0421, 124:0.0393, 87:0.0212, 565:0.0202, 417:0.0184, 446:0.0149, 35:0.0131, 221:0.0127, 618:0.0110, 284:0.0103, 240:0.0086, 437:0.0083, 287:0.0083, 385:0.0081, 419:0.0081, 418:0.0079
2025-12-05 15:33:08 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:33:08 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 52:0.6792, 381:0.6514, 149:0.3268, 144:0.0930, 382:0.0421, 124:0.0393, 87:0.0212, 565:0.0202, 417:0.0184, 446:0.0149, 35:0.0131, 221:0.0127, 618:0.0110, 284:0.0103, 240:0.0086, 437:0.0083, 287:0.0083, 385:0.0081, 419:0.0081, 418:0.0079
2025-12-05 15:33:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 15:33:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 4870.33ms
2025-12-05 15:33:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-05 15:33:08 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-05 15:33:08 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-05 15:34:00 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='s√¥ng', ocrText='', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-05 15:34:00 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: caption
2025-12-05 15:34:00 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-05 15:34:00 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ic', 'multimodal'}, Total: 2
2025-12-05 15:34:00 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-05 15:34:00 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'river'
2025-12-05 15:34:00 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-05 15:34:02 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 377:1.0000, 383:0.8582, 14:0.8402, 376:0.8073, 51:0.7831, 52:0.7808, 60:0.7730, 55:0.7695, 48:0.7663, 49:0.7577
2025-12-05 15:34:02 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 377:1.0000, 52:0.9678, 384:0.9244, 14:0.9072, 51:0.8703, 98:0.8349, 376:0.8244, 50:0.8210, 132:0.8134, 383:0.8072
2025-12-05 15:34:02 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 383:1.0000, 59:0.9722, 377:0.9517, 382:0.9292, 381:0.9101, 384:0.8900, 376:0.8508, 56:0.8465, 60:0.8435, 55:0.8341
2025-12-05 15:34:02 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 377:1.0000, 14:0.8523, 52:0.8509, 383:0.8490, 384:0.8238, 376:0.7956, 51:0.7773, 60:0.7665, 59:0.7093, 47:0.7043
2025-12-05 15:34:02 - app.routers.search - INFO - [ENSEMBLE] Running IC search
2025-12-05 15:34:03 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 15:34:04 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:34:04 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 52:0.6792, 381:0.6514, 149:0.3268, 144:0.0930, 382:0.0421, 124:0.0393, 87:0.0212, 565:0.0202, 417:0.0184, 446:0.0149, 35:0.0131, 221:0.0127, 618:0.0110, 284:0.0103, 240:0.0086, 437:0.0083, 287:0.0083, 385:0.0081, 419:0.0081, 418:0.0079
2025-12-05 15:34:04 - app.routers.search - INFO - [ENSEMBLE] IC top results (scaled): 52:1.0000, 381:0.9590, 149:0.4811, 144:0.1368, 382:0.0618, 124:0.0578, 87:0.0311, 565:0.0296, 417:0.0270, 446:0.0218
2025-12-05 15:34:04 - app.routers.search - INFO - [ENSEMBLE] Check: 2 enabled methods, per_method_results keys: ['multimodal', 'ic']
2025-12-05 15:34:04 - app.routers.search - INFO - [ENSEMBLE] Ensembling 2 methods: {'ic', 'multimodal'}
2025-12-05 15:34:04 - app.routers.search - INFO - [ENSEMBLE] Final ensemble top results: 377:0.5000, 52:0.5000, 381:0.4795, 14:0.4261, 52:0.4254, 383:0.4245, 384:0.4119, 376:0.3978, 51:0.3887, 60:0.3833, 59:0.3546, 47:0.3521, 381:0.3516, 129:0.3510, 49:0.3490, 55:0.3459, 382:0.3415, 98:0.3408, 380:0.3376, 50:0.3342
2025-12-05 15:34:04 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-05 15:35:42 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='l≈© l·ª•t', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-05 15:35:42 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-05 15:35:42 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-05 15:35:42 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-05 15:35:42 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'l≈© l·ª•t' ‚Üí 'flood'
2025-12-05 15:35:42 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'flood'
2025-12-05 15:35:42 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-05 15:35:44 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 43:1.0000, 38:0.9999, 12:0.9980, 39:0.9818, 33:0.9782, 49:0.9676, 32:0.9652, 44:0.9648, 48:0.9632, 46:0.9572
2025-12-05 15:35:44 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 51:1.0000, 49:0.9686, 52:0.9678, 39:0.9513, 40:0.9467, 60:0.9398, 50:0.9119, 98:0.9026, 14:0.8973, 97:0.8812
2025-12-05 15:35:44 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 45:1.0000, 43:0.9730, 44:0.9347, 46:0.9142, 41:0.9138, 37:0.9037, 40:0.8817, 42:0.8788, 38:0.8784, 39:0.8759
2025-12-05 15:35:44 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 39:1.0000, 49:0.9926, 40:0.9895, 52:0.9875, 43:0.9761, 51:0.9660, 60:0.9589, 45:0.9496, 38:0.9421, 46:0.9418
2025-12-05 15:35:44 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-05 15:35:44 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-05 15:35:44 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-05 15:37:01 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='l≈© l·ª•t', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-05 15:37:01 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-05 15:37:01 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-05 15:37:01 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-05 15:37:01 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'l≈© l·ª•t' ‚Üí 'flood'
2025-12-05 15:37:01 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'flood'
2025-12-05 15:37:01 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-05 15:37:03 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 43:1.0000, 38:0.9999, 12:0.9980, 39:0.9818, 33:0.9782, 49:0.9676, 32:0.9652, 44:0.9648, 48:0.9632, 46:0.9572
2025-12-05 15:37:03 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 51:1.0000, 49:0.9686, 52:0.9678, 39:0.9513, 40:0.9467, 60:0.9398, 50:0.9119, 98:0.9026, 14:0.8973, 97:0.8812
2025-12-05 15:37:03 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 45:1.0000, 43:0.9730, 44:0.9347, 46:0.9142, 41:0.9138, 37:0.9037, 40:0.8817, 42:0.8788, 38:0.8784, 39:0.8759
2025-12-05 15:37:03 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 39:1.0000, 49:0.9926, 40:0.9895, 52:0.9875, 43:0.9761, 51:0.9660, 60:0.9589, 45:0.9496, 38:0.9421, 46:0.9418
2025-12-05 15:37:03 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-05 15:37:03 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-05 15:37:03 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-05 15:37:42 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='r·ª´ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-05 15:37:42 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-05 15:37:42 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-05 15:37:42 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-05 15:37:42 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-05 15:37:42 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'forest'
2025-12-05 15:37:42 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-05 15:37:44 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 377:1.0000, 327:0.8852, 328:0.8522, 329:0.8479, 80:0.8410, 74:0.8375, 75:0.7882, 52:0.7132, 60:0.6900, 330:0.6866
2025-12-05 15:37:44 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 55:1.0000, 195:0.9311, 327:0.8759, 120:0.8582, 14:0.8368, 517:0.7754, 97:0.7709, 48:0.7700, 328:0.7619, 80:0.7483
2025-12-05 15:37:44 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 183:1.0000, 645:0.9129, 164:0.7097, 159:0.6736, 158:0.6580, 353:0.6559, 628:0.6274, 377:0.6081, 14:0.5736, 629:0.5654
2025-12-05 15:37:44 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 377:1.0000, 327:0.9276, 14:0.8588, 645:0.8560, 328:0.8439, 183:0.8054, 329:0.7747, 55:0.7743, 628:0.6647, 164:0.6343
2025-12-05 15:37:44 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-05 15:37:44 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-05 15:37:44 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-05 15:39:25 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='l≈© l·ª•t', ocrText='', toggles={'multimodal': False, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-05 15:39:25 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: caption
2025-12-05 15:39:25 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-05 15:39:25 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ic'}, Total: 1
2025-12-05 15:39:25 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'l≈© l·ª•t' ‚Üí 'flood'
2025-12-05 15:39:25 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'flood'
2025-12-05 15:39:25 - app.routers.search - INFO - [ENSEMBLE] Running IC search
2025-12-05 15:39:26 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 118:0.8651, 486:0.8651, 300:0.8651, 162:0.8651, 46:0.8651, 113:0.8651, 306:0.8651, 502:0.8651, 119:0.8651, 311:0.8651, 498:0.8651, 182:0.8651, 56:0.8651, 362:0.8651, 3:0.8651, 32:0.8651, 494:0.8651, 123:0.8651, 19:0.8651, 479:0.8651
2025-12-05 15:39:27 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:39:27 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 48:0.7141, 46:0.6767, 50:0.6067, 32:0.4186, 12:0.4099, 1:0.4010, 42:0.4005, 98:0.3893, 29:0.3625, 124:0.3591, 37:0.3198, 52:0.2695, 59:0.2415, 117:0.2385, 381:0.2045, 14:0.1009, 452:0.0802, 373:0.0694, 126:0.0675, 77:0.0651
2025-12-05 15:39:27 - app.routers.search - INFO - [ENSEMBLE] IC top results (scaled): 48:1.0000, 46:0.9476, 50:0.8494, 32:0.5858, 12:0.5736, 1:0.5611, 42:0.5604, 98:0.5447, 29:0.5072, 124:0.5025
2025-12-05 15:39:27 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ic']
2025-12-05 15:39:27 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ic']
2025-12-05 15:39:27 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-05 15:39:35 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='l≈© l·ª•t', ocrText='', toggles={'multimodal': False, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': True}, selectedObjects=['Animal'])]
2025-12-05 15:39:35 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: caption
2025-12-05 15:39:35 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': True}
2025-12-05 15:39:35 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ic'}, Total: 1
2025-12-05 15:39:36 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'l≈© l·ª•t' ‚Üí 'flood'
2025-12-05 15:39:36 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'flood'
2025-12-05 15:39:36 - app.routers.search - INFO - [ENSEMBLE] Running IC search
2025-12-05 15:39:37 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 118:0.8651, 486:0.8651, 300:0.8651, 162:0.8651, 46:0.8651, 113:0.8651, 306:0.8651, 502:0.8651, 119:0.8651, 311:0.8651, 498:0.8651, 182:0.8651, 56:0.8651, 362:0.8651, 3:0.8651, 32:0.8651, 494:0.8651, 123:0.8651, 19:0.8651, 479:0.8651
2025-12-05 15:39:38 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:39:38 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 48:0.7141, 46:0.6767, 50:0.6067, 32:0.4186, 12:0.4099, 1:0.4010, 42:0.4005, 98:0.3893, 29:0.3625, 124:0.3591, 37:0.3198, 52:0.2695, 59:0.2415, 117:0.2385, 381:0.2045, 14:0.1009, 452:0.0802, 373:0.0694, 126:0.0675, 77:0.0651
2025-12-05 15:39:38 - app.routers.search - INFO - [ENSEMBLE] IC top results (scaled): 48:1.0000, 46:0.9476, 50:0.8494, 32:0.5858, 12:0.5736, 1:0.5611, 42:0.5604, 98:0.5447, 29:0.5072, 124:0.5025
2025-12-05 15:39:38 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ic']
2025-12-05 15:39:38 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ic']
2025-12-05 15:39:38 - app.routers.search - INFO - [ENSEMBLE] Applying object filter with 1 objects
2025-12-05 15:39:38 - elastic_transport.transport - INFO - GET http://elasticsearch:9200/ [status:200 duration:0.005s]
2025-12-05 15:39:38 - app.services.method.object_filter - INFO - ObjectFilterSearch connected to Elasticsearch
2025-12-05 15:39:38 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/object/_search [status:200 duration:0.025s]
2025-12-05 15:39:38 - app.services.method.object_filter - INFO - Object filter: 200 ‚Üí 1 results
2025-12-05 15:39:38 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-05 15:46:05 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='s√¥ng', ocrText='', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-05 15:46:05 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: caption
2025-12-05 15:46:05 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-05 15:46:05 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ic', 'multimodal'}, Total: 2
2025-12-05 15:46:05 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-05 15:46:05 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'river'
2025-12-05 15:46:05 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-05 15:46:07 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 377:1.0000, 383:0.8582, 14:0.8402, 376:0.8073, 51:0.7831, 52:0.7808, 60:0.7730, 55:0.7695, 48:0.7663, 49:0.7577
2025-12-05 15:46:07 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 377:1.0000, 52:0.9678, 384:0.9244, 14:0.9072, 51:0.8703, 98:0.8349, 376:0.8244, 50:0.8210, 132:0.8134, 383:0.8072
2025-12-05 15:46:07 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 383:1.0000, 59:0.9722, 377:0.9517, 382:0.9292, 381:0.9101, 384:0.8900, 376:0.8508, 56:0.8465, 60:0.8435, 55:0.8341
2025-12-05 15:46:07 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 377:1.0000, 14:0.8523, 52:0.8509, 383:0.8490, 384:0.8238, 376:0.7956, 51:0.7773, 60:0.7665, 59:0.7093, 47:0.7043
2025-12-05 15:46:07 - app.routers.search - INFO - [ENSEMBLE] Running IC search
2025-12-05 15:46:08 - app.services.method.ic_search - INFO - [IC] Qdrant top results (id:score): 638:0.9410, 267:0.9410, 222:0.9410, 338:0.9410, 281:0.9410, 237:0.9410, 248:0.9410, 445:0.9410, 249:0.9410, 202:0.9410, 257:0.9410, 234:0.9410, 246:0.9410, 335:0.9410, 633:0.9410, 215:0.9410, 441:0.9410, 275:0.9410, 238:0.9410, 256:0.9410
2025-12-05 15:46:09 - httpx - INFO - HTTP Request: POST https://api.cohere.com/v1/rerank "HTTP/1.1 200 OK"
2025-12-05 15:46:09 - app.services.method.ic_search - INFO - [IC] Cohere rerank (id:score): 52:0.6792, 381:0.6514, 149:0.3268, 144:0.0930, 382:0.0421, 124:0.0393, 87:0.0212, 565:0.0202, 417:0.0184, 446:0.0149, 35:0.0131, 221:0.0127, 618:0.0110, 284:0.0103, 240:0.0086, 437:0.0083, 287:0.0083, 385:0.0081, 419:0.0081, 418:0.0079
2025-12-05 15:46:09 - app.routers.search - INFO - [ENSEMBLE] IC top results (scaled): 52:1.0000, 381:0.9590, 149:0.4811, 144:0.1368, 382:0.0618, 124:0.0578, 87:0.0311, 565:0.0296, 417:0.0270, 446:0.0218
2025-12-05 15:46:09 - app.routers.search - INFO - [ENSEMBLE] Check: 2 enabled methods, per_method_results keys: ['multimodal', 'ic']
2025-12-05 15:46:09 - app.routers.search - INFO - [ENSEMBLE] Ensembling 2 methods: {'ic', 'multimodal'}
2025-12-05 15:46:09 - app.routers.search - INFO - [ENSEMBLE] Final ensemble top results: 377:0.5000, 52:0.5000, 381:0.4795, 14:0.4261, 52:0.4254, 383:0.4245, 384:0.4119, 376:0.3978, 51:0.3887, 60:0.3833, 59:0.3546, 47:0.3521, 381:0.3516, 129:0.3510, 49:0.3490, 55:0.3459, 382:0.3415, 98:0.3408, 380:0.3376, 50:0.3342
2025-12-05 15:46:09 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-05 16:40:18 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='l≈© l·ª•t', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-05 16:40:18 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-05 16:40:18 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-05 16:40:18 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-05 16:40:18 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'l≈© l·ª•t' ‚Üí 'flood'
2025-12-05 16:40:18 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'flood'
2025-12-05 16:40:18 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-05 16:40:20 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 43:1.0000, 38:0.9999, 12:0.9980, 39:0.9818, 33:0.9782, 49:0.9676, 32:0.9652, 44:0.9648, 48:0.9632, 46:0.9572
2025-12-05 16:40:20 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 51:1.0000, 49:0.9686, 52:0.9678, 39:0.9513, 40:0.9467, 60:0.9398, 50:0.9119, 98:0.9026, 14:0.8973, 97:0.8812
2025-12-05 16:40:20 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 45:1.0000, 43:0.9730, 44:0.9347, 46:0.9142, 41:0.9138, 37:0.9037, 40:0.8817, 42:0.8788, 38:0.8784, 39:0.8759
2025-12-05 16:40:20 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 39:1.0000, 49:0.9926, 40:0.9895, 52:0.9875, 43:0.9761, 51:0.9660, 60:0.9589, 45:0.9496, 38:0.9421, 46:0.9418
2025-12-05 16:40:20 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-05 16:40:20 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-05 16:40:20 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-05 17:13:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-05 17:13:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='l≈© l·ª•t', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 17:13:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='h·∫°n h√°n', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 17:13:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'l≈© l·ª•t'
2025-12-05 17:14:00 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'l≈© l·ª•t' ‚Üí 'flood'
2025-12-05 17:14:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'flood'
2025-12-05 17:14:00 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 17:14:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='flood', Q1='flood', Q2='flood'
2025-12-05 17:14:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'h·∫°n h√°n'
2025-12-05 17:14:00 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'h·∫°n h√°n' ‚Üí 'drought'
2025-12-05 17:14:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'drought'
2025-12-05 17:14:00 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 17:14:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='drought', Q1='drought', Q2='drought'
2025-12-05 17:14:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 17:14:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 17:14:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3217.89ms
2025-12-05 17:14:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-05 17:14:03 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 269 unique ids from 2 stages
2025-12-05 17:14:03 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 269 unique ids
2025-12-05 17:16:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-05 17:16:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='l≈© l·ª•t', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 17:16:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='h·∫°n h√°n', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 17:16:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'l≈© l·ª•t'
2025-12-05 17:16:20 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'l≈© l·ª•t' ‚Üí 'flood'
2025-12-05 17:16:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'flood'
2025-12-05 17:16:20 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 17:16:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='flood', Q1='flood', Q2='flood'
2025-12-05 17:16:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'h·∫°n h√°n'
2025-12-05 17:16:20 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'h·∫°n h√°n' ‚Üí 'drought'
2025-12-05 17:16:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'drought'
2025-12-05 17:16:21 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 17:16:21 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='drought', Q1='drought', Q2='drought'
2025-12-05 17:16:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 17:16:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 17:16:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3132.72ms
2025-12-05 17:16:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-05 17:16:23 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 2 stages
2025-12-05 17:16:23 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 1 videos with results
2025-12-05 17:16:23 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 1 videos with results
2025-12-05 17:16:23 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 1 common videos across all stages
2025-12-05 17:16:23 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 200 valid tuples
2025-12-05 17:16:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 200 valid tuples
2025-12-05 17:33:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-05 17:33:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='h·∫°n h√°n', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 17:33:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='l≈© l·ª•t', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 17:33:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'h·∫°n h√°n'
2025-12-05 17:33:22 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'h·∫°n h√°n' ‚Üí 'drought'
2025-12-05 17:33:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'drought'
2025-12-05 17:33:22 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 17:33:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='drought', Q1='drought', Q2='drought'
2025-12-05 17:33:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'l≈© l·ª•t'
2025-12-05 17:33:23 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'l≈© l·ª•t' ‚Üí 'flood'
2025-12-05 17:33:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'flood'
2025-12-05 17:33:23 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 17:33:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='flood', Q1='flood', Q2='flood'
2025-12-05 17:33:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 17:33:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 17:33:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3437.66ms
2025-12-05 17:33:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-05 17:33:25 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 269 unique ids from 2 stages
2025-12-05 17:33:25 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 269 unique ids
2025-12-05 17:33:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-05 17:33:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='h·∫°n h√°n', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 17:33:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='l≈© l·ª•t', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-05 17:33:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'h·∫°n h√°n'
2025-12-05 17:33:26 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'h·∫°n h√°n' ‚Üí 'drought'
2025-12-05 17:33:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'drought'
2025-12-05 17:33:27 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 17:33:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='drought', Q1='drought', Q2='drought'
2025-12-05 17:33:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'l≈© l·ª•t'
2025-12-05 17:33:27 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'l≈© l·ª•t' ‚Üí 'flood'
2025-12-05 17:33:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'flood'
2025-12-05 17:33:27 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-05 17:33:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='flood', Q1='flood', Q2='flood'
2025-12-05 17:33:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 17:33:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-05 17:33:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3001.84ms
2025-12-05 17:33:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-05 17:33:29 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 2 stages
2025-12-05 17:33:29 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 1 videos with results
2025-12-05 17:33:29 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 1 videos with results
2025-12-05 17:33:29 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 1 common videos across all stages
2025-12-05 17:33:29 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 200 valid tuples
2025-12-05 17:33:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 200 valid tuples
2025-12-05 17:49:26 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='haha', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-05 17:49:26 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-05 17:49:26 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-05 17:49:26 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-05 17:49:26 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-05 17:49:29 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 180:1.0000, 179:0.9876, 412:0.9213, 159:0.8857, 178:0.8486, 170:0.8157, 125:0.8044, 171:0.7958, 182:0.7611, 160:0.6938
2025-12-05 17:49:29 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 172:1.0000, 412:0.9958, 180:0.8884, 492:0.8627, 125:0.8251, 310:0.8023, 171:0.7635, 356:0.7623, 280:0.7565, 244:0.7453
2025-12-05 17:49:29 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 12:1.0000, 631:0.9021, 632:0.8394, 45:0.8387, 633:0.8309, 180:0.7906, 412:0.7886, 42:0.7747, 625:0.7612, 41:0.7538
2025-12-05 17:49:29 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 412:1.0000, 180:0.9453, 172:0.7634, 179:0.7152, 171:0.6902, 125:0.6396, 178:0.4809, 170:0.4594, 356:0.4453, 173:0.4022
2025-12-05 17:49:29 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-05 17:49:29 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-05 17:49:29 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-06 14:25:57 - root - INFO - üõë Shutting down FastAPI application...
2025-12-06 14:26:02 - root - INFO - Mounted keyframe directory at /keyframes: /app/app/data/keyframe
2025-12-06 14:26:02 - root - INFO - üöÄ Starting FastAPI application...
2025-12-06 14:26:02 - root - INFO - Log directory: logs/
2025-12-06 14:26:02 - root - INFO - Search queries log: logs/search_queries.log
2025-12-06 14:26:02 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-06 14:26:02 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-06 14:26:02 - app.database.db - INFO -    Current submissions count: 3
2025-12-06 14:26:20 - root - INFO - üõë Shutting down FastAPI application...
2025-12-06 14:26:23 - root - INFO - Mounted keyframe directory at /keyframes: /app/app/data/keyframe
2025-12-06 14:26:23 - root - INFO - üöÄ Starting FastAPI application...
2025-12-06 14:26:23 - root - INFO - Log directory: logs/
2025-12-06 14:26:23 - root - INFO - Search queries log: logs/search_queries.log
2025-12-06 14:26:23 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-06 14:26:23 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-06 14:26:23 - app.database.db - INFO -    Current submissions count: 3
2025-12-06 14:26:34 - root - INFO - üõë Shutting down FastAPI application...
2025-12-06 14:26:37 - root - INFO - Mounted keyframe directory at /keyframes: /app/app/data/keyframe
2025-12-06 14:26:37 - root - INFO - üöÄ Starting FastAPI application...
2025-12-06 14:26:37 - root - INFO - Log directory: logs/
2025-12-06 14:26:37 - root - INFO - Search queries log: logs/search_queries.log
2025-12-06 14:26:37 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-06 14:26:37 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-06 14:26:37 - app.database.db - INFO -    Current submissions count: 3
2025-12-06 14:26:56 - root - INFO - üõë Shutting down FastAPI application...
2025-12-06 14:26:59 - root - INFO - Mounted keyframe directory at /keyframes: /app/app/data/keyframe
2025-12-06 14:26:59 - root - INFO - üöÄ Starting FastAPI application...
2025-12-06 14:26:59 - root - INFO - Log directory: logs/
2025-12-06 14:26:59 - root - INFO - Search queries log: logs/search_queries.log
2025-12-06 14:26:59 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-06 14:26:59 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-06 14:26:59 - app.database.db - INFO -    Current submissions count: 3
2025-12-06 14:27:12 - root - INFO - üõë Shutting down FastAPI application...
2025-12-06 14:27:15 - root - INFO - Mounted keyframe directory at /keyframes: /app/app/data/keyframe
2025-12-06 14:27:15 - root - INFO - üöÄ Starting FastAPI application...
2025-12-06 14:27:15 - root - INFO - Log directory: logs/
2025-12-06 14:27:15 - root - INFO - Search queries log: logs/search_queries.log
2025-12-06 14:27:15 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-06 14:27:15 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-06 14:27:15 - app.database.db - INFO -    Current submissions count: 3
2025-12-06 14:27:30 - root - INFO - üõë Shutting down FastAPI application...
2025-12-06 14:27:33 - root - INFO - Mounted keyframe directory at /keyframes: /app/app/data/keyframe
2025-12-06 14:27:33 - root - INFO - üöÄ Starting FastAPI application...
2025-12-06 14:27:33 - root - INFO - Log directory: logs/
2025-12-06 14:27:33 - root - INFO - Search queries log: logs/search_queries.log
2025-12-06 14:27:33 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-06 14:27:33 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-06 14:27:33 - app.database.db - INFO -    Current submissions count: 3
2025-12-06 14:27:54 - root - INFO - üõë Shutting down FastAPI application...
2025-12-06 14:27:57 - root - INFO - Mounted keyframe directory at /keyframes: /app/app/data/keyframe
2025-12-06 14:27:57 - root - INFO - üöÄ Starting FastAPI application...
2025-12-06 14:27:57 - root - INFO - Log directory: logs/
2025-12-06 14:27:57 - root - INFO - Search queries log: logs/search_queries.log
2025-12-06 14:27:57 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-06 14:27:57 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-06 14:27:57 - app.database.db - INFO -    Current submissions count: 3
2025-12-06 14:28:23 - root - INFO - üõë Shutting down FastAPI application...
2025-12-06 14:28:26 - root - INFO - Mounted keyframe directory at /keyframes: /app/app/data/keyframe
2025-12-06 14:28:26 - root - INFO - üöÄ Starting FastAPI application...
2025-12-06 14:28:26 - root - INFO - Log directory: logs/
2025-12-06 14:28:26 - root - INFO - Search queries log: logs/search_queries.log
2025-12-06 14:28:26 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-06 14:28:26 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-06 14:28:26 - app.database.db - INFO -    Current submissions count: 3
2025-12-06 14:28:42 - root - INFO - üõë Shutting down FastAPI application...
2025-12-06 14:28:46 - root - INFO - Mounted keyframe directory at /keyframes: /app/app/data/keyframe
2025-12-06 14:28:46 - root - INFO - üöÄ Starting FastAPI application...
2025-12-06 14:28:46 - root - INFO - Log directory: logs/
2025-12-06 14:28:46 - root - INFO - Search queries log: logs/search_queries.log
2025-12-06 14:28:46 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-06 14:28:46 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-06 14:28:46 - app.database.db - INFO -    Current submissions count: 3
2025-12-06 14:29:07 - root - INFO - üõë Shutting down FastAPI application...
2025-12-06 14:29:10 - root - INFO - Mounted keyframe directory at /keyframes: /app/app/data/keyframe
2025-12-06 14:29:10 - root - INFO - üöÄ Starting FastAPI application...
2025-12-06 14:29:10 - root - INFO - Log directory: logs/
2025-12-06 14:29:10 - root - INFO - Search queries log: logs/search_queries.log
2025-12-06 14:29:10 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-06 14:29:10 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-06 14:29:10 - app.database.db - INFO -    Current submissions count: 3
2025-12-06 14:35:58 - root - INFO - üõë Shutting down FastAPI application...
2025-12-06 14:36:01 - root - INFO - Mounted keyframe directory at /keyframes: /app/app/data/keyframe
2025-12-06 14:36:01 - root - INFO - üöÄ Starting FastAPI application...
2025-12-06 14:36:01 - root - INFO - Log directory: logs/
2025-12-06 14:36:01 - root - INFO - Search queries log: logs/search_queries.log
2025-12-06 14:36:01 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-06 14:36:01 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-06 14:36:01 - app.database.db - INFO -    Current submissions count: 3
2025-12-06 14:36:05 - root - INFO - üõë Shutting down FastAPI application...
2025-12-06 14:36:10 - root - INFO - Mounted keyframe directory at /keyframes: /app/app/data/keyframe
2025-12-06 14:36:10 - root - INFO - üöÄ Starting FastAPI application...
2025-12-06 14:36:10 - root - INFO - Log directory: logs/
2025-12-06 14:36:10 - root - INFO - Search queries log: logs/search_queries.log
2025-12-06 14:36:10 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-06 14:36:10 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-06 14:36:10 - app.database.db - INFO -    Current submissions count: 3
2025-12-06 14:36:27 - root - INFO - üõë Shutting down FastAPI application...
2025-12-06 16:42:25 - root - INFO - Mounted keyframe directory at /keyframes: /app/app/data/keyframe
2025-12-06 16:42:25 - root - INFO - üöÄ Starting FastAPI application...
2025-12-06 16:42:25 - root - INFO - Log directory: logs/
2025-12-06 16:42:25 - root - INFO - Search queries log: logs/search_queries.log
2025-12-06 16:42:25 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-06 16:42:25 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-06 16:42:25 - app.database.db - INFO -    Current submissions count: 3
2025-12-06 16:43:22 - root - INFO - üõë Shutting down FastAPI application...
2025-12-06 16:43:25 - root - INFO - Mounted keyframe directory at /keyframes: /app/app/data/keyframe
2025-12-06 16:43:25 - root - INFO - üöÄ Starting FastAPI application...
2025-12-06 16:43:25 - root - INFO - Log directory: logs/
2025-12-06 16:43:25 - root - INFO - Search queries log: logs/search_queries.log
2025-12-06 16:43:25 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-06 16:43:25 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-06 16:43:25 - app.database.db - INFO -    Current submissions count: 3
2025-12-06 16:44:40 - root - INFO - üõë Shutting down FastAPI application...
2025-12-06 16:44:47 - root - INFO - Mounted keyframe directory at /keyframes: /app/app/data/keyframe
2025-12-06 16:44:47 - root - INFO - üöÄ Starting FastAPI application...
2025-12-06 16:44:47 - root - INFO - Log directory: logs/
2025-12-06 16:44:47 - root - INFO - Search queries log: logs/search_queries.log
2025-12-06 16:44:47 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-06 16:44:47 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-06 16:44:47 - app.database.db - INFO -    Current submissions count: 3
2025-12-06 16:45:18 - root - INFO - üõë Shutting down FastAPI application...
2025-12-06 16:45:22 - root - INFO - Mounted keyframe directory at /keyframes: /app/app/data/keyframe
2025-12-06 16:45:22 - root - INFO - üöÄ Starting FastAPI application...
2025-12-06 16:45:22 - root - INFO - Log directory: logs/
2025-12-06 16:45:22 - root - INFO - Search queries log: logs/search_queries.log
2025-12-06 16:45:22 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-06 16:45:22 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-06 16:45:22 - app.database.db - INFO -    Current submissions count: 3
2025-12-06 16:46:55 - root - INFO - üõë Shutting down FastAPI application...
2025-12-06 16:47:01 - root - INFO - Mounted keyframe directory at /keyframes: /app/app/data/keyframe
2025-12-06 16:47:01 - root - INFO - üöÄ Starting FastAPI application...
2025-12-06 16:47:01 - root - INFO - Log directory: logs/
2025-12-06 16:47:01 - root - INFO - Search queries log: logs/search_queries.log
2025-12-06 16:47:01 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-06 16:47:02 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-06 16:47:02 - app.database.db - INFO -    Current submissions count: 3
2025-12-06 16:47:10 - root - INFO - üõë Shutting down FastAPI application...
2025-12-06 16:47:13 - root - INFO - Mounted keyframe directory at /keyframes: /app/app/data/keyframe
2025-12-06 16:47:13 - root - INFO - üöÄ Starting FastAPI application...
2025-12-06 16:47:13 - root - INFO - Log directory: logs/
2025-12-06 16:47:13 - root - INFO - Search queries log: logs/search_queries.log
2025-12-06 16:47:13 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-06 16:47:13 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-06 16:47:13 - app.database.db - INFO -    Current submissions count: 3
2025-12-06 16:47:16 - root - INFO - üõë Shutting down FastAPI application...
2025-12-06 16:47:20 - root - INFO - Mounted keyframe directory at /keyframes: /app/app/data/keyframe
2025-12-06 16:47:20 - root - INFO - üöÄ Starting FastAPI application...
2025-12-06 16:47:20 - root - INFO - Log directory: logs/
2025-12-06 16:47:20 - root - INFO - Search queries log: logs/search_queries.log
2025-12-06 16:47:20 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-06 16:47:20 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-06 16:47:20 - app.database.db - INFO -    Current submissions count: 3
2025-12-06 16:49:02 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='tr·∫ßn anh tu·∫•n', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-06 16:49:02 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-06 16:49:02 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-06 16:49:02 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-06 16:49:02 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'tr·∫ßn anh tu·∫•n'
2025-12-06 16:49:02 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'tr·∫ßn anh tu·∫•n'
2025-12-06 16:49:03 - elastic_transport.transport - INFO - GET http://elasticsearch:9200/ [status:200 duration:0.077s]
2025-12-06 16:49:03 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.666s]
2025-12-06 16:49:05 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 596337:0.9990, 314353:0.9512, 13849:0.9293, 13850:0.9166, 13851:0.9022, 598671:0.8957, 598672:0.8957, 364605:0.8942, 399546:0.8880, 399549:0.8880
2025-12-06 16:49:05 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-06 16:49:05 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-06 16:49:05 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-06 16:50:40 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='u23 vi·ªát nam', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-06 16:50:40 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-06 16:50:40 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-06 16:50:40 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-06 16:50:40 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'u23 vi·ªát nam'
2025-12-06 16:50:40 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'u23 vi·ªát nam'
2025-12-06 16:50:40 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.146s]
2025-12-06 16:50:40 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 125328:0.9847, 125329:0.9847, 394801:0.9721, 394802:0.9721, 394803:0.9721, 411797:0.9521, 384465:0.9239, 397751:0.8997, 327350:0.8870, 386189:0.8743
2025-12-06 16:50:40 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-06 16:50:40 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-06 16:50:40 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-06 16:53:02 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='u23 vi·ªát nam', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-06 16:53:02 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-06 16:53:02 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-06 16:53:02 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-06 16:53:02 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'u23 vi·ªát nam'
2025-12-06 16:53:02 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'u23 vi·ªát nam'
2025-12-06 16:53:02 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.166s]
2025-12-06 16:53:03 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 125328:0.9847, 125329:0.9847, 394801:0.9721, 394802:0.9721, 394803:0.9721, 411797:0.9521, 384465:0.9239, 397751:0.8997, 327350:0.8870, 386189:0.8743
2025-12-06 16:53:03 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-06 16:53:03 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-06 16:53:03 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-06 16:53:49 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframes/L05/L05_V006/28933.webp
2025-12-06 16:53:49 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframes/L05/L05_V006/28933.webp -> /app/app/data/keyframes/L05/L05_V006/28933.webp
2025-12-06 16:53:49 - root - ERROR - [IMAGE_SEARCH] Image not found: /app/app/data/keyframes/L05/L05_V006/28933.webp
2025-12-06 16:53:49 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframes/L05/L05_V006/28933.webp
2025-12-06 16:53:49 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframes/L05/L05_V006/28933.webp -> /app/app/data/keyframes/L05/L05_V006/28933.webp
2025-12-06 16:53:49 - root - ERROR - [IMAGE_SEARCH] Image not found: /app/app/data/keyframes/L05/L05_V006/28933.webp
2025-12-06 16:55:43 - root - INFO - üõë Shutting down FastAPI application...
2025-12-06 16:56:06 - root - INFO - Mounted keyframe directory at /keyframes: /app/app/data/keyframe
2025-12-06 16:56:06 - root - INFO - üöÄ Starting FastAPI application...
2025-12-06 16:56:06 - root - INFO - Log directory: logs/
2025-12-06 16:56:06 - root - INFO - Search queries log: logs/search_queries.log
2025-12-06 16:56:06 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-06 16:56:07 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-06 16:56:07 - app.database.db - INFO -    Current submissions count: 3
2025-12-06 16:56:07 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframes/L11/L11_V020/25567.webp
2025-12-06 16:56:07 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframes/L11/L11_V020/25567.webp -> /app/app/data/keyframes/L11/L11_V020/25567.webp
2025-12-06 16:56:07 - root - ERROR - [IMAGE_SEARCH] Image not found: /app/app/data/keyframes/L11/L11_V020/25567.webp
2025-12-06 16:56:07 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframes/L11/L11_V020/25567.webp
2025-12-06 16:56:07 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframes/L11/L11_V020/25567.webp -> /app/app/data/keyframes/L11/L11_V020/25567.webp
2025-12-06 16:56:07 - root - ERROR - [IMAGE_SEARCH] Image not found: /app/app/data/keyframes/L11/L11_V020/25567.webp
2025-12-06 16:58:37 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframes/L05/L05_V006/28933.webp
2025-12-06 16:58:37 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframes/L05/L05_V006/28933.webp -> /app/app/data/keyframes/L05/L05_V006/28933.webp
2025-12-06 16:58:37 - root - ERROR - [IMAGE_SEARCH] Failed to get embedding from model server: Request URL is missing an 'http://' or 'https://' protocol.
2025-12-06 16:58:37 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframes/L05/L05_V006/28933.webp
2025-12-06 16:58:37 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframes/L05/L05_V006/28933.webp -> /app/app/data/keyframes/L05/L05_V006/28933.webp
2025-12-06 16:58:37 - root - ERROR - [IMAGE_SEARCH] Failed to get embedding from model server: Request URL is missing an 'http://' or 'https://' protocol.
2025-12-06 16:58:44 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='u23 vi·ªát nam', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-06 16:58:44 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-06 16:58:44 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-06 16:58:44 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-06 16:58:44 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'u23 vi·ªát nam'
2025-12-06 16:58:44 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'u23 vi·ªát nam'
2025-12-06 16:58:45 - elastic_transport.transport - INFO - GET http://elasticsearch:9200/ [status:200 duration:0.053s]
2025-12-06 16:58:45 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.181s]
2025-12-06 16:58:47 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 125328:0.9847, 125329:0.9847, 394801:0.9721, 394802:0.9721, 394803:0.9721, 411797:0.9521, 384465:0.9239, 397751:0.8997, 327350:0.8870, 386189:0.8743
2025-12-06 16:58:47 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-06 16:58:47 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-06 16:58:47 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-06 16:58:50 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframes/L13/L13_V029/24503.webp
2025-12-06 16:58:50 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframes/L13/L13_V029/24503.webp -> /app/app/data/keyframes/L13/L13_V029/24503.webp
2025-12-06 16:58:50 - root - ERROR - [IMAGE_SEARCH] Failed to get embedding from model server: Request URL is missing an 'http://' or 'https://' protocol.
2025-12-06 16:58:50 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframes/L13/L13_V029/24503.webp
2025-12-06 16:58:50 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframes/L13/L13_V029/24503.webp -> /app/app/data/keyframes/L13/L13_V029/24503.webp
2025-12-06 16:58:50 - root - ERROR - [IMAGE_SEARCH] Failed to get embedding from model server: Request URL is missing an 'http://' or 'https://' protocol.
2025-12-06 17:01:32 - root - INFO - üõë Shutting down FastAPI application...
2025-12-06 17:08:47 - root - WARNING - Keyframe directory not found: /app/app/data/keyframe
2025-12-06 17:08:47 - root - INFO - üöÄ Starting FastAPI application...
2025-12-06 17:08:47 - root - INFO - Log directory: logs/
2025-12-06 17:08:47 - root - INFO - Search queries log: logs/search_queries.log
2025-12-06 17:08:47 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-06 17:08:47 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-06 17:08:47 - app.database.db - INFO -    Current submissions count: 3
2025-12-06 17:09:02 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='u23 vi·ªát nam', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-06 17:09:02 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-06 17:09:02 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-06 17:09:02 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-06 17:09:02 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'u23 vi·ªát nam'
2025-12-06 17:09:02 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'u23 vi·ªát nam'
2025-12-06 17:09:02 - elastic_transport.transport - INFO - GET http://elasticsearch:9200/ [status:200 duration:0.007s]
2025-12-06 17:09:03 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.215s]
2025-12-06 17:09:04 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 125328:0.9846, 125329:0.9846, 394801:0.9721, 394802:0.9721, 394803:0.9721, 411797:0.9522, 384465:0.9235, 397751:0.8995, 327350:0.8860, 386189:0.8747
2025-12-06 17:09:04 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-06 17:09:04 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-06 17:09:04 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-06 17:09:06 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframes/L05/L05_V006/28941.webp
2025-12-06 17:09:06 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframes/L05/L05_V006/28941.webp -> /app/app/data/keyframes/L05/L05_V006/28941.webp
2025-12-06 17:09:06 - root - ERROR - [IMAGE_SEARCH] Failed to get embedding from model server: Request URL is missing an 'http://' or 'https://' protocol.
2025-12-06 17:09:06 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframes/L05/L05_V006/28941.webp
2025-12-06 17:09:06 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframes/L05/L05_V006/28941.webp -> /app/app/data/keyframes/L05/L05_V006/28941.webp
2025-12-06 17:09:06 - root - ERROR - [IMAGE_SEARCH] Failed to get embedding from model server: Request URL is missing an 'http://' or 'https://' protocol.
2025-12-06 17:10:49 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='l≈© l·ª•t', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-06 17:10:49 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-06 17:10:49 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-06 17:10:49 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-06 17:10:49 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'l≈© l·ª•t'
2025-12-06 17:10:49 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'l≈© l·ª•t'
2025-12-06 17:10:49 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.024s]
2025-12-06 17:10:49 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 668724:0.9918, 668722:0.9441, 497738:0.9347, 633159:0.9270, 497739:0.9242, 497221:0.9124, 497222:0.9124, 46177:0.9093, 14362:0.9093, 633158:0.9093
2025-12-06 17:10:49 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-06 17:10:49 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-06 17:10:49 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-06 17:11:26 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='l≈© l·ª•t', ocrText='l≈© l·ª•t', toggles={'multimodal': False, 'ic': False, 'asr': True, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-06 17:11:26 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: text
2025-12-06 17:11:26 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': True, 'ocr': False, 'objectFilter': False}
2025-12-06 17:11:26 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'asr'}, Total: 1
2025-12-06 17:11:26 - app.routers.search - INFO - [ENSEMBLE] Running ASR search
2025-12-06 17:11:26 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.056s]
2025-12-06 17:11:26 - app.routers.search - INFO - [ENSEMBLE] ASR top results (scaled): 171809:0.9639, 15999:0.9517, 194775:0.9351, 68334:0.9202, 182466:0.9202, 193052:0.9202, 205940:0.9010, 59681:0.8795, 68385:0.8795, 98861:0.8795
2025-12-06 17:11:26 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['asr']
2025-12-06 17:11:26 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['asr']
2025-12-06 17:11:26 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-06 17:12:05 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='l≈© l·ª•t', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-06 17:12:05 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-06 17:12:05 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-06 17:12:05 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-06 17:12:05 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'l≈© l·ª•t'
2025-12-06 17:12:05 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'l≈© l·ª•t'
2025-12-06 17:12:05 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.015s]
2025-12-06 17:12:05 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 668724:0.9918, 668722:0.9441, 497738:0.9347, 633159:0.9270, 497739:0.9242, 497221:0.9124, 497222:0.9124, 46177:0.9093, 14362:0.9093, 633158:0.9093
2025-12-06 17:12:05 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-06 17:12:05 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-06 17:12:05 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-06 17:12:26 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='l≈© l·ª•t', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-06 17:12:26 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-06 17:12:26 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-06 17:12:26 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-06 17:12:26 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'l≈© l·ª•t'
2025-12-06 17:12:26 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'l≈© l·ª•t'
2025-12-06 17:12:26 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.018s]
2025-12-06 17:12:26 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 668724:0.9918, 668722:0.9441, 497738:0.9347, 633159:0.9270, 497739:0.9242, 497221:0.9124, 497222:0.9124, 46177:0.9093, 14362:0.9093, 633158:0.9093
2025-12-06 17:12:26 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-06 17:12:26 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-06 17:12:26 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-07 14:29:03 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='s√¥ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-07 14:29:03 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-07 14:29:03 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-07 14:29:03 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-07 14:29:04 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-07 14:29:04 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'river'
2025-12-07 14:29:04 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-07 14:29:04 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-07 14:29:04 - app.services.method.clip_client - INFO - [CLIP] Batch endpoint not available, using individual calls
2025-12-07 14:29:05 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://e5244a016963.ngrok-free.app/embedding/clip/text
2025-12-07 14:29:05 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: river
2025-12-07 14:29:05 - app.services.method.beit3_client - INFO - [BEiT3] Batch endpoint not available, using individual calls
2025-12-07 14:29:05 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://e5244a016963.ngrok-free.app/embedding/beit3/text
2025-12-07 14:29:05 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: river
2025-12-07 14:29:05 - app.services.method.bigg_client - INFO - [BIGG] Batch endpoint not available, using individual calls
2025-12-07 14:29:05 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://e5244a016963.ngrok-free.app/embedding/bigg/text
2025-12-07 14:29:05 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: river
2025-12-07 14:29:05 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-07 14:29:05 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-07 14:29:05 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-07 14:29:05 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-07 14:29:05 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-07 14:29:05 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-07 14:29:05 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-07 14:32:47 - root - INFO - üõë Shutting down FastAPI application...
2025-12-07 14:32:57 - root - INFO - Mounted keyframe directory at /keyframe: /app/app/data/keyframe
2025-12-07 14:32:57 - root - INFO - üöÄ Starting FastAPI application...
2025-12-07 14:32:57 - root - INFO - Log directory: logs/
2025-12-07 14:32:57 - root - INFO - Search queries log: logs/search_queries.log
2025-12-07 14:32:57 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-07 14:32:57 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-07 14:32:57 - app.database.db - INFO -    Current submissions count: 3
2025-12-07 14:33:30 - root - INFO - üõë Shutting down FastAPI application...
2025-12-07 14:33:33 - root - INFO - Mounted keyframe directory at /keyframe: /app/app/data/keyframe
2025-12-07 14:33:33 - root - INFO - üöÄ Starting FastAPI application...
2025-12-07 14:33:33 - root - INFO - Log directory: logs/
2025-12-07 14:33:33 - root - INFO - Search queries log: logs/search_queries.log
2025-12-07 14:33:33 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-07 14:33:33 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-07 14:33:33 - app.database.db - INFO -    Current submissions count: 3
2025-12-07 14:33:35 - root - INFO - üõë Shutting down FastAPI application...
2025-12-07 14:33:39 - root - INFO - Mounted keyframe directory at /keyframe: /app/app/data/keyframe
2025-12-07 14:33:39 - root - INFO - üöÄ Starting FastAPI application...
2025-12-07 14:33:39 - root - INFO - Log directory: logs/
2025-12-07 14:33:39 - root - INFO - Search queries log: logs/search_queries.log
2025-12-07 14:33:39 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-07 14:33:39 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-07 14:33:39 - app.database.db - INFO -    Current submissions count: 3
2025-12-07 14:33:40 - root - INFO - üõë Shutting down FastAPI application...
2025-12-07 14:33:43 - root - INFO - Mounted keyframe directory at /keyframe: /app/app/data/keyframe
2025-12-07 14:33:43 - root - INFO - üöÄ Starting FastAPI application...
2025-12-07 14:33:43 - root - INFO - Log directory: logs/
2025-12-07 14:33:43 - root - INFO - Search queries log: logs/search_queries.log
2025-12-07 14:33:43 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-07 14:33:43 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-07 14:33:43 - app.database.db - INFO -    Current submissions count: 3
2025-12-07 14:33:47 - root - INFO - üõë Shutting down FastAPI application...
2025-12-07 14:33:50 - root - INFO - Mounted keyframe directory at /keyframe: /app/app/data/keyframe
2025-12-07 14:33:50 - root - INFO - üöÄ Starting FastAPI application...
2025-12-07 14:33:50 - root - INFO - Log directory: logs/
2025-12-07 14:33:50 - root - INFO - Search queries log: logs/search_queries.log
2025-12-07 14:33:50 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-07 14:33:50 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-07 14:33:50 - app.database.db - INFO -    Current submissions count: 3
2025-12-07 14:33:51 - root - INFO - üõë Shutting down FastAPI application...
2025-12-07 14:33:54 - root - INFO - Mounted keyframe directory at /keyframe: /app/app/data/keyframe
2025-12-07 14:33:54 - root - INFO - üöÄ Starting FastAPI application...
2025-12-07 14:33:54 - root - INFO - Log directory: logs/
2025-12-07 14:33:54 - root - INFO - Search queries log: logs/search_queries.log
2025-12-07 14:33:54 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-07 14:33:54 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-07 14:33:54 - app.database.db - INFO -    Current submissions count: 3
2025-12-07 14:33:55 - root - INFO - üõë Shutting down FastAPI application...
2025-12-07 14:33:59 - root - INFO - Mounted keyframe directory at /keyframe: /app/app/data/keyframe
2025-12-07 14:33:59 - root - INFO - üöÄ Starting FastAPI application...
2025-12-07 14:33:59 - root - INFO - Log directory: logs/
2025-12-07 14:33:59 - root - INFO - Search queries log: logs/search_queries.log
2025-12-07 14:33:59 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-07 14:33:59 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-07 14:33:59 - app.database.db - INFO -    Current submissions count: 3
2025-12-07 14:34:08 - root - INFO - üõë Shutting down FastAPI application...
2025-12-07 14:34:11 - root - INFO - Mounted keyframe directory at /keyframe: /app/app/data/keyframe
2025-12-07 14:34:11 - root - INFO - üöÄ Starting FastAPI application...
2025-12-07 14:34:11 - root - INFO - Log directory: logs/
2025-12-07 14:34:11 - root - INFO - Search queries log: logs/search_queries.log
2025-12-07 14:34:11 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-07 14:34:11 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-07 14:34:11 - app.database.db - INFO -    Current submissions count: 3
2025-12-07 14:35:20 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='s√¥ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-07 14:35:20 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-07 14:35:20 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-07 14:35:20 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-07 14:35:20 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-07 14:35:20 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'river'
2025-12-07 14:35:20 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-07 14:35:20 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-07 14:35:26 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 647:1.0000, 7004:0.7915, 7003:0.7058, 26734:0.6698, 45208:0.6247, 52135:0.6204, 45203:0.6067, 57958:0.5984, 52134:0.5961, 18735:0.5855
2025-12-07 14:35:26 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 555451:1.0000, 537338:0.9548, 548721:0.9467, 61812:0.9170, 548920:0.9061, 44767:0.8970, 538953:0.8893, 191846:0.8797, 565716:0.8681, 555450:0.8677
2025-12-07 14:35:26 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 538951:1.0000, 538980:0.8695, 515256:0.8554, 538952:0.8076, 529140:0.7978, 555451:0.7791, 452898:0.7661, 225469:0.7279, 538995:0.6978, 655529:0.6914
2025-12-07 14:35:26 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 555451:1.0000, 538951:0.9258, 555450:0.7194, 538953:0.7026, 515256:0.6620, 537338:0.6311, 548721:0.6229, 548920:0.5997, 538952:0.5878, 61812:0.5759
2025-12-07 14:35:26 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-07 14:35:26 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-07 14:35:26 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-07 14:37:01 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='s√¥ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-07 14:37:01 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-07 14:37:01 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-07 14:37:01 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-07 14:37:01 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-07 14:37:01 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'river'
2025-12-07 14:37:01 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-07 14:37:01 - app.services.method.clip_client - ERROR - [CLIP] Batch request failed: 404 Client Error: Not Found for url: https://e5244a016963.ngrok-free.app/embedding/clip/text/batch, falling back
2025-12-07 14:37:02 - app.services.method.beit3_client - ERROR - [BEiT3] Batch request failed: 404 Client Error: Not Found for url: https://e5244a016963.ngrok-free.app/embedding/beit3/text/batch, falling back
2025-12-07 14:37:03 - app.services.method.bigg_client - ERROR - [BIGG] Batch request failed: 404 Client Error: Not Found for url: https://e5244a016963.ngrok-free.app/embedding/bigg/text/batch, falling back
2025-12-07 14:37:03 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 647:1.0000, 7004:0.7915, 7003:0.7058, 26734:0.6698, 45208:0.6247, 52135:0.6204, 45203:0.6067, 57958:0.5984, 52134:0.5961, 18735:0.5855
2025-12-07 14:37:03 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 555451:1.0000, 537338:0.9548, 548721:0.9467, 61812:0.9170, 548920:0.9061, 44767:0.8970, 538953:0.8893, 191846:0.8797, 565716:0.8681, 555450:0.8677
2025-12-07 14:37:03 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 538951:1.0000, 538980:0.8695, 515256:0.8554, 538952:0.8076, 529140:0.7978, 555451:0.7791, 452898:0.7661, 225469:0.7279, 538995:0.6978, 655529:0.6914
2025-12-07 14:37:03 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 555451:1.0000, 538951:0.9258, 555450:0.7194, 538953:0.7026, 515256:0.6620, 537338:0.6311, 548721:0.6229, 548920:0.5997, 538952:0.5878, 61812:0.5759
2025-12-07 14:37:03 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-07 14:37:03 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-07 14:37:03 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-07 14:37:18 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='s√¥ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-07 14:37:18 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-07 14:37:18 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-07 14:37:18 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-07 14:37:18 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-07 14:37:18 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'river'
2025-12-07 14:37:18 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-07 14:37:18 - app.services.method.clip_client - ERROR - [CLIP] Batch request failed: 404 Client Error: Not Found for url: https://e5244a016963.ngrok-free.app/embedding/clip/text/batch, falling back
2025-12-07 14:37:19 - app.services.method.beit3_client - ERROR - [BEiT3] Batch request failed: 404 Client Error: Not Found for url: https://e5244a016963.ngrok-free.app/embedding/beit3/text/batch, falling back
2025-12-07 14:37:20 - app.services.method.bigg_client - ERROR - [BIGG] Batch request failed: 404 Client Error: Not Found for url: https://e5244a016963.ngrok-free.app/embedding/bigg/text/batch, falling back
2025-12-07 14:37:21 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 647:1.0000, 7004:0.7915, 7003:0.7058, 26734:0.6698, 45208:0.6247, 52135:0.6204, 45203:0.6067, 57958:0.5984, 52134:0.5961, 18735:0.5855
2025-12-07 14:37:21 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 555451:1.0000, 537338:0.9548, 548721:0.9467, 61812:0.9170, 548920:0.9061, 44767:0.8970, 538953:0.8893, 191846:0.8797, 565716:0.8681, 555450:0.8677
2025-12-07 14:37:21 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 538951:1.0000, 538980:0.8695, 515256:0.8554, 538952:0.8076, 529140:0.7978, 555451:0.7791, 452898:0.7661, 225469:0.7279, 538995:0.6978, 655529:0.6914
2025-12-07 14:37:21 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 555451:1.0000, 538951:0.9258, 555450:0.7194, 538953:0.7026, 515256:0.6620, 537338:0.6311, 548721:0.6229, 548920:0.5997, 538952:0.5878, 61812:0.5759
2025-12-07 14:37:21 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-07 14:37:21 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-07 14:37:21 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-07 14:37:38 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='s√¥ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-07 14:37:38 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-07 14:37:38 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-07 14:37:38 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-07 14:37:39 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-07 14:37:39 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'river'
2025-12-07 14:37:39 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-07 14:37:39 - app.services.method.clip_client - ERROR - [CLIP] Batch request failed: 404 Client Error: Not Found for url: https://e5244a016963.ngrok-free.app/embedding/clip/text/batch, falling back
2025-12-07 14:37:40 - app.services.method.beit3_client - ERROR - [BEiT3] Batch request failed: 404 Client Error: Not Found for url: https://e5244a016963.ngrok-free.app/embedding/beit3/text/batch, falling back
2025-12-07 14:37:40 - app.services.method.bigg_client - ERROR - [BIGG] Batch request failed: 404 Client Error: Not Found for url: https://e5244a016963.ngrok-free.app/embedding/bigg/text/batch, falling back
2025-12-07 14:37:41 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 647:1.0000, 7004:0.7915, 7003:0.7058, 26734:0.6698, 45208:0.6247, 52135:0.6204, 45203:0.6067, 57958:0.5984, 52134:0.5961, 18735:0.5855
2025-12-07 14:37:41 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 555451:1.0000, 537338:0.9548, 548721:0.9467, 61812:0.9170, 548920:0.9061, 44767:0.8970, 538953:0.8893, 191846:0.8797, 565716:0.8681, 555450:0.8677
2025-12-07 14:37:41 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 538951:1.0000, 538980:0.8695, 515256:0.8554, 538952:0.8076, 529140:0.7978, 555451:0.7791, 452898:0.7661, 225469:0.7279, 538995:0.6978, 655529:0.6914
2025-12-07 14:37:41 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 555451:1.0000, 538951:0.9258, 555450:0.7194, 538953:0.7026, 515256:0.6620, 537338:0.6311, 548721:0.6229, 548920:0.5997, 538952:0.5878, 61812:0.5759
2025-12-07 14:37:41 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-07 14:37:41 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-07 14:37:41 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-07 14:51:56 - root - INFO - üõë Shutting down FastAPI application...
2025-12-07 14:56:52 - root - INFO - Mounted keyframe directory at /keyframe: /app/app/data/keyframe
2025-12-07 14:56:52 - root - INFO - üöÄ Starting FastAPI application...
2025-12-07 14:56:52 - root - INFO - Log directory: logs/
2025-12-07 14:56:52 - root - INFO - Search queries log: logs/search_queries.log
2025-12-07 14:56:52 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-07 14:56:52 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-07 14:56:52 - app.database.db - INFO -    Current submissions count: 3
2025-12-07 14:56:57 - root - INFO - üõë Shutting down FastAPI application...
2025-12-07 15:08:12 - root - INFO - Mounted keyframe directory at /keyframe: /app/app/data/keyframe
2025-12-07 15:08:12 - root - INFO - üöÄ Starting FastAPI application...
2025-12-07 15:08:12 - root - INFO - Log directory: logs/
2025-12-07 15:08:12 - root - INFO - Search queries log: logs/search_queries.log
2025-12-07 15:08:12 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-07 15:08:12 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-07 15:08:12 - app.database.db - INFO -    Current submissions count: 3
2025-12-07 15:17:48 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='s√¥ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-07 15:17:48 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-07 15:17:48 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-07 15:17:48 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-07 15:17:48 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-07 15:17:48 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'river'
2025-12-07 15:17:48 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-07 15:17:48 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-07 15:17:52 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 647:1.0000, 7004:0.7914, 7003:0.7057, 26734:0.6697, 45208:0.6245, 52135:0.6203, 45203:0.6066, 57958:0.5982, 52134:0.5959, 18735:0.5854
2025-12-07 15:17:52 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 555451:1.0000, 537338:0.9548, 548721:0.9467, 61812:0.9170, 548920:0.9061, 44767:0.8970, 538953:0.8893, 191846:0.8797, 565716:0.8681, 555450:0.8677
2025-12-07 15:17:52 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 538951:1.0000, 538980:0.8688, 515256:0.8546, 538952:0.8066, 529140:0.7967, 555451:0.7779, 452898:0.7648, 225469:0.7264, 538995:0.6962, 655529:0.6898
2025-12-07 15:17:52 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 555451:1.0000, 538951:0.9274, 555450:0.7182, 538953:0.7010, 515256:0.6631, 537338:0.6300, 548721:0.6218, 548920:0.5969, 538952:0.5888, 61812:0.5727
2025-12-07 15:17:52 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-07 15:17:52 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-07 15:17:52 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-07 15:19:09 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='s√¥ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-07 15:19:09 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-07 15:19:09 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-07 15:19:09 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-07 15:19:10 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-07 15:19:10 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'river'
2025-12-07 15:19:10 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-07 15:19:10 - app.services.method.clip_client - ERROR - [CLIP] Batch request failed: 404 Client Error: Not Found for url: https://e5244a016963.ngrok-free.app/embedding/clip/text/batch, falling back
2025-12-07 15:19:11 - app.services.method.beit3_client - ERROR - [BEiT3] Batch request failed: 404 Client Error: Not Found for url: https://e5244a016963.ngrok-free.app/embedding/beit3/text/batch, falling back
2025-12-07 15:19:12 - app.services.method.bigg_client - ERROR - [BIGG] Batch request failed: 404 Client Error: Not Found for url: https://e5244a016963.ngrok-free.app/embedding/bigg/text/batch, falling back
2025-12-07 15:19:12 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 647:1.0000, 7004:0.7914, 7003:0.7057, 26734:0.6697, 45208:0.6245, 52135:0.6203, 45203:0.6066, 57958:0.5982, 52134:0.5959, 18735:0.5854
2025-12-07 15:19:12 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 555451:1.0000, 537338:0.9548, 548721:0.9467, 61812:0.9170, 548920:0.9061, 44767:0.8970, 538953:0.8893, 191846:0.8797, 565716:0.8681, 555450:0.8677
2025-12-07 15:19:12 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 538951:1.0000, 538980:0.8688, 515256:0.8546, 538952:0.8066, 529140:0.7967, 555451:0.7779, 452898:0.7648, 225469:0.7264, 538995:0.6962, 655529:0.6898
2025-12-07 15:19:12 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 555451:1.0000, 538951:0.9274, 555450:0.7182, 538953:0.7010, 515256:0.6631, 537338:0.6300, 548721:0.6218, 548920:0.5969, 538952:0.5888, 61812:0.5727
2025-12-07 15:19:12 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-07 15:19:12 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-07 15:19:12 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-07 15:19:43 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='s√¥ng', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-07 15:19:43 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-07 15:19:43 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-07 15:19:43 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-07 15:19:43 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 's√¥ng'
2025-12-07 15:19:43 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 's√¥ng'
2025-12-07 15:19:43 - elastic_transport.transport - INFO - GET http://elasticsearch:9200/ [status:200 duration:0.004s]
2025-12-07 15:19:43 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.213s]
2025-12-07 15:19:43 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 641902:0.9962, 641900:0.9927, 641901:0.9927, 641899:0.9902, 435870:0.9469, 435869:0.9168, 642460:0.9050, 642459:0.8890, 642458:0.8518, 435873:0.8502
2025-12-07 15:19:43 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-07 15:19:43 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-07 15:19:43 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-07 15:20:00 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='s√¥ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-07 15:20:00 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-07 15:20:00 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-07 15:20:00 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-07 15:20:00 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-07 15:20:00 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'river'
2025-12-07 15:20:00 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-07 15:20:00 - app.services.method.clip_client - ERROR - [CLIP] Batch request failed: 404 Client Error: Not Found for url: https://e5244a016963.ngrok-free.app/embedding/clip/text/batch, falling back
2025-12-07 15:20:01 - app.services.method.beit3_client - ERROR - [BEiT3] Batch request failed: 404 Client Error: Not Found for url: https://e5244a016963.ngrok-free.app/embedding/beit3/text/batch, falling back
2025-12-07 15:20:02 - app.services.method.bigg_client - ERROR - [BIGG] Batch request failed: 404 Client Error: Not Found for url: https://e5244a016963.ngrok-free.app/embedding/bigg/text/batch, falling back
2025-12-07 15:20:02 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 647:1.0000, 7004:0.7914, 7003:0.7057, 26734:0.6697, 45208:0.6245, 52135:0.6203, 45203:0.6066, 57958:0.5982, 52134:0.5959, 18735:0.5854
2025-12-07 15:20:02 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 555451:1.0000, 537338:0.9548, 548721:0.9467, 61812:0.9170, 548920:0.9061, 44767:0.8970, 538953:0.8893, 191846:0.8797, 565716:0.8681, 555450:0.8677
2025-12-07 15:20:02 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 538951:1.0000, 538980:0.8688, 515256:0.8546, 538952:0.8066, 529140:0.7967, 555451:0.7779, 452898:0.7648, 225469:0.7264, 538995:0.6962, 655529:0.6898
2025-12-07 15:20:02 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 555451:1.0000, 538951:0.9274, 555450:0.7182, 538953:0.7010, 515256:0.6631, 537338:0.6300, 548721:0.6218, 548920:0.5969, 538952:0.5888, 61812:0.5727
2025-12-07 15:20:02 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-07 15:20:02 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-07 15:20:02 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-07 15:20:42 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='c·∫≠u b√© da ƒëen', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-07 15:20:42 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-07 15:20:42 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-07 15:20:42 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-07 15:20:43 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c·∫≠u b√© da ƒëen' ‚Üí 'black boy'
2025-12-07 15:20:43 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'black boy'
2025-12-07 15:20:43 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-07 15:20:43 - app.services.method.clip_client - ERROR - [CLIP] Batch request failed: 404 Client Error: Not Found for url: https://e5244a016963.ngrok-free.app/embedding/clip/text/batch, falling back
2025-12-07 15:20:44 - app.services.method.beit3_client - ERROR - [BEiT3] Batch request failed: 404 Client Error: Not Found for url: https://e5244a016963.ngrok-free.app/embedding/beit3/text/batch, falling back
2025-12-07 15:20:45 - app.services.method.bigg_client - ERROR - [BIGG] Batch request failed: 404 Client Error: Not Found for url: https://e5244a016963.ngrok-free.app/embedding/bigg/text/batch, falling back
2025-12-07 15:20:46 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 710:1.0000, 711:0.9894, 712:0.9372, 44980:0.8117, 44977:0.8106, 52464:0.7737, 703:0.7623, 52463:0.7575, 52462:0.7570, 702:0.7496
2025-12-07 15:20:46 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 627930:1.0000, 627924:0.9957, 627931:0.9697, 275117:0.7026, 542865:0.6618, 575924:0.6595, 575920:0.6193, 590108:0.6178, 542885:0.6117, 575918:0.6111
2025-12-07 15:20:46 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 275117:1.0000, 627924:0.9536, 383684:0.8568, 242597:0.6431, 511973:0.6273, 627923:0.6146, 113227:0.5811, 359417:0.5808, 265664:0.5626, 233568:0.5558
2025-12-07 15:20:46 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 627924:1.0000, 275117:0.7647, 627931:0.6196, 627930:0.5693, 710:0.4691, 542865:0.4358, 711:0.4208, 74890:0.4043, 575920:0.3113, 590108:0.3100
2025-12-07 15:20:46 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-07 15:20:46 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-07 15:20:46 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-07 15:23:43 - root - INFO - üõë Shutting down FastAPI application...
2025-12-07 15:23:46 - root - INFO - Mounted keyframe directory at /keyframe: /app/app/data/keyframe
2025-12-07 15:23:46 - root - INFO - üöÄ Starting FastAPI application...
2025-12-07 15:23:46 - root - INFO - Log directory: logs/
2025-12-07 15:23:46 - root - INFO - Search queries log: logs/search_queries.log
2025-12-07 15:23:46 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-07 15:23:46 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-07 15:23:46 - app.database.db - INFO -    Current submissions count: 3
2025-12-07 15:23:54 - root - INFO - üõë Shutting down FastAPI application...
2025-12-07 15:23:58 - root - INFO - Mounted keyframe directory at /keyframe: /app/app/data/keyframe
2025-12-07 15:23:58 - root - INFO - üöÄ Starting FastAPI application...
2025-12-07 15:23:58 - root - INFO - Log directory: logs/
2025-12-07 15:23:58 - root - INFO - Search queries log: logs/search_queries.log
2025-12-07 15:23:58 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-07 15:23:58 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-07 15:23:58 - app.database.db - INFO -    Current submissions count: 3
2025-12-07 15:24:32 - root - INFO - üõë Shutting down FastAPI application...
2025-12-07 15:24:36 - root - INFO - Mounted keyframe directory at /keyframe: /app/app/data/keyframe
2025-12-07 15:24:36 - root - INFO - üöÄ Starting FastAPI application...
2025-12-07 15:24:36 - root - INFO - Log directory: logs/
2025-12-07 15:24:36 - root - INFO - Search queries log: logs/search_queries.log
2025-12-07 15:24:36 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-07 15:24:36 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-07 15:24:36 - app.database.db - INFO -    Current submissions count: 3
2025-12-07 15:25:06 - root - INFO - üõë Shutting down FastAPI application...
2025-12-07 15:25:10 - root - INFO - Mounted keyframe directory at /keyframe: /app/app/data/keyframe
2025-12-07 15:25:10 - root - INFO - üöÄ Starting FastAPI application...
2025-12-07 15:25:10 - root - INFO - Log directory: logs/
2025-12-07 15:25:10 - root - INFO - Search queries log: logs/search_queries.log
2025-12-07 15:25:10 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-07 15:25:10 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-07 15:25:10 - app.database.db - INFO -    Current submissions count: 3
2025-12-07 15:27:29 - root - INFO - üõë Shutting down FastAPI application...
2025-12-07 15:27:33 - root - INFO - Mounted keyframe directory at /keyframe: /app/app/data/keyframe
2025-12-07 15:27:33 - root - INFO - üöÄ Starting FastAPI application...
2025-12-07 15:27:33 - root - INFO - Log directory: logs/
2025-12-07 15:27:33 - root - INFO - Search queries log: logs/search_queries.log
2025-12-07 15:27:33 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-07 15:27:33 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-07 15:27:33 - app.database.db - INFO -    Current submissions count: 3
2025-12-07 15:31:36 - root - INFO - üõë Shutting down FastAPI application...
2025-12-07 15:32:17 - root - INFO - Mounted keyframe directory at /keyframe: /app/app/data/keyframe
2025-12-07 15:32:17 - root - INFO - üöÄ Starting FastAPI application...
2025-12-07 15:32:17 - root - INFO - Log directory: logs/
2025-12-07 15:32:17 - root - INFO - Search queries log: logs/search_queries.log
2025-12-07 15:32:17 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-07 15:32:17 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-07 15:32:17 - app.database.db - INFO -    Current submissions count: 3
2025-12-07 15:32:48 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='c·∫≠u b√© da ƒëen', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-07 15:32:48 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-07 15:32:48 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-07 15:32:48 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-07 15:32:49 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c·∫≠u b√© da ƒëen' ‚Üí 'black boy'
2025-12-07 15:32:49 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'black boy'
2025-12-07 15:32:49 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-07 15:32:49 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-07 15:32:50 - app.services.method.clip_client - INFO - [CLIP] Batch endpoint available, processed 1 texts
2025-12-07 15:32:52 - app.services.method.beit3_client - INFO - [BEiT3] Batch endpoint available, processed 1 texts
2025-12-07 15:32:53 - app.services.method.bigg_client - INFO - [BIGG] Batch endpoint available, processed 1 texts
2025-12-07 15:32:53 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 710:1.0000, 711:0.9894, 712:0.9372, 44980:0.8117, 44977:0.8106, 52464:0.7737, 703:0.7623, 52463:0.7575, 52462:0.7570, 702:0.7496
2025-12-07 15:32:53 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 627930:1.0000, 627924:0.9957, 627931:0.9697, 275117:0.7026, 542865:0.6618, 575924:0.6595, 575920:0.6193, 590108:0.6178, 542885:0.6117, 575918:0.6111
2025-12-07 15:32:53 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 275117:1.0000, 627924:0.9536, 383684:0.8568, 242597:0.6431, 511973:0.6273, 627923:0.6146, 113227:0.5811, 359417:0.5808, 265664:0.5626, 233568:0.5558
2025-12-07 15:32:53 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 627924:1.0000, 275117:0.7647, 627931:0.6196, 627930:0.5693, 710:0.4691, 542865:0.4358, 711:0.4208, 74890:0.4043, 575920:0.3113, 590108:0.3100
2025-12-07 15:32:53 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-07 15:32:53 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-07 15:32:53 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-07 15:36:27 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='s√¥ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-07 15:36:27 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-07 15:36:27 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-07 15:36:27 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-07 15:36:27 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-07 15:36:27 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'river'
2025-12-07 15:36:27 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-07 15:36:32 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 647:1.0000, 7004:0.7914, 7003:0.7057, 26734:0.6697, 45208:0.6245, 52135:0.6203, 45203:0.6066, 57958:0.5982, 52134:0.5959, 18735:0.5854
2025-12-07 15:36:32 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 555451:1.0000, 537338:0.9548, 548721:0.9467, 61812:0.9170, 548920:0.9061, 44767:0.8970, 538953:0.8893, 191846:0.8797, 565716:0.8681, 555450:0.8677
2025-12-07 15:36:32 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 538951:1.0000, 538980:0.8688, 515256:0.8546, 538952:0.8066, 529140:0.7967, 555451:0.7779, 452898:0.7648, 225469:0.7264, 538995:0.6962, 655529:0.6898
2025-12-07 15:36:32 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 555451:1.0000, 538951:0.9274, 555450:0.7182, 538953:0.7010, 515256:0.6631, 537338:0.6300, 548721:0.6218, 548920:0.5969, 538952:0.5888, 61812:0.5727
2025-12-07 15:36:32 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-07 15:36:32 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-07 15:36:32 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-07 15:42:12 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='ng∆∞·ªùi ƒë√†n √¥ng ƒë·ªçi o n√≥n ƒë·ªè', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-07 15:42:12 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-07 15:42:12 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-07 15:42:12 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-07 15:42:13 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'ng∆∞·ªùi ƒë√†n √¥ng ƒë·ªçi o n√≥n ƒë·ªè' ‚Üí 'man wearing a red hat'
2025-12-07 15:42:13 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'man wearing a red hat'
2025-12-07 15:42:13 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-07 15:42:16 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 277:1.0000, 6221:0.9840, 207:0.9822, 208:0.9326, 210:0.9169, 209:0.8471, 6223:0.8289, 6224:0.8218, 6215:0.8020, 275:0.7986
2025-12-07 15:42:16 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 208:1.0000, 336781:0.8977, 336782:0.8632, 149959:0.8292, 336783:0.8278, 124461:0.8100, 336784:0.7935, 222780:0.7694, 149958:0.7682, 149960:0.7645
2025-12-07 15:42:16 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 170570:1.0000, 400062:0.6907, 208:0.6824, 448481:0.6553, 336785:0.6339, 82085:0.6318, 325698:0.6314, 210:0.6012, 209:0.5998, 336781:0.5874
2025-12-07 15:42:16 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 208:1.0000, 209:0.7361, 336781:0.6128, 210:0.5550, 336782:0.5497, 336783:0.5425, 207:0.5308, 336785:0.4752, 336780:0.4650, 336784:0.4492
2025-12-07 15:42:16 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-07 15:42:16 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-07 15:42:16 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-07 15:42:18 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='ng∆∞·ªùi ƒë√†n √¥ng ƒë·ªôi n√≥n ƒë·ªè', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-07 15:42:18 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-07 15:42:18 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-07 15:42:18 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-07 15:42:20 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'ng∆∞·ªùi ƒë√†n √¥ng ƒë·ªôi n√≥n ƒë·ªè' ‚Üí 'man wearing red hat'
2025-12-07 15:42:20 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'man wearing red hat'
2025-12-07 15:42:20 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-07 15:42:23 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 207:1.0000, 208:0.9569, 210:0.9486, 209:0.8987, 6223:0.8531, 6224:0.8307, 6222:0.7873, 6215:0.7719, 6214:0.7509, 275:0.7464
2025-12-07 15:42:23 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 208:1.0000, 336781:0.9321, 336782:0.9062, 149959:0.8526, 336783:0.8422, 333319:0.8240, 336784:0.8115, 124461:0.8103, 209:0.7961, 222780:0.7935
2025-12-07 15:42:23 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 170570:1.0000, 208:0.8203, 210:0.7478, 209:0.7230, 82085:0.6991, 448481:0.6974, 400062:0.6624, 603287:0.6070, 448482:0.5906, 325698:0.5734
2025-12-07 15:42:23 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 208:1.0000, 209:0.8020, 210:0.6688, 207:0.6013, 333319:0.4733, 336781:0.3810, 333326:0.3776, 619473:0.3674, 336782:0.3641, 222780:0.3413
2025-12-07 15:42:23 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-07 15:42:23 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-07 15:42:23 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-07 15:52:36 - root - INFO - üõë Shutting down FastAPI application...
2025-12-07 15:53:18 - root - INFO - Mounted keyframe directory at /keyframe: /app/app/data/keyframe
2025-12-07 15:53:18 - root - INFO - üöÄ Starting FastAPI application...
2025-12-07 15:53:18 - root - INFO - Log directory: logs/
2025-12-07 15:53:18 - root - INFO - Search queries log: logs/search_queries.log
2025-12-07 15:53:18 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-07 15:53:18 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-07 15:53:18 - app.database.db - INFO -    Current submissions count: 3
2025-12-07 15:53:39 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='s√¥ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-07 15:53:39 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-07 15:53:39 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-07 15:53:39 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-07 15:53:40 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-07 15:53:40 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'river'
2025-12-07 15:53:40 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-07 15:53:40 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-07 15:53:41 - app.services.method.clip_client - INFO - [CLIP] Batch endpoint available, processed 1 texts
2025-12-07 15:53:43 - app.services.method.beit3_client - INFO - [BEiT3] Batch endpoint available, processed 1 texts
2025-12-07 15:53:43 - app.services.method.bigg_client - INFO - [BIGG] Batch endpoint available, processed 1 texts
2025-12-07 15:53:44 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 647:1.0000, 7004:0.7914, 7003:0.7057, 26734:0.6697, 45208:0.6245, 52135:0.6203, 45203:0.6066, 57958:0.5982, 52134:0.5959, 18735:0.5854
2025-12-07 15:53:44 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 555451:1.0000, 537338:0.9548, 548721:0.9467, 61812:0.9170, 548920:0.9061, 44767:0.8970, 538953:0.8893, 191846:0.8797, 565716:0.8681, 555450:0.8677
2025-12-07 15:53:44 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 538951:1.0000, 538980:0.8688, 515256:0.8546, 538952:0.8066, 529140:0.7967, 555451:0.7779, 452898:0.7648, 225469:0.7264, 538995:0.6962, 655529:0.6898
2025-12-07 15:53:44 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 555451:1.0000, 538951:0.9274, 555450:0.7182, 538953:0.7010, 515256:0.6631, 537338:0.6300, 548721:0.6218, 548920:0.5969, 538952:0.5888, 61812:0.5727
2025-12-07 15:53:44 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-07 15:53:44 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-07 15:53:44 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-07 15:55:38 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='s√¥ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-07 15:55:38 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-07 15:55:38 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-07 15:55:38 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-07 15:55:38 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-07 15:55:38 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'river'
2025-12-07 15:55:38 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-07 15:55:41 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 647:1.0000, 7004:0.7914, 7003:0.7057, 26734:0.6697, 45208:0.6245, 52135:0.6203, 45203:0.6066, 57958:0.5982, 52134:0.5959, 18735:0.5854
2025-12-07 15:55:41 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 555451:1.0000, 537338:0.9548, 548721:0.9467, 61812:0.9170, 548920:0.9061, 44767:0.8970, 538953:0.8893, 191846:0.8797, 565716:0.8681, 555450:0.8677
2025-12-07 15:55:41 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 538951:1.0000, 538980:0.8688, 515256:0.8546, 538952:0.8066, 529140:0.7967, 555451:0.7779, 452898:0.7648, 225469:0.7264, 538995:0.6962, 655529:0.6898
2025-12-07 15:55:41 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 555451:1.0000, 538951:0.9274, 555450:0.7182, 538953:0.7010, 515256:0.6631, 537338:0.6300, 548721:0.6218, 548920:0.5969, 538952:0.5888, 61812:0.5727
2025-12-07 15:55:41 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-07 15:55:41 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-07 15:55:41 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-07 15:55:54 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='trung qu·ªëc', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-07 15:55:54 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-07 15:55:54 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-07 15:55:54 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-07 15:55:54 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'trung qu·ªëc'
2025-12-07 15:55:54 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'trung qu·ªëc'
2025-12-07 15:55:54 - elastic_transport.transport - INFO - GET http://elasticsearch:9200/ [status:200 duration:0.007s]
2025-12-07 15:55:54 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.201s]
2025-12-07 15:55:54 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 233704:0.9945, 233705:0.9812, 233703:0.9712, 190692:0.9274, 190682:0.9143, 190688:0.9143, 190687:0.8988, 190681:0.8814, 190683:0.8814, 611104:0.8814
2025-12-07 15:55:54 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-07 15:55:54 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-07 15:55:54 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-07 16:12:11 - root - INFO - üõë Shutting down FastAPI application...
2025-12-07 16:12:17 - root - INFO - Mounted keyframe directory at /keyframe: /app/app/data/keyframe
2025-12-07 16:12:17 - root - INFO - üöÄ Starting FastAPI application...
2025-12-07 16:12:17 - root - INFO - Log directory: logs/
2025-12-07 16:12:17 - root - INFO - Search queries log: logs/search_queries.log
2025-12-07 16:12:17 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-07 16:12:17 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-07 16:12:17 - app.database.db - INFO -    Current submissions count: 3
2025-12-07 16:12:48 - root - INFO - üõë Shutting down FastAPI application...
2025-12-07 16:13:31 - root - INFO - Mounted keyframe directory at /keyframe: /app/app/data/keyframe
2025-12-07 16:13:31 - root - INFO - üöÄ Starting FastAPI application...
2025-12-07 16:13:31 - root - INFO - Log directory: logs/
2025-12-07 16:13:31 - root - INFO - Search queries log: logs/search_queries.log
2025-12-07 16:13:31 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-07 16:13:31 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-07 16:13:31 - app.database.db - INFO -    Current submissions count: 3
2025-12-08 01:41:48 - root - INFO - üõë Shutting down FastAPI application...
2025-12-08 01:42:29 - root - INFO - Mounted keyframe directory at /keyframe: /app/app/data/keyframe
2025-12-08 01:42:29 - root - INFO - üöÄ Starting FastAPI application...
2025-12-08 01:42:29 - root - INFO - Log directory: logs/
2025-12-08 01:42:29 - root - INFO - Search queries log: logs/search_queries.log
2025-12-08 01:42:29 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-08 01:42:29 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-08 01:42:29 - app.database.db - INFO -    Current submissions count: 3
2025-12-08 01:42:36 - root - INFO - üõë Shutting down FastAPI application...
2025-12-08 01:49:36 - root - INFO - Mounted keyframe directory at /keyframe: /app/app/data/keyframe
2025-12-08 01:49:36 - root - INFO - üöÄ Starting FastAPI application...
2025-12-08 01:49:36 - root - INFO - Log directory: logs/
2025-12-08 01:49:36 - root - INFO - Search queries log: logs/search_queries.log
2025-12-08 01:49:36 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-08 01:49:36 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-08 01:49:36 - app.database.db - INFO -    Current submissions count: 3
2025-12-08 02:02:58 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='s√¥ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-08 02:02:58 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-08 02:02:58 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-08 02:02:58 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-08 02:02:58 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-08 02:02:58 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'river'
2025-12-08 02:02:58 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-08 02:02:58 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-08 02:03:00 - app.services.method.clip_client - INFO - [CLIP] Batch endpoint available, processed 1 texts
2025-12-08 02:03:01 - app.services.method.beit3_client - INFO - [BEiT3] Batch endpoint available, processed 1 texts
2025-12-08 02:03:03 - app.services.method.bigg_client - INFO - [BIGG] Batch endpoint available, processed 1 texts
2025-12-08 02:03:03 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 647:1.0000, 529140:0.9460, 356123:0.8423, 356127:0.7780, 581944:0.7694, 537346:0.7518, 537347:0.7372, 356122:0.7333, 581943:0.7038, 452901:0.6916
2025-12-08 02:03:03 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 555451:1.0000, 537338:0.9548, 548721:0.9467, 61812:0.9170, 548920:0.9061, 44767:0.8970, 538953:0.8893, 191846:0.8797, 565716:0.8681, 555450:0.8677
2025-12-08 02:03:03 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 538951:1.0000, 538980:0.8688, 515256:0.8546, 538952:0.8066, 529140:0.7967, 555451:0.7779, 452898:0.7648, 225469:0.7264, 538995:0.6962, 655529:0.6898
2025-12-08 02:03:03 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 555451:1.0000, 538951:0.9438, 515256:0.7174, 555450:0.6917, 538953:0.6843, 538952:0.6517, 537338:0.5491, 515253:0.4819, 44767:0.4687, 548721:0.4592
2025-12-08 02:03:03 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-08 02:03:03 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-08 02:03:03 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-08 02:31:52 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='n√∫i', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-08 02:31:52 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-08 02:31:52 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-08 02:31:52 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-08 02:31:52 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'n√∫i' ‚Üí 'mountain'
2025-12-08 02:31:52 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'mountain'
2025-12-08 02:31:52 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-08 02:31:53 - app.services.method.clip_client - WARNING - [CLIP] Batch request failed: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text/batch, falling back to individual calls
2025-12-08 02:31:54 - app.services.method.beit3_client - WARNING - [BEiT3] Batch request failed: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text/batch, falling back to individual calls
2025-12-08 02:31:55 - app.services.method.bigg_client - WARNING - [BIGG] Batch request failed: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text/batch, falling back to individual calls
2025-12-08 02:31:56 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 501128:1.0000, 381522:0.8861, 501127:0.8683, 43070:0.8553, 381521:0.7660, 165905:0.7594, 395248:0.7500, 43069:0.7405, 381520:0.7288, 356233:0.7196
2025-12-08 02:31:56 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 466862:1.0000, 501151:0.9712, 512060:0.9551, 501150:0.9254, 512061:0.8941, 281098:0.8753, 619366:0.8620, 616370:0.8056, 511402:0.8034, 417391:0.7923
2025-12-08 02:31:56 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 314541:1.0000, 501127:0.9839, 356243:0.9573, 501133:0.9334, 501128:0.9213, 501134:0.8109, 511401:0.7988, 501138:0.7416, 501136:0.7354, 501137:0.7094
2025-12-08 02:31:56 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 501127:1.0000, 501128:0.7870, 314541:0.7565, 501151:0.7396, 501134:0.7311, 501133:0.6662, 381520:0.6537, 501150:0.6261, 501138:0.5873, 512060:0.5809
2025-12-08 02:31:56 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-08 02:31:56 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-08 02:31:56 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-08 02:32:19 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o ƒë·ªè', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-08 02:32:19 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-08 02:32:19 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-08 02:32:19 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-08 02:32:20 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o ƒë·ªè' ‚Üí 'man wearing red shirt'
2025-12-08 02:32:20 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'man wearing red shirt'
2025-12-08 02:32:20 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-08 02:32:20 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-08 02:32:20 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: man wearing red shirt
2025-12-08 02:32:20 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-08 02:32:20 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: man wearing red shirt
2025-12-08 02:32:21 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-08 02:32:21 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: man wearing red shirt
2025-12-08 02:32:21 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-08 02:32:21 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-08 02:32:21 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-08 02:32:21 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-08 02:32:21 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-08 02:32:21 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-08 02:32:21 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-08 02:32:28 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 3 stages
2025-12-08 02:32:28 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o ƒë·ªè', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-08 02:32:28 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='s√¥ng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-08 02:32:28 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='r·ª´ng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-08 02:32:28 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o ƒë·ªè'
2025-12-08 02:32:30 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o ƒë·ªè' ‚Üí 'man wearing red shirt'
2025-12-08 02:32:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'man wearing red shirt'
2025-12-08 02:32:30 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-08 02:32:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='man wearing red shirt', Q1='man wearing red shirt', Q2='man wearing red shirt'
2025-12-08 02:32:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 's√¥ng'
2025-12-08 02:32:31 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-08 02:32:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'river'
2025-12-08 02:32:31 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-08 02:32:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='river', Q1='river', Q2='river'
2025-12-08 02:32:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: 'r·ª´ng'
2025-12-08 02:32:31 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-08 02:32:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 translated: 'forest'
2025-12-08 02:32:31 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-08 02:32:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 queries: Q0='forest', Q1='forest', Q2='forest'
2025-12-08 02:32:32 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-08 02:32:32 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: man wearing red shirt
2025-12-08 02:32:32 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-08 02:32:32 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: river
2025-12-08 02:32:32 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-08 02:32:32 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: river
2025-12-08 02:32:32 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-08 02:32:32 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest
2025-12-08 02:32:32 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-08 02:32:32 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: river
2025-12-08 02:32:32 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-08 02:32:32 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-08 02:32:32 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-08 02:32:32 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-08 02:32:32 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-08 02:32:32 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-08 02:32:32 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-08 02:32:32 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-08 02:32:32 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-08 02:32:32 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-08 02:32:33 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-08 02:32:33 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: river
2025-12-08 02:32:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-08 02:32:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 Q0 results: 200, Q1: 0, Q2: 200
2025-12-08 02:32:34 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-08 02:32:34 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: man wearing red shirt
2025-12-08 02:32:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-08 02:32:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 3 stages in 6328.43ms
2025-12-08 02:32:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-08 02:32:35 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 600 unique ids from 3 stages
2025-12-08 02:32:35 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 600 unique ids
2025-12-08 02:32:43 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 3 stages
2025-12-08 02:32:43 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o ƒë·ªè', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-08 02:32:43 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='s√¥ng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-08 02:32:43 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='r·ª´ng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-08 02:32:43 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o ƒë·ªè'
2025-12-08 02:32:44 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o ƒë·ªè' ‚Üí 'man wearing red shirt'
2025-12-08 02:32:44 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'man wearing red shirt'
2025-12-08 02:32:44 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-08 02:32:44 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='man wearing red shirt', Q1='man wearing red shirt', Q2='man wearing red shirt'
2025-12-08 02:32:44 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 's√¥ng'
2025-12-08 02:32:44 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-08 02:32:44 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'river'
2025-12-08 02:32:44 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-08 02:32:44 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='river', Q1='river', Q2='river'
2025-12-08 02:32:44 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: 'r·ª´ng'
2025-12-08 02:32:45 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-08 02:32:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 translated: 'forest'
2025-12-08 02:32:45 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-08 02:32:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 queries: Q0='forest', Q1='forest', Q2='forest'
2025-12-08 02:32:45 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-08 02:32:45 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: man wearing red shirt
2025-12-08 02:32:45 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-08 02:32:45 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: man wearing red shirt
2025-12-08 02:32:45 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-08 02:32:45 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest
2025-12-08 02:32:45 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-08 02:32:45 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: river
2025-12-08 02:32:45 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-08 02:32:45 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest
2025-12-08 02:32:45 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-08 02:32:45 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-08 02:32:45 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-08 02:32:45 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: man wearing red shirt
2025-12-08 02:32:45 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-08 02:32:45 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-08 02:32:45 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-08 02:32:45 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-08 02:32:45 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-08 02:32:45 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-08 02:32:46 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-08 02:32:46 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-08 02:32:46 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: river
2025-12-08 02:32:46 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-08 02:32:46 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-08 02:32:46 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: river
2025-12-08 02:32:46 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-08 02:32:46 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-08 02:32:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 Q0 results: 0, Q1: 200, Q2: 0
2025-12-08 02:32:47 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-08 02:32:47 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: river
2025-12-08 02:32:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-08 02:32:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-08 02:32:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 3 stages in 3832.88ms
2025-12-08 02:32:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-08 02:32:47 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 3 stages
2025-12-08 02:32:47 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 72 videos with results
2025-12-08 02:32:47 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 81 videos with results
2025-12-08 02:32:47 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 3: 64 videos with results
2025-12-08 02:32:47 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 1 common videos across all stages
2025-12-08 02:32:47 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 0 valid tuples
2025-12-08 02:32:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 0 valid tuples
2025-12-08 04:14:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-08 04:14:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='con g√†\', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-08 04:14:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-08 04:14:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'con g√†\'
2025-12-08 04:14:23 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'con g√†\' ‚Üí 'chicken\'
2025-12-08 04:14:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'chicken\'
2025-12-08 04:14:23 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-08 04:14:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='chicken\', Q1='chicken\', Q2='chicken\'
2025-12-08 04:14:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-08 04:14:23 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-08 04:14:23 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-08 04:14:23 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: chicken\
2025-12-08 04:14:24 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-08 04:14:24 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: chicken\
2025-12-08 04:14:25 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-08 04:14:25 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: chicken\
2025-12-08 04:14:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-08 04:14:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3039.94ms
2025-12-08 04:14:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-08 04:14:26 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-08 04:14:26 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-08 04:14:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-08 04:14:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='3 con ch√≥', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': True}, objects=[]
2025-12-08 04:14:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-08 04:14:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: '3 con ch√≥'
2025-12-08 04:14:35 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: '3 con ch√≥' ‚Üí '3 dogs'
2025-12-08 04:14:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: '3 dogs'
2025-12-08 04:14:35 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-08 04:14:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='3 dogs', Q1='3 dogs', Q2='3 dogs'
2025-12-08 04:14:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-08 04:14:35 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-08 04:14:35 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-08 04:14:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: 3 dogs
2025-12-08 04:14:35 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-08 04:14:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: 3 dogs
2025-12-08 04:14:35 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-08 04:14:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: 3 dogs
2025-12-08 04:14:35 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-08 04:14:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: 3 dogs
2025-12-08 04:14:36 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-08 04:14:36 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: 3 dogs
2025-12-08 04:14:36 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-08 04:14:36 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: 3 dogs
2025-12-08 04:14:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 0
2025-12-08 04:14:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2255.36ms
2025-12-08 04:14:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-08 04:14:37 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-08 04:14:37 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-08 04:14:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-08 04:14:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='3 con ch√≥\\', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': True}, objects=[]
2025-12-08 04:14:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-08 04:14:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: '3 con ch√≥\\'
2025-12-08 04:14:48 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: '3 con ch√≥\\' ‚Üí '3 dogs\'
2025-12-08 04:14:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: '3 dogs\'
2025-12-08 04:14:49 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-08 04:14:49 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='3 dogs\', Q1='3 dogs\', Q2='3 dogs\'
2025-12-08 04:14:49 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-08 04:14:49 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-08 04:14:49 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-08 04:14:49 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: 3 dogs\
2025-12-08 04:14:50 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-08 04:14:50 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: 3 dogs\
2025-12-08 04:14:50 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-08 04:14:50 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: 3 dogs\
2025-12-08 04:14:51 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-08 04:14:51 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2912.19ms
2025-12-08 04:14:51 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-08 04:14:51 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-08 04:14:51 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-08 04:14:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-08 04:14:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='con heo', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': True}, objects=[]
2025-12-08 04:14:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-08 04:14:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'con heo'
2025-12-08 04:14:59 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-08 04:14:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='con heo', Q1='con heo', Q2='con heo'
2025-12-08 04:14:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-08 04:14:59 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-08 04:14:59 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-08 04:14:59 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: con heo
2025-12-08 04:14:59 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-08 04:14:59 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: con heo
2025-12-08 04:14:59 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-08 04:14:59 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: con heo
2025-12-08 04:14:59 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-08 04:14:59 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: con heo
2025-12-08 04:15:00 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-08 04:15:00 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: con heo
2025-12-08 04:15:00 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-08 04:15:00 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: con heo
2025-12-08 04:15:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 0
2025-12-08 04:15:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2058.84ms
2025-12-08 04:15:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-08 04:15:01 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-08 04:15:01 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-08 04:15:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-08 04:15:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='ch·ªãch', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': True}, objects=[]
2025-12-08 04:15:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-08 04:15:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'ch·ªãch'
2025-12-08 04:15:03 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'ch·ªãch' ‚Üí 'fuck'
2025-12-08 04:15:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'fuck'
2025-12-08 04:15:03 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-08 04:15:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='fuck', Q1='fuck', Q2='fuck'
2025-12-08 04:15:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-08 04:15:03 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-08 04:15:03 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-08 04:15:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: fuck
2025-12-08 04:15:04 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-08 04:15:04 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: fuck
2025-12-08 04:15:04 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-08 04:15:04 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: fuck
2025-12-08 04:15:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-08 04:15:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2337.18ms
2025-12-08 04:15:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-08 04:15:05 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-08 04:15:05 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-08 04:15:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-08 04:15:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='kh√°ch', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': True}, objects=[]
2025-12-08 04:15:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-08 04:15:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'kh√°ch'
2025-12-08 04:15:09 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'kh√°ch' ‚Üí 'guest'
2025-12-08 04:15:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'guest'
2025-12-08 04:15:09 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-08 04:15:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='guest', Q1='guest', Q2='guest'
2025-12-08 04:15:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-08 04:15:09 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-08 04:15:09 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-08 04:15:09 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: guest
2025-12-08 04:15:09 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-08 04:15:09 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: guest
2025-12-08 04:15:10 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-08 04:15:10 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: guest
2025-12-08 04:15:10 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-08 04:15:10 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: guest
2025-12-08 04:15:10 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-08 04:15:10 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: guest
2025-12-08 04:15:11 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-08 04:15:11 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: guest
2025-12-08 04:15:11 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 0
2025-12-08 04:15:11 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2202.65ms
2025-12-08 04:15:11 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-08 04:15:11 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-08 04:15:11 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-08 04:15:14 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-08 04:15:14 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='f', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': True}, objects=[]
2025-12-08 04:15:14 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-08 04:15:14 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'f'
2025-12-08 04:15:14 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-08 04:15:14 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='f', Q1='f', Q2='f'
2025-12-08 04:15:14 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-08 04:15:14 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-08 04:15:14 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-08 04:15:14 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: f
2025-12-08 04:15:15 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-08 04:15:15 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: f
2025-12-08 04:15:16 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-08 04:15:16 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: f
2025-12-08 04:15:16 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-08 04:15:16 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2245.62ms
2025-12-08 04:15:16 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-08 04:15:16 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-08 04:15:16 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-08 04:15:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-08 04:15:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='fffffff', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': True}, objects=[]
2025-12-08 04:15:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-08 04:15:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'fffffff'
2025-12-08 04:15:17 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-08 04:15:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='fffffff', Q1='fffffff', Q2='fffffff'
2025-12-08 04:15:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-08 04:15:17 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-08 04:15:17 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-08 04:15:17 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: fffffff
2025-12-08 04:15:17 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-08 04:15:17 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: fffffff
2025-12-08 04:15:17 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-08 04:15:17 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: fffffff
2025-12-08 04:15:17 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-08 04:15:17 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: fffffff
2025-12-08 04:15:18 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-08 04:15:18 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: fffffff
2025-12-08 04:15:18 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-08 04:15:18 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: fffffff
2025-12-08 04:15:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 0
2025-12-08 04:15:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2124.80ms
2025-12-08 04:15:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-08 04:15:19 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-08 04:15:19 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-08 04:15:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-08 04:15:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='ffffffffffffff', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': True}, objects=[]
2025-12-08 04:15:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-08 04:15:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'ffffffffffffff'
2025-12-08 04:15:19 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-08 04:15:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='ffffffffffffff', Q1='ffffffffffffff', Q2='ffffffffffffff'
2025-12-08 04:15:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-08 04:15:19 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-08 04:15:19 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-08 04:15:19 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: ffffffffffffff
2025-12-08 04:15:20 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-08 04:15:20 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: ffffffffffffff
2025-12-08 04:15:20 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-08 04:15:20 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: ffffffffffffff
2025-12-08 04:15:21 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-08 04:15:21 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2274.93ms
2025-12-08 04:15:21 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-08 04:15:21 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-08 04:15:21 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-08 04:15:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-08 04:15:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='ffffffffffffff', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': True}, objects=[]
2025-12-08 04:15:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-08 04:15:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'ffffffffffffff'
2025-12-08 04:15:22 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-08 04:15:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='ffffffffffffff', Q1='ffffffffffffff', Q2='ffffffffffffff'
2025-12-08 04:15:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-08 04:15:22 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-08 04:15:22 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-08 04:15:22 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: ffffffffffffff
2025-12-08 04:15:22 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-08 04:15:22 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: ffffffffffffff
2025-12-08 04:15:22 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-08 04:15:22 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: ffffffffffffff
2025-12-08 04:15:22 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-08 04:15:22 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: ffffffffffffff
2025-12-08 04:15:23 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-08 04:15:23 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: ffffffffffffff
2025-12-08 04:15:23 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-08 04:15:23 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: ffffffffffffff
2025-12-08 04:15:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 0
2025-12-08 04:15:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 1669.75ms
2025-12-08 04:15:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-08 04:15:23 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-08 04:15:23 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-08 04:15:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-08 04:15:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='ffffffffffffff', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': True}, objects=[]
2025-12-08 04:15:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-08 04:15:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'ffffffffffffff'
2025-12-08 04:15:24 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-08 04:15:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='ffffffffffffff', Q1='ffffffffffffff', Q2='ffffffffffffff'
2025-12-08 04:15:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-08 04:15:24 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-08 04:15:24 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-08 04:15:24 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: ffffffffffffff
2025-12-08 04:15:24 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-08 04:15:24 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: ffffffffffffff
2025-12-08 04:15:25 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-08 04:15:25 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: ffffffffffffff
2025-12-08 04:15:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-08 04:15:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2436.88ms
2025-12-08 04:15:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-08 04:15:26 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-08 04:15:26 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-08 04:15:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-08 04:15:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='ffffffffffffff', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': True}, objects=[]
2025-12-08 04:15:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-08 04:15:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'ffffffffffffff'
2025-12-08 04:15:26 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-08 04:15:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='ffffffffffffff', Q1='ffffffffffffff', Q2='ffffffffffffff'
2025-12-08 04:15:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-08 04:15:26 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-08 04:15:26 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-08 04:15:26 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: ffffffffffffff
2025-12-08 04:15:26 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-08 04:15:26 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: ffffffffffffff
2025-12-08 04:15:26 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-08 04:15:26 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: ffffffffffffff
2025-12-08 04:15:26 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-08 04:15:26 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: ffffffffffffff
2025-12-08 04:15:27 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-08 04:15:27 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: ffffffffffffff
2025-12-08 04:15:27 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-08 04:15:27 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: ffffffffffffff
2025-12-08 04:15:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 0
2025-12-08 04:15:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 1669.50ms
2025-12-08 04:15:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-08 04:15:27 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-08 04:15:27 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-08 04:15:28 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-08 04:15:28 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='ffffffffffffff', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': True}, objects=[]
2025-12-08 04:15:28 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-08 04:15:28 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'ffffffffffffff'
2025-12-08 04:15:28 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-08 04:15:28 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='ffffffffffffff', Q1='ffffffffffffff', Q2='ffffffffffffff'
2025-12-08 04:15:28 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-08 04:15:28 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-08 04:15:28 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-08 04:15:28 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: ffffffffffffff
2025-12-08 04:15:29 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-08 04:15:29 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: ffffffffffffff
2025-12-08 04:15:29 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-08 04:15:29 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: ffffffffffffff
2025-12-08 04:15:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-08 04:15:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2466.08ms
2025-12-08 04:15:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-08 04:15:30 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-08 04:15:30 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-08 04:15:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-08 04:15:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='ffffffffffffff', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': True}, objects=[]
2025-12-08 04:15:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-08 04:15:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'ffffffffffffff'
2025-12-08 04:15:30 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-08 04:15:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='ffffffffffffff', Q1='ffffffffffffff', Q2='ffffffffffffff'
2025-12-08 04:15:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-08 04:15:30 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-08 04:15:31 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-08 04:15:31 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: ffffffffffffff
2025-12-08 04:15:31 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-08 04:15:31 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: ffffffffffffff
2025-12-08 04:15:31 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-08 04:15:31 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: ffffffffffffff
2025-12-08 04:15:31 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-08 04:15:31 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: ffffffffffffff
2025-12-08 04:15:31 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-08 04:15:31 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: ffffffffffffff
2025-12-08 04:15:31 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-08 04:15:31 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: ffffffffffffff
2025-12-08 04:15:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-08 04:15:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 1656.30ms
2025-12-08 04:15:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-08 04:15:32 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-08 04:15:32 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-08 04:15:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-08 04:15:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='ffffffffffffff', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': True}, objects=[]
2025-12-08 04:15:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-08 04:15:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'ffffffffffffff'
2025-12-08 04:15:32 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-08 04:15:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='ffffffffffffff', Q1='ffffffffffffff', Q2='ffffffffffffff'
2025-12-08 04:15:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-08 04:15:32 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-08 04:15:32 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-08 04:15:32 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: ffffffffffffff
2025-12-08 04:15:33 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-08 04:15:33 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: ffffffffffffff
2025-12-08 04:15:33 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-08 04:15:33 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: ffffffffffffff
2025-12-08 04:15:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-08 04:15:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2227.86ms
2025-12-08 04:15:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-08 04:15:34 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-08 04:15:34 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-08 04:15:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-08 04:15:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='ffffffffffffff', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': True}, objects=[]
2025-12-08 04:15:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-08 04:15:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'ffffffffffffff'
2025-12-08 04:15:35 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-08 04:15:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='ffffffffffffff', Q1='ffffffffffffff', Q2='ffffffffffffff'
2025-12-08 04:15:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-08 04:15:35 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-08 04:15:35 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-08 04:15:35 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-08 04:15:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: ffffffffffffff
2025-12-08 04:15:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: ffffffffffffff
2025-12-08 04:15:35 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-08 04:15:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: ffffffffffffff
2025-12-08 04:15:35 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-08 04:15:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: ffffffffffffff
2025-12-08 04:15:35 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-08 04:15:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: ffffffffffffff
2025-12-08 04:15:35 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-08 04:15:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: ffffffffffffff
2025-12-08 04:15:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 0
2025-12-08 04:15:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 1623.23ms
2025-12-08 04:15:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-08 04:15:36 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-08 04:15:36 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-08 04:15:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-08 04:15:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='ffffffffffffff', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': True}, objects=[]
2025-12-08 04:15:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-08 04:15:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'ffffffffffffff'
2025-12-08 04:15:36 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-08 04:15:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='ffffffffffffff', Q1='ffffffffffffff', Q2='ffffffffffffff'
2025-12-08 04:15:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-08 04:15:36 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-08 04:15:36 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-08 04:15:36 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: ffffffffffffff
2025-12-08 04:15:37 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-08 04:15:37 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: ffffffffffffff
2025-12-08 04:15:37 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-08 04:15:37 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: ffffffffffffff
2025-12-08 04:15:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-08 04:15:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2209.37ms
2025-12-08 04:15:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-08 04:15:38 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-08 04:15:38 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-08 04:15:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-08 04:15:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='ffffffffffffff', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': True}, objects=[]
2025-12-08 04:15:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-08 04:15:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'ffffffffffffff'
2025-12-08 04:15:39 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-08 04:15:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='ffffffffffffff', Q1='ffffffffffffff', Q2='ffffffffffffff'
2025-12-08 04:15:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-08 04:15:39 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-08 04:15:39 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-08 04:15:39 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: ffffffffffffff
2025-12-08 04:15:39 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-08 04:15:39 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: ffffffffffffff
2025-12-08 04:15:39 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-08 04:15:39 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: ffffffffffffff
2025-12-08 04:15:39 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-08 04:15:39 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: ffffffffffffff
2025-12-08 04:15:39 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-08 04:15:39 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: ffffffffffffff
2025-12-08 04:15:39 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-08 04:15:39 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: ffffffffffffff
2025-12-08 04:15:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-08 04:15:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 1648.07ms
2025-12-08 04:15:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-08 04:15:40 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-08 04:15:40 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-08 04:15:44 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-08 04:15:44 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='b·∫£y con g√†', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': True}, objects=[]
2025-12-08 04:15:44 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-08 04:15:44 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'b·∫£y con g√†'
2025-12-08 04:15:45 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'b·∫£y con g√†' ‚Üí 'seven chickens'
2025-12-08 04:15:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'seven chickens'
2025-12-08 04:15:45 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-08 04:15:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='seven chickens', Q1='seven chickens', Q2='seven chickens'
2025-12-08 04:15:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-08 04:15:45 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-08 04:15:45 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-08 04:15:45 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: seven chickens
2025-12-08 04:15:46 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-08 04:15:46 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: seven chickens
2025-12-08 04:15:46 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-08 04:15:46 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: seven chickens
2025-12-08 04:15:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-08 04:15:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3359.07ms
2025-12-08 04:15:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-08 04:15:47 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-08 04:15:47 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-08 04:15:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-08 04:15:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='th·ªãt g√†', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': True}, objects=[]
2025-12-08 04:15:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-08 04:15:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'th·ªãt g√†'
2025-12-08 04:15:50 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'th·ªãt g√†' ‚Üí 'chicken'
2025-12-08 04:15:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'chicken'
2025-12-08 04:15:51 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-08 04:15:51 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='chicken', Q1='chicken', Q2='chicken'
2025-12-08 04:15:51 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-08 04:15:51 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-08 04:15:51 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-08 04:15:51 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: chicken
2025-12-08 04:15:51 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-08 04:15:51 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: chicken
2025-12-08 04:15:51 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-08 04:15:51 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: chicken
2025-12-08 04:15:51 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-08 04:15:51 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: chicken
2025-12-08 04:15:51 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-08 04:15:51 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: chicken
2025-12-08 04:15:52 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-08 04:15:52 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: chicken
2025-12-08 04:15:52 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 0
2025-12-08 04:15:52 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2297.51ms
2025-12-08 04:15:52 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-08 04:15:52 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-08 04:15:52 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-08 04:15:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-08 04:15:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='b√°nh m√¨', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': True}, objects=[]
2025-12-08 04:15:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-08 04:15:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'b√°nh m√¨'
2025-12-08 04:15:58 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'b√°nh m√¨' ‚Üí 'bread'
2025-12-08 04:15:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'bread'
2025-12-08 04:15:58 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-08 04:15:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='bread', Q1='bread', Q2='bread'
2025-12-08 04:15:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-08 04:15:58 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-08 04:15:58 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-08 04:15:58 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: bread
2025-12-08 04:15:59 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-08 04:15:59 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: bread
2025-12-08 04:15:59 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-08 04:15:59 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: bread
2025-12-08 04:16:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-08 04:16:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2586.53ms
2025-12-08 04:16:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-08 04:16:00 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-08 04:16:00 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-08 04:17:16 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-08 04:17:16 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='m·ªôt ng∆∞·ªùi ƒë·ª©ng tr∆∞·ªõc t√≤a nh√†', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': True}, objects=[]
2025-12-08 04:17:16 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-08 04:17:16 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'm·ªôt ng∆∞·ªùi ƒë·ª©ng tr∆∞·ªõc t√≤a nh√†'
2025-12-08 04:17:17 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'm·ªôt ng∆∞·ªùi ƒë·ª©ng tr∆∞·ªõc t√≤a nh√†' ‚Üí 'a person standing in front of a building'
2025-12-08 04:17:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'a person standing in front of a building'
2025-12-08 04:17:17 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-08 04:17:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='a person standing in front of a building', Q1='a person standing in front of a building', Q2='a person standing in front of a building'
2025-12-08 04:17:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-08 04:17:17 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-08 04:17:18 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-08 04:17:18 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: a person standing in front of a building
2025-12-08 04:17:18 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-08 04:17:18 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: a person standing in front of a building
2025-12-08 04:17:18 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-08 04:17:18 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: a person standing in front of a building
2025-12-08 04:17:18 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-08 04:17:18 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: a person standing in front of a building
2025-12-08 04:17:18 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-08 04:17:18 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: a person standing in front of a building
2025-12-08 04:17:19 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-08 04:17:19 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: a person standing in front of a building
2025-12-08 04:17:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-08 04:17:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2926.70ms
2025-12-08 04:17:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-08 04:17:19 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-08 04:17:19 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-08 04:17:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-08 04:17:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='bitexco', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': True}, objects=[]
2025-12-08 04:17:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-08 04:17:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'bitexco'
2025-12-08 04:17:24 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-08 04:17:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='bitexco', Q1='bitexco', Q2='bitexco'
2025-12-08 04:17:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-08 04:17:24 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-08 04:17:24 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-08 04:17:24 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: bitexco
2025-12-08 04:17:25 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-08 04:17:25 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: bitexco
2025-12-08 04:17:25 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-08 04:17:25 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: bitexco
2025-12-08 04:17:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-08 04:17:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2195.78ms
2025-12-08 04:17:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-08 04:17:26 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-08 04:17:26 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-08 04:17:51 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-08 04:17:51 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='bitexco', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-08 04:17:51 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-08 04:17:51 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'bitexco'
2025-12-08 04:17:51 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-08 04:17:51 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='bitexco', Q1='bitexco', Q2='bitexco'
2025-12-08 04:17:51 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-08 04:17:51 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-08 04:17:51 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-08 04:17:51 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: bitexco
2025-12-08 04:17:51 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-08 04:17:51 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: bitexco
2025-12-08 04:17:51 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-08 04:17:51 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: bitexco
2025-12-08 04:17:51 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-08 04:17:51 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: bitexco
2025-12-08 04:17:52 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-08 04:17:52 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: bitexco
2025-12-08 04:17:52 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-08 04:17:52 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: bitexco
2025-12-08 04:17:52 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 0
2025-12-08 04:17:52 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 1680.13ms
2025-12-08 04:17:52 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-08 04:17:52 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-08 04:17:52 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-08 04:18:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-08 04:18:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='landmark 81', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-08 04:18:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-08 04:18:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'landmark 81'
2025-12-08 04:18:04 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-08 04:18:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='landmark 81', Q1='landmark 81', Q2='landmark 81'
2025-12-08 04:18:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-08 04:18:04 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-08 04:18:04 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-08 04:18:04 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: landmark 81
2025-12-08 04:18:05 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-08 04:18:05 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: landmark 81
2025-12-08 04:18:05 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-08 04:18:05 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: landmark 81
2025-12-08 04:18:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-08 04:18:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2410.17ms
2025-12-08 04:18:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-08 04:18:07 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-08 04:18:07 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-08 04:18:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-08 04:18:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='bitexco', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-08 04:18:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-08 04:18:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'bitexco'
2025-12-08 04:18:24 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-08 04:18:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='bitexco', Q1='bitexco', Q2='bitexco'
2025-12-08 04:18:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-08 04:18:24 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-08 04:18:24 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-08 04:18:24 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: bitexco
2025-12-08 04:18:24 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-08 04:18:24 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: bitexco
2025-12-08 04:18:24 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-08 04:18:24 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: bitexco
2025-12-08 04:18:24 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-08 04:18:24 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: bitexco
2025-12-08 04:18:25 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-08 04:18:25 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: bitexco
2025-12-08 04:18:25 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-08 04:18:25 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: bitexco
2025-12-08 04:18:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-08 04:18:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 1652.11ms
2025-12-08 04:18:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-08 04:18:25 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-08 04:18:25 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-08 04:21:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-08 04:21:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, objects=[]
2025-12-08 04:21:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-08 04:21:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: ''
2025-12-08 04:21:59 - app.services.gemini.query_augmentation - WARNING - [QUERY AUG] Empty query, returning original
2025-12-08 04:21:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='', Q1='', Q2=''
2025-12-08 04:21:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-08 04:21:59 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-08 04:21:59 - elastic_transport.transport - INFO - GET http://elasticsearch:9200/ [status:200 duration:0.004s]
2025-12-08 04:21:59 - elastic_transport.transport - INFO - GET http://elasticsearch:9200/ [status:200 duration:0.012s]
2025-12-08 04:21:59 - elastic_transport.transport - INFO - GET http://elasticsearch:9200/ [status:200 duration:0.014s]
2025-12-08 04:22:00 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.138s]
2025-12-08 04:22:00 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.150s]
2025-12-08 04:22:00 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.144s]
2025-12-08 04:22:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-08 04:22:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 175.93ms
2025-12-08 04:22:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-08 04:22:00 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-08 04:22:00 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-08 04:22:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-08 04:22:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, objects=[]
2025-12-08 04:22:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-08 04:22:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: ''
2025-12-08 04:22:05 - app.services.gemini.query_augmentation - WARNING - [QUERY AUG] Empty query, returning original
2025-12-08 04:22:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='', Q1='', Q2=''
2025-12-08 04:22:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-08 04:22:05 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-08 04:22:06 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.146s]
2025-12-08 04:22:06 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.151s]
2025-12-08 04:22:06 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.154s]
2025-12-08 04:22:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-08 04:22:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 160.70ms
2025-12-08 04:22:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-08 04:22:06 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-08 04:22:06 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-08 04:22:23 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='m·ªü ƒë·∫ßu', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-08 04:22:23 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-08 04:22:23 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-08 04:22:23 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-08 04:22:23 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'm·ªü ƒë·∫ßu'
2025-12-08 04:22:23 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'm·ªü ƒë·∫ßu'
2025-12-08 04:22:23 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.034s]
2025-12-08 04:22:23 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 14002:0.9810, 14004:0.9810, 14003:0.9553, 14227:0.9426, 306458:0.9090, 374683:0.9034, 374684:0.9034, 374685:0.9034, 320979:0.8760, 320980:0.8760
2025-12-08 04:22:23 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-08 04:22:23 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-08 04:22:23 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-08 04:22:48 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='intention', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-08 04:22:48 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-08 04:22:48 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-08 04:22:48 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-08 04:22:48 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'intention'
2025-12-08 04:22:48 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'intention'
2025-12-08 04:22:48 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.064s]
2025-12-08 04:22:48 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 113820:0.9573, 87551:0.8818, 87552:0.8818, 498611:0.8818, 498620:0.8818, 87553:0.8710, 87554:0.8710, 87555:0.8710, 87556:0.8710, 87557:0.8710
2025-12-08 04:22:48 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-08 04:22:48 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-08 04:22:48 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-08 04:23:58 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='c·∫•m h√∫t thu·ªëc', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-08 04:23:58 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-08 04:23:58 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-08 04:23:58 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-08 04:23:58 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'c·∫•m h√∫t thu·ªëc'
2025-12-08 04:23:58 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'c·∫•m h√∫t thu·ªëc'
2025-12-08 04:23:58 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.078s]
2025-12-08 04:23:58 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 264321:0.9830, 103880:0.9509, 692969:0.9469, 692970:0.9469, 692971:0.9469, 692972:0.9469, 283458:0.9426, 50849:0.9368, 103881:0.9331, 567439:0.8783
2025-12-08 04:23:58 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-08 04:23:58 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-08 04:23:58 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-08 04:25:49 - root - INFO - üì• Received submit request: query_text=' f...', keyframe_path='/keyframe/L19/L19_V004/17347.webp', result_id='556321', username='user1'
2025-12-08 04:25:49 - root - INFO - ‚úÖ Submission created: id=4, query=' f...', user=user1
2025-12-08 04:26:02 - app.database.chatbox_db - INFO - Deleted submission 4
2025-12-08 04:26:02 - root - WARNING - ‚ö†Ô∏è  Submission 4 deleted (query: ' f...', user: user1)
2025-12-09 00:36:10 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='b√°nh m√¨', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 00:36:10 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-09 00:36:10 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-09 00:36:10 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-09 00:36:10 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'b√°nh m√¨' ‚Üí 'bread'
2025-12-09 00:36:10 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'bread'
2025-12-09 00:36:10 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-09 00:36:10 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/text
2025-12-09 00:36:10 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: bread
2025-12-09 00:36:11 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/beit3/text
2025-12-09 00:36:11 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: bread
2025-12-09 00:36:11 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/bigg/text
2025-12-09 00:36:11 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: bread
2025-12-09 00:36:11 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-09 00:36:11 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-09 00:36:11 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-09 00:36:11 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-09 00:36:11 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-09 00:36:11 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-09 00:36:11 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 00:36:15 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='b√°nh m√¨', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 00:36:15 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-09 00:36:15 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-09 00:36:15 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-09 00:36:15 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'b√°nh m√¨' ‚Üí 'bread'
2025-12-09 00:36:15 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'bread'
2025-12-09 00:36:15 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-09 00:36:15 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-09 00:36:15 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: bread
2025-12-09 00:36:15 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-09 00:36:15 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: bread
2025-12-09 00:36:15 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-09 00:36:15 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: bread
2025-12-09 00:36:15 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-09 00:36:15 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-09 00:36:15 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-09 00:36:15 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-09 00:36:15 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-09 00:36:15 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-09 00:36:15 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 00:36:16 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='b√°nh m√¨', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 00:36:16 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-09 00:36:16 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-09 00:36:16 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-09 00:36:16 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'b√°nh m√¨' ‚Üí 'bread'
2025-12-09 00:36:16 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'bread'
2025-12-09 00:36:16 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-09 00:36:16 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/text
2025-12-09 00:36:16 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: bread
2025-12-09 00:36:16 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/beit3/text
2025-12-09 00:36:16 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: bread
2025-12-09 00:36:16 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/bigg/text
2025-12-09 00:36:16 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: bread
2025-12-09 00:36:16 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-09 00:36:16 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-09 00:36:16 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-09 00:36:16 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-09 00:36:16 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-09 00:36:16 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-09 00:36:16 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 00:36:21 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='r·ª´ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 00:36:21 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-09 00:36:21 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-09 00:36:21 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-09 00:36:22 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-09 00:36:22 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'forest'
2025-12-09 00:36:22 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-09 00:36:22 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-09 00:36:22 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest
2025-12-09 00:36:22 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-09 00:36:22 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-09 00:36:22 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-09 00:36:22 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-09 00:36:22 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-09 00:36:22 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-09 00:36:22 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-09 00:36:22 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-09 00:36:22 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-09 00:36:22 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-09 00:36:22 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 00:36:29 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='r·ª´ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 00:36:29 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-09 00:36:29 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-09 00:36:29 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-09 00:36:30 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-09 00:36:30 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'forest'
2025-12-09 00:36:30 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-09 00:36:30 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/text
2025-12-09 00:36:30 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest
2025-12-09 00:36:30 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/beit3/text
2025-12-09 00:36:30 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-09 00:36:30 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/bigg/text
2025-12-09 00:36:30 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-09 00:36:30 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-09 00:36:30 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-09 00:36:30 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-09 00:36:30 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-09 00:36:30 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-09 00:36:30 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-09 00:36:30 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 00:36:53 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='ninh', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 00:36:53 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-09 00:36:53 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-09 00:36:53 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-09 00:36:53 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'ninh'
2025-12-09 00:36:53 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'ninh'
2025-12-09 00:36:53 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.101s]
2025-12-09 00:36:53 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 9133:0.9796, 9134:0.9796, 9135:0.9796, 9136:0.9796, 9132:0.9556, 9129:0.9488, 9130:0.9488, 9139:0.9413, 9131:0.9239, 88950:0.9142
2025-12-09 00:36:53 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-09 00:36:53 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-09 00:36:53 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 00:37:09 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='b·∫Øc ninh', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 00:37:09 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-09 00:37:09 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-09 00:37:09 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-09 00:37:09 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'b·∫Øc ninh'
2025-12-09 00:37:09 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'b·∫Øc ninh'
2025-12-09 00:37:09 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.062s]
2025-12-09 00:37:09 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 55430:0.9586, 242411:0.9451, 4935:0.9399, 538390:0.9160, 4936:0.9122, 4937:0.9122, 5413:0.9122, 538394:0.9008, 9133:0.8864, 9134:0.8864
2025-12-09 00:37:09 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-09 00:37:09 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-09 00:37:09 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 00:37:15 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='s√¥ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 00:37:15 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-09 00:37:15 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-09 00:37:15 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-09 00:37:16 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-09 00:37:16 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'river'
2025-12-09 00:37:16 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-09 00:37:16 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-09 00:37:16 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: river
2025-12-09 00:37:16 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-09 00:37:16 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: river
2025-12-09 00:37:16 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-09 00:37:16 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: river
2025-12-09 00:37:16 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-09 00:37:16 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-09 00:37:16 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-09 00:37:16 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-09 00:37:16 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-09 00:37:16 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-09 00:37:16 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 00:37:18 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='s√¥ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 00:37:18 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-09 00:37:18 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-09 00:37:18 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-09 00:37:19 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-09 00:37:19 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'river'
2025-12-09 00:37:19 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-09 00:37:19 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/text
2025-12-09 00:37:19 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: river
2025-12-09 00:37:19 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/beit3/text
2025-12-09 00:37:19 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: river
2025-12-09 00:37:19 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/bigg/text
2025-12-09 00:37:19 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: river
2025-12-09 00:37:19 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-09 00:37:19 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-09 00:37:19 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-09 00:37:19 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-09 00:37:19 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-09 00:37:19 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-09 00:37:19 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 00:37:48 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='v·ªá sinh chung', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 00:37:48 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-09 00:37:48 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-09 00:37:48 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-09 00:37:48 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'v·ªá sinh chung'
2025-12-09 00:37:48 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'v·ªá sinh chung'
2025-12-09 00:37:48 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.053s]
2025-12-09 00:37:48 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 114594:0.9901, 114595:0.9840, 55428:0.9740, 55429:0.9740, 55430:0.9659, 43349:0.9655, 114591:0.9443, 114399:0.9348, 114592:0.9331, 114593:0.9202
2025-12-09 00:37:48 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-09 00:37:48 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-09 00:37:48 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 00:38:02 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='r·ª´ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 00:38:02 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-09 00:38:02 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-09 00:38:02 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-09 00:38:02 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-09 00:38:02 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'forest'
2025-12-09 00:38:02 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-09 00:38:02 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-09 00:38:02 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest
2025-12-09 00:38:03 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-09 00:38:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-09 00:38:03 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-09 00:38:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-09 00:38:03 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-09 00:38:03 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-09 00:38:03 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-09 00:38:03 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-09 00:38:03 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-09 00:38:03 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-09 00:38:03 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 00:38:23 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='ninh', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 00:38:23 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-09 00:38:23 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-09 00:38:23 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-09 00:38:23 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'ninh'
2025-12-09 00:38:23 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'ninh'
2025-12-09 00:38:23 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.025s]
2025-12-09 00:38:23 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 9133:0.9796, 9134:0.9796, 9135:0.9796, 9136:0.9796, 9132:0.9556, 9129:0.9488, 9130:0.9488, 9139:0.9413, 9131:0.9239, 88950:0.9142
2025-12-09 00:38:23 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-09 00:38:23 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-09 00:38:23 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 00:39:40 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='r·ª´ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 00:39:40 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-09 00:39:40 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-09 00:39:40 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-09 00:39:40 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-09 00:39:40 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'forest'
2025-12-09 00:39:40 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-09 00:39:41 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/text
2025-12-09 00:39:41 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest
2025-12-09 00:39:41 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/beit3/text
2025-12-09 00:39:41 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-09 00:39:41 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/bigg/text
2025-12-09 00:39:41 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-09 00:39:41 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-09 00:39:41 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-09 00:39:41 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-09 00:39:41 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-09 00:39:41 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-09 00:39:41 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-09 00:39:41 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 00:39:44 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='r·ª´ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 00:39:44 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-09 00:39:44 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-09 00:39:44 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-09 00:39:44 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-09 00:39:44 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'forest'
2025-12-09 00:39:44 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-09 00:39:45 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-09 00:39:45 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest
2025-12-09 00:39:45 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-09 00:39:45 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-09 00:39:45 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-09 00:39:45 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-09 00:39:45 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-09 00:39:45 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-09 00:39:45 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-09 00:39:45 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-09 00:39:45 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-09 00:39:45 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-09 00:39:45 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 00:39:45 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='r·ª´ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 00:39:45 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-09 00:39:45 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-09 00:39:45 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-09 00:39:46 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-09 00:39:46 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'forest'
2025-12-09 00:39:46 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-09 00:39:46 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/text
2025-12-09 00:39:46 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest
2025-12-09 00:39:46 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/beit3/text
2025-12-09 00:39:46 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-09 00:39:46 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/bigg/text
2025-12-09 00:39:46 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-09 00:39:46 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-09 00:39:46 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-09 00:39:46 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-09 00:39:46 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-09 00:39:46 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-09 00:39:46 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-09 00:39:46 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 00:40:16 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='sjkfs', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 00:40:16 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-09 00:40:16 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-09 00:40:16 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-09 00:40:16 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-09 00:40:16 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-09 00:40:16 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: sjkfs
2025-12-09 00:40:16 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-09 00:40:16 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: sjkfs
2025-12-09 00:40:16 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-09 00:40:16 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: sjkfs
2025-12-09 00:40:16 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-09 00:40:16 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-09 00:40:16 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-09 00:40:16 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-09 00:40:16 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-09 00:40:16 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-09 00:40:16 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 00:40:23 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='tr·ªçng ngu', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 00:40:23 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-09 00:40:23 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-09 00:40:23 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-09 00:40:23 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'tr·ªçng ngu'
2025-12-09 00:40:23 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'tr·ªçng ngu'
2025-12-09 00:40:23 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.054s]
2025-12-09 00:40:23 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 65680:0.9882, 65677:0.9845, 65678:0.9845, 65681:0.9780, 65679:0.9777, 65682:0.9746, 233699:0.9671, 233281:0.9626, 233700:0.8875, 393355:0.8555
2025-12-09 00:40:23 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-09 00:40:23 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-09 00:40:23 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 00:48:35 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='r·ª´ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 00:48:35 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-09 00:48:35 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-09 00:48:35 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-09 00:48:36 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-09 00:48:36 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'forest'
2025-12-09 00:48:36 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-09 00:48:36 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/text
2025-12-09 00:48:36 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest
2025-12-09 00:48:36 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/beit3/text
2025-12-09 00:48:36 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-09 00:48:36 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/bigg/text
2025-12-09 00:48:36 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-09 00:48:36 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-09 00:48:36 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-09 00:48:36 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-09 00:48:36 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-09 00:48:36 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-09 00:48:36 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-09 00:48:36 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 00:52:19 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='r·ª´ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 00:52:19 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-09 00:52:19 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-09 00:52:19 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-09 00:52:19 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-09 00:52:19 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'forest'
2025-12-09 00:52:19 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-09 00:52:19 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-09 00:52:19 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest
2025-12-09 00:52:19 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-09 00:52:19 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-09 00:52:19 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-09 00:52:19 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-09 00:52:19 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-09 00:52:19 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-09 00:52:19 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-09 00:52:19 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-09 00:52:19 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-09 00:52:19 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-09 00:52:19 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 00:57:18 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='r·ª´ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 00:57:18 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-09 00:57:18 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-09 00:57:18 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-09 00:57:18 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-09 00:57:18 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'forest'
2025-12-09 00:57:18 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-09 00:57:18 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/text
2025-12-09 00:57:19 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest
2025-12-09 00:57:19 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/beit3/text
2025-12-09 00:57:19 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-09 00:57:19 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/bigg/text
2025-12-09 00:57:19 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-09 00:57:19 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-09 00:57:19 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-09 00:57:19 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-09 00:57:19 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-09 00:57:19 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-09 00:57:19 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-09 00:57:19 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 01:02:33 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='r·ª´ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 01:02:33 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-09 01:02:33 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-09 01:02:33 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-09 01:02:34 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-09 01:02:34 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'forest'
2025-12-09 01:02:34 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-09 01:02:34 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-09 01:02:34 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest
2025-12-09 01:02:34 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-09 01:02:34 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-09 01:02:34 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-09 01:02:34 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-09 01:02:34 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-09 01:02:34 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-09 01:02:34 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-09 01:02:34 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-09 01:02:34 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-09 01:02:34 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-09 01:02:34 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 01:02:36 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='r·ª´ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 01:02:36 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-09 01:02:36 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-09 01:02:36 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-09 01:02:37 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-09 01:02:37 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'forest'
2025-12-09 01:02:37 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-09 01:02:37 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/text
2025-12-09 01:02:37 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest
2025-12-09 01:02:37 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/beit3/text
2025-12-09 01:02:37 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-09 01:02:37 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/bigg/text
2025-12-09 01:02:37 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-09 01:02:37 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-09 01:02:37 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-09 01:02:37 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-09 01:02:37 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-09 01:02:37 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-09 01:02:37 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-09 01:02:37 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 01:02:37 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='r·ª´ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 01:02:37 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-09 01:02:37 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-09 01:02:37 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-09 01:02:38 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-09 01:02:38 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'forest'
2025-12-09 01:02:38 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-09 01:02:38 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-09 01:02:38 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest
2025-12-09 01:02:38 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-09 01:02:38 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-09 01:02:38 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-09 01:02:38 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-09 01:02:38 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-09 01:02:38 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-09 01:02:38 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-09 01:02:38 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-09 01:02:38 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-09 01:02:38 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-09 01:02:38 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 01:05:40 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='r·ª´ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 01:05:40 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-09 01:05:40 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-09 01:05:40 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-09 01:05:40 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-09 01:05:40 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'forest'
2025-12-09 01:05:40 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-09 01:05:40 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/text
2025-12-09 01:05:40 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest
2025-12-09 01:05:40 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/beit3/text
2025-12-09 01:05:40 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-09 01:05:40 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/bigg/text
2025-12-09 01:05:40 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-09 01:05:40 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-09 01:05:40 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-09 01:05:40 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-09 01:05:40 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-09 01:05:40 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-09 01:05:40 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-09 01:05:40 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 01:05:42 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='r·ª´ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 01:05:42 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-09 01:05:42 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-09 01:05:42 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-09 01:05:42 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-09 01:05:42 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'forest'
2025-12-09 01:05:42 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-09 01:05:43 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-09 01:05:43 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest
2025-12-09 01:05:43 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-09 01:05:43 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-09 01:05:43 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-09 01:05:43 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-09 01:05:43 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-09 01:05:43 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-09 01:05:43 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-09 01:05:43 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-09 01:05:43 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-09 01:05:43 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-09 01:05:43 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 01:05:43 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='r·ª´ng\n', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 01:05:43 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-09 01:05:43 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-09 01:05:43 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-09 01:05:43 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-09 01:05:43 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'forest'
2025-12-09 01:05:43 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-09 01:05:44 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/text
2025-12-09 01:05:44 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest
2025-12-09 01:05:44 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/beit3/text
2025-12-09 01:05:44 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-09 01:05:44 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/bigg/text
2025-12-09 01:05:44 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-09 01:05:44 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-09 01:05:44 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-09 01:05:44 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-09 01:05:44 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-09 01:05:44 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-09 01:05:44 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-09 01:05:44 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 01:05:44 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='r·ª´ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 01:05:44 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-09 01:05:44 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-09 01:05:44 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-09 01:05:45 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-09 01:05:45 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'forest'
2025-12-09 01:05:45 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-09 01:05:45 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-09 01:05:45 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest
2025-12-09 01:05:45 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-09 01:05:45 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-09 01:05:45 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-09 01:05:45 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-09 01:05:45 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-09 01:05:45 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-09 01:05:45 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-09 01:05:45 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-09 01:05:45 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-09 01:05:45 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-09 01:05:45 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 01:13:08 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='r·ª´ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 01:13:08 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-09 01:13:08 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-09 01:13:08 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-09 01:13:08 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-09 01:13:08 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'forest'
2025-12-09 01:13:08 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-09 01:13:08 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/text
2025-12-09 01:13:08 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest
2025-12-09 01:13:08 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/beit3/text
2025-12-09 01:13:08 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-09 01:13:08 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/bigg/text
2025-12-09 01:13:08 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-09 01:13:08 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-09 01:13:08 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-09 01:13:08 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-09 01:13:08 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-09 01:13:08 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-09 01:13:08 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-09 01:13:08 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 01:13:15 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='r·ª´ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 01:13:15 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-09 01:13:15 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-09 01:13:15 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-09 01:13:16 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-09 01:13:16 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'forest'
2025-12-09 01:13:16 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-09 01:13:16 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-09 01:13:16 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest
2025-12-09 01:13:16 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-09 01:13:16 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-09 01:13:16 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-09 01:13:16 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-09 01:13:16 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-09 01:13:16 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-09 01:13:16 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-09 01:13:16 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-09 01:13:16 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-09 01:13:16 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-09 01:13:16 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 01:15:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-09 01:15:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='r·ª´ng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 01:15:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 01:15:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'r·ª´ng'
2025-12-09 01:15:57 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-09 01:15:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'forest'
2025-12-09 01:15:57 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-09 01:15:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='forest', Q1='forest', Q2='forest'
2025-12-09 01:15:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-09 01:15:57 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-09 01:15:57 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/text
2025-12-09 01:15:57 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest
2025-12-09 01:15:57 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/text
2025-12-09 01:15:57 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest
2025-12-09 01:15:57 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-09 01:15:57 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest
2025-12-09 01:15:58 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/beit3/text
2025-12-09 01:15:58 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-09 01:15:58 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/beit3/text
2025-12-09 01:15:58 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-09 01:15:58 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-09 01:15:58 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-09 01:15:58 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/bigg/text
2025-12-09 01:15:58 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-09 01:15:58 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-09 01:15:58 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-09 01:15:58 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/bigg/text
2025-12-09 01:15:58 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-09 01:15:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 0, Q2: 0
2025-12-09 01:15:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 1111.52ms
2025-12-09 01:15:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-09 01:15:58 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 0 unique ids from 2 stages
2025-12-09 01:15:58 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 0 unique ids
2025-12-09 01:18:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-09 01:18:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='r·ª´ng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 01:18:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 01:18:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'r·ª´ng'
2025-12-09 01:18:43 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-09 01:18:43 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'forest'
2025-12-09 01:18:43 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-09 01:18:43 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='forest', Q1='forest', Q2='forest'
2025-12-09 01:18:43 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-09 01:18:43 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-09 01:18:43 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/text
2025-12-09 01:18:43 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest
2025-12-09 01:18:43 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-09 01:18:43 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest
2025-12-09 01:18:43 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-09 01:18:43 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest
2025-12-09 01:18:43 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-09 01:18:43 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-09 01:18:43 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/beit3/text
2025-12-09 01:18:43 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-09 01:18:43 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-09 01:18:43 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-09 01:18:43 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-09 01:18:43 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-09 01:18:43 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/bigg/text
2025-12-09 01:18:43 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-09 01:18:43 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-09 01:18:43 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-09 01:18:43 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 0, Q2: 0
2025-12-09 01:18:43 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 1160.31ms
2025-12-09 01:18:43 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-09 01:18:43 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 0 unique ids from 2 stages
2025-12-09 01:18:43 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 0 unique ids
2025-12-09 01:21:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-09 01:21:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='r·ª´ng'', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 01:21:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 01:21:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'r·ª´ng''
2025-12-09 01:21:54 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng'' ‚Üí 'forest''
2025-12-09 01:21:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'forest''
2025-12-09 01:21:54 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-09 01:21:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='forest'', Q1='forest'', Q2='forest''
2025-12-09 01:21:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-09 01:21:54 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-09 01:21:55 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-09 01:21:55 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/text
2025-12-09 01:21:55 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest'
2025-12-09 01:21:55 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest'
2025-12-09 01:21:55 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-09 01:21:55 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest'
2025-12-09 01:21:55 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/beit3/text
2025-12-09 01:21:55 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest'
2025-12-09 01:21:55 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-09 01:21:55 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest'
2025-12-09 01:21:55 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/bigg/text
2025-12-09 01:21:55 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest'
2025-12-09 01:21:56 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/text
2025-12-09 01:21:56 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest'
2025-12-09 01:21:56 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/beit3/text
2025-12-09 01:21:56 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest'
2025-12-09 01:21:56 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/bigg/text
2025-12-09 01:21:56 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest'
2025-12-09 01:21:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 0, Q2: 0
2025-12-09 01:21:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 1858.42ms
2025-12-09 01:21:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-09 01:21:56 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 0 unique ids from 2 stages
2025-12-09 01:21:56 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 0 unique ids
2025-12-09 01:21:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-09 01:21:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='r·ª´ng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 01:21:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 01:21:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'r·ª´ng'
2025-12-09 01:21:56 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-09 01:21:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'forest'
2025-12-09 01:21:57 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-09 01:21:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='forest', Q1='forest', Q2='forest'
2025-12-09 01:21:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-09 01:21:57 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-09 01:21:57 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-09 01:21:57 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest
2025-12-09 01:21:57 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-09 01:21:57 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest
2025-12-09 01:21:57 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/text
2025-12-09 01:21:57 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest
2025-12-09 01:21:57 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/beit3/text
2025-12-09 01:21:57 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-09 01:21:57 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-09 01:21:57 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-09 01:21:57 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/bigg/text
2025-12-09 01:21:57 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-09 01:21:57 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-09 01:21:57 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-09 01:21:57 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-09 01:21:57 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-09 01:21:58 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-09 01:21:58 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-09 01:21:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 0, Q2: 0
2025-12-09 01:21:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 1236.37ms
2025-12-09 01:21:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-09 01:21:58 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 0 unique ids from 2 stages
2025-12-09 01:21:58 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 0 unique ids
2025-12-09 01:24:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-09 01:24:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='r·ª´ng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 01:24:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 01:24:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'r·ª´ng'
2025-12-09 01:24:00 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-09 01:24:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'forest'
2025-12-09 01:24:00 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-09 01:24:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='forest', Q1='forest', Q2='forest'
2025-12-09 01:24:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-09 01:24:00 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-09 01:24:01 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-09 01:24:01 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/text
2025-12-09 01:24:01 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest
2025-12-09 01:24:01 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest
2025-12-09 01:24:01 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/beit3/text
2025-12-09 01:24:01 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-09 01:24:01 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-09 01:24:01 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-09 01:24:01 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-09 01:24:01 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-09 01:24:01 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/bigg/text
2025-12-09 01:24:01 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-09 01:24:01 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/text
2025-12-09 01:24:01 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest
2025-12-09 01:24:01 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/beit3/text
2025-12-09 01:24:01 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-09 01:24:01 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/bigg/text
2025-12-09 01:24:01 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-09 01:24:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 0, Q2: 0
2025-12-09 01:24:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 1184.59ms
2025-12-09 01:24:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-09 01:24:01 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 0 unique ids from 2 stages
2025-12-09 01:24:01 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 0 unique ids
2025-12-09 01:24:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-09 01:24:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, objects=[]
2025-12-09 01:24:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 01:24:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: ''
2025-12-09 01:24:24 - app.services.gemini.query_augmentation - WARNING - [QUERY AUG] Empty query, returning original
2025-12-09 01:24:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='', Q1='', Q2=''
2025-12-09 01:24:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-09 01:24:24 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-09 01:24:25 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.045s]
2025-12-09 01:24:25 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.047s]
2025-12-09 01:24:25 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.048s]
2025-12-09 01:24:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-09 01:24:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 64.07ms
2025-12-09 01:24:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-09 01:24:25 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-09 01:24:25 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-09 01:28:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-09 01:28:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='r·ª´ng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 01:28:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 01:28:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'r·ª´ng'
2025-12-09 01:28:06 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-09 01:28:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'forest'
2025-12-09 01:28:07 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-09 01:28:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='forest', Q1='forest', Q2='forest'
2025-12-09 01:28:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-09 01:28:07 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-09 01:28:07 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-09 01:28:07 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest
2025-12-09 01:28:07 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-09 01:28:07 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest
2025-12-09 01:28:07 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/text
2025-12-09 01:28:07 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest
2025-12-09 01:28:07 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/beit3/text
2025-12-09 01:28:07 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-09 01:28:07 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-09 01:28:07 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-09 01:28:07 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-09 01:28:07 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-09 01:28:07 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-09 01:28:07 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-09 01:28:07 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/bigg/text
2025-12-09 01:28:07 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-09 01:28:07 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-09 01:28:07 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-09 01:28:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 0, Q2: 0
2025-12-09 01:28:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 908.46ms
2025-12-09 01:28:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-09 01:28:07 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 0 unique ids from 2 stages
2025-12-09 01:28:07 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 0 unique ids
2025-12-09 01:33:11 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='nh·ªØng ƒë·ªì v·∫≠t t√¨m ƒë∆∞·ª£c', ocrText='', toggles={'multimodal': False, 'ic': False, 'asr': True, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 01:33:11 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: text
2025-12-09 01:33:11 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': True, 'ocr': False, 'objectFilter': False}
2025-12-09 01:33:11 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'asr'}, Total: 1
2025-12-09 01:33:11 - app.routers.search - INFO - [ENSEMBLE] Running ASR search
2025-12-09 01:33:12 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.136s]
2025-12-09 01:33:12 - app.routers.search - INFO - [ENSEMBLE] ASR top results (scaled): 161386:0.9614, 204616:0.9385, 26068:0.9382, 138858:0.9275, 98645:0.9241, 161745:0.9148, 5026:0.9021, 157420:0.9021, 88914:0.8996, 81568:0.8731
2025-12-09 01:33:12 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['asr']
2025-12-09 01:33:12 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['asr']
2025-12-09 01:33:12 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 01:33:16 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='ng√¥i mi·∫øu', ocrText='', toggles={'multimodal': False, 'ic': False, 'asr': True, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 01:33:16 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: text
2025-12-09 01:33:16 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': True, 'ocr': False, 'objectFilter': False}
2025-12-09 01:33:16 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'asr'}, Total: 1
2025-12-09 01:33:16 - app.routers.search - INFO - [ENSEMBLE] Running ASR search
2025-12-09 01:33:16 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.033s]
2025-12-09 01:33:16 - app.routers.search - INFO - [ENSEMBLE] ASR top results (scaled): 165321:0.9864, 140754:0.9826, 167303:0.9576, 125204:0.9461, 179038:0.9238, 193197:0.9237, 67383:0.9150, 154430:0.9113, 92284:0.9086, 113327:0.9086
2025-12-09 01:33:16 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['asr']
2025-12-09 01:33:16 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['asr']
2025-12-09 01:33:16 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 01:33:21 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='Bi·∫øn ƒë·ªïi kh√≠ h·∫≠u', ocrText='Bi·∫øn ƒë·ªïi kh√≠ h·∫≠u', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 01:33:21 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-09 01:33:21 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-09 01:33:21 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-09 01:33:21 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'Bi·∫øn ƒë·ªïi kh√≠ h·∫≠u' ‚Üí 'Climate change'
2025-12-09 01:33:21 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'Climate change'
2025-12-09 01:33:21 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'Bi·∫øn ƒë·ªïi kh√≠ h·∫≠u'
2025-12-09 01:33:21 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'Bi·∫øn ƒë·ªïi kh√≠ h·∫≠u'
2025-12-09 01:33:21 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.074s]
2025-12-09 01:33:21 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 110069:0.9730, 110070:0.9730, 110071:0.9730, 110350:0.9665, 110068:0.9638, 110349:0.9200, 110352:0.9019, 563350:0.8983, 563351:0.8983, 563352:0.8983
2025-12-09 01:33:21 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-09 01:33:21 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-09 01:33:21 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 01:33:36 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='Bi·∫øn ƒë·ªïi kh√≠ h·∫≠u', ocrText='B√¨nh thu·∫≠n ti·∫øp t·ª•c tri·ªÉn khai', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 01:33:36 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-09 01:33:36 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-09 01:33:36 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-09 01:33:36 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'Bi·∫øn ƒë·ªïi kh√≠ h·∫≠u' ‚Üí 'Climate change'
2025-12-09 01:33:36 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'Climate change'
2025-12-09 01:33:36 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'B√¨nh thu·∫≠n ti·∫øp t·ª•c tri·ªÉn khai'
2025-12-09 01:33:36 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'B√¨nh thu·∫≠n ti·∫øp t·ª•c tri·ªÉn khai'
2025-12-09 01:33:36 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.081s]
2025-12-09 01:33:36 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 428462:0.9924, 428461:0.9895, 428880:0.9895, 428460:0.9875, 428458:0.9827, 428877:0.9788, 428459:0.9701, 428879:0.9295, 428878:0.9158, 116317:0.8584
2025-12-09 01:33:36 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-09 01:33:36 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-09 01:33:36 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 01:36:56 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='√°o kho√°c', ocrText='√°o ƒë·ªè', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}, selectedObjects=[])]
2025-12-09 01:36:56 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-09 01:36:56 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}
2025-12-09 01:36:56 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-09 01:36:56 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: '√°o kho√°c' ‚Üí 'jacket'
2025-12-09 01:36:56 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'jacket'
2025-12-09 01:36:56 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): '√°o ƒë·ªè'
2025-12-09 01:36:56 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: '√°o ƒë·ªè'
2025-12-09 01:36:56 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.020s]
2025-12-09 01:36:56 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 390183:0.9933, 390184:0.9629, 390185:0.9629, 390186:0.9629, 390187:0.9574, 385332:0.9446, 385330:0.9414, 390212:0.9381, 390213:0.9381, 390214:0.9381
2025-12-09 01:36:56 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-09 01:36:56 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-09 01:36:56 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 01:39:38 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='√°o kho√°c', ocrText='T√¨nh l√¢m ƒë·ªìng d·ªãch', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}, selectedObjects=[])]
2025-12-09 01:39:38 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-09 01:39:38 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}
2025-12-09 01:39:38 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-09 01:39:39 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: '√°o kho√°c' ‚Üí 'jacket'
2025-12-09 01:39:39 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'jacket'
2025-12-09 01:39:39 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'T√¨nh l√¢m ƒë·ªìng d·ªãch'
2025-12-09 01:39:39 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'T√¨nh l√¢m ƒë·ªìng d·ªãch'
2025-12-09 01:39:39 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.069s]
2025-12-09 01:39:39 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 257369:0.9631, 242338:0.9133, 48360:0.9055, 48361:0.9055, 48909:0.9055, 257370:0.9000, 242347:0.8563, 22071:0.8541, 108885:0.8155, 48363:0.8113
2025-12-09 01:39:39 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-09 01:39:39 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-09 01:39:39 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 01:39:54 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='√°o kho√°c', ocrText='B·ªánh vi·ªán ƒëa khoa t·ªânh l√¢m ƒë·ªìng', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}, selectedObjects=[])]
2025-12-09 01:39:54 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-09 01:39:54 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}
2025-12-09 01:39:54 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-09 01:39:54 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: '√°o kho√°c' ‚Üí 'jacket'
2025-12-09 01:39:54 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'jacket'
2025-12-09 01:39:54 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'B·ªánh vi·ªán ƒëa khoa t·ªânh l√¢m ƒë·ªìng'
2025-12-09 01:39:54 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'B·ªánh vi·ªán ƒëa khoa t·ªânh l√¢m ƒë·ªìng'
2025-12-09 01:39:54 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.060s]
2025-12-09 01:39:54 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 185299:0.9849, 185309:0.9801, 185310:0.9700, 69440:0.9498, 485862:0.8968, 485863:0.8968, 185300:0.8671, 185301:0.8671, 185302:0.8671, 645938:0.8599
2025-12-09 01:39:54 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-09 01:39:54 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-09 01:39:54 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 01:40:02 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='B·ªánh vi·ªán ƒëa khoa t·ªânh l√¢m ƒë·ªìng', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}, selectedObjects=[])]
2025-12-09 01:40:02 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-09 01:40:02 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}
2025-12-09 01:40:02 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-09 01:40:02 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'B·ªánh vi·ªán ƒëa khoa t·ªânh l√¢m ƒë·ªìng'
2025-12-09 01:40:02 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'B·ªánh vi·ªán ƒëa khoa t·ªânh l√¢m ƒë·ªìng'
2025-12-09 01:40:02 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.046s]
2025-12-09 01:40:02 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 185299:0.9849, 185309:0.9801, 185310:0.9700, 69440:0.9498, 485862:0.8968, 485863:0.8968, 185300:0.8671, 185301:0.8671, 185302:0.8671, 645938:0.8599
2025-12-09 01:40:02 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-09 01:40:02 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-09 01:40:02 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 01:41:13 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-09 01:41:13 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, objects=[]
2025-12-09 01:41:13 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 01:41:13 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: ''
2025-12-09 01:41:13 - app.services.gemini.query_augmentation - WARNING - [QUERY AUG] Empty query, returning original
2025-12-09 01:41:13 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='', Q1='', Q2=''
2025-12-09 01:41:13 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-09 01:41:13 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-09 01:41:13 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.070s]
2025-12-09 01:41:13 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.071s]
2025-12-09 01:41:13 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.073s]
2025-12-09 01:41:13 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-09 01:41:13 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 86.80ms
2025-12-09 01:41:13 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-09 01:41:13 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-09 01:41:13 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-09 01:41:17 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='ph∆∞∆°ng trang', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}, selectedObjects=[])]
2025-12-09 01:41:17 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-09 01:41:17 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}
2025-12-09 01:41:17 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-09 01:41:17 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'ph∆∞∆°ng trang'
2025-12-09 01:41:17 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'ph∆∞∆°ng trang'
2025-12-09 01:41:17 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.043s]
2025-12-09 01:41:17 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 79533:0.9641, 148531:0.9516, 127897:0.9464, 148530:0.9383, 89064:0.9295, 2188:0.9287, 503057:0.9004, 89065:0.8982, 159258:0.8848, 2189:0.8841
2025-12-09 01:41:17 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-09 01:41:17 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-09 01:41:17 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 01:41:40 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='ƒëi·ªán gi·∫≠t', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}, selectedObjects=[])]
2025-12-09 01:41:40 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-09 01:41:40 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}
2025-12-09 01:41:40 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-09 01:41:40 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'ƒëi·ªán gi·∫≠t'
2025-12-09 01:41:40 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'ƒëi·ªán gi·∫≠t'
2025-12-09 01:41:40 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.019s]
2025-12-09 01:41:40 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 293789:0.9671, 293790:0.9671, 294095:0.9600, 294096:0.9600, 514710:0.9448, 514711:0.9448, 293436:0.9423, 514709:0.9265, 130570:0.9149, 130974:0.8779
2025-12-09 01:41:40 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-09 01:41:40 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-09 01:41:40 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 01:42:01 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='ph∆∞∆°ng trang', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}, selectedObjects=[])]
2025-12-09 01:42:01 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-09 01:42:01 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}
2025-12-09 01:42:01 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-09 01:42:01 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'ph∆∞∆°ng trang'
2025-12-09 01:42:01 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'ph∆∞∆°ng trang'
2025-12-09 01:42:01 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.035s]
2025-12-09 01:42:01 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 79533:0.9641, 148531:0.9516, 127897:0.9464, 148530:0.9383, 89064:0.9295, 2188:0.9287, 503057:0.9004, 89065:0.8982, 159258:0.8848, 2189:0.8841
2025-12-09 01:42:01 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-09 01:42:01 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-09 01:42:01 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 01:42:04 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='ph∆∞∆°ng trang', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}, selectedObjects=[])]
2025-12-09 01:42:04 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-09 01:42:04 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}
2025-12-09 01:42:04 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-09 01:42:04 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'ph∆∞∆°ng trang'
2025-12-09 01:42:04 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'ph∆∞∆°ng trang'
2025-12-09 01:42:04 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.032s]
2025-12-09 01:42:04 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 79533:0.9641, 148531:0.9516, 127897:0.9464, 148530:0.9383, 89064:0.9295, 2188:0.9287, 503057:0.9004, 89065:0.8982, 159258:0.8848, 2189:0.8841
2025-12-09 01:42:04 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-09 01:42:04 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-09 01:42:04 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 01:42:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-09 01:42:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, objects=[]
2025-12-09 01:42:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 01:42:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: ''
2025-12-09 01:42:48 - app.services.gemini.query_augmentation - WARNING - [QUERY AUG] Empty query, returning original
2025-12-09 01:42:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='', Q1='', Q2=''
2025-12-09 01:42:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-09 01:42:48 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-09 01:42:48 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.055s]
2025-12-09 01:42:48 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.061s]
2025-12-09 01:42:48 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.064s]
2025-12-09 01:42:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-09 01:42:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 74.04ms
2025-12-09 01:42:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-09 01:42:48 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-09 01:42:48 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-09 01:43:49 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='xe kh√°ch ph∆∞∆°ng trang', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}, selectedObjects=[])]
2025-12-09 01:43:49 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-09 01:43:49 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}
2025-12-09 01:43:49 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-09 01:43:49 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'xe kh√°ch ph∆∞∆°ng trang'
2025-12-09 01:43:49 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'xe kh√°ch ph∆∞∆°ng trang'
2025-12-09 01:43:49 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.042s]
2025-12-09 01:43:49 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 264184:0.9468, 264185:0.9372, 246306:0.9118, 246305:0.8947, 288163:0.8847, 246308:0.8754, 246309:0.8754, 246310:0.8754, 246312:0.8754, 246316:0.8754
2025-12-09 01:43:49 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-09 01:43:49 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-09 01:43:49 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 01:43:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-09 01:43:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='tai n·∫°n lao ƒë·ªông ƒëi·ªán', toggles={'multimodal': False, 'ic': False, 'asr': True, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 01:43:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 01:43:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'tai n·∫°n lao ƒë·ªông ƒëi·ªán'
2025-12-09 01:43:56 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-09 01:43:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='tai n·∫°n lao ƒë·ªông ƒëi·ªán', Q1='tai n·∫°n lao ƒë·ªông ƒëi·ªán', Q2='tai n·∫°n lao ƒë·ªông ƒëi·ªán'
2025-12-09 01:43:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-09 01:43:56 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-09 01:43:56 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.052s]
2025-12-09 01:43:56 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.064s]
2025-12-09 01:43:56 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.064s]
2025-12-09 01:43:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-09 01:43:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 295.07ms
2025-12-09 01:43:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-09 01:43:56 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-09 01:43:56 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-09 01:45:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-09 01:45:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, objects=[]
2025-12-09 01:45:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 01:45:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: ''
2025-12-09 01:45:09 - app.services.gemini.query_augmentation - WARNING - [QUERY AUG] Empty query, returning original
2025-12-09 01:45:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='', Q1='', Q2=''
2025-12-09 01:45:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-09 01:45:09 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-09 01:45:09 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.041s]
2025-12-09 01:45:09 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.042s]
2025-12-09 01:45:09 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.044s]
2025-12-09 01:45:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-09 01:45:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 56.41ms
2025-12-09 01:45:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-09 01:45:09 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-09 01:45:09 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-09 01:46:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-09 01:46:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='r·ª´ng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, objects=[]
2025-12-09 01:46:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 01:46:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'r·ª´ng'
2025-12-09 01:46:01 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-09 01:46:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'forest'
2025-12-09 01:46:01 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-09 01:46:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='forest', Q1='forest', Q2='forest'
2025-12-09 01:46:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-09 01:46:01 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-09 01:46:01 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-09 01:46:01 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest
2025-12-09 01:46:01 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/text
2025-12-09 01:46:01 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest
2025-12-09 01:46:01 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/text
2025-12-09 01:46:01 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest
2025-12-09 01:46:01 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/beit3/text
2025-12-09 01:46:01 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-09 01:46:01 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-09 01:46:01 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-09 01:46:01 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/beit3/text
2025-12-09 01:46:01 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-09 01:46:01 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/bigg/text
2025-12-09 01:46:01 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-09 01:46:01 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/bigg/text
2025-12-09 01:46:01 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-09 01:46:01 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-09 01:46:01 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-09 01:46:01 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.046s]
2025-12-09 01:46:01 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.044s]
2025-12-09 01:46:01 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.053s]
2025-12-09 01:46:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-09 01:46:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 853.50ms
2025-12-09 01:46:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-09 01:46:01 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-09 01:46:01 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-09 01:46:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-09 01:46:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='r·ª´ng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 01:46:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 01:46:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'r·ª´ng'
2025-12-09 01:46:03 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-09 01:46:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'forest'
2025-12-09 01:46:03 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-09 01:46:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='forest', Q1='forest', Q2='forest'
2025-12-09 01:46:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-09 01:46:03 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-09 01:46:04 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-09 01:46:04 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest
2025-12-09 01:46:04 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-09 01:46:04 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest
2025-12-09 01:46:04 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/text
2025-12-09 01:46:04 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest
2025-12-09 01:46:04 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-09 01:46:04 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-09 01:46:04 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-09 01:46:04 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-09 01:46:04 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/beit3/text
2025-12-09 01:46:04 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-09 01:46:04 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-09 01:46:04 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-09 01:46:04 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/bigg/text
2025-12-09 01:46:04 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-09 01:46:04 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-09 01:46:04 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-09 01:46:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 0, Q2: 0
2025-12-09 01:46:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 682.04ms
2025-12-09 01:46:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-09 01:46:04 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 0 unique ids from 2 stages
2025-12-09 01:46:04 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 0 unique ids
2025-12-09 01:46:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-09 01:46:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, objects=[]
2025-12-09 01:46:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 01:46:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: ''
2025-12-09 01:46:40 - app.services.gemini.query_augmentation - WARNING - [QUERY AUG] Empty query, returning original
2025-12-09 01:46:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='', Q1='', Q2=''
2025-12-09 01:46:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-09 01:46:40 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-09 01:46:40 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.042s]
2025-12-09 01:46:40 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.041s]
2025-12-09 01:46:40 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.062s]
2025-12-09 01:46:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-09 01:46:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 69.69ms
2025-12-09 01:46:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-09 01:46:40 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-09 01:46:40 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-09 01:47:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-09 01:47:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='tai n·∫°n lao ƒë·ªông ƒëi·ªán', toggles={'multimodal': False, 'ic': False, 'asr': True, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 01:47:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 01:47:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'tai n·∫°n lao ƒë·ªông ƒëi·ªán'
2025-12-09 01:47:11 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-09 01:47:11 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='tai n·∫°n lao ƒë·ªông ƒëi·ªán', Q1='tai n·∫°n lao ƒë·ªông ƒëi·ªán', Q2='tai n·∫°n lao ƒë·ªông ƒëi·ªán'
2025-12-09 01:47:11 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-09 01:47:11 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-09 01:47:11 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.032s]
2025-12-09 01:47:11 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.033s]
2025-12-09 01:47:11 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.039s]
2025-12-09 01:47:11 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-09 01:47:11 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 343.91ms
2025-12-09 01:47:11 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-09 01:47:11 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-09 01:47:11 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-09 01:47:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-09 01:47:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, objects=[]
2025-12-09 01:47:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 01:47:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: ''
2025-12-09 01:47:38 - app.services.gemini.query_augmentation - WARNING - [QUERY AUG] Empty query, returning original
2025-12-09 01:47:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='', Q1='', Q2=''
2025-12-09 01:47:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-09 01:47:38 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-09 01:47:38 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.039s]
2025-12-09 01:47:38 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.041s]
2025-12-09 01:47:38 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.046s]
2025-12-09 01:47:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-09 01:47:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 50.72ms
2025-12-09 01:47:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-09 01:47:38 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-09 01:47:38 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-09 01:48:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-09 01:48:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, objects=[]
2025-12-09 01:48:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 01:48:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: ''
2025-12-09 01:48:09 - app.services.gemini.query_augmentation - WARNING - [QUERY AUG] Empty query, returning original
2025-12-09 01:48:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='', Q1='', Q2=''
2025-12-09 01:48:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-09 01:48:09 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-09 01:48:09 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.032s]
2025-12-09 01:48:09 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.033s]
2025-12-09 01:48:09 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.041s]
2025-12-09 01:48:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-09 01:48:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 47.48ms
2025-12-09 01:48:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-09 01:48:09 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-09 01:48:09 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-09 01:48:14 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='19', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}, selectedObjects=[])]
2025-12-09 01:48:14 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-09 01:48:14 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}
2025-12-09 01:48:14 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-09 01:48:14 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): '19'
2025-12-09 01:48:14 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: '19'
2025-12-09 01:48:14 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.010s]
2025-12-09 01:48:14 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 162643:0.9950, 682693:0.9834, 360416:0.9705, 360417:0.9705, 18658:0.9705, 193182:0.9488, 358197:0.9488, 682837:0.9488, 682870:0.9488, 2409:0.9297
2025-12-09 01:48:14 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-09 01:48:14 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-09 01:48:14 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 01:48:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-09 01:48:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, objects=[]
2025-12-09 01:48:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 01:48:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: ''
2025-12-09 01:48:39 - app.services.gemini.query_augmentation - WARNING - [QUERY AUG] Empty query, returning original
2025-12-09 01:48:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='', Q1='', Q2=''
2025-12-09 01:48:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-09 01:48:39 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-09 01:48:39 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.037s]
2025-12-09 01:48:39 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.043s]
2025-12-09 01:48:39 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.045s]
2025-12-09 01:48:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-09 01:48:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 54.06ms
2025-12-09 01:48:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-09 01:48:39 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-09 01:48:39 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-09 01:48:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-09 01:48:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, objects=[]
2025-12-09 01:48:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 01:48:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: ''
2025-12-09 01:48:50 - app.services.gemini.query_augmentation - WARNING - [QUERY AUG] Empty query, returning original
2025-12-09 01:48:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='', Q1='', Q2=''
2025-12-09 01:48:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-09 01:48:50 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-09 01:48:50 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.013s]
2025-12-09 01:48:50 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.011s]
2025-12-09 01:48:50 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.012s]
2025-12-09 01:48:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-09 01:48:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 26.52ms
2025-12-09 01:48:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-09 01:48:50 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-09 01:48:50 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-09 01:49:04 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='vietcombank', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}, selectedObjects=[])]
2025-12-09 01:49:04 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-09 01:49:04 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}
2025-12-09 01:49:04 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-09 01:49:04 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'vietcombank'
2025-12-09 01:49:04 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'vietcombank'
2025-12-09 01:49:04 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.016s]
2025-12-09 01:49:04 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 436082:0.9832, 436083:0.9832, 523977:0.9794, 525839:0.9655, 436063:0.9205, 206160:0.8942, 434810:0.8653, 436064:0.8350, 237675:0.8312, 237680:0.8312
2025-12-09 01:49:04 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-09 01:49:04 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-09 01:49:04 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 01:49:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-09 01:49:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, objects=[]
2025-12-09 01:49:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 01:49:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: ''
2025-12-09 01:49:33 - app.services.gemini.query_augmentation - WARNING - [QUERY AUG] Empty query, returning original
2025-12-09 01:49:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='', Q1='', Q2=''
2025-12-09 01:49:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-09 01:49:33 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-09 01:49:33 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.029s]
2025-12-09 01:49:33 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.031s]
2025-12-09 01:49:33 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.034s]
2025-12-09 01:49:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-09 01:49:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 46.06ms
2025-12-09 01:49:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-09 01:49:33 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-09 01:49:33 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-09 01:54:21 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='ch√∫c m·ª´ng nƒÉm m·ªõi', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}, selectedObjects=[])]
2025-12-09 01:54:21 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-09 01:54:21 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}
2025-12-09 01:54:21 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-09 01:54:21 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'ch√∫c m·ª´ng nƒÉm m·ªõi'
2025-12-09 01:54:21 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'ch√∫c m·ª´ng nƒÉm m·ªõi'
2025-12-09 01:54:21 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.038s]
2025-12-09 01:54:21 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 688759:0.9268, 688760:0.9268, 688761:0.9268, 688762:0.9268, 688763:0.9268, 688764:0.9268, 688765:0.9268, 688766:0.9268, 688767:0.9268, 688768:0.9268
2025-12-09 01:54:21 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-09 01:54:21 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-09 01:54:21 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 01:55:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-09 01:55:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, objects=[]
2025-12-09 01:55:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 01:55:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: ''
2025-12-09 01:55:26 - app.services.gemini.query_augmentation - WARNING - [QUERY AUG] Empty query, returning original
2025-12-09 01:55:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='', Q1='', Q2=''
2025-12-09 01:55:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-09 01:55:26 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-09 01:55:26 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.026s]
2025-12-09 01:55:26 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.029s]
2025-12-09 01:55:26 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.029s]
2025-12-09 01:55:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-09 01:55:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 52.42ms
2025-12-09 01:55:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-09 01:55:26 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-09 01:55:26 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-09 01:55:28 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='C·ª≠u long', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}, selectedObjects=[])]
2025-12-09 01:55:28 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-09 01:55:28 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}
2025-12-09 01:55:28 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-09 01:55:28 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'C·ª≠u long'
2025-12-09 01:55:28 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'C·ª≠u long'
2025-12-09 01:55:28 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.020s]
2025-12-09 01:55:28 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 79054:0.9745, 315864:0.9464, 79511:0.9388, 79512:0.9388, 79514:0.9202, 315863:0.9017, 330305:0.9013, 59475:0.8973, 59836:0.8973, 79513:0.8973
2025-12-09 01:55:28 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-09 01:55:28 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-09 01:55:28 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 01:56:28 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='adidas', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}, selectedObjects=[])]
2025-12-09 01:56:28 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-09 01:56:28 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}
2025-12-09 01:56:28 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-09 01:56:28 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'adidas'
2025-12-09 01:56:28 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'adidas'
2025-12-09 01:56:28 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.023s]
2025-12-09 01:56:28 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 372930:0.9746, 301810:0.9528, 415779:0.9528, 301809:0.9423, 609158:0.9423, 614275:0.9423, 614276:0.9423, 614277:0.9423, 614278:0.9423, 614279:0.9423
2025-12-09 01:56:28 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-09 01:56:28 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-09 01:56:28 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 01:56:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-09 01:56:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, objects=[]
2025-12-09 01:56:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 01:56:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: ''
2025-12-09 01:56:31 - app.services.gemini.query_augmentation - WARNING - [QUERY AUG] Empty query, returning original
2025-12-09 01:56:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='', Q1='', Q2=''
2025-12-09 01:56:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-09 01:56:31 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-09 01:56:31 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.014s]
2025-12-09 01:56:31 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.014s]
2025-12-09 01:56:31 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.016s]
2025-12-09 01:56:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-09 01:56:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 34.05ms
2025-12-09 01:56:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-09 01:56:31 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-09 01:56:31 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-09 01:57:06 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='adidas', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}, selectedObjects=[])]
2025-12-09 01:57:06 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-09 01:57:06 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}
2025-12-09 01:57:06 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-09 01:57:06 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'adidas'
2025-12-09 01:57:06 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'adidas'
2025-12-09 01:57:06 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.012s]
2025-12-09 01:57:06 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 372930:0.9746, 301810:0.9528, 415779:0.9528, 301809:0.9423, 609158:0.9423, 614275:0.9423, 614276:0.9423, 614277:0.9423, 614278:0.9423, 614279:0.9423
2025-12-09 01:57:06 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-09 01:57:06 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-09 01:57:06 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 01:58:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-09 01:58:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, objects=[]
2025-12-09 01:58:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 01:58:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: ''
2025-12-09 01:58:57 - app.services.gemini.query_augmentation - WARNING - [QUERY AUG] Empty query, returning original
2025-12-09 01:58:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='', Q1='', Q2=''
2025-12-09 01:58:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-09 01:58:57 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-09 01:58:57 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.037s]
2025-12-09 01:58:57 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.039s]
2025-12-09 01:58:57 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.042s]
2025-12-09 01:58:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-09 01:58:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 64.01ms
2025-12-09 01:58:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-09 01:58:57 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-09 01:58:57 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-09 01:59:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-09 01:59:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, objects=[]
2025-12-09 01:59:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 01:59:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: ''
2025-12-09 01:59:03 - app.services.gemini.query_augmentation - WARNING - [QUERY AUG] Empty query, returning original
2025-12-09 01:59:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='', Q1='', Q2=''
2025-12-09 01:59:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-09 01:59:03 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-09 01:59:03 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.027s]
2025-12-09 01:59:03 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.027s]
2025-12-09 01:59:03 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.027s]
2025-12-09 01:59:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-09 01:59:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 45.97ms
2025-12-09 01:59:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-09 01:59:03 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-09 01:59:03 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-09 01:59:51 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='cuu long', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}, selectedObjects=[])]
2025-12-09 01:59:51 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-09 01:59:51 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}
2025-12-09 01:59:51 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-09 01:59:51 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'cuu long'
2025-12-09 01:59:51 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'cuu long'
2025-12-09 01:59:51 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.019s]
2025-12-09 01:59:51 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 271190:0.9071, 271191:0.9071, 79054:0.8970, 29021:0.8913, 21935:0.8897, 271186:0.8863, 248294:0.8785, 679242:0.8735, 679243:0.8735, 21934:0.8721
2025-12-09 01:59:51 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-09 01:59:51 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-09 01:59:51 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 02:00:20 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='ch√∫c m·ª´ng nƒÉm m·ªõi', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}, selectedObjects=[])]
2025-12-09 02:00:20 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-09 02:00:20 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}
2025-12-09 02:00:20 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-09 02:00:20 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'ch√∫c m·ª´ng nƒÉm m·ªõi'
2025-12-09 02:00:20 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'ch√∫c m·ª´ng nƒÉm m·ªõi'
2025-12-09 02:00:20 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.038s]
2025-12-09 02:00:20 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 688759:0.9268, 688760:0.9268, 688761:0.9268, 688762:0.9268, 688763:0.9268, 688764:0.9268, 688765:0.9268, 688766:0.9268, 688767:0.9268, 688768:0.9268
2025-12-09 02:00:20 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-09 02:00:20 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-09 02:00:20 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 02:00:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-09 02:00:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, objects=[]
2025-12-09 02:00:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 02:00:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: ''
2025-12-09 02:00:30 - app.services.gemini.query_augmentation - WARNING - [QUERY AUG] Empty query, returning original
2025-12-09 02:00:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='', Q1='', Q2=''
2025-12-09 02:00:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-09 02:00:30 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-09 02:00:30 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.031s]
2025-12-09 02:00:30 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.031s]
2025-12-09 02:00:30 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.037s]
2025-12-09 02:00:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-09 02:00:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 46.40ms
2025-12-09 02:00:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-09 02:00:30 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-09 02:00:30 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-09 02:06:04 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='ng∆∞·ªùi d√¢n t·∫Øm bi·ªÉn', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}, selectedObjects=[])]
2025-12-09 02:06:04 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-09 02:06:04 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}
2025-12-09 02:06:04 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-09 02:06:04 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'ng∆∞·ªùi d√¢n t·∫Øm bi·ªÉn'
2025-12-09 02:06:04 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'ng∆∞·ªùi d√¢n t·∫Øm bi·ªÉn'
2025-12-09 02:06:04 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.058s]
2025-12-09 02:06:04 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 37892:0.9704, 284796:0.9681, 284797:0.9566, 275035:0.9461, 37891:0.9444, 316553:0.9425, 316552:0.9321, 110068:0.9256, 37894:0.9161, 37895:0.9161
2025-12-09 02:06:04 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-09 02:06:04 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-09 02:06:04 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 02:06:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-09 02:06:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, objects=[]
2025-12-09 02:06:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 02:06:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: ''
2025-12-09 02:06:09 - app.services.gemini.query_augmentation - WARNING - [QUERY AUG] Empty query, returning original
2025-12-09 02:06:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='', Q1='', Q2=''
2025-12-09 02:06:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-09 02:06:09 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-09 02:06:09 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.040s]
2025-12-09 02:06:09 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.046s]
2025-12-09 02:06:09 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.045s]
2025-12-09 02:06:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-09 02:06:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 57.33ms
2025-12-09 02:06:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-09 02:06:09 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-09 02:06:09 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-09 02:06:13 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='ng∆∞·ªùi d√¢n t·∫Øm bi·ªÉn', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 02:06:13 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-09 02:06:13 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-09 02:06:13 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-09 02:06:13 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'ng∆∞·ªùi d√¢n t·∫Øm bi·ªÉn'
2025-12-09 02:06:13 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'ng∆∞·ªùi d√¢n t·∫Øm bi·ªÉn'
2025-12-09 02:06:13 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.044s]
2025-12-09 02:06:13 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 37892:0.9704, 284796:0.9681, 284797:0.9566, 275035:0.9461, 37891:0.9444, 316553:0.9425, 316552:0.9321, 110068:0.9256, 37894:0.9161, 37895:0.9161
2025-12-09 02:06:13 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-09 02:06:13 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-09 02:06:13 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 02:06:16 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-09 02:06:16 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, objects=[]
2025-12-09 02:06:16 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 02:06:16 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: ''
2025-12-09 02:06:16 - app.services.gemini.query_augmentation - WARNING - [QUERY AUG] Empty query, returning original
2025-12-09 02:06:16 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='', Q1='', Q2=''
2025-12-09 02:06:16 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-09 02:06:16 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-09 02:06:16 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.034s]
2025-12-09 02:06:16 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.043s]
2025-12-09 02:06:16 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.046s]
2025-12-09 02:06:16 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-09 02:06:16 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 58.63ms
2025-12-09 02:06:16 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-09 02:06:16 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-09 02:06:16 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-09 02:06:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-09 02:06:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, objects=[]
2025-12-09 02:06:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 02:06:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: ''
2025-12-09 02:06:22 - app.services.gemini.query_augmentation - WARNING - [QUERY AUG] Empty query, returning original
2025-12-09 02:06:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='', Q1='', Q2=''
2025-12-09 02:06:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-09 02:06:22 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-09 02:06:22 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.046s]
2025-12-09 02:06:22 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.047s]
2025-12-09 02:06:22 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.051s]
2025-12-09 02:06:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-09 02:06:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 63.96ms
2025-12-09 02:06:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-09 02:06:22 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-09 02:06:22 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-09 02:06:49 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-09 02:06:49 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, objects=[]
2025-12-09 02:06:49 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 02:06:49 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: ''
2025-12-09 02:06:49 - app.services.gemini.query_augmentation - WARNING - [QUERY AUG] Empty query, returning original
2025-12-09 02:06:49 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='', Q1='', Q2=''
2025-12-09 02:06:49 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-09 02:06:49 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-09 02:06:49 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.042s]
2025-12-09 02:06:49 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.045s]
2025-12-09 02:06:49 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.052s]
2025-12-09 02:06:49 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-09 02:06:49 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 63.29ms
2025-12-09 02:06:49 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-09 02:06:50 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-09 02:06:50 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-09 02:07:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-09 02:07:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='nhi·ªÅu ng∆∞·ªùi b·ªã s·ª©a', toggles={'multimodal': False, 'ic': False, 'asr': True, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 02:07:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 02:07:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'nhi·ªÅu ng∆∞·ªùi b·ªã s·ª©a'
2025-12-09 02:07:09 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-09 02:07:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='nhi·ªÅu ng∆∞·ªùi b·ªã s·ª©a', Q1='nhi·ªÅu ng∆∞·ªùi b·ªã s·ª©a', Q2='nhi·ªÅu ng∆∞·ªùi b·ªã s·ª©a'
2025-12-09 02:07:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-09 02:07:09 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-09 02:07:09 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.022s]
2025-12-09 02:07:09 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.033s]
2025-12-09 02:07:09 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.031s]
2025-12-09 02:07:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-09 02:07:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 373.07ms
2025-12-09 02:07:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-09 02:07:09 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-09 02:07:09 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-09 02:11:31 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='c·∫£nh s√°t b·∫Øn ch·∫øt', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}, selectedObjects=[])]
2025-12-09 02:11:31 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-09 02:11:31 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}
2025-12-09 02:11:31 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-09 02:11:31 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'c·∫£nh s√°t b·∫Øn ch·∫øt'
2025-12-09 02:11:31 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'c·∫£nh s√°t b·∫Øn ch·∫øt'
2025-12-09 02:11:31 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.034s]
2025-12-09 02:11:31 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 490700:0.9645, 37495:0.9581, 37496:0.9581, 21467:0.9509, 21468:0.9509, 465676:0.9425, 37500:0.9366, 37499:0.9278, 37501:0.9278, 490699:0.9157
2025-12-09 02:11:31 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-09 02:11:31 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-09 02:11:31 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 02:11:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-09 02:11:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='s·∫Ω ti·∫øp t·ª•c tr√¨nh di·ªÖn', toggles={'multimodal': False, 'ic': False, 'asr': True, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 02:11:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 02:11:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 's·∫Ω ti·∫øp t·ª•c tr√¨nh di·ªÖn'
2025-12-09 02:11:40 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-09 02:11:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='s·∫Ω ti·∫øp t·ª•c tr√¨nh di·ªÖn', Q1='s·∫Ω ti·∫øp t·ª•c tr√¨nh di·ªÖn', Q2='s·∫Ω ti·∫øp t·ª•c tr√¨nh di·ªÖn'
2025-12-09 02:11:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-09 02:11:40 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-09 02:11:40 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.025s]
2025-12-09 02:11:40 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.025s]
2025-12-09 02:11:40 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.031s]
2025-12-09 02:11:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-09 02:11:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 298.95ms
2025-12-09 02:11:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-09 02:11:40 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-09 02:11:40 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-09 02:13:24 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='hoa h·ªìng', ocrText='c·∫£nh s√°t b·∫Øn ch·∫øt', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}, selectedObjects=[])]
2025-12-09 02:13:24 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-09 02:13:24 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}
2025-12-09 02:13:24 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal', 'ocr'}, Total: 2
2025-12-09 02:13:24 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'hoa h·ªìng' ‚Üí 'rose'
2025-12-09 02:13:24 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'rose'
2025-12-09 02:13:24 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'c·∫£nh s√°t b·∫Øn ch·∫øt'
2025-12-09 02:13:24 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-09 02:13:28 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 23176:1.0000, 23177:0.9972, 234132:0.9396, 234133:0.9377, 306967:0.9344, 234129:0.9291, 234160:0.9275, 306968:0.9107, 234164:0.8146, 364256:0.7975
2025-12-09 02:13:28 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 364230:1.0000, 234129:0.9841, 698034:0.9584, 697950:0.9084, 698029:0.8983, 697951:0.8977, 698033:0.8821, 343701:0.8534, 698030:0.8489, 306968:0.8358
2025-12-09 02:13:28 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 23176:1.0000, 11150:0.7366, 11151:0.6727, 23166:0.6484, 23167:0.6257, 364258:0.6111, 364257:0.5573, 348459:0.5187, 364242:0.4947, 341349:0.4930
2025-12-09 02:13:28 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 23176:1.0000, 234129:0.7857, 23177:0.7373, 698034:0.6750, 306967:0.6635, 306968:0.6523, 697950:0.6508, 698029:0.6298, 698033:0.6208, 364258:0.6183
2025-12-09 02:13:28 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'c·∫£nh s√°t b·∫Øn ch·∫øt'
2025-12-09 02:13:28 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.029s]
2025-12-09 02:13:28 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 490700:0.9645, 37495:0.9581, 37496:0.9581, 21467:0.9509, 21468:0.9509, 465676:0.9425, 37500:0.9366, 37499:0.9278, 37501:0.9278, 490699:0.9157
2025-12-09 02:13:28 - app.routers.search - INFO - [ENSEMBLE] Check: 2 enabled methods, per_method_results keys: ['multimodal', 'ocr']
2025-12-09 02:13:28 - app.routers.search - INFO - [ENSEMBLE] Ensembling 2 methods: {'multimodal', 'ocr'}
2025-12-09 02:13:28 - app.routers.search - INFO - [ENSEMBLE] Final ensemble top results: 23176:0.5000, 490700:0.4822, 37495:0.4791, 37496:0.4791, 21467:0.4755, 21468:0.4755, 465676:0.4713, 37500:0.4683, 37499:0.4639, 37501:0.4639, 490699:0.4578, 21465:0.4554, 21466:0.4554, 21464:0.4507, 365887:0.4485, 365888:0.4485, 371397:0.4356, 465675:0.4316, 365883:0.3996, 366299:0.3996
2025-12-09 02:13:28 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 02:13:32 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='hoa h·ªìng', ocrText='c·∫£nh s√°t b·∫Øn ch·∫øt', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 02:13:32 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-09 02:13:32 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-09 02:13:32 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-09 02:13:33 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'hoa h·ªìng' ‚Üí 'rose'
2025-12-09 02:13:33 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'rose'
2025-12-09 02:13:33 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-09 02:13:33 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-09 02:13:33 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: rose
2025-12-09 02:13:33 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-09 02:13:33 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: rose
2025-12-09 02:13:33 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-09 02:13:33 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: rose
2025-12-09 02:13:33 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-09 02:13:33 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-09 02:13:33 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-09 02:13:33 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-09 02:13:33 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-09 02:13:33 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-09 02:13:33 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 02:13:37 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='hoa h·ªìng', ocrText='c·∫£nh s√°t b·∫Øn ch·∫øt', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 02:13:37 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-09 02:13:37 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-09 02:13:37 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-09 02:13:38 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'hoa h·ªìng' ‚Üí 'rose'
2025-12-09 02:13:38 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'rose'
2025-12-09 02:13:38 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-09 02:13:40 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 23176:1.0000, 23177:0.9972, 234132:0.9396, 234133:0.9377, 306967:0.9344, 234129:0.9291, 234160:0.9275, 306968:0.9107, 234164:0.8146, 364256:0.7975
2025-12-09 02:13:40 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 364230:1.0000, 234129:0.9841, 698034:0.9584, 697950:0.9084, 698029:0.8983, 697951:0.8977, 698033:0.8821, 343701:0.8534, 698030:0.8489, 306968:0.8358
2025-12-09 02:13:40 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 23176:1.0000, 11150:0.7366, 11151:0.6727, 23166:0.6484, 23167:0.6257, 364258:0.6111, 364257:0.5573, 348459:0.5187, 364242:0.4947, 341349:0.4930
2025-12-09 02:13:40 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 23176:1.0000, 234129:0.7857, 23177:0.7373, 698034:0.6750, 306967:0.6635, 306968:0.6523, 697950:0.6508, 698029:0.6298, 698033:0.6208, 364258:0.6183
2025-12-09 02:13:40 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-09 02:13:40 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-09 02:13:40 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 02:14:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-09 02:14:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='ch√≥', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 02:14:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 02:14:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'ch√≥'
2025-12-09 02:14:01 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'ch√≥' ‚Üí 'dog'
2025-12-09 02:14:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'dog'
2025-12-09 02:14:01 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-09 02:14:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='dog', Q1='dog', Q2='dog'
2025-12-09 02:14:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-09 02:14:01 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-09 02:14:01 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-09 02:14:01 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: dog
2025-12-09 02:14:02 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-09 02:14:02 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: dog
2025-12-09 02:14:02 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-09 02:14:02 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: dog
2025-12-09 02:14:02 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-09 02:14:02 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: dog
2025-12-09 02:14:02 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-09 02:14:02 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: dog
2025-12-09 02:14:03 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-09 02:14:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: dog
2025-12-09 02:14:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-09 02:14:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2755.48ms
2025-12-09 02:14:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-09 02:14:04 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-09 02:14:04 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-09 02:14:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-09 02:14:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='ng√¢n h√†ng qu·∫ßy s·ªë 19', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 02:14:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 02:14:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'ng√¢n h√†ng qu·∫ßy s·ªë 19'
2025-12-09 02:14:20 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'ng√¢n h√†ng qu·∫ßy s·ªë 19' ‚Üí 'bank counter number 19'
2025-12-09 02:14:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'bank counter number 19'
2025-12-09 02:14:20 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-09 02:14:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='bank counter number 19', Q1='bank counter number 19', Q2='bank counter number 19'
2025-12-09 02:14:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-09 02:14:20 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-09 02:14:20 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-09 02:14:20 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: bank counter number 19
2025-12-09 02:14:21 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-09 02:14:21 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: bank counter number 19
2025-12-09 02:14:22 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-09 02:14:22 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: bank counter number 19
2025-12-09 02:14:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-09 02:14:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3446.04ms
2025-12-09 02:14:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-09 02:14:22 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-09 02:14:22 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-09 02:15:21 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='1132', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 02:15:21 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-09 02:15:21 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-09 02:15:21 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-09 02:15:21 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): '1132'
2025-12-09 02:15:21 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: '1132'
2025-12-09 02:15:21 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.021s]
2025-12-09 02:15:21 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 211710:0.9996, 211711:0.9994, 35056:0.8727, 678988:0.8358, 678989:0.8358, 678990:0.8358, 678991:0.8358, 234189:0.8275, 234190:0.8275, 281138:0.8174
2025-12-09 02:15:21 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-09 02:15:21 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-09 02:15:21 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 02:15:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-09 02:15:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='1132', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 02:15:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 02:15:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: '1132'
2025-12-09 02:15:35 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-09 02:15:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='1132', Q1='1132', Q2='1132'
2025-12-09 02:15:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-09 02:15:35 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-09 02:15:35 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-09 02:15:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: 1132
2025-12-09 02:15:35 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-09 02:15:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: 1132
2025-12-09 02:15:35 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-09 02:15:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: 1132
2025-12-09 02:15:36 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-09 02:15:36 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: 1132
2025-12-09 02:15:37 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-09 02:15:37 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: 1132
2025-12-09 02:15:37 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-09 02:15:37 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: 1132
2025-12-09 02:15:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-09 02:15:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2644.32ms
2025-12-09 02:15:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-09 02:15:37 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-09 02:15:37 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-09 02:15:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-09 02:15:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, objects=[]
2025-12-09 02:15:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 02:15:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: ''
2025-12-09 02:15:46 - app.services.gemini.query_augmentation - WARNING - [QUERY AUG] Empty query, returning original
2025-12-09 02:15:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='', Q1='', Q2=''
2025-12-09 02:15:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-09 02:15:46 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-09 02:15:46 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.009s]
2025-12-09 02:15:46 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.008s]
2025-12-09 02:15:46 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.008s]
2025-12-09 02:15:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-09 02:15:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 24.83ms
2025-12-09 02:15:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-09 02:15:46 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-09 02:15:46 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-09 02:16:15 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-09 02:16:15 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='bitexco', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 02:16:15 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 02:16:15 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'bitexco'
2025-12-09 02:16:15 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-09 02:16:15 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='bitexco', Q1='bitexco', Q2='bitexco'
2025-12-09 02:16:15 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-09 02:16:15 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-09 02:16:15 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-09 02:16:15 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: bitexco
2025-12-09 02:16:16 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-09 02:16:16 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: bitexco
2025-12-09 02:16:16 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-09 02:16:16 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: bitexco
2025-12-09 02:16:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-09 02:16:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2541.88ms
2025-12-09 02:16:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-09 02:16:17 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-09 02:16:17 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-09 02:17:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-09 02:17:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, objects=[]
2025-12-09 02:17:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 02:17:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: ''
2025-12-09 02:17:45 - app.services.gemini.query_augmentation - WARNING - [QUERY AUG] Empty query, returning original
2025-12-09 02:17:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='', Q1='', Q2=''
2025-12-09 02:17:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-09 02:17:45 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-09 02:17:45 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.037s]
2025-12-09 02:17:45 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.039s]
2025-12-09 02:17:45 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.037s]
2025-12-09 02:17:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-09 02:17:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 57.42ms
2025-12-09 02:17:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-09 02:17:45 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-09 02:17:45 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-09 02:17:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-09 02:17:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, objects=[]
2025-12-09 02:17:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 02:17:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: ''
2025-12-09 02:17:58 - app.services.gemini.query_augmentation - WARNING - [QUERY AUG] Empty query, returning original
2025-12-09 02:17:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='', Q1='', Q2=''
2025-12-09 02:17:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-09 02:17:58 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-09 02:17:58 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.058s]
2025-12-09 02:17:58 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.058s]
2025-12-09 02:17:58 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.066s]
2025-12-09 02:17:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-09 02:17:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 88.79ms
2025-12-09 02:17:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-09 02:17:58 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-09 02:17:58 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-09 02:17:58 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='l·ªÑ M√çT TINH', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 02:17:58 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-09 02:17:58 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-09 02:17:58 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-09 02:17:58 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'l·ªÑ M√çT TINH'
2025-12-09 02:17:58 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'l·ªÑ M√çT TINH'
2025-12-09 02:17:58 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.026s]
2025-12-09 02:17:58 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 236059:0.9597, 332183:0.9570, 332184:0.9570, 115205:0.9434, 339309:0.9396, 115206:0.9262, 339310:0.9236, 332185:0.9147, 17805:0.9014, 362856:0.8901
2025-12-09 02:17:58 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-09 02:17:58 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-09 02:17:58 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 02:18:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-09 02:18:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, objects=[]
2025-12-09 02:18:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 02:18:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: ''
2025-12-09 02:18:01 - app.services.gemini.query_augmentation - WARNING - [QUERY AUG] Empty query, returning original
2025-12-09 02:18:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='', Q1='', Q2=''
2025-12-09 02:18:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-09 02:18:01 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-09 02:18:01 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.040s]
2025-12-09 02:18:01 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.043s]
2025-12-09 02:18:01 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.045s]
2025-12-09 02:18:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-09 02:18:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 57.98ms
2025-12-09 02:18:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-09 02:18:01 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-09 02:18:01 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-09 02:18:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-09 02:18:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, objects=[]
2025-12-09 02:18:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 02:18:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: ''
2025-12-09 02:18:02 - app.services.gemini.query_augmentation - WARNING - [QUERY AUG] Empty query, returning original
2025-12-09 02:18:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='', Q1='', Q2=''
2025-12-09 02:18:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-09 02:18:02 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-09 02:18:02 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.035s]
2025-12-09 02:18:02 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.044s]
2025-12-09 02:18:02 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.044s]
2025-12-09 02:18:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-09 02:18:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 54.92ms
2025-12-09 02:18:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-09 02:18:02 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-09 02:18:02 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-09 02:18:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-09 02:18:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, objects=[]
2025-12-09 02:18:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 02:18:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: ''
2025-12-09 02:18:17 - app.services.gemini.query_augmentation - WARNING - [QUERY AUG] Empty query, returning original
2025-12-09 02:18:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='', Q1='', Q2=''
2025-12-09 02:18:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-09 02:18:17 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-09 02:18:17 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.058s]
2025-12-09 02:18:17 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.068s]
2025-12-09 02:18:17 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.078s]
2025-12-09 02:18:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-09 02:18:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 85.58ms
2025-12-09 02:18:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-09 02:18:17 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-09 02:18:17 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-09 02:18:17 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='Vi·ªát Nam v·∫´n c√≤n 2 tri·ªáu ng∆∞·ªùi', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 02:18:17 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-09 02:18:17 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-09 02:18:17 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-09 02:18:17 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'Vi·ªát Nam v·∫´n c√≤n 2 tri·ªáu ng∆∞·ªùi'
2025-12-09 02:18:17 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'Vi·ªát Nam v·∫´n c√≤n 2 tri·ªáu ng∆∞·ªùi'
2025-12-09 02:18:17 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.061s]
2025-12-09 02:18:17 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 17238:0.9893, 17234:0.9783, 16866:0.9654, 16867:0.9654, 16868:0.9654, 16865:0.9613, 17235:0.9613, 16896:0.9359, 17236:0.9359, 16871:0.9281
2025-12-09 02:18:17 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-09 02:18:17 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-09 02:18:17 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 02:19:49 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='L·ªÖ M√≠t Tinh', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 02:19:49 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-09 02:19:49 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-09 02:19:49 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-09 02:19:50 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'L·ªÖ M√≠t Tinh' ‚Üí 'Rally Ceremony'
2025-12-09 02:19:50 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'Rally Ceremony'
2025-12-09 02:19:50 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-09 02:19:51 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-09 02:19:51 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Rally Ceremony
2025-12-09 02:19:51 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-09 02:19:51 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Rally Ceremony
2025-12-09 02:19:51 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-09 02:19:51 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Rally Ceremony
2025-12-09 02:19:51 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-09 02:19:51 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-09 02:19:51 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-09 02:19:51 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-09 02:19:51 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-09 02:19:51 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-09 02:19:51 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 02:19:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-09 02:19:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='nhi·ªÅu ng∆∞·ªùi ƒë√†n √¥ng ƒëang ng·ªìi, m·ªôt ng∆∞·ªùi b·ªã che m·∫Øt', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 02:19:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 02:19:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'nhi·ªÅu ng∆∞·ªùi ƒë√†n √¥ng ƒëang ng·ªìi, m·ªôt ng∆∞·ªùi b·ªã che m·∫Øt'
2025-12-09 02:19:54 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'nhi·ªÅu ng∆∞·ªùi ƒë√†n √¥ng ƒëang ng·ªìi, m·ªôt ng∆∞·ªùi b·ªã che m·∫Øt' ‚Üí 'Many men are sitting, one is blindfolded'
2025-12-09 02:19:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'Many men are sitting, one is blindfolded'
2025-12-09 02:19:55 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-09 02:19:55 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='Many men are sitting, one is blindfolded', Q1='Many men are sitting, one is blindfolded', Q2='Many men are sitting, one is blindfolded'
2025-12-09 02:19:55 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-09 02:19:55 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-09 02:19:55 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-09 02:19:55 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Many men are sitting, one is blindfolded
2025-12-09 02:19:55 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='L·ªÖ M√≠t Tinh', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 02:19:55 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-09 02:19:55 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-09 02:19:55 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-09 02:19:55 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'L·ªÖ M√≠t Tinh' ‚Üí 'Rally Ceremony'
2025-12-09 02:19:55 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'Rally Ceremony'
2025-12-09 02:19:55 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-09 02:19:55 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-09 02:19:55 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Rally Ceremony
2025-12-09 02:19:56 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-09 02:19:56 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Rally Ceremony
2025-12-09 02:19:56 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-09 02:19:56 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Many men are sitting, one is blindfolded
2025-12-09 02:19:56 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-09 02:19:56 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Many men are sitting, one is blindfolded
2025-12-09 02:19:57 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-09 02:19:57 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-09 02:19:57 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 179966:1.0000, 156836:0.7421, 311370:0.6946, 181284:0.6100, 156835:0.5830, 341805:0.5397, 181263:0.5049, 379795:0.5032, 408602:0.4587, 639504:0.4452
2025-12-09 02:19:57 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 179966:1.0000, 156836:0.7148, 311370:0.6624, 181284:0.5688, 156835:0.5390, 341805:0.4910, 181263:0.4526, 379795:0.4507, 408602:0.4015, 639504:0.3866
2025-12-09 02:19:57 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-09 02:19:57 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-09 02:19:57 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 02:19:57 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-09 02:19:57 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Many men are sitting, one is blindfolded
2025-12-09 02:19:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-09 02:19:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 4004.12ms
2025-12-09 02:19:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-09 02:19:57 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-09 02:19:57 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-09 02:20:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-09 02:20:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='nhi·ªÅu ng∆∞·ªùi ƒë√†n √¥ng ƒëang ng·ªìi, m·ªôt ng∆∞·ªùi bƒëeo bƒÉng che m·∫Øt', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 02:20:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 02:20:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'nhi·ªÅu ng∆∞·ªùi ƒë√†n √¥ng ƒëang ng·ªìi, m·ªôt ng∆∞·ªùi bƒëeo bƒÉng che m·∫Øt'
2025-12-09 02:20:03 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'nhi·ªÅu ng∆∞·ªùi ƒë√†n √¥ng ƒëang ng·ªìi, m·ªôt ng∆∞·ªùi bƒëeo bƒÉng che m·∫Øt' ‚Üí 'Many men are sitting, one is wearing an eyepatch'
2025-12-09 02:20:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'Many men are sitting, one is wearing an eyepatch'
2025-12-09 02:20:03 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-09 02:20:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='Many men are sitting, one is wearing an eyepatch', Q1='Many men are sitting, one is wearing an eyepatch', Q2='Many men are sitting, one is wearing an eyepatch'
2025-12-09 02:20:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-09 02:20:03 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-09 02:20:03 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-09 02:20:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Many men are sitting, one is wearing an eyepatch
2025-12-09 02:20:04 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-09 02:20:04 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Many men are sitting, one is wearing an eyepatch
2025-12-09 02:20:04 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-09 02:20:04 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Many men are sitting, one is wearing an eyepatch
2025-12-09 02:20:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-09 02:20:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3814.59ms
2025-12-09 02:20:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-09 02:20:05 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-09 02:20:05 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-09 02:20:15 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='L·ªÖ M√≠t Tinh h∆∞·ªüng ·ª©ng th·ªã gi√°c th·∫ø gi·ªõi', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 02:20:15 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-09 02:20:15 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-09 02:20:15 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-09 02:20:15 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'L·ªÖ M√≠t Tinh h∆∞·ªüng ·ª©ng th·ªã gi√°c th·∫ø gi·ªõi' ‚Üí 'The Rally meets the world's vision'
2025-12-09 02:20:15 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'The Rally meets the world's vision'
2025-12-09 02:20:15 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-09 02:20:16 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-09 02:20:16 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The Rally meets the world's vision
2025-12-09 02:20:16 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-09 02:20:16 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The Rally meets the world's vision
2025-12-09 02:20:16 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-09 02:20:16 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The Rally meets the world's vision
2025-12-09 02:20:16 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-09 02:20:16 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-09 02:20:16 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-09 02:20:16 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-09 02:20:16 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-09 02:20:16 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-09 02:20:16 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 02:20:18 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='L·ªÖ M√≠t Tinh h∆∞·ªüng ·ª©ng th·ªã gi√°c th·∫ø gi·ªõi', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 02:20:18 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-09 02:20:18 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-09 02:20:18 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-09 02:20:18 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'L·ªÖ M√≠t Tinh h∆∞·ªüng ·ª©ng th·ªã gi√°c th·∫ø gi·ªõi' ‚Üí 'The Rally meets the world's vision'
2025-12-09 02:20:18 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'The Rally meets the world's vision'
2025-12-09 02:20:18 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-09 02:20:22 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 632372:1.0000, 684111:0.9422, 684109:0.8587, 684856:0.8372, 639504:0.8327, 418018:0.8205, 632371:0.7608, 575014:0.7518, 437807:0.7188, 181284:0.7071
2025-12-09 02:20:22 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 334407:1.0000, 399662:0.9359, 399630:0.9082, 399629:0.8888, 334408:0.8605, 335466:0.8361, 399663:0.8289, 335447:0.8197, 335448:0.8140, 448604:0.7724
2025-12-09 02:20:22 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 181284:1.0000, 684109:0.8763, 684105:0.7144, 684106:0.6577, 110452:0.6207, 156835:0.6133, 156836:0.5463, 681565:0.5359, 336507:0.5204, 110429:0.5141
2025-12-09 02:20:22 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 181284:1.0000, 684109:0.9967, 399662:0.9580, 399630:0.9197, 334407:0.9151, 334408:0.9079, 399629:0.8928, 335466:0.8763, 335447:0.8457, 399663:0.8099
2025-12-09 02:20:22 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-09 02:20:22 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-09 02:20:22 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 02:20:35 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='h·ªôi ngh·ªã c√≥ ng∆∞·ªùi ƒë√†n √¥ng ƒë·ª©ng n√≥i, n·ªÅn m√†u xanh', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 02:20:35 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-09 02:20:35 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-09 02:20:35 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-09 02:20:37 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'h·ªôi ngh·ªã c√≥ ng∆∞·ªùi ƒë√†n √¥ng ƒë·ª©ng n√≥i, n·ªÅn m√†u xanh' ‚Üí 'conference with a man standing and speaking, blue background'
2025-12-09 02:20:37 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'conference with a man standing and speaking, blue background'
2025-12-09 02:20:37 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-09 02:20:37 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-09 02:20:37 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: conference with a man standing and speaking, blue background
2025-12-09 02:20:37 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-09 02:20:37 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: conference with a man standing and speaking, blue background
2025-12-09 02:20:37 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-09 02:20:37 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: conference with a man standing and speaking, blue background
2025-12-09 02:20:37 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-09 02:20:37 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-09 02:20:37 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-09 02:20:37 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-09 02:20:37 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-09 02:20:37 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-09 02:20:37 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 02:20:40 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='h·ªôi ngh·ªã c√≥ ng∆∞·ªùi ƒë√†n √¥ng ƒë·ª©ng n√≥i, n·ªÅn m√†u xanh', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 02:20:40 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-09 02:20:40 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-09 02:20:40 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-09 02:20:41 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'h·ªôi ngh·ªã c√≥ ng∆∞·ªùi ƒë√†n √¥ng ƒë·ª©ng n√≥i, n·ªÅn m√†u xanh' ‚Üí 'conference with a man standing and speaking, blue background'
2025-12-09 02:20:41 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'conference with a man standing and speaking, blue background'
2025-12-09 02:20:41 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-09 02:20:44 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 667065:1.0000, 577135:0.9614, 176198:0.9452, 67101:0.9401, 98042:0.9046, 291482:0.8972, 169860:0.8370, 667064:0.8242, 577137:0.8096, 667063:0.8096
2025-12-09 02:20:44 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 83650:1.0000, 83584:0.9527, 291488:0.9458, 291493:0.8900, 83585:0.8854, 176198:0.8752, 636720:0.8714, 636719:0.8531, 291494:0.8505, 636699:0.8502
2025-12-09 02:20:44 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 269062:1.0000, 598802:0.9369, 180629:0.7458, 599738:0.6978, 483341:0.6955, 371651:0.6945, 598803:0.6848, 269150:0.6810, 599736:0.6691, 598806:0.6620
2025-12-09 02:20:44 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 291494:1.0000, 291488:0.9600, 176198:0.9400, 291493:0.8715, 83650:0.6911, 577139:0.6036, 598806:0.5999, 598802:0.5836, 83584:0.5826, 83585:0.5766
2025-12-09 02:20:44 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-09 02:20:44 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-09 02:20:44 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 02:21:30 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='h·ªôi ngh·ªã c√≥ ng∆∞·ªùi ƒë√†n √¥ng ƒë·ª©ng n√≥i ph√≠a tr∆∞·ªõc l√† b√≥ hoa, n·ªÅn m√†u xanh', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 02:21:30 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-09 02:21:30 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-09 02:21:30 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-09 02:21:31 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'h·ªôi ngh·ªã c√≥ ng∆∞·ªùi ƒë√†n √¥ng ƒë·ª©ng n√≥i ph√≠a tr∆∞·ªõc l√† b√≥ hoa, n·ªÅn m√†u xanh' ‚Üí 'At the conference, there was a man standing and speaking in front of a bouquet of flowers, with a blue background'
2025-12-09 02:21:31 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'At the conference, there was a man standing and speaking in front of a bouquet of flowers, with a blue background'
2025-12-09 02:21:31 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-09 02:21:31 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-09 02:21:31 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: At the conference, there was a man standing and speaking in front of a bouquet of flowers, with a blue background
2025-12-09 02:21:31 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-09 02:21:31 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: At the conference, there was a man standing and speaking in front of a bouquet of flowers, with a blue background
2025-12-09 02:21:31 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-09 02:21:31 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: At the conference, there was a man standing and speaking in front of a bouquet of flowers, with a blue background
2025-12-09 02:21:31 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-09 02:21:31 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-09 02:21:31 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-09 02:21:31 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-09 02:21:31 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-09 02:21:31 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-09 02:21:31 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 02:21:31 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='1 ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c vest ƒë·ª©ng ph√°t bi·ªÉu', ocrText='l·ªÖ m√≠t tinh h∆∞·ªüng ·ª©ng ng√†y th·ªã gi√°c th·∫ø gi·ªõi', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 02:21:31 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-09 02:21:31 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-09 02:21:31 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-09 02:21:32 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: '1 ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c vest ƒë·ª©ng ph√°t bi·ªÉu' ‚Üí 'A man wearing a suit stood and spoke'
2025-12-09 02:21:32 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'A man wearing a suit stood and spoke'
2025-12-09 02:21:32 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-09 02:21:34 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 595051:1.0000, 595024:0.9653, 595013:0.9387, 595028:0.9349, 595015:0.8643, 595014:0.8631, 595054:0.8591, 595010:0.8430, 600860:0.8335, 595029:0.8248
2025-12-09 02:21:34 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 604751:1.0000, 604748:0.9859, 71513:0.8964, 71516:0.8756, 174887:0.8576, 64092:0.8540, 174876:0.8409, 604749:0.8346, 64097:0.8340, 174888:0.8208
2025-12-09 02:21:34 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 673706:1.0000, 673712:0.9771, 673713:0.9362, 595040:0.9239, 595041:0.9238, 673714:0.9167, 595015:0.8901, 595019:0.8621, 673681:0.8592, 673687:0.8439
2025-12-09 02:21:34 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 174876:1.0000, 174888:0.8658, 174887:0.8635, 90709:0.7162, 595013:0.7129, 595015:0.6709, 595028:0.6434, 71513:0.6287, 604748:0.6244, 595054:0.6215
2025-12-09 02:21:34 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-09 02:21:34 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-09 02:21:34 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 02:21:37 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='h·ªôi ngh·ªã c√≥ ng∆∞·ªùi ƒë√†n √¥ng ƒë·ª©ng n√≥i ph√≠a tr∆∞·ªõc l√† b√≥ hoa, n·ªÅn m√†u xanh', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 02:21:37 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-09 02:21:37 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-09 02:21:37 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-09 02:21:37 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'h·ªôi ngh·ªã c√≥ ng∆∞·ªùi ƒë√†n √¥ng ƒë·ª©ng n√≥i ph√≠a tr∆∞·ªõc l√† b√≥ hoa, n·ªÅn m√†u xanh' ‚Üí 'At the conference, there was a man standing and speaking in front of a bouquet of flowers, with a blue background'
2025-12-09 02:21:37 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'At the conference, there was a man standing and speaking in front of a bouquet of flowers, with a blue background'
2025-12-09 02:21:37 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-09 02:21:37 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-09 02:21:37 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: At the conference, there was a man standing and speaking in front of a bouquet of flowers, with a blue background
2025-12-09 02:21:37 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-09 02:21:37 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: At the conference, there was a man standing and speaking in front of a bouquet of flowers, with a blue background
2025-12-09 02:21:37 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-09 02:21:37 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: At the conference, there was a man standing and speaking in front of a bouquet of flowers, with a blue background
2025-12-09 02:21:37 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-09 02:21:37 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-09 02:21:37 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-09 02:21:37 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-09 02:21:37 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-09 02:21:37 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-09 02:21:37 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 02:21:40 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='h·ªôi ngh·ªã c√≥ ng∆∞·ªùi ƒë√†n √¥ng ƒë·ª©ng n√≥i ph√≠a tr∆∞·ªõc l√† b√≥ hoa, n·ªÅn m√†u xanh', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 02:21:40 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-09 02:21:40 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-09 02:21:40 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-09 02:21:41 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'h·ªôi ngh·ªã c√≥ ng∆∞·ªùi ƒë√†n √¥ng ƒë·ª©ng n√≥i ph√≠a tr∆∞·ªõc l√† b√≥ hoa, n·ªÅn m√†u xanh' ‚Üí 'At the conference, there was a man standing and speaking in front of a bouquet of flowers, with a blue background'
2025-12-09 02:21:41 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'At the conference, there was a man standing and speaking in front of a bouquet of flowers, with a blue background'
2025-12-09 02:21:41 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-09 02:21:43 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 368957:1.0000, 368946:0.9465, 258583:0.9254, 381041:0.9198, 423439:0.8887, 3139:0.8589, 368956:0.8522, 489904:0.8425, 258584:0.8420, 661027:0.8413
2025-12-09 02:21:43 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 112710:1.0000, 112709:0.9769, 68348:0.9253, 59200:0.9137, 381031:0.9055, 636713:0.8662, 636712:0.8643, 636702:0.8417, 381032:0.8288, 489917:0.8135
2025-12-09 02:21:43 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 59200:1.0000, 112710:0.6668, 71537:0.6281, 71538:0.6094, 418453:0.6093, 465086:0.5425, 112763:0.5350, 423442:0.5343, 368957:0.5277, 636712:0.5269
2025-12-09 02:21:43 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 59200:1.0000, 112710:0.8225, 112709:0.6963, 381031:0.6851, 636702:0.6734, 368956:0.6453, 368957:0.6394, 636712:0.6269, 636713:0.6178, 381032:0.5957
2025-12-09 02:21:43 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-09 02:21:43 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-09 02:21:43 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 02:22:38 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='1 ng∆∞·ªùi b·ªãt m·∫Øt trong 1 ƒë·ªëng ng∆∞·ªùi', ocrText='l·ªÖ m√≠t tinh h∆∞·ªüng ·ª©ng ng√†y th·ªã gi√°c th·∫ø gi·ªõi', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 02:22:38 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-09 02:22:38 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-09 02:22:38 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-09 02:22:39 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: '1 ng∆∞·ªùi b·ªãt m·∫Øt trong 1 ƒë·ªëng ng∆∞·ªùi' ‚Üí '1 blindfolded person in a pile of people'
2025-12-09 02:22:39 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: '1 blindfolded person in a pile of people'
2025-12-09 02:22:39 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-09 02:22:39 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-09 02:22:39 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: 1 blindfolded person in a pile of people
2025-12-09 02:22:39 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-09 02:22:39 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: 1 blindfolded person in a pile of people
2025-12-09 02:22:40 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-09 02:22:40 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: 1 blindfolded person in a pile of people
2025-12-09 02:22:40 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-09 02:22:40 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-09 02:22:40 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-09 02:22:40 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-09 02:22:40 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-09 02:22:40 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-09 02:22:40 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 02:22:53 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='1 ng∆∞·ªùi b·ªãt m·∫Øt ng·ªìi gi·ªØa h√†ng ng∆∞·ªùi', ocrText='l·ªÖ m√≠t tinh h∆∞·ªüng ·ª©ng ng√†y th·ªã gi√°c th·∫ø gi·ªõi', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 02:22:53 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-09 02:22:53 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-09 02:22:53 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-09 02:22:54 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: '1 ng∆∞·ªùi b·ªãt m·∫Øt ng·ªìi gi·ªØa h√†ng ng∆∞·ªùi' ‚Üí 'A blindfolded person sits in the middle of a row of people'
2025-12-09 02:22:54 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'A blindfolded person sits in the middle of a row of people'
2025-12-09 02:22:54 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-09 02:22:56 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 609865:1.0000, 167321:0.9380, 167322:0.9091, 167318:0.8603, 202784:0.6564, 167317:0.5990, 235711:0.5900, 353719:0.5178, 235449:0.4903, 353726:0.4882
2025-12-09 02:22:56 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 609865:1.0000, 167318:0.9708, 167317:0.9178, 167322:0.8296, 167321:0.7642, 609864:0.6439, 353725:0.6160, 364448:0.6147, 496535:0.5913, 609862:0.5819
2025-12-09 02:22:56 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 167318:1.0000, 167321:0.9715, 167322:0.9507, 609865:0.8817, 167317:0.7358, 609866:0.7218, 116137:0.7217, 333329:0.6814, 202784:0.6785, 609862:0.6533
2025-12-09 02:22:56 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 609865:1.0000, 167318:0.9720, 167322:0.8860, 167321:0.8612, 167317:0.7759, 609862:0.4248, 609866:0.4117, 609864:0.3897, 353725:0.3422, 353726:0.3267
2025-12-09 02:22:56 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-09 02:22:56 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-09 02:22:56 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 02:23:50 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='·∫¢o thu·∫≠t s·∫Øc ƒë·∫πp', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 02:23:50 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-09 02:23:50 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-09 02:23:50 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-09 02:23:50 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): '·∫¢o thu·∫≠t s·∫Øc ƒë·∫πp'
2025-12-09 02:23:50 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: '·∫¢o thu·∫≠t s·∫Øc ƒë·∫πp'
2025-12-09 02:23:50 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.022s]
2025-12-09 02:23:50 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 100889:0.9748, 179082:0.9644, 45793:0.9385, 164995:0.9247, 164996:0.9247, 45792:0.9230, 108135:0.9070, 108136:0.8864, 164997:0.8864, 45791:0.8827
2025-12-09 02:23:50 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-09 02:23:50 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-09 02:23:50 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 02:23:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-09 02:23:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, objects=[]
2025-12-09 02:23:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 02:23:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: ''
2025-12-09 02:23:53 - app.services.gemini.query_augmentation - WARNING - [QUERY AUG] Empty query, returning original
2025-12-09 02:23:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='', Q1='', Q2=''
2025-12-09 02:23:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-09 02:23:53 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-09 02:23:53 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.032s]
2025-12-09 02:23:53 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.031s]
2025-12-09 02:23:53 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.039s]
2025-12-09 02:23:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-09 02:23:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 50.27ms
2025-12-09 02:23:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-09 02:23:53 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-09 02:23:53 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-09 02:23:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-09 02:23:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, objects=[]
2025-12-09 02:23:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 02:23:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: ''
2025-12-09 02:23:58 - app.services.gemini.query_augmentation - WARNING - [QUERY AUG] Empty query, returning original
2025-12-09 02:23:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='', Q1='', Q2=''
2025-12-09 02:23:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-09 02:23:58 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-09 02:23:58 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.060s]
2025-12-09 02:23:58 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.069s]
2025-12-09 02:23:58 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.068s]
2025-12-09 02:23:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-09 02:23:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 96.93ms
2025-12-09 02:23:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-09 02:23:58 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-09 02:23:58 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-09 02:25:12 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='ng∆∞·ªùi ph·ª• n·ªØ c·∫ßm micro, t√≥c 2 ƒëu√¥i', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 02:25:12 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-09 02:25:12 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-09 02:25:12 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-09 02:25:13 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'ng∆∞·ªùi ph·ª• n·ªØ c·∫ßm micro, t√≥c 2 ƒëu√¥i' ‚Üí 'Woman holding microphone, two-tailed hair'
2025-12-09 02:25:13 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'Woman holding microphone, two-tailed hair'
2025-12-09 02:25:13 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-09 02:25:13 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-09 02:25:13 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Woman holding microphone, two-tailed hair
2025-12-09 02:25:13 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-09 02:25:13 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Woman holding microphone, two-tailed hair
2025-12-09 02:25:13 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-09 02:25:13 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Woman holding microphone, two-tailed hair
2025-12-09 02:25:13 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-09 02:25:13 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-09 02:25:13 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-09 02:25:13 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-09 02:25:13 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-09 02:25:13 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-09 02:25:13 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 02:25:15 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='ng∆∞·ªùi ph·ª• n·ªØ c·∫ßm micro, t√≥c 2 ƒëu√¥i', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 02:25:15 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-09 02:25:15 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-09 02:25:15 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-09 02:25:15 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'ng∆∞·ªùi ph·ª• n·ªØ c·∫ßm micro, t√≥c 2 ƒëu√¥i' ‚Üí 'Woman holding microphone, two-tailed hair'
2025-12-09 02:25:15 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'Woman holding microphone, two-tailed hair'
2025-12-09 02:25:15 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-09 02:25:18 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 117715:1.0000, 597904:0.8957, 433334:0.8614, 92866:0.8437, 597905:0.8381, 588680:0.8086, 684246:0.8000, 461106:0.7792, 13146:0.7676, 180633:0.7322
2025-12-09 02:25:18 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 180633:1.0000, 180632:0.8551, 603520:0.8499, 596132:0.7859, 143869:0.7024, 603521:0.6838, 92866:0.6611, 96188:0.6327, 344745:0.6087, 344746:0.5952
2025-12-09 02:25:18 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 562417:1.0000, 562418:0.9582, 661465:0.9163, 562421:0.8386, 547056:0.7961, 660477:0.7725, 562420:0.7638, 660471:0.7614, 661468:0.7541, 466969:0.6988
2025-12-09 02:25:18 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 180633:1.0000, 92866:0.8457, 180632:0.8333, 596132:0.7528, 661465:0.6907, 603520:0.6819, 117715:0.6255, 603521:0.5536, 13147:0.5047, 596127:0.4776
2025-12-09 02:25:18 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-09 02:25:18 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-09 02:25:18 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 02:25:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-09 02:25:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='ng∆∞·ªùi ƒë√†n b√† m·∫∑c √°o t√≠m nh·∫°t', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 02:25:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 02:25:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'ng∆∞·ªùi ƒë√†n b√† m·∫∑c √°o t√≠m nh·∫°t'
2025-12-09 02:25:27 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'ng∆∞·ªùi ƒë√†n b√† m·∫∑c √°o t√≠m nh·∫°t' ‚Üí 'woman wearing light purple shirt'
2025-12-09 02:25:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'woman wearing light purple shirt'
2025-12-09 02:25:27 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-09 02:25:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='woman wearing light purple shirt', Q1='woman wearing light purple shirt', Q2='woman wearing light purple shirt'
2025-12-09 02:25:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-09 02:25:27 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-09 02:25:27 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-09 02:25:27 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: woman wearing light purple shirt
2025-12-09 02:25:27 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-09 02:25:27 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: woman wearing light purple shirt
2025-12-09 02:25:28 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-09 02:25:28 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: woman wearing light purple shirt
2025-12-09 02:25:28 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-09 02:25:28 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: woman wearing light purple shirt
2025-12-09 02:25:28 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-09 02:25:28 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: woman wearing light purple shirt
2025-12-09 02:25:29 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-09 02:25:29 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: woman wearing light purple shirt
2025-12-09 02:25:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 0
2025-12-09 02:25:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3674.87ms
2025-12-09 02:25:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-09 02:25:29 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-09 02:25:29 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-09 02:25:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-09 02:25:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='ng∆∞·ªùi ƒë√†n b√† tr·∫ª tu·ªïi m·∫∑c √°o t√≠m nh·∫°t', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 02:25:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 02:25:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'ng∆∞·ªùi ƒë√†n b√† tr·∫ª tu·ªïi m·∫∑c √°o t√≠m nh·∫°t'
2025-12-09 02:25:35 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'ng∆∞·ªùi ƒë√†n b√† tr·∫ª tu·ªïi m·∫∑c √°o t√≠m nh·∫°t' ‚Üí 'Young woman wearing light purple shirt'
2025-12-09 02:25:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'Young woman wearing light purple shirt'
2025-12-09 02:25:35 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-09 02:25:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='Young woman wearing light purple shirt', Q1='Young woman wearing light purple shirt', Q2='Young woman wearing light purple shirt'
2025-12-09 02:25:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-09 02:25:35 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-09 02:25:35 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-09 02:25:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Young woman wearing light purple shirt
2025-12-09 02:25:35 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='ng∆∞·ªùi ph·ª• n·ªØ c·∫ßm micro, √°o m√†u h·ªìng, t√≥c 2 ƒëu√¥i', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 02:25:35 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-09 02:25:35 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-09 02:25:35 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-09 02:25:36 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-09 02:25:36 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Young woman wearing light purple shirt
2025-12-09 02:25:36 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-09 02:25:36 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Young woman wearing light purple shirt
2025-12-09 02:25:36 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'ng∆∞·ªùi ph·ª• n·ªØ c·∫ßm micro, √°o m√†u h·ªìng, t√≥c 2 ƒëu√¥i' ‚Üí 'Woman holding microphone, pink shirt, 2-tailed hair'
2025-12-09 02:25:36 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'Woman holding microphone, pink shirt, 2-tailed hair'
2025-12-09 02:25:36 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-09 02:25:37 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-09 02:25:37 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Woman holding microphone, pink shirt, 2-tailed hair
2025-12-09 02:25:37 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-09 02:25:37 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Woman holding microphone, pink shirt, 2-tailed hair
2025-12-09 02:25:37 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-09 02:25:37 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Woman holding microphone, pink shirt, 2-tailed hair
2025-12-09 02:25:37 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-09 02:25:37 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-09 02:25:37 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-09 02:25:37 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-09 02:25:37 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-09 02:25:37 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-09 02:25:37 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 02:25:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-09 02:25:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3982.14ms
2025-12-09 02:25:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-09 02:25:37 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-09 02:25:37 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-09 02:25:39 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='ng∆∞·ªùi ph·ª• n·ªØ c·∫ßm micro, √°o m√†u h·ªìng, t√≥c 2 ƒëu√¥i', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 02:25:39 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-09 02:25:39 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-09 02:25:39 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-09 02:25:39 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'ng∆∞·ªùi ph·ª• n·ªØ c·∫ßm micro, √°o m√†u h·ªìng, t√≥c 2 ƒëu√¥i' ‚Üí 'Woman holding microphone, pink shirt, 2-tailed hair'
2025-12-09 02:25:39 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'Woman holding microphone, pink shirt, 2-tailed hair'
2025-12-09 02:25:39 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-09 02:25:42 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 538114:1.0000, 341012:0.8130, 543534:0.8007, 592666:0.7104, 543533:0.6706, 170694:0.6590, 112716:0.5810, 341013:0.5661, 412120:0.5601, 592665:0.5419
2025-12-09 02:25:42 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 410110:1.0000, 410174:0.8629, 469802:0.8598, 180275:0.8000, 2029:0.7053, 354585:0.6753, 603520:0.6693, 150990:0.6668, 150982:0.6442, 538499:0.6423
2025-12-09 02:25:42 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 461140:1.0000, 639762:0.8233, 543534:0.8183, 639763:0.7819, 444808:0.7691, 354293:0.7605, 40661:0.7274, 444092:0.7243, 355815:0.7124, 607360:0.6721
2025-12-09 02:25:42 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 410110:1.0000, 538114:0.9984, 469802:0.8437, 410174:0.8145, 543534:0.7770, 341012:0.7736, 180275:0.7294, 170694:0.6390, 603521:0.6053, 2029:0.6012
2025-12-09 02:25:42 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-09 02:25:42 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-09 02:25:42 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 02:25:54 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='phim ho√†i c·ªï thu h√∫t kh√°n gi·∫£ tr·∫ª', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 02:25:54 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-09 02:25:54 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-09 02:25:54 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-09 02:25:54 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'phim ho√†i c·ªï thu h√∫t kh√°n gi·∫£ tr·∫ª'
2025-12-09 02:25:54 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'phim ho√†i c·ªï thu h√∫t kh√°n gi·∫£ tr·∫ª'
2025-12-09 02:25:54 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.079s]
2025-12-09 02:25:54 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 162593:0.9794, 162597:0.9746, 93977:0.9736, 93978:0.9736, 162594:0.9726, 93975:0.9560, 93976:0.9560, 162596:0.9511, 108006:0.9278, 162595:0.8975
2025-12-09 02:25:54 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-09 02:25:54 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-09 02:25:54 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 02:26:33 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='HTV7 18:36:13', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 02:26:33 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-09 02:26:33 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-09 02:26:33 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-09 02:26:33 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'HTV7 18:36:13'
2025-12-09 02:26:33 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'HTV7 18:36:13'
2025-12-09 02:26:33 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.049s]
2025-12-09 02:26:33 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 364950:0.9809, 384010:0.9613, 63776:0.9123, 63777:0.9123, 86954:0.9123, 194486:0.9123, 265354:0.9123, 327806:0.9123, 384008:0.9123, 384009:0.9123
2025-12-09 02:26:33 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-09 02:26:33 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-09 02:26:33 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 02:26:52 - root - INFO - üì• Received submit request: query_text='m...', keyframe_path='/keyframe/L04/L04_V005/9329.webp', result_id='93977', username='user1'
2025-12-09 02:26:52 - root - INFO - ‚úÖ Submission created: id=5, query='m...', user=user1
2025-12-09 02:27:28 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='·∫£o thu·∫°t s·∫Øc ƒë·∫πp', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 02:27:28 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-09 02:27:28 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-09 02:27:28 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-09 02:27:28 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): '·∫£o thu·∫°t s·∫Øc ƒë·∫πp'
2025-12-09 02:27:28 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: '·∫£o thu·∫°t s·∫Øc ƒë·∫πp'
2025-12-09 02:27:28 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.019s]
2025-12-09 02:27:28 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 100889:0.9840, 179082:0.9749, 45793:0.9568, 45792:0.9449, 45791:0.9129, 165058:0.9129, 100892:0.8921, 100893:0.8921, 100894:0.8921, 45794:0.8761
2025-12-09 02:27:28 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-09 02:27:28 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-09 02:27:28 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 02:27:38 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='·∫£o thu·∫≠t s·∫Øc ƒë·∫πp', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 02:27:38 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-09 02:27:38 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-09 02:27:38 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-09 02:27:38 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): '·∫£o thu·∫≠t s·∫Øc ƒë·∫πp'
2025-12-09 02:27:38 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: '·∫£o thu·∫≠t s·∫Øc ƒë·∫πp'
2025-12-09 02:27:38 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.019s]
2025-12-09 02:27:38 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 100889:0.9748, 179082:0.9644, 45793:0.9385, 164995:0.9247, 164996:0.9247, 45792:0.9230, 108135:0.9070, 108136:0.8864, 164997:0.8864, 45791:0.8827
2025-12-09 02:27:38 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-09 02:27:38 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-09 02:27:38 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 02:27:59 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='·∫£o thu·∫≠t s·∫Øc  htv7', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 02:27:59 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-09 02:27:59 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-09 02:27:59 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-09 02:27:59 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): '·∫£o thu·∫≠t s·∫Øc  htv7'
2025-12-09 02:27:59 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: '·∫£o thu·∫≠t s·∫Øc  htv7'
2025-12-09 02:27:59 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.017s]
2025-12-09 02:27:59 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 100889:0.9791, 179082:0.9463, 45793:0.9309, 164995:0.9262, 164996:0.9262, 45792:0.9162, 164997:0.8943, 100085:0.8853, 108135:0.8809, 45791:0.8799
2025-12-09 02:27:59 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-09 02:27:59 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-09 02:27:59 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 02:28:28 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='c√¥ g√°i tr·∫ª m·∫∑c √°o t√≠m nh·∫°t', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 02:28:28 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-09 02:28:28 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-09 02:28:28 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-09 02:28:30 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c√¥ g√°i tr·∫ª m·∫∑c √°o t√≠m nh·∫°t' ‚Üí 'Young girl wearing light purple shirt'
2025-12-09 02:28:30 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'Young girl wearing light purple shirt'
2025-12-09 02:28:30 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-09 02:28:30 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-09 02:28:30 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Young girl wearing light purple shirt
2025-12-09 02:28:30 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-09 02:28:30 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Young girl wearing light purple shirt
2025-12-09 02:28:30 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-09 02:28:30 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Young girl wearing light purple shirt
2025-12-09 02:28:30 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-09 02:28:30 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-09 02:28:30 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-09 02:28:30 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-09 02:28:30 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-09 02:28:30 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-09 02:28:30 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 02:28:38 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='c√¥ g√°i tr·∫ª m·∫∑c √°o t√≠m nh·∫°t', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 02:28:38 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-09 02:28:38 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-09 02:28:38 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-09 02:28:39 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c√¥ g√°i tr·∫ª m·∫∑c √°o t√≠m nh·∫°t' ‚Üí 'Young girl wearing light purple shirt'
2025-12-09 02:28:39 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'Young girl wearing light purple shirt'
2025-12-09 02:28:39 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-09 02:28:41 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 400257:1.0000, 566217:0.9755, 400259:0.8965, 182808:0.8865, 539892:0.8824, 400256:0.8677, 497571:0.8584, 391883:0.8475, 566224:0.8373, 539891:0.8150
2025-12-09 02:28:41 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 507137:1.0000, 507139:0.9106, 507145:0.8958, 507138:0.8741, 566217:0.7675, 507144:0.7256, 440365:0.6990, 16912:0.6854, 87825:0.6602, 440366:0.6566
2025-12-09 02:28:41 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 539892:1.0000, 539891:0.9361, 394467:0.6966, 169089:0.6849, 161827:0.6645, 621248:0.6317, 182808:0.6276, 169088:0.6141, 400258:0.6009, 400257:0.5617
2025-12-09 02:28:41 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 566217:1.0000, 539892:0.9304, 539891:0.8967, 507137:0.8918, 507145:0.8768, 566224:0.7232, 539872:0.7106, 507144:0.6919, 182808:0.6801, 182807:0.6710
2025-12-09 02:28:41 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-09 02:28:41 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-09 02:28:41 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 02:29:20 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='ƒëua thuy·ªÅn', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 02:29:20 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-09 02:29:20 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-09 02:29:20 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal', 'ocr'}, Total: 2
2025-12-09 02:29:20 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'ƒëua thuy·ªÅn' ‚Üí 'boat racing'
2025-12-09 02:29:20 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'boat racing'
2025-12-09 02:29:20 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-09 02:29:20 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-09 02:29:20 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: boat racing
2025-12-09 02:29:21 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-09 02:29:21 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: boat racing
2025-12-09 02:29:21 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-09 02:29:21 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: boat racing
2025-12-09 02:29:21 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-09 02:29:21 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-09 02:29:21 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-09 02:29:21 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-09 02:29:21 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'boat racing'
2025-12-09 02:29:21 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.021s]
2025-12-09 02:29:21 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 479546:0.9687, 560205:0.9687, 560206:0.9687, 560207:0.9687, 110436:0.9409, 496621:0.9190, 496622:0.9190, 97978:0.9104, 373885:0.8698, 373886:0.8698
2025-12-09 02:29:21 - app.routers.search - INFO - [ENSEMBLE] Check: 2 enabled methods, per_method_results keys: ['multimodal', 'ocr']
2025-12-09 02:29:21 - app.routers.search - INFO - [ENSEMBLE] Ensembling 2 methods: {'multimodal', 'ocr'}
2025-12-09 02:29:21 - app.routers.search - INFO - [ENSEMBLE] Final ensemble top results: 479546:0.4843, 560205:0.4843, 560206:0.4843, 560207:0.4843, 110436:0.4705, 496621:0.4595, 496622:0.4595, 97978:0.4552, 373885:0.4349, 373886:0.4349, 554522:0.4288, 496620:0.4266, 193803:0.4204, 193802:0.4121, 6370:0.4025, 6371:0.4025, 554521:0.3956, 154790:0.3955, 154791:0.3955, 560434:0.3935
2025-12-09 02:29:21 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 02:29:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-09 02:29:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, objects=[]
2025-12-09 02:29:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 02:29:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: ''
2025-12-09 02:29:25 - app.services.gemini.query_augmentation - WARNING - [QUERY AUG] Empty query, returning original
2025-12-09 02:29:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='', Q1='', Q2=''
2025-12-09 02:29:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-09 02:29:25 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-09 02:29:25 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.011s]
2025-12-09 02:29:25 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.010s]
2025-12-09 02:29:25 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.012s]
2025-12-09 02:29:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 0, Q2: 0
2025-12-09 02:29:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 18.56ms
2025-12-09 02:29:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-09 02:29:25 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 0 unique ids from 2 stages
2025-12-09 02:29:25 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 0 unique ids
2025-12-09 02:29:33 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='Finish', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 02:29:33 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-09 02:29:33 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-09 02:29:33 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-09 02:29:33 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'Finish'
2025-12-09 02:29:33 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'Finish'
2025-12-09 02:29:33 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.014s]
2025-12-09 02:29:33 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 561544:0.9654, 561545:0.9602, 8552:0.9272, 8553:0.9272, 439813:0.9263, 561546:0.9263, 109630:0.9006, 561561:0.8897, 561562:0.8897, 561526:0.8683
2025-12-09 02:29:33 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-09 02:29:33 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-09 02:29:33 - app.routers.search - INFO - [ENSEMBLE] Mode=A, always returning per_method_results for mode switching flexibility
2025-12-09 02:29:39 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='ƒëua thuy·ªÅn ', ocrText='htv9', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 02:29:39 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-09 02:29:39 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-09 02:29:39 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal', 'ocr'}, Total: 2
2025-12-09 02:29:39 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'ƒëua thuy·ªÅn' ‚Üí 'boat racing'
2025-12-09 02:29:39 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'boat racing'
2025-12-09 02:29:39 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'htv9'
2025-12-09 02:29:39 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-09 02:29:42 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 410848:1.0000, 410836:0.9763, 410854:0.9260, 32045:0.9134, 330605:0.8928, 32046:0.8805, 32053:0.8698, 32052:0.8498, 330608:0.7985, 410835:0.7965
2025-12-09 02:29:42 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 337545:1.0000, 350936:0.9506, 350923:0.9239, 524065:0.8921, 337550:0.8556, 337573:0.8507, 350958:0.7909, 350912:0.7533, 337556:0.7454, 87402:0.7376
2025-12-09 02:29:42 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 350918:1.0000, 350913:0.8886, 350919:0.8607, 337544:0.8436, 350920:0.8375, 337556:0.7881, 350938:0.7738, 350917:0.7487, 350914:0.7482, 337545:0.7331
2025-12-09 02:29:42 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 337545:1.0000, 350923:0.9486, 337573:0.8286, 337550:0.7624, 350912:0.7544, 350936:0.7441, 337556:0.7336, 350914:0.7117, 350958:0.7068, 350918:0.6948
2025-12-09 02:29:42 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'htv9'
2025-12-09 02:29:42 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.047s]
2025-12-09 02:29:42 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 354382:0.9981, 354383:0.9981, 385713:0.9044, 437581:0.9044, 437582:0.9044, 437583:0.9044, 437584:0.9044, 383528:0.8895, 385707:0.8553, 678780:0.8503
2025-12-09 02:29:42 - app.routers.search - INFO - [ENSEMBLE] Check: 2 enabled methods, per_method_results keys: ['multimodal', 'ocr']
2025-12-09 02:29:42 - app.routers.search - INFO - [ENSEMBLE] Ensembling 2 methods: {'multimodal', 'ocr'}
2025-12-09 02:29:42 - app.routers.search - INFO - [ENSEMBLE] Final ensemble top results: 337545:0.5000, 354382:0.4990, 354383:0.4990, 350923:0.4743, 385713:0.4522, 437581:0.4522, 437582:0.4522, 437583:0.4522, 437584:0.4522, 383528:0.4448, 385707:0.4276, 678780:0.4252, 385700:0.4180, 678773:0.4163, 678774:0.4163, 678775:0.4163, 678776:0.4163, 678777:0.4163, 678778:0.4163, 678779:0.4163
2025-12-09 02:29:42 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 02:29:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-09 02:29:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, objects=[]
2025-12-09 02:29:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 02:29:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: ''
2025-12-09 02:29:42 - app.services.gemini.query_augmentation - WARNING - [QUERY AUG] Empty query, returning original
2025-12-09 02:29:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='', Q1='', Q2=''
2025-12-09 02:29:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-09 02:29:42 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-09 02:29:42 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.019s]
2025-12-09 02:29:42 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.030s]
2025-12-09 02:29:42 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.031s]
2025-12-09 02:29:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-09 02:29:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 50.52ms
2025-12-09 02:29:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-09 02:29:42 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-09 02:29:42 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-09 02:29:54 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='ƒëua thuy·ªÅn', ocrText='cognizart', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 02:29:54 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-09 02:29:54 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-09 02:29:54 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-09 02:29:55 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'ƒëua thuy·ªÅn' ‚Üí 'boat racing'
2025-12-09 02:29:55 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'boat racing'
2025-12-09 02:29:55 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'cognizart'
2025-12-09 02:29:55 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'cognizart'
2025-12-09 02:29:55 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.011s]
2025-12-09 02:29:55 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 331485:0.8043, 331486:0.8043, 331487:0.8043, 331488:0.7864, 45303:0.7834, 45304:0.7834, 313406:0.5263, 313407:0.5132, 313404:0.5006, 313405:0.4883
2025-12-09 02:29:55 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-09 02:29:55 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-09 02:29:55 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 02:30:45 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='ƒëua thuy·ªÅn ', ocrText='cognizant', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 02:30:45 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-09 02:30:45 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-09 02:30:45 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal', 'ocr'}, Total: 2
2025-12-09 02:30:45 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'ƒëua thuy·ªÅn' ‚Üí 'boat racing'
2025-12-09 02:30:45 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'boat racing'
2025-12-09 02:30:45 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'cognizant'
2025-12-09 02:30:45 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-09 02:30:45 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-09 02:30:45 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: boat racing
2025-12-09 02:30:45 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-09 02:30:45 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: boat racing
2025-12-09 02:30:45 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-09 02:30:45 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: boat racing
2025-12-09 02:30:45 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-09 02:30:45 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-09 02:30:45 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-09 02:30:45 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-09 02:30:45 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'cognizant'
2025-12-09 02:30:45 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.007s]
2025-12-09 02:30:45 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 331485:0.8100, 331486:0.8100, 331487:0.8100, 331488:0.7926, 45303:0.7770, 45304:0.7770, 313406:0.5225, 313407:0.5097, 313404:0.4973, 313405:0.4852
2025-12-09 02:30:45 - app.routers.search - INFO - [ENSEMBLE] Check: 2 enabled methods, per_method_results keys: ['multimodal', 'ocr']
2025-12-09 02:30:45 - app.routers.search - INFO - [ENSEMBLE] Ensembling 2 methods: {'multimodal', 'ocr'}
2025-12-09 02:30:45 - app.routers.search - INFO - [ENSEMBLE] Final ensemble top results: 331485:0.4050, 331486:0.4050, 331487:0.4050, 331488:0.3963, 45303:0.3885, 45304:0.3885, 313406:0.2612, 313407:0.2548, 313404:0.2486, 313405:0.2426, 313440:0.2426, 313436:0.2367, 313441:0.2367, 313408:0.2202, 313442:0.2202, 313434:0.2150, 313435:0.2150, 313409:0.1872, 313437:0.1831, 313438:0.1715
2025-12-09 02:30:45 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 02:32:23 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='tr·ªçng', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 02:32:23 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-09 02:32:23 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-09 02:32:23 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-09 02:32:23 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'tr·ªçng'
2025-12-09 02:32:23 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'tr·ªçng'
2025-12-09 02:32:23 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.022s]
2025-12-09 02:32:23 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 233704:0.9928, 233705:0.9776, 233703:0.9524, 233281:0.9506, 233699:0.9406, 195193:0.9099, 195877:0.9099, 195879:0.9099, 195880:0.9099, 48365:0.9072
2025-12-09 02:32:23 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-09 02:32:23 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-09 02:32:23 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 02:32:53 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='Con c·∫∑c', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 02:32:53 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-09 02:32:53 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-09 02:32:53 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal', 'ocr'}, Total: 2
2025-12-09 02:32:53 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'Con c·∫∑c' ‚Üí 'Cock'
2025-12-09 02:32:53 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'Cock'
2025-12-09 02:32:53 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-09 02:32:56 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 639312:1.0000, 639311:0.9955, 639313:0.9871, 639314:0.9382, 639308:0.9161, 639309:0.8933, 281070:0.8681, 688290:0.8579, 639310:0.8504, 688563:0.8401
2025-12-09 02:32:56 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 639314:1.0000, 639313:0.9066, 668526:0.8854, 668521:0.8524, 393281:0.7985, 393284:0.7832, 390886:0.7793, 668527:0.7735, 568415:0.7615, 639311:0.7613
2025-12-09 02:32:56 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 639300:1.0000, 453087:0.7072, 639298:0.6810, 639301:0.6549, 639313:0.6443, 639323:0.6442, 191190:0.6441, 242422:0.6415, 639314:0.6103, 453088:0.5977
2025-12-09 02:32:56 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 639314:1.0000, 639313:0.9578, 639300:0.8783, 639301:0.7679, 639311:0.7412, 639298:0.5277, 215048:0.5205, 568415:0.5080, 453087:0.4734, 639323:0.4693
2025-12-09 02:32:56 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'Cock'
2025-12-09 02:32:56 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.017s]
2025-12-09 02:32:56 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 4641:0.9552, 4642:0.9552, 4643:0.9552, 190611:0.9358, 598237:0.9226, 598239:0.9226, 598238:0.9150, 531143:0.8982, 68845:0.8949, 68846:0.8949
2025-12-09 02:32:56 - app.routers.search - INFO - [ENSEMBLE] Check: 2 enabled methods, per_method_results keys: ['multimodal', 'ocr']
2025-12-09 02:32:56 - app.routers.search - INFO - [ENSEMBLE] Ensembling 2 methods: {'multimodal', 'ocr'}
2025-12-09 02:32:56 - app.routers.search - INFO - [ENSEMBLE] Final ensemble top results: 639314:0.5000, 639313:0.4789, 4641:0.4776, 4642:0.4776, 4643:0.4776, 190611:0.4679, 598237:0.4613, 598239:0.4613, 598238:0.4575, 531143:0.4491, 68845:0.4474, 68846:0.4474, 531142:0.4444, 531145:0.4397, 598236:0.4397, 639300:0.4391, 531146:0.4347, 531147:0.4345, 4658:0.4310, 4659:0.4310
2025-12-09 02:32:56 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 02:34:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-09 02:34:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, objects=[]
2025-12-09 02:34:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-09 02:34:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: ''
2025-12-09 02:34:42 - app.services.gemini.query_augmentation - WARNING - [QUERY AUG] Empty query, returning original
2025-12-09 02:34:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='', Q1='', Q2=''
2025-12-09 02:34:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-09 02:34:42 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-09 02:34:42 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.013s]
2025-12-09 02:34:42 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.013s]
2025-12-09 02:34:42 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.017s]
2025-12-09 02:34:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 76, Q1: 76, Q2: 76
2025-12-09 02:34:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 30.20ms
2025-12-09 02:34:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-09 02:34:42 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 76 unique ids from 2 stages
2025-12-09 02:34:42 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 76 unique ids
2025-12-09 02:34:54 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='merriam', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 02:34:54 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-09 02:34:54 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-09 02:34:54 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-09 02:34:54 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'merriam'
2025-12-09 02:34:54 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'merriam'
2025-12-09 02:34:54 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.008s]
2025-12-09 02:34:54 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 117429:0.8718, 88152:0.8084, 117430:0.7971, 88153:0.7856, 88154:0.7856, 117431:0.7741, 117070:0.7625, 117078:0.7625, 88155:0.7508, 88156:0.7508
2025-12-09 02:34:54 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-09 02:34:54 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-09 02:34:54 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-09 02:35:25 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='merriar', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-09 02:35:25 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-09 02:35:25 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-09 02:35:25 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-09 02:35:25 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'merriar'
2025-12-09 02:35:25 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'merriar'
2025-12-09 02:35:25 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.014s]
2025-12-09 02:35:25 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 117429:0.9091, 383329:0.8453, 88152:0.8360, 117430:0.8217, 88153:0.8069, 88154:0.8069, 117431:0.7917, 117070:0.7760, 117078:0.7760, 88155:0.7601
2025-12-09 02:35:25 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-09 02:35:25 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-09 02:35:25 - app.routers.search - INFO - [ENSEMBLE] Mode=M, always returning per_method_results for mode switching flexibility
2025-12-09 02:35:36 - root - INFO - üì• Received submit request: query_text='me...', keyframe_path='/keyframe/L03/L03_V029/20460.webp', result_id='88280', username='user1'
2025-12-09 02:35:36 - root - INFO - ‚úÖ Submission created: id=6, query='me...', user=user1
2025-12-09 14:18:39 - root - INFO - üõë Shutting down FastAPI application...
2025-12-09 14:21:15 - root - INFO - Mounted keyframe directory at /keyframe: /app/app/data/keyframe
2025-12-09 14:21:15 - root - INFO - üöÄ Starting FastAPI application...
2025-12-09 14:21:15 - root - INFO - Log directory: logs/
2025-12-09 14:21:15 - root - INFO - Search queries log: logs/search_queries.log
2025-12-09 14:21:15 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-09 14:21:15 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-09 14:21:15 - app.database.db - INFO -    Current submissions count: 5
2025-12-09 14:22:06 - root - INFO - üõë Shutting down FastAPI application...
2025-12-09 14:24:03 - root - INFO - Mounted keyframe directory at /keyframe: /app/app/data/keyframe
2025-12-09 14:24:03 - root - INFO - üöÄ Starting FastAPI application...
2025-12-09 14:24:03 - root - INFO - Log directory: logs/
2025-12-09 14:24:03 - root - INFO - Search queries log: logs/search_queries.log
2025-12-09 14:24:03 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-09 14:24:03 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-09 14:24:03 - app.database.db - INFO -    Current submissions count: 5
2025-12-11 04:07:42 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='c√¥ g√°i', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-11 04:07:42 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-11 04:07:42 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-11 04:07:42 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-11 04:07:42 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'c√¥ g√°i'
2025-12-11 04:07:42 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'c√¥ g√°i'
2025-12-11 04:07:42 - elastic_transport.transport - INFO - GET http://elasticsearch:9200/ [status:200 duration:0.005s]
2025-12-11 04:07:42 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.112s]
2025-12-11 04:07:43 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 293779:0.9279, 534154:0.9241, 293778:0.9222, 258907:0.9155, 504010:0.9084, 504011:0.9084, 294084:0.9077, 294088:0.9077, 294087:0.8995, 504013:0.8944
2025-12-11 04:07:43 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-11 04:07:43 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-11 04:07:43 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-11 04:15:49 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='vietcombank', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-11 04:15:49 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-11 04:15:49 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-11 04:15:49 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-11 04:15:49 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'vietcombank'
2025-12-11 04:15:49 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'vietcombank'
2025-12-11 04:15:49 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.061s]
2025-12-11 04:15:49 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 436082:0.9832, 436083:0.9832, 523977:0.9794, 525839:0.9655, 436063:0.9205, 206160:0.8942, 434810:0.8653, 436064:0.8350, 237675:0.8312, 237680:0.8312
2025-12-11 04:15:49 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-11 04:15:49 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-11 04:15:49 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-11 04:20:24 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='vcb', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-11 04:20:24 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-11 04:20:24 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-11 04:20:24 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-11 04:20:24 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'vcb'
2025-12-11 04:20:24 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'vcb'
2025-12-11 04:20:24 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.050s]
2025-12-11 04:20:24 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 436061:0.9721, 436062:0.9721, 434802:0.9633, 436051:0.9581, 434805:0.9548, 434815:0.9465, 434813:0.9421, 434816:0.9383, 434814:0.9289, 533347:0.9093
2025-12-11 04:20:24 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-11 04:20:24 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-11 04:20:24 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-12 04:24:07 - root - INFO - üõë Shutting down FastAPI application...
2025-12-12 04:24:11 - root - INFO - Mounted keyframe directory at /keyframe: /app/app/data/keyframe
2025-12-12 04:24:11 - root - INFO - üöÄ Starting FastAPI application...
2025-12-12 04:24:11 - root - INFO - Log directory: logs/
2025-12-12 04:24:11 - root - INFO - Search queries log: logs/search_queries.log
2025-12-12 04:24:11 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-12 04:24:11 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-12 04:24:11 - app.database.db - INFO -    Current submissions count: 5
2025-12-12 04:24:16 - root - INFO - üõë Shutting down FastAPI application...
2025-12-12 04:27:28 - root - INFO - Mounted keyframe directory at /keyframe: /app/app/data/keyframe
2025-12-12 04:27:28 - root - INFO - üöÄ Starting FastAPI application...
2025-12-12 04:27:28 - root - INFO - Log directory: logs/
2025-12-12 04:27:28 - root - INFO - Search queries log: logs/search_queries.log
2025-12-12 04:27:28 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-12 04:27:28 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-12 04:27:28 - app.database.db - INFO -    Current submissions count: 5
2025-12-12 06:50:32 - root - INFO - üõë Shutting down FastAPI application...
2025-12-12 06:50:36 - root - INFO - Mounted keyframe directory at /keyframe: /app/app/data/keyframe
2025-12-12 06:50:36 - root - INFO - üöÄ Starting FastAPI application...
2025-12-12 06:50:36 - root - INFO - Log directory: logs/
2025-12-12 06:50:36 - root - INFO - Search queries log: logs/search_queries.log
2025-12-12 06:50:36 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-12 06:50:36 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-12 06:50:36 - app.database.db - INFO -    Current submissions count: 5
2025-12-12 06:51:05 - root - INFO - üõë Shutting down FastAPI application...
2025-12-12 06:51:27 - root - INFO - Mounted keyframe directory at /keyframe: /app/app/data/keyframe
2025-12-12 06:51:27 - root - INFO - üöÄ Starting FastAPI application...
2025-12-12 06:51:27 - root - INFO - Log directory: logs/
2025-12-12 06:51:27 - root - INFO - Search queries log: logs/search_queries.log
2025-12-12 06:51:27 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-12 06:51:27 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-12 06:51:27 - app.database.db - INFO -    Current submissions count: 5
2025-12-12 06:53:15 - root - INFO - üõë Shutting down FastAPI application...
2025-12-12 06:53:19 - root - INFO - Mounted keyframe directory at /keyframe: /app/app/data/keyframe
2025-12-12 06:53:19 - root - INFO - üöÄ Starting FastAPI application...
2025-12-12 06:53:19 - root - INFO - Log directory: logs/
2025-12-12 06:53:19 - root - INFO - Search queries log: logs/search_queries.log
2025-12-12 06:53:19 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-12 06:53:19 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-12 06:53:19 - app.database.db - INFO -    Current submissions count: 5
2025-12-12 06:53:27 - root - INFO - üõë Shutting down FastAPI application...
2025-12-12 06:56:04 - root - INFO - Mounted keyframe directory at /keyframe: /app/app/data/keyframe
2025-12-12 06:56:04 - root - INFO - üöÄ Starting FastAPI application...
2025-12-12 06:56:04 - root - INFO - Log directory: logs/
2025-12-12 06:56:04 - root - INFO - Search queries log: logs/search_queries.log
2025-12-12 06:56:04 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-12 06:56:04 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-12 06:56:04 - app.database.db - INFO -    Current submissions count: 5
2025-12-12 06:57:32 - root - INFO - üõë Shutting down FastAPI application...
2025-12-12 06:57:36 - root - INFO - Mounted keyframe directory at /keyframe: /app/app/data/keyframe
2025-12-12 06:57:36 - root - INFO - üöÄ Starting FastAPI application...
2025-12-12 06:57:36 - root - INFO - Log directory: logs/
2025-12-12 06:57:36 - root - INFO - Search queries log: logs/search_queries.log
2025-12-12 06:57:36 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-12 06:57:36 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-12 06:57:36 - app.database.db - INFO -    Current submissions count: 5
2025-12-12 06:57:38 - root - INFO - üõë Shutting down FastAPI application...
2025-12-12 06:57:41 - root - INFO - Mounted keyframe directory at /keyframe: /app/app/data/keyframe
2025-12-12 06:57:41 - root - INFO - üöÄ Starting FastAPI application...
2025-12-12 06:57:41 - root - INFO - Log directory: logs/
2025-12-12 06:57:41 - root - INFO - Search queries log: logs/search_queries.log
2025-12-12 06:57:41 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-12 06:57:41 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-12 06:57:41 - app.database.db - INFO -    Current submissions count: 5
2025-12-12 06:57:59 - root - INFO - üõë Shutting down FastAPI application...
2025-12-12 07:00:20 - root - INFO - Mounted keyframe directory at /keyframe: /app/app/data/keyframe
2025-12-12 07:00:20 - root - INFO - üöÄ Starting FastAPI application...
2025-12-12 07:00:20 - root - INFO - Log directory: logs/
2025-12-12 07:00:20 - root - INFO - Search queries log: logs/search_queries.log
2025-12-12 07:00:20 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-12 07:00:21 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-12 07:00:21 - app.database.db - INFO -    Current submissions count: 5
2025-12-15 16:46:48 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='ng∆∞·ªùi ƒë√†n √¥ng ƒë·ªôi m≈© ƒë·ªè', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-15 16:46:48 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-15 16:46:48 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-15 16:46:48 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-15 16:46:49 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'ng∆∞·ªùi ƒë√†n √¥ng ƒë·ªôi m≈© ƒë·ªè' ‚Üí 'man wearing red hat'
2025-12-15 16:46:49 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'man wearing red hat'
2025-12-15 16:46:49 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-15 16:46:49 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-15 16:46:50 - app.services.method.clip_client - INFO - [CLIP] Batch endpoint available, processed 1 texts
2025-12-15 16:46:57 - app.services.method.beit3_client - INFO - [BEiT3] Batch endpoint available, processed 1 texts
2025-12-15 16:47:01 - app.services.method.bigg_client - INFO - [BIGG] Batch endpoint available, processed 1 texts
2025-12-15 16:47:04 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 336784:1.0000, 336780:0.9856, 336785:0.8905, 336781:0.8901, 336782:0.7865, 336787:0.7772, 336788:0.7726, 222780:0.7434, 336783:0.7294, 487692:0.7261
2025-12-15 16:47:04 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 208:1.0000, 336781:0.9321, 336782:0.9062, 149959:0.8526, 336783:0.8422, 333319:0.8240, 336784:0.8115, 124461:0.8103, 209:0.7961, 222780:0.7935
2025-12-15 16:47:04 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 170570:1.0000, 208:0.8203, 210:0.7478, 209:0.7230, 82085:0.6991, 448481:0.6974, 400062:0.6624, 603287:0.6070, 448482:0.5906, 325698:0.5734
2025-12-15 16:47:04 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 208:1.0000, 336781:0.7749, 209:0.7674, 336784:0.7346, 336782:0.7089, 222780:0.6635, 336780:0.6615, 336783:0.6357, 210:0.6206, 336785:0.6000
2025-12-15 16:47:04 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-15 16:47:04 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-15 16:47:04 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-15 17:02:00 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='Thu ng√¢n ng√¢n h√†ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-15 17:02:00 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-15 17:02:00 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-15 17:02:00 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-15 17:02:02 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'Thu ng√¢n ng√¢n h√†ng' ‚Üí 'Bank cashier'
2025-12-15 17:02:02 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'Bank cashier'
2025-12-15 17:02:02 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-15 17:02:02 - app.services.method.clip_client - WARNING - [CLIP] Batch request failed: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text/batch, falling back to individual calls
2025-12-15 17:02:03 - app.services.method.beit3_client - WARNING - [BEiT3] Batch request failed: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text/batch, falling back to individual calls
2025-12-15 17:02:05 - app.services.method.bigg_client - WARNING - [BIGG] Batch request failed: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text/batch, falling back to individual calls
2025-12-15 17:02:06 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 517036:1.0000, 217918:0.9683, 217919:0.8456, 285896:0.8315, 211713:0.8139, 517035:0.8132, 525859:0.7918, 517031:0.7843, 273440:0.7750, 69643:0.7686
2025-12-15 17:02:06 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 602883:1.0000, 453111:0.9208, 504522:0.9083, 343350:0.9069, 266551:0.8645, 217898:0.8162, 504523:0.8030, 13654:0.7798, 224677:0.7726, 5561:0.7644
2025-12-15 17:02:06 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 525858:1.0000, 525859:0.8199, 509825:0.7040, 447589:0.6812, 513684:0.6739, 506292:0.6725, 447611:0.6357, 506291:0.6224, 64739:0.6146, 69644:0.6132
2025-12-15 17:02:06 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 266551:1.0000, 517036:0.9189, 525858:0.8816, 285896:0.8796, 517035:0.8610, 217898:0.8565, 602883:0.8551, 525859:0.8041, 408889:0.7893, 202539:0.7732
2025-12-15 17:02:06 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-15 17:02:06 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-15 17:02:06 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-15 17:02:19 - root - INFO - üì• Received submit request: query_text='Thu ng√¢n ng√¢n h√†ng...', keyframe_path='/keyframe/L12/L12_V006/3401.webp', result_id='343351', username='user1'
2025-12-15 17:02:19 - root - INFO - ‚úÖ Submission created: id=7, query='Thu ng√¢n ng√¢n h√†ng...', user=user1
2025-12-15 17:02:26 - app.database.chatbox_db - INFO - Deleted submission 7
2025-12-15 17:02:26 - root - WARNING - ‚ö†Ô∏è  Submission 7 deleted (query: 'Thu ng√¢n ng√¢n h√†ng...', user: user1)
2025-12-15 17:02:29 - app.database.chatbox_db - INFO - Deleted submission 6
2025-12-15 17:02:29 - root - WARNING - ‚ö†Ô∏è  Submission 6 deleted (query: 'me...', user: user1)
2025-12-15 17:02:35 - app.database.chatbox_db - INFO - Deleted submission 5
2025-12-15 17:02:35 - root - WARNING - ‚ö†Ô∏è  Submission 5 deleted (query: 'm...', user: user1)
2025-12-15 17:02:39 - app.database.chatbox_db - INFO - Deleted submission 3
2025-12-15 17:02:39 - root - WARNING - ‚ö†Ô∏è  Submission 3 deleted (query: 'r·ª´ng + n√∫i...', user: user1)
2025-12-15 17:02:43 - app.database.chatbox_db - INFO - Deleted submission 2
2025-12-15 17:02:43 - root - WARNING - ‚ö†Ô∏è  Submission 2 deleted (query: 'b·ªã nh·∫•n ch√¨m...', user: user1)
2025-12-15 17:02:46 - app.database.chatbox_db - INFO - Deleted submission 1
2025-12-15 17:02:46 - root - WARNING - ‚ö†Ô∏è  Submission 1 deleted (query: 'forest...', user: user1)
2025-12-15 17:02:54 - root - INFO - üì• Received submit request: query_text='Thu ng√¢n ng√¢n h√†ng...', keyframe_path='/keyframe/L09/L09_V021/6474.webp', result_id='266551', username='user1'
2025-12-15 17:02:54 - root - INFO - ‚úÖ Submission created: id=8, query='Thu ng√¢n ng√¢n h√†ng...', user=user1
2025-12-15 17:03:07 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='c√¥ng vi√™n', ocrText='disney', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-15 17:03:07 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-15 17:03:07 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-15 17:03:07 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr', 'multimodal'}, Total: 2
2025-12-15 17:03:07 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c√¥ng vi√™n' ‚Üí 'park'
2025-12-15 17:03:07 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'park'
2025-12-15 17:03:07 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'disney'
2025-12-15 17:03:07 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-15 17:03:07 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-15 17:03:07 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: park
2025-12-15 17:03:08 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-15 17:03:08 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: park
2025-12-15 17:03:08 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-15 17:03:08 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: park
2025-12-15 17:03:08 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-15 17:03:08 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-15 17:03:08 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-15 17:03:08 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-15 17:03:08 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'disney'
2025-12-15 17:03:08 - elastic_transport.transport - INFO - GET http://elasticsearch:9200/ [status:200 duration:0.004s]
2025-12-15 17:03:08 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.129s]
2025-12-15 17:03:08 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 47295:0.9588, 47296:0.9588, 47833:0.9396, 47832:0.9338, 47831:0.9105, 636009:0.8756, 47294:0.8632, 47830:0.8243, 97990:0.8099, 47297:0.7936
2025-12-15 17:03:08 - app.routers.search - INFO - [ENSEMBLE] Check: 2 enabled methods, per_method_results keys: ['multimodal', 'ocr']
2025-12-15 17:03:08 - app.routers.search - INFO - [ENSEMBLE] Ensembling 2 methods: {'ocr', 'multimodal'}
2025-12-15 17:03:08 - app.routers.search - INFO - [ENSEMBLE] Final ensemble top results: 47295:0.4794, 47296:0.4794, 47833:0.4698, 47832:0.4669, 47831:0.4553, 636009:0.4378, 47294:0.4316, 47830:0.4122, 97990:0.4050, 47297:0.3968, 47298:0.3968, 155277:0.3968, 46864:0.3892, 448002:0.3892, 588697:0.3892, 622193:0.3892, 123947:0.3815, 155275:0.3815, 448003:0.3815, 46865:0.3736
2025-12-15 17:03:08 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-15 17:03:14 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='c√¥ng vi√™n', ocrText='disney', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-15 17:03:14 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: caption
2025-12-15 17:03:14 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': True, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-15 17:03:14 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr', 'ic', 'multimodal'}, Total: 3
2025-12-15 17:03:14 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c√¥ng vi√™n' ‚Üí 'park'
2025-12-15 17:03:14 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'park'
2025-12-15 17:03:14 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'disney'
2025-12-15 17:03:14 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-15 17:03:18 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 29313:1.0000, 211373:0.9775, 29314:0.9362, 211374:0.9125, 44794:0.8632, 44793:0.8623, 29312:0.8490, 617496:0.8427, 211375:0.8103, 211376:0.8027
2025-12-15 17:03:18 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 236229:1.0000, 236230:0.9657, 504387:0.8531, 571149:0.8209, 211375:0.8034, 211374:0.7736, 610054:0.7696, 571151:0.7625, 211340:0.7533, 610055:0.7129
2025-12-15 17:03:18 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 403570:1.0000, 634435:0.8937, 236200:0.8891, 610055:0.8721, 44804:0.8606, 236301:0.8542, 403571:0.8457, 329222:0.8224, 610054:0.8191, 211365:0.7230
2025-12-15 17:03:18 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 236230:1.0000, 610054:0.9854, 610055:0.9701, 236229:0.9609, 211374:0.9116, 329222:0.8231, 329221:0.7968, 211373:0.7869, 211375:0.7675, 211376:0.7518
2025-12-15 17:03:18 - app.routers.search - INFO - [ENSEMBLE] Running IC search
2025-12-15 17:03:18 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-15 17:03:46 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='c√¥ng vi√™n', ocrText='disney', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}, selectedObjects=[])]
2025-12-15 17:03:46 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-15 17:03:46 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}
2025-12-15 17:03:46 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr', 'multimodal'}, Total: 2
2025-12-15 17:03:46 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c√¥ng vi√™n' ‚Üí 'park'
2025-12-15 17:03:46 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'park'
2025-12-15 17:03:46 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'disney'
2025-12-15 17:03:46 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-15 17:03:46 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-15 17:03:46 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: park
2025-12-15 17:03:46 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-15 17:03:46 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: park
2025-12-15 17:03:46 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-15 17:03:46 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: park
2025-12-15 17:03:46 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-15 17:03:46 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-15 17:03:46 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-15 17:03:46 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-15 17:03:46 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'disney'
2025-12-15 17:03:46 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.021s]
2025-12-15 17:03:46 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 47295:0.9588, 47296:0.9588, 47833:0.9396, 47832:0.9338, 47831:0.9105, 636009:0.8756, 47294:0.8632, 47830:0.8243, 97990:0.8099, 47297:0.7936
2025-12-15 17:03:46 - app.routers.search - INFO - [ENSEMBLE] Check: 2 enabled methods, per_method_results keys: ['multimodal', 'ocr']
2025-12-15 17:03:46 - app.routers.search - INFO - [ENSEMBLE] Ensembling 2 methods: {'ocr', 'multimodal'}
2025-12-15 17:03:46 - app.routers.search - INFO - [ENSEMBLE] Final ensemble top results: 47295:0.4794, 47296:0.4794, 47833:0.4698, 47832:0.4669, 47831:0.4553, 636009:0.4378, 47294:0.4316, 47830:0.4122, 97990:0.4050, 47297:0.3968, 47298:0.3968, 155277:0.3968, 46864:0.3892, 448002:0.3892, 588697:0.3892, 622193:0.3892, 123947:0.3815, 155275:0.3815, 448003:0.3815, 46865:0.3736
2025-12-15 17:03:46 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-15 17:03:51 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='c√¥ng vi√™n', ocrText='disney', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}, selectedObjects=[])]
2025-12-15 17:03:51 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-15 17:03:51 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}
2025-12-15 17:03:51 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr', 'multimodal'}, Total: 2
2025-12-15 17:03:51 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c√¥ng vi√™n' ‚Üí 'park'
2025-12-15 17:03:51 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'park'
2025-12-15 17:03:51 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'disney'
2025-12-15 17:03:51 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-15 17:03:53 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 29313:1.0000, 211373:0.9775, 29314:0.9362, 211374:0.9125, 44794:0.8632, 44793:0.8623, 29312:0.8490, 617496:0.8427, 211375:0.8103, 211376:0.8027
2025-12-15 17:03:53 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 236229:1.0000, 236230:0.9657, 504387:0.8531, 571149:0.8209, 211375:0.8034, 211374:0.7736, 610054:0.7696, 571151:0.7625, 211340:0.7533, 610055:0.7129
2025-12-15 17:03:53 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 403570:1.0000, 634435:0.8937, 236200:0.8891, 610055:0.8721, 44804:0.8606, 236301:0.8542, 403571:0.8457, 329222:0.8224, 610054:0.8191, 211365:0.7230
2025-12-15 17:03:53 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 236230:1.0000, 610054:0.9854, 610055:0.9701, 236229:0.9609, 211374:0.9116, 329222:0.8231, 329221:0.7968, 211373:0.7869, 211375:0.7675, 211376:0.7518
2025-12-15 17:03:53 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'disney'
2025-12-15 17:03:53 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.019s]
2025-12-15 17:03:53 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 47295:0.9588, 47296:0.9588, 47833:0.9396, 47832:0.9338, 47831:0.9105, 636009:0.8756, 47294:0.8632, 47830:0.8243, 97990:0.8099, 47297:0.7936
2025-12-15 17:03:53 - app.routers.search - INFO - [ENSEMBLE] Check: 2 enabled methods, per_method_results keys: ['multimodal', 'ocr']
2025-12-15 17:03:53 - app.routers.search - INFO - [ENSEMBLE] Ensembling 2 methods: {'ocr', 'multimodal'}
2025-12-15 17:03:53 - app.routers.search - INFO - [ENSEMBLE] Final ensemble top results: 236230:0.5000, 610054:0.4927, 610055:0.4851, 236229:0.4805, 47295:0.4794, 47296:0.4794, 47833:0.4698, 47832:0.4669, 211374:0.4558, 47831:0.4553, 636009:0.4378, 47294:0.4316, 47830:0.4122, 329222:0.4116, 97990:0.4050, 329221:0.3984, 47297:0.3968, 47298:0.3968, 155277:0.3968, 211373:0.3934
2025-12-15 17:03:53 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-15 17:04:03 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='c√¥ng vi√™n', ocrText='disney', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}, selectedObjects=['Person'])]
2025-12-15 17:04:03 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-15 17:04:03 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}
2025-12-15 17:04:03 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr', 'multimodal'}, Total: 2
2025-12-15 17:04:03 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c√¥ng vi√™n' ‚Üí 'park'
2025-12-15 17:04:03 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'park'
2025-12-15 17:04:03 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'disney'
2025-12-15 17:04:03 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-15 17:04:03 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-15 17:04:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: park
2025-12-15 17:04:03 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-15 17:04:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: park
2025-12-15 17:04:04 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-15 17:04:04 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: park
2025-12-15 17:04:04 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-15 17:04:04 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-15 17:04:04 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-15 17:04:04 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-15 17:04:04 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'disney'
2025-12-15 17:04:04 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.018s]
2025-12-15 17:04:04 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 47295:0.9588, 47296:0.9588, 47833:0.9396, 47832:0.9338, 47831:0.9105, 636009:0.8756, 47294:0.8632, 47830:0.8243, 97990:0.8099, 47297:0.7936
2025-12-15 17:04:04 - app.routers.search - INFO - [ENSEMBLE] Check: 2 enabled methods, per_method_results keys: ['multimodal', 'ocr']
2025-12-15 17:04:04 - app.routers.search - INFO - [ENSEMBLE] Ensembling 2 methods: {'ocr', 'multimodal'}
2025-12-15 17:04:04 - app.routers.search - INFO - [ENSEMBLE] Final ensemble top results: 47295:0.4794, 47296:0.4794, 47833:0.4698, 47832:0.4669, 47831:0.4553, 636009:0.4378, 47294:0.4316, 47830:0.4122, 97990:0.4050, 47297:0.3968, 47298:0.3968, 155277:0.3968, 46864:0.3892, 448002:0.3892, 588697:0.3892, 622193:0.3892, 123947:0.3815, 155275:0.3815, 448003:0.3815, 46865:0.3736
2025-12-15 17:04:04 - app.routers.search - INFO - [ENSEMBLE] Applying object filter with 1 objects
2025-12-15 17:04:04 - elastic_transport.transport - INFO - GET http://elasticsearch:9200/ [status:200 duration:0.004s]
2025-12-15 17:04:04 - app.services.method.object_filter - INFO - ObjectFilterSearch connected to Elasticsearch
2025-12-15 17:04:04 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/object/_search [status:200 duration:0.013s]
2025-12-15 17:04:04 - app.services.method.object_filter - INFO - Object filter: 200 ‚Üí 0 results
2025-12-15 17:04:04 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-15 17:04:07 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='c√¥ng vi√™n', ocrText='disney', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}, selectedObjects=['Person'])]
2025-12-15 17:04:07 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-15 17:04:07 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}
2025-12-15 17:04:07 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr', 'multimodal'}, Total: 2
2025-12-15 17:04:08 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c√¥ng vi√™n' ‚Üí 'park'
2025-12-15 17:04:08 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'park'
2025-12-15 17:04:08 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'disney'
2025-12-15 17:04:08 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-15 17:04:10 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 29313:1.0000, 211373:0.9775, 29314:0.9362, 211374:0.9125, 44794:0.8632, 44793:0.8623, 29312:0.8490, 617496:0.8427, 211375:0.8103, 211376:0.8027
2025-12-15 17:04:10 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 236229:1.0000, 236230:0.9657, 504387:0.8531, 571149:0.8209, 211375:0.8034, 211374:0.7736, 610054:0.7696, 571151:0.7625, 211340:0.7533, 610055:0.7129
2025-12-15 17:04:10 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 403570:1.0000, 634435:0.8937, 236200:0.8891, 610055:0.8721, 44804:0.8606, 236301:0.8542, 403571:0.8457, 329222:0.8224, 610054:0.8191, 211365:0.7230
2025-12-15 17:04:10 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 236230:1.0000, 610054:0.9854, 610055:0.9701, 236229:0.9609, 211374:0.9116, 329222:0.8231, 329221:0.7968, 211373:0.7869, 211375:0.7675, 211376:0.7518
2025-12-15 17:04:10 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'disney'
2025-12-15 17:04:10 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.015s]
2025-12-15 17:04:10 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 47295:0.9588, 47296:0.9588, 47833:0.9396, 47832:0.9338, 47831:0.9105, 636009:0.8756, 47294:0.8632, 47830:0.8243, 97990:0.8099, 47297:0.7936
2025-12-15 17:04:10 - app.routers.search - INFO - [ENSEMBLE] Check: 2 enabled methods, per_method_results keys: ['multimodal', 'ocr']
2025-12-15 17:04:10 - app.routers.search - INFO - [ENSEMBLE] Ensembling 2 methods: {'ocr', 'multimodal'}
2025-12-15 17:04:10 - app.routers.search - INFO - [ENSEMBLE] Final ensemble top results: 236230:0.5000, 610054:0.4927, 610055:0.4851, 236229:0.4805, 47295:0.4794, 47296:0.4794, 47833:0.4698, 47832:0.4669, 211374:0.4558, 47831:0.4553, 636009:0.4378, 47294:0.4316, 47830:0.4122, 329222:0.4116, 97990:0.4050, 329221:0.3984, 47297:0.3968, 47298:0.3968, 155277:0.3968, 211373:0.3934
2025-12-15 17:04:10 - app.routers.search - INFO - [ENSEMBLE] Applying object filter with 1 objects
2025-12-15 17:04:10 - elastic_transport.transport - INFO - GET http://elasticsearch:9200/ [status:200 duration:0.003s]
2025-12-15 17:04:10 - app.services.method.object_filter - INFO - ObjectFilterSearch connected to Elasticsearch
2025-12-15 17:04:10 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/object/_search [status:200 duration:0.005s]
2025-12-15 17:04:10 - app.services.method.object_filter - INFO - Object filter: 200 ‚Üí 0 results
2025-12-15 17:04:10 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-15 17:04:16 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='c√¥ng vi√™n', ocrText='disney', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}, selectedObjects=['Person'])]
2025-12-15 17:04:16 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-15 17:04:16 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}
2025-12-15 17:04:16 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr', 'multimodal'}, Total: 2
2025-12-15 17:04:16 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c√¥ng vi√™n' ‚Üí 'park'
2025-12-15 17:04:16 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'park'
2025-12-15 17:04:16 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'disney'
2025-12-15 17:04:16 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-15 17:04:17 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-15 17:04:17 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: park
2025-12-15 17:04:18 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-15 17:04:18 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: park
2025-12-15 17:04:18 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-15 17:04:18 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: park
2025-12-15 17:04:18 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-15 17:04:18 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-15 17:04:18 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-15 17:04:18 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-15 17:04:18 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'disney'
2025-12-15 17:04:18 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.016s]
2025-12-15 17:04:18 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 47295:0.9588, 47296:0.9588, 47833:0.9396, 47832:0.9338, 47831:0.9105, 636009:0.8756, 47294:0.8632, 47830:0.8243, 97990:0.8099, 47297:0.7936
2025-12-15 17:04:18 - app.routers.search - INFO - [ENSEMBLE] Check: 2 enabled methods, per_method_results keys: ['multimodal', 'ocr']
2025-12-15 17:04:18 - app.routers.search - INFO - [ENSEMBLE] Ensembling 2 methods: {'ocr', 'multimodal'}
2025-12-15 17:04:18 - app.routers.search - INFO - [ENSEMBLE] Final ensemble top results: 47295:0.4794, 47296:0.4794, 47833:0.4698, 47832:0.4669, 47831:0.4553, 636009:0.4378, 47294:0.4316, 47830:0.4122, 97990:0.4050, 47297:0.3968, 47298:0.3968, 155277:0.3968, 46864:0.3892, 448002:0.3892, 588697:0.3892, 622193:0.3892, 123947:0.3815, 155275:0.3815, 448003:0.3815, 46865:0.3736
2025-12-15 17:04:18 - app.routers.search - INFO - [ENSEMBLE] Applying object filter with 1 objects
2025-12-15 17:04:18 - elastic_transport.transport - INFO - GET http://elasticsearch:9200/ [status:200 duration:0.003s]
2025-12-15 17:04:18 - app.services.method.object_filter - INFO - ObjectFilterSearch connected to Elasticsearch
2025-12-15 17:04:18 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/object/_search [status:200 duration:0.004s]
2025-12-15 17:04:18 - app.services.method.object_filter - INFO - Object filter: 200 ‚Üí 0 results
2025-12-15 17:04:18 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-15 17:04:36 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='c√¥ng vi√™n', ocrText='disney', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}, selectedObjects=['Person'])]
2025-12-15 17:04:36 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-15 17:04:36 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}
2025-12-15 17:04:36 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr', 'multimodal'}, Total: 2
2025-12-15 17:04:36 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c√¥ng vi√™n' ‚Üí 'park'
2025-12-15 17:04:36 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'park'
2025-12-15 17:04:36 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'disney'
2025-12-15 17:04:36 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-15 17:04:38 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 29313:1.0000, 211373:0.9775, 29314:0.9362, 211374:0.9125, 44794:0.8632, 44793:0.8623, 29312:0.8490, 617496:0.8427, 211375:0.8103, 211376:0.8027
2025-12-15 17:04:38 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 236229:1.0000, 236230:0.9657, 504387:0.8531, 571149:0.8209, 211375:0.8034, 211374:0.7736, 610054:0.7696, 571151:0.7625, 211340:0.7533, 610055:0.7129
2025-12-15 17:04:38 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 403570:1.0000, 634435:0.8937, 236200:0.8891, 610055:0.8721, 44804:0.8606, 236301:0.8542, 403571:0.8457, 329222:0.8224, 610054:0.8191, 211365:0.7230
2025-12-15 17:04:38 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 236230:1.0000, 610054:0.9854, 610055:0.9701, 236229:0.9609, 211374:0.9116, 329222:0.8231, 329221:0.7968, 211373:0.7869, 211375:0.7675, 211376:0.7518
2025-12-15 17:04:38 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'disney'
2025-12-15 17:04:38 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.012s]
2025-12-15 17:04:38 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 47295:0.9588, 47296:0.9588, 47833:0.9396, 47832:0.9338, 47831:0.9105, 636009:0.8756, 47294:0.8632, 47830:0.8243, 97990:0.8099, 47297:0.7936
2025-12-15 17:04:38 - app.routers.search - INFO - [ENSEMBLE] Check: 2 enabled methods, per_method_results keys: ['multimodal', 'ocr']
2025-12-15 17:04:38 - app.routers.search - INFO - [ENSEMBLE] Ensembling 2 methods: {'ocr', 'multimodal'}
2025-12-15 17:04:38 - app.routers.search - INFO - [ENSEMBLE] Final ensemble top results: 236230:0.5000, 610054:0.4927, 610055:0.4851, 236229:0.4805, 47295:0.4794, 47296:0.4794, 47833:0.4698, 47832:0.4669, 211374:0.4558, 47831:0.4553, 636009:0.4378, 47294:0.4316, 47830:0.4122, 329222:0.4116, 97990:0.4050, 329221:0.3984, 47297:0.3968, 47298:0.3968, 155277:0.3968, 211373:0.3934
2025-12-15 17:04:38 - app.routers.search - INFO - [ENSEMBLE] Applying object filter with 1 objects
2025-12-15 17:04:38 - elastic_transport.transport - INFO - GET http://elasticsearch:9200/ [status:200 duration:0.003s]
2025-12-15 17:04:38 - app.services.method.object_filter - INFO - ObjectFilterSearch connected to Elasticsearch
2025-12-15 17:04:38 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/object/_search [status:200 duration:0.004s]
2025-12-15 17:04:38 - app.services.method.object_filter - INFO - Object filter: 200 ‚Üí 0 results
2025-12-15 17:04:38 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-15 17:04:39 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='c√¥ng vi√™n', ocrText='disney', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=['Person'])]
2025-12-15 17:04:39 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-15 17:04:39 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-15 17:04:39 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr', 'multimodal'}, Total: 2
2025-12-15 17:04:40 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c√¥ng vi√™n' ‚Üí 'park'
2025-12-15 17:04:40 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'park'
2025-12-15 17:04:40 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'disney'
2025-12-15 17:04:40 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-15 17:04:40 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-15 17:04:40 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: park
2025-12-15 17:04:41 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-15 17:04:41 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: park
2025-12-15 17:04:42 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-15 17:04:42 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: park
2025-12-15 17:04:42 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-15 17:04:42 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-15 17:04:42 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-15 17:04:42 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-15 17:04:42 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'disney'
2025-12-15 17:04:42 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.011s]
2025-12-15 17:04:42 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 47295:0.9588, 47296:0.9588, 47833:0.9396, 47832:0.9338, 47831:0.9105, 636009:0.8756, 47294:0.8632, 47830:0.8243, 97990:0.8099, 47297:0.7936
2025-12-15 17:04:42 - app.routers.search - INFO - [ENSEMBLE] Check: 2 enabled methods, per_method_results keys: ['multimodal', 'ocr']
2025-12-15 17:04:42 - app.routers.search - INFO - [ENSEMBLE] Ensembling 2 methods: {'ocr', 'multimodal'}
2025-12-15 17:04:42 - app.routers.search - INFO - [ENSEMBLE] Final ensemble top results: 47295:0.4794, 47296:0.4794, 47833:0.4698, 47832:0.4669, 47831:0.4553, 636009:0.4378, 47294:0.4316, 47830:0.4122, 97990:0.4050, 47297:0.3968, 47298:0.3968, 155277:0.3968, 46864:0.3892, 448002:0.3892, 588697:0.3892, 622193:0.3892, 123947:0.3815, 155275:0.3815, 448003:0.3815, 46865:0.3736
2025-12-15 17:04:42 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-15 17:04:45 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='c√¥ng vi√™n', ocrText='disney', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}, selectedObjects=['Person'])]
2025-12-15 17:04:45 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-15 17:04:45 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': True}
2025-12-15 17:04:45 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr', 'multimodal'}, Total: 2
2025-12-15 17:04:46 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c√¥ng vi√™n' ‚Üí 'park'
2025-12-15 17:04:46 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'park'
2025-12-15 17:04:46 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'disney'
2025-12-15 17:04:46 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-15 17:04:48 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 29313:1.0000, 211373:0.9775, 29314:0.9362, 211374:0.9125, 44794:0.8632, 44793:0.8623, 29312:0.8490, 617496:0.8427, 211375:0.8103, 211376:0.8027
2025-12-15 17:04:48 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 236229:1.0000, 236230:0.9657, 504387:0.8531, 571149:0.8209, 211375:0.8034, 211374:0.7736, 610054:0.7696, 571151:0.7625, 211340:0.7533, 610055:0.7129
2025-12-15 17:04:48 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 403570:1.0000, 634435:0.8937, 236200:0.8891, 610055:0.8721, 44804:0.8606, 236301:0.8542, 403571:0.8457, 329222:0.8224, 610054:0.8191, 211365:0.7230
2025-12-15 17:04:48 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 236230:1.0000, 610054:0.9854, 610055:0.9701, 236229:0.9609, 211374:0.9116, 329222:0.8231, 329221:0.7968, 211373:0.7869, 211375:0.7675, 211376:0.7518
2025-12-15 17:04:48 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'disney'
2025-12-15 17:04:48 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.012s]
2025-12-15 17:04:48 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 47295:0.9588, 47296:0.9588, 47833:0.9396, 47832:0.9338, 47831:0.9105, 636009:0.8756, 47294:0.8632, 47830:0.8243, 97990:0.8099, 47297:0.7936
2025-12-15 17:04:48 - app.routers.search - INFO - [ENSEMBLE] Check: 2 enabled methods, per_method_results keys: ['multimodal', 'ocr']
2025-12-15 17:04:48 - app.routers.search - INFO - [ENSEMBLE] Ensembling 2 methods: {'ocr', 'multimodal'}
2025-12-15 17:04:48 - app.routers.search - INFO - [ENSEMBLE] Final ensemble top results: 236230:0.5000, 610054:0.4927, 610055:0.4851, 236229:0.4805, 47295:0.4794, 47296:0.4794, 47833:0.4698, 47832:0.4669, 211374:0.4558, 47831:0.4553, 636009:0.4378, 47294:0.4316, 47830:0.4122, 329222:0.4116, 97990:0.4050, 329221:0.3984, 47297:0.3968, 47298:0.3968, 155277:0.3968, 211373:0.3934
2025-12-15 17:04:48 - app.routers.search - INFO - [ENSEMBLE] Applying object filter with 1 objects
2025-12-15 17:04:48 - elastic_transport.transport - INFO - GET http://elasticsearch:9200/ [status:200 duration:0.003s]
2025-12-15 17:04:48 - app.services.method.object_filter - INFO - ObjectFilterSearch connected to Elasticsearch
2025-12-15 17:04:48 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/object/_search [status:200 duration:0.003s]
2025-12-15 17:04:48 - app.services.method.object_filter - INFO - Object filter: 200 ‚Üí 0 results
2025-12-15 17:04:48 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-15 17:04:52 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='c√¥ng vi√™n', ocrText='disney', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=['Person'])]
2025-12-15 17:04:52 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-15 17:04:52 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-15 17:04:52 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr', 'multimodal'}, Total: 2
2025-12-15 17:04:53 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c√¥ng vi√™n' ‚Üí 'park'
2025-12-15 17:04:53 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'park'
2025-12-15 17:04:53 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'disney'
2025-12-15 17:04:53 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-15 17:04:54 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-15 17:04:54 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: park
2025-12-15 17:04:54 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-15 17:04:54 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: park
2025-12-15 17:04:55 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-15 17:04:55 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: park
2025-12-15 17:04:55 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-15 17:04:55 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-15 17:04:55 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-15 17:04:55 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-15 17:04:55 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'disney'
2025-12-15 17:04:55 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.011s]
2025-12-15 17:04:55 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 47295:0.9588, 47296:0.9588, 47833:0.9396, 47832:0.9338, 47831:0.9105, 636009:0.8756, 47294:0.8632, 47830:0.8243, 97990:0.8099, 47297:0.7936
2025-12-15 17:04:55 - app.routers.search - INFO - [ENSEMBLE] Check: 2 enabled methods, per_method_results keys: ['multimodal', 'ocr']
2025-12-15 17:04:55 - app.routers.search - INFO - [ENSEMBLE] Ensembling 2 methods: {'ocr', 'multimodal'}
2025-12-15 17:04:55 - app.routers.search - INFO - [ENSEMBLE] Final ensemble top results: 47295:0.4794, 47296:0.4794, 47833:0.4698, 47832:0.4669, 47831:0.4553, 636009:0.4378, 47294:0.4316, 47830:0.4122, 97990:0.4050, 47297:0.3968, 47298:0.3968, 155277:0.3968, 46864:0.3892, 448002:0.3892, 588697:0.3892, 622193:0.3892, 123947:0.3815, 155275:0.3815, 448003:0.3815, 46865:0.3736
2025-12-15 17:04:55 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 00:32:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 00:32:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='r·ª´ng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 00:32:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 00:32:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'r·ª´ng'
2025-12-16 00:32:23 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-16 00:32:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'forest'
2025-12-16 00:32:23 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 00:32:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='forest', Q1='forest', Q2='forest'
2025-12-16 00:32:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 00:32:23 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 00:32:23 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 00:32:23 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest
2025-12-16 00:32:25 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 00:32:25 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-16 00:32:25 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 00:32:25 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-16 00:32:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 00:32:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3265.96ms
2025-12-16 00:32:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 00:32:26 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 00:32:26 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 00:35:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 00:35:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='r·ª´ng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 00:35:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 00:35:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'r·ª´ng'
2025-12-16 00:35:06 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-16 00:35:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'forest'
2025-12-16 00:35:07 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 00:35:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='forest', Q1='forest', Q2='forest'
2025-12-16 00:35:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 00:35:07 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 00:35:07 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 00:35:07 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 00:35:07 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest
2025-12-16 00:35:07 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest
2025-12-16 00:35:07 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 00:35:07 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-16 00:35:07 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 00:35:07 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-16 00:35:08 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 00:35:08 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-16 00:35:08 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 00:35:08 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-16 00:35:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 0
2025-12-16 00:35:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2039.42ms
2025-12-16 00:35:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 00:35:08 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 00:35:08 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 00:36:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 00:36:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='web vietcombank', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 00:36:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 00:36:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'web vietcombank'
2025-12-16 00:36:46 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 00:36:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='web vietcombank', Q1='web vietcombank', Q2='web vietcombank'
2025-12-16 00:36:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 00:36:46 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 00:36:47 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 00:36:47 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: web vietcombank
2025-12-16 00:36:48 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 00:36:48 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: web vietcombank
2025-12-16 00:36:49 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 00:36:49 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: web vietcombank
2025-12-16 00:36:49 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 00:36:49 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3323.76ms
2025-12-16 00:36:49 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 00:36:49 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 00:36:49 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 00:39:38 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='web gi·∫£ m·∫°o ng√¢n h√†ng Vietcombank', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 00:39:38 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-16 00:39:38 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-16 00:39:38 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-16 00:39:39 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'web gi·∫£ m·∫°o ng√¢n h√†ng Vietcombank' ‚Üí 'Vietcombank fake website'
2025-12-16 00:39:39 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'Vietcombank fake website'
2025-12-16 00:39:39 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-16 00:39:39 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 00:39:39 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Vietcombank fake website
2025-12-16 00:39:39 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 00:39:39 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Vietcombank fake website
2025-12-16 00:39:39 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 00:39:40 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Vietcombank fake website
2025-12-16 00:39:40 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-16 00:39:40 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-16 00:39:40 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-16 00:39:40 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-16 00:39:40 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-16 00:39:40 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-16 00:39:40 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 00:39:46 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='web gi·∫£ m·∫°o ng√¢n h√†ng Vietcombank', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 00:39:46 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-16 00:39:46 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-16 00:39:46 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-16 00:39:47 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'web gi·∫£ m·∫°o ng√¢n h√†ng Vietcombank' ‚Üí 'Vietcombank fake website'
2025-12-16 00:39:47 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'Vietcombank fake website'
2025-12-16 00:39:47 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-16 00:39:50 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 657099:1.0000, 657098:0.9495, 536687:0.5928, 536689:0.5895, 638890:0.5723, 638487:0.5512, 428648:0.5225, 536688:0.5217, 536686:0.5117, 536682:0.4958
2025-12-16 00:39:50 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 638890:1.0000, 638488:0.9133, 474066:0.8939, 638889:0.8935, 474065:0.8737, 536688:0.8443, 536689:0.8281, 638888:0.7069, 319835:0.6359, 426186:0.6179
2025-12-16 00:39:50 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 657098:1.0000, 657099:0.8073, 638890:0.7610, 638921:0.5970, 614540:0.5696, 614538:0.5319, 114111:0.5238, 614539:0.5230, 536689:0.4998, 638889:0.4951
2025-12-16 00:39:50 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 638890:1.0000, 657098:0.7950, 638889:0.7785, 536689:0.7754, 638488:0.7171, 536688:0.7065, 474066:0.6079, 474065:0.5654, 657099:0.5130, 638888:0.4923
2025-12-16 00:39:50 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-16 00:39:50 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-16 00:39:50 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 00:41:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 00:41:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='3 ng∆∞·ªùi ƒë·ª©ng tr√™n t√≤a nh√†', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': True}, objects=[]
2025-12-16 00:41:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 00:41:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: '3 ng∆∞·ªùi ƒë·ª©ng tr√™n t√≤a nh√†'
2025-12-16 00:41:33 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: '3 ng∆∞·ªùi ƒë·ª©ng tr√™n t√≤a nh√†' ‚Üí '3 people standing on the building'
2025-12-16 00:41:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: '3 people standing on the building'
2025-12-16 00:41:34 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 00:41:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='3 people standing on the building', Q1='3 people standing on the building', Q2='3 people standing on the building'
2025-12-16 00:41:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 00:41:34 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 00:41:35 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 00:41:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: 3 people standing on the building
2025-12-16 00:41:35 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 00:41:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: 3 people standing on the building
2025-12-16 00:41:35 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 00:41:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: 3 people standing on the building
2025-12-16 00:41:36 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 00:41:36 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: 3 people standing on the building
2025-12-16 00:41:36 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 00:41:36 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: 3 people standing on the building
2025-12-16 00:41:37 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 00:41:37 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: 3 people standing on the building
2025-12-16 00:41:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 0
2025-12-16 00:41:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 4847.23ms
2025-12-16 00:41:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 00:41:38 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 00:41:38 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 00:41:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 00:41:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='3 ng∆∞·ªùi ƒë·ª©ng tr√™n t√≤a nh√†', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': True}, objects=[]
2025-12-16 00:41:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 00:41:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: '3 ng∆∞·ªùi ƒë·ª©ng tr√™n t√≤a nh√†'
2025-12-16 00:41:55 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: '3 ng∆∞·ªùi ƒë·ª©ng tr√™n t√≤a nh√†' ‚Üí '3 people standing on the building'
2025-12-16 00:41:55 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: '3 people standing on the building'
2025-12-16 00:41:55 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 00:41:55 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='3 people standing on the building', Q1='3 people standing on the building', Q2='3 people standing on the building'
2025-12-16 00:41:55 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 00:41:55 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 00:41:56 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 00:41:56 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: 3 people standing on the building
2025-12-16 00:41:56 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 00:41:56 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: 3 people standing on the building
2025-12-16 00:41:57 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 00:41:57 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: 3 people standing on the building
2025-12-16 00:41:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 00:41:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2931.31ms
2025-12-16 00:41:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 00:41:57 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 00:41:57 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 00:43:13 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='r·ª´ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 00:43:13 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-16 00:43:13 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-16 00:43:13 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-16 00:43:14 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-16 00:43:14 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'forest'
2025-12-16 00:43:14 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-16 00:43:14 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 00:43:14 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest
2025-12-16 00:43:15 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 00:43:15 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-16 00:43:16 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: ('Connection aborted.', RemoteDisconnected('Remote end closed connection without response'))
2025-12-16 00:43:16 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-16 00:43:16 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-16 00:43:16 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-16 00:43:16 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-16 00:43:16 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-16 00:43:16 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-16 00:43:16 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-16 00:43:16 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 00:43:19 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='r·ª´ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 00:43:19 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-16 00:43:19 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-16 00:43:19 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-16 00:43:19 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-16 00:43:19 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'forest'
2025-12-16 00:43:19 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-16 00:43:21 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 364952:1.0000, 12752:0.9831, 452470:0.9779, 181833:0.9235, 181837:0.8812, 181816:0.8536, 181815:0.8497, 181831:0.8332, 627259:0.8236, 181832:0.8198
2025-12-16 00:43:21 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 632682:1.0000, 632681:0.9716, 630826:0.9047, 632658:0.8735, 632184:0.8615, 62631:0.8571, 260279:0.8532, 633771:0.8439, 452470:0.8424, 630825:0.8226
2025-12-16 00:43:21 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 452470:1.0000, 579573:0.9221, 174012:0.8316, 627259:0.7723, 573747:0.7122, 579777:0.6898, 632670:0.6840, 630818:0.6780, 260279:0.6638, 579791:0.6584
2025-12-16 00:43:21 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 452470:1.0000, 260279:0.7699, 181831:0.6622, 630818:0.6435, 181814:0.6255, 181821:0.5932, 181816:0.5561, 632658:0.5520, 181825:0.5477, 632682:0.5218
2025-12-16 00:43:21 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-16 00:43:21 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-16 00:43:21 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 00:53:42 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='vietcombank gi·∫£ m·∫°o', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 00:53:42 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-16 00:53:42 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-16 00:53:42 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-16 00:53:43 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'vietcombank gi·∫£ m·∫°o' ‚Üí 'fake vietcombank'
2025-12-16 00:53:43 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'fake vietcombank'
2025-12-16 00:53:43 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-16 00:53:43 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 00:53:43 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: fake vietcombank
2025-12-16 00:53:43 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 00:53:43 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: fake vietcombank
2025-12-16 00:53:44 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 00:53:44 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: fake vietcombank
2025-12-16 00:53:44 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-16 00:53:44 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-16 00:53:44 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-16 00:53:44 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-16 00:53:44 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-16 00:53:44 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-16 00:53:44 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 00:53:46 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='vietcombank gi·∫£ m·∫°o', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 00:53:46 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-16 00:53:46 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-16 00:53:46 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-16 00:53:46 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'vietcombank gi·∫£ m·∫°o' ‚Üí 'fake vietcombank'
2025-12-16 00:53:46 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'fake vietcombank'
2025-12-16 00:53:46 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-16 00:53:49 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 64703:1.0000, 64704:0.9964, 130871:0.9409, 34571:0.9334, 305102:0.9331, 504482:0.9111, 123960:0.8920, 34569:0.8900, 159979:0.8540, 305103:0.8138
2025-12-16 00:53:49 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 638890:1.0000, 638889:0.8494, 614539:0.8410, 474066:0.8031, 614538:0.8024, 614540:0.7868, 536689:0.7458, 638488:0.7266, 426192:0.6439, 426190:0.5887
2025-12-16 00:53:49 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 657098:1.0000, 638921:0.8281, 614540:0.7508, 638890:0.7344, 155012:0.7265, 657099:0.6926, 155011:0.6791, 242873:0.6735, 614539:0.6702, 614538:0.6693
2025-12-16 00:53:49 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 638890:1.0000, 614539:0.8182, 614540:0.8037, 614538:0.7809, 638889:0.6576, 536689:0.5755, 638488:0.5623, 474066:0.5530, 426192:0.5506, 426191:0.3668
2025-12-16 00:53:49 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-16 00:53:49 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-16 00:53:49 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 00:53:55 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='vietcombank gi·∫£ m·∫°o', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 00:53:55 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-16 00:53:55 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-16 00:53:55 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-16 00:53:55 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'vietcombank gi·∫£ m·∫°o' ‚Üí 'fake vietcombank'
2025-12-16 00:53:55 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'fake vietcombank'
2025-12-16 00:53:55 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-16 00:53:55 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 00:53:55 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: fake vietcombank
2025-12-16 00:53:55 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 00:53:55 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: fake vietcombank
2025-12-16 00:53:56 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 00:53:56 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: fake vietcombank
2025-12-16 00:53:56 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-16 00:53:56 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-16 00:53:56 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-16 00:53:56 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-16 00:53:56 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-16 00:53:56 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-16 00:53:56 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 00:53:57 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='vietcombank gi·∫£ m·∫°o', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 00:53:57 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-16 00:53:57 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-16 00:53:57 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-16 00:53:58 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'vietcombank gi·∫£ m·∫°o' ‚Üí 'fake vietcombank'
2025-12-16 00:53:58 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'fake vietcombank'
2025-12-16 00:53:58 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-16 00:54:00 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 64703:1.0000, 64704:0.9964, 130871:0.9409, 34571:0.9334, 305102:0.9331, 504482:0.9111, 123960:0.8920, 34569:0.8900, 159979:0.8540, 305103:0.8138
2025-12-16 00:54:00 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 638890:1.0000, 638889:0.8494, 614539:0.8410, 474066:0.8031, 614538:0.8024, 614540:0.7868, 536689:0.7458, 638488:0.7266, 426192:0.6439, 426190:0.5887
2025-12-16 00:54:00 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 657098:1.0000, 638921:0.8281, 614540:0.7508, 638890:0.7344, 155012:0.7265, 657099:0.6926, 155011:0.6791, 242873:0.6735, 614539:0.6702, 614538:0.6693
2025-12-16 00:54:00 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 638890:1.0000, 614539:0.8182, 614540:0.8037, 614538:0.7809, 638889:0.6576, 536689:0.5755, 638488:0.5623, 474066:0.5530, 426192:0.5506, 426191:0.3668
2025-12-16 00:54:00 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-16 00:54:00 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-16 00:54:00 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 00:57:48 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='sang gay', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 00:57:48 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-16 00:57:48 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-16 00:57:48 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-16 00:57:48 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-16 00:57:48 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 00:57:48 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: sang gay
2025-12-16 00:57:48 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 00:57:48 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: sang gay
2025-12-16 00:57:48 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 00:57:48 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: sang gay
2025-12-16 00:57:48 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-16 00:57:48 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-16 00:57:48 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-16 00:57:48 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-16 00:57:48 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-16 00:57:48 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-16 00:57:48 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 00:57:49 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='sang gay', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 00:57:49 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-16 00:57:49 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-16 00:57:49 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-16 00:57:49 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-16 00:57:55 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 532934:1.0000, 532933:0.9718, 39270:0.9686, 147878:0.9315, 203659:0.8920, 532935:0.8351, 190310:0.8259, 147877:0.7800, 39926:0.7750, 456341:0.7724
2025-12-16 00:57:55 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 177679:1.0000, 94531:0.8955, 313323:0.8774, 191970:0.8682, 239111:0.8642, 189794:0.8232, 671853:0.7249, 381141:0.7004, 242906:0.6900, 152691:0.6900
2025-12-16 00:57:55 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 624654:1.0000, 127879:0.6846, 127878:0.6311, 610820:0.5435, 336128:0.4953, 72996:0.4944, 336127:0.4836, 446119:0.4793, 183625:0.4757, 610819:0.4617
2025-12-16 00:57:55 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 177679:1.0000, 624654:0.8550, 94531:0.8455, 191970:0.8052, 239111:0.7993, 189794:0.7387, 313323:0.7336, 671853:0.5935, 381141:0.5571, 242906:0.5419
2025-12-16 00:57:55 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-16 00:57:55 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-16 00:57:55 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 00:58:25 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='con b√≤ bi·∫øt bay', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 00:58:25 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-16 00:58:25 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-16 00:58:25 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-16 00:58:26 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'con b√≤ bi·∫øt bay' ‚Üí 'flying cow'
2025-12-16 00:58:26 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'flying cow'
2025-12-16 00:58:26 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-16 00:58:26 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 00:58:26 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: flying cow
2025-12-16 00:58:26 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 00:58:26 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: flying cow
2025-12-16 00:58:26 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 00:58:26 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: flying cow
2025-12-16 00:58:26 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-16 00:58:26 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-16 00:58:26 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-16 00:58:26 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-16 00:58:26 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-16 00:58:26 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-16 00:58:26 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 00:58:28 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='con b√≤ bi·∫øt bay', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 00:58:28 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-16 00:58:28 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-16 00:58:28 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-16 00:58:28 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'con b√≤ bi·∫øt bay' ‚Üí 'flying cow'
2025-12-16 00:58:28 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'flying cow'
2025-12-16 00:58:28 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-16 00:58:34 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 139770:1.0000, 109249:0.9875, 139771:0.9777, 310087:0.9630, 486285:0.8264, 210930:0.8245, 568482:0.7827, 210931:0.7644, 210929:0.7489, 455514:0.7441
2025-12-16 00:58:34 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 657230:1.0000, 52003:0.9231, 434473:0.8989, 691010:0.8607, 380832:0.7714, 347011:0.6930, 233332:0.6716, 34332:0.6628, 696989:0.6626, 701396:0.6442
2025-12-16 00:58:34 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 568482:1.0000, 557506:0.9774, 633718:0.9040, 436904:0.8871, 137916:0.8269, 436905:0.7968, 125434:0.7598, 623556:0.7493, 633719:0.7308, 557504:0.7158
2025-12-16 00:58:34 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 657230:1.0000, 52003:0.8950, 434473:0.8620, 691010:0.8098, 380832:0.6879, 568482:0.6499, 347011:0.5808, 139770:0.5627, 310087:0.5610, 34332:0.5397
2025-12-16 00:58:34 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-16 00:58:34 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-16 00:58:34 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 00:58:44 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='r·ª´ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 00:58:44 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-16 00:58:44 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-16 00:58:44 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-16 00:58:45 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-16 00:58:45 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'forest'
2025-12-16 00:58:45 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-16 00:58:45 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 00:58:45 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest
2025-12-16 00:58:45 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 00:58:45 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-16 00:58:45 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 00:58:45 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-16 00:58:45 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-16 00:58:45 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-16 00:58:45 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-16 00:58:45 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-16 00:58:45 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-16 00:58:45 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-16 00:58:45 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 00:58:45 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='r·ª´ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 00:58:45 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-16 00:58:45 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-16 00:58:45 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-16 00:58:46 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-16 00:58:46 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'forest'
2025-12-16 00:58:46 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-16 00:58:48 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 364952:1.0000, 12752:0.9831, 452470:0.9779, 181833:0.9235, 181837:0.8812, 181816:0.8536, 181815:0.8497, 181831:0.8332, 627259:0.8236, 181832:0.8198
2025-12-16 00:58:48 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 632682:1.0000, 632681:0.9716, 630826:0.9047, 632658:0.8735, 632184:0.8615, 62631:0.8571, 260279:0.8532, 633771:0.8439, 452470:0.8424, 630825:0.8226
2025-12-16 00:58:48 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 452470:1.0000, 579573:0.9221, 174012:0.8316, 627259:0.7723, 573747:0.7122, 579777:0.6898, 632670:0.6840, 630818:0.6780, 260279:0.6638, 579791:0.6584
2025-12-16 00:58:48 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 452470:1.0000, 260279:0.7699, 181831:0.6622, 630818:0.6435, 181814:0.6255, 181821:0.5932, 181816:0.5561, 632658:0.5520, 181825:0.5477, 632682:0.5218
2025-12-16 00:58:48 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-16 00:58:48 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-16 00:58:48 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 00:58:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 00:58:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='r·ª´ng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 00:58:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 00:58:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'r·ª´ng'
2025-12-16 00:58:58 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-16 00:58:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'forest'
2025-12-16 00:58:58 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 00:58:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='forest', Q1='forest', Q2='forest'
2025-12-16 00:58:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 00:58:58 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 00:58:58 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 00:58:58 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest
2025-12-16 00:58:58 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 00:58:58 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest
2025-12-16 00:58:58 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 00:58:58 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-16 00:58:59 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 00:58:59 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-16 00:58:59 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 00:58:59 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-16 00:58:59 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 00:58:59 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-16 00:59:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-16 00:59:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2246.98ms
2025-12-16 00:59:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 00:59:00 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 00:59:00 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 00:59:06 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='con b√≤ bi·∫øt bay ng·ªìi k·∫ø b√™n ', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 00:59:06 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-16 00:59:06 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-16 00:59:06 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-16 00:59:08 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'con b√≤ bi·∫øt bay ng·ªìi k·∫ø b√™n' ‚Üí 'The flying cow sat next to it'
2025-12-16 00:59:08 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'The flying cow sat next to it'
2025-12-16 00:59:08 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-16 00:59:12 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 139770:1.0000, 139771:0.9950, 650842:0.9868, 210929:0.9003, 210930:0.8554, 310087:0.8072, 73984:0.7691, 612597:0.7673, 486285:0.7661, 701467:0.7584
2025-12-16 00:59:12 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 6363:1.0000, 77724:0.6006, 550047:0.5604, 657230:0.5365, 317659:0.5279, 133152:0.5108, 81695:0.4692, 276853:0.4669, 655292:0.4616, 125043:0.4564
2025-12-16 00:59:12 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 112275:1.0000, 137916:0.7624, 112271:0.7487, 447359:0.7094, 112433:0.7066, 333275:0.6680, 137868:0.6363, 525334:0.6287, 45090:0.6279, 112274:0.6142
2025-12-16 00:59:12 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 6363:1.0000, 139771:0.7408, 139770:0.7174, 77724:0.5005, 137916:0.4823, 633719:0.4637, 633718:0.4111, 317659:0.4096, 657231:0.4024, 550047:0.3930
2025-12-16 00:59:12 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-16 00:59:12 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-16 00:59:12 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 00:59:21 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 00:59:21 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='n√∫i', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 00:59:21 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 00:59:21 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'n√∫i'
2025-12-16 00:59:21 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'n√∫i' ‚Üí 'mountain'
2025-12-16 00:59:21 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'mountain'
2025-12-16 00:59:21 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 00:59:21 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='mountain', Q1='mountain', Q2='mountain'
2025-12-16 00:59:21 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 00:59:21 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 00:59:21 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 00:59:21 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: mountain
2025-12-16 00:59:21 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 00:59:21 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: mountain
2025-12-16 00:59:21 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 00:59:21 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: mountain
2025-12-16 00:59:22 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 00:59:22 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: mountain
2025-12-16 00:59:23 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 00:59:23 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: mountain
2025-12-16 00:59:23 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 00:59:23 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: mountain
2025-12-16 00:59:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 0
2025-12-16 00:59:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3313.75ms
2025-12-16 00:59:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 00:59:24 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 00:59:24 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 00:59:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 00:59:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='qu·∫ßy 11 ng√¢n h√†ng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 00:59:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 00:59:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'qu·∫ßy 11 ng√¢n h√†ng'
2025-12-16 00:59:34 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'qu·∫ßy 11 ng√¢n h√†ng' ‚Üí '11 bank counters'
2025-12-16 00:59:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: '11 bank counters'
2025-12-16 00:59:35 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 00:59:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='11 bank counters', Q1='11 bank counters', Q2='11 bank counters'
2025-12-16 00:59:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 00:59:35 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 00:59:35 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 00:59:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: 11 bank counters
2025-12-16 00:59:36 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 00:59:36 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: 11 bank counters
2025-12-16 00:59:36 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 00:59:36 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: 11 bank counters
2025-12-16 00:59:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 00:59:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3481.54ms
2025-12-16 00:59:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 00:59:37 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 00:59:37 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 01:02:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 01:02:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='ng∆∞·ªùi ph·ªèng v·∫•n n·ªØ l·ª´a ƒë·∫£o link ch·ª©a m√£ ƒë·ªôc', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:02:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:02:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'ng∆∞·ªùi ph·ªèng v·∫•n n·ªØ l·ª´a ƒë·∫£o link ch·ª©a m√£ ƒë·ªôc'
2025-12-16 01:02:48 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'ng∆∞·ªùi ph·ªèng v·∫•n n·ªØ l·ª´a ƒë·∫£o link ch·ª©a m√£ ƒë·ªôc' ‚Üí 'The female interviewer scammed a link containing malicious code'
2025-12-16 01:02:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'The female interviewer scammed a link containing malicious code'
2025-12-16 01:02:49 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 01:02:49 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='The female interviewer scammed a link containing malicious code', Q1='The female interviewer scammed a link containing malicious code', Q2='The female interviewer scammed a link containing malicious code'
2025-12-16 01:02:49 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 01:02:49 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 01:02:50 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:02:50 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The female interviewer scammed a link containing malicious code
2025-12-16 01:02:50 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:02:50 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The female interviewer scammed a link containing malicious code
2025-12-16 01:02:50 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:02:50 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The female interviewer scammed a link containing malicious code
2025-12-16 01:02:51 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:02:51 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The female interviewer scammed a link containing malicious code
2025-12-16 01:02:51 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:02:51 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The female interviewer scammed a link containing malicious code
2025-12-16 01:02:52 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:02:52 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The female interviewer scammed a link containing malicious code
2025-12-16 01:02:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 0
2025-12-16 01:02:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 5975.84ms
2025-12-16 01:02:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 01:02:53 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 01:02:53 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 01:02:57 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='b·∫£n tin l·ª´a ƒë·∫£o qua m·∫°ng b·∫±ng h√¨nh th·ª©c d√πng link ch·ª©a m√£ ƒë·ªôc, ng∆∞·ªùi ph·ªèng v·∫•n l√† n·ªØ', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 01:02:57 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-16 01:02:57 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-16 01:02:57 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-16 01:02:58 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'b·∫£n tin l·ª´a ƒë·∫£o qua m·∫°ng b·∫±ng h√¨nh th·ª©c d√πng link ch·ª©a m√£ ƒë·ªôc, ng∆∞·ªùi ph·ªèng v·∫•n l√† n·ªØ' ‚Üí 'online scam newsletter using links containing malicious code, the interviewer is female'
2025-12-16 01:02:58 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'online scam newsletter using links containing malicious code, the interviewer is female'
2025-12-16 01:02:58 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-16 01:03:01 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 205572:1.0000, 657103:0.9609, 205570:0.8959, 205569:0.7979, 211676:0.7533, 474071:0.7479, 56622:0.7422, 56621:0.7372, 336084:0.7306, 222279:0.7198
2025-12-16 01:03:01 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 351653:1.0000, 351654:0.8874, 96965:0.8247, 351649:0.7036, 52033:0.6828, 602234:0.6811, 577890:0.6750, 577891:0.6465, 351650:0.6355, 507882:0.6353
2025-12-16 01:03:01 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 636735:1.0000, 364061:0.9377, 313141:0.9031, 636734:0.8612, 656916:0.8425, 474060:0.7962, 636743:0.7403, 474061:0.7185, 656915:0.7095, 636739:0.6837
2025-12-16 01:03:01 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 351653:1.0000, 351654:0.8435, 96965:0.7564, 351649:0.5881, 52033:0.5593, 602234:0.5569, 577890:0.5484, 577891:0.5088, 313141:0.4969, 351650:0.4936
2025-12-16 01:03:01 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-16 01:03:01 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-16 01:03:01 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 01:03:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 01:03:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='ph·ªèng v·∫•n l·ª´a ƒë·∫£o qua m·∫°ng ch·ª©a m√£ ƒë·ªôc', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:03:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:03:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'ph·ªèng v·∫•n l·ª´a ƒë·∫£o qua m·∫°ng ch·ª©a m√£ ƒë·ªôc'
2025-12-16 01:03:23 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'ph·ªèng v·∫•n l·ª´a ƒë·∫£o qua m·∫°ng ch·ª©a m√£ ƒë·ªôc' ‚Üí 'Online scam interviews contain malicious code'
2025-12-16 01:03:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'Online scam interviews contain malicious code'
2025-12-16 01:03:23 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 01:03:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='Online scam interviews contain malicious code', Q1='Online scam interviews contain malicious code', Q2='Online scam interviews contain malicious code'
2025-12-16 01:03:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 01:03:23 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 01:03:24 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:03:24 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Online scam interviews contain malicious code
2025-12-16 01:03:24 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:03:24 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Online scam interviews contain malicious code
2025-12-16 01:03:25 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:03:25 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Online scam interviews contain malicious code
2025-12-16 01:03:25 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:03:25 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Online scam interviews contain malicious code
2025-12-16 01:03:25 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:03:25 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Online scam interviews contain malicious code
2025-12-16 01:03:26 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:03:26 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Online scam interviews contain malicious code
2025-12-16 01:03:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-16 01:03:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 4690.91ms
2025-12-16 01:03:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 01:03:26 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 01:03:26 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 01:03:49 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 01:03:49 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='ph·ªèng v·∫•n l·ª´a ƒë·∫£o qua m·∫°ng ch·ª©a m√£ ƒë·ªôc', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:03:49 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='m·ªôt k·ªá t·ªß c√≥ nhi·ªÅu ƒëi·ªán tho·∫°i', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:03:49 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'ph·ªèng v·∫•n l·ª´a ƒë·∫£o qua m·∫°ng ch·ª©a m√£ ƒë·ªôc'
2025-12-16 01:03:50 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'ph·ªèng v·∫•n l·ª´a ƒë·∫£o qua m·∫°ng ch·ª©a m√£ ƒë·ªôc' ‚Üí 'Online scam interviews contain malicious code'
2025-12-16 01:03:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'Online scam interviews contain malicious code'
2025-12-16 01:03:50 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 01:03:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='Online scam interviews contain malicious code', Q1='Online scam interviews contain malicious code', Q2='Online scam interviews contain malicious code'
2025-12-16 01:03:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'm·ªôt k·ªá t·ªß c√≥ nhi·ªÅu ƒëi·ªán tho·∫°i'
2025-12-16 01:03:50 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 01:03:50 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:03:50 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Online scam interviews contain malicious code
2025-12-16 01:03:51 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:03:51 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Online scam interviews contain malicious code
2025-12-16 01:03:51 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:03:51 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Online scam interviews contain malicious code
2025-12-16 01:03:52 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 01:03:52 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2606.03ms
2025-12-16 01:03:52 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 01:03:52 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 01:03:52 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 01:04:06 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='b·∫£n tin l·ª´a ƒë·∫£o qua m·∫°ng b·∫±ng h√¨nh th·ª©c d√πng link ch·ª©a m√£ ƒë·ªôc, ng∆∞·ªùi ph·ªèng v·∫•n l√† n·ªØ, sau ƒë√≥ l√† m·ªôt k·ªá t·ªß c√≥ nhi·ªÅu di·ªán tho·∫°i', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 01:04:06 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-16 01:04:06 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-16 01:04:06 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-16 01:04:07 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'b·∫£n tin l·ª´a ƒë·∫£o qua m·∫°ng b·∫±ng h√¨nh th·ª©c d√πng link ch·ª©a m√£ ƒë·ªôc, ng∆∞·ªùi ph·ªèng v·∫•n l√† n·ªØ, sau ƒë√≥ l√† m·ªôt k·ªá t·ªß c√≥ nhi·ªÅu di·ªán tho·∫°i' ‚Üí 'online scam newsletter using a link containing malicious code, a female interviewer, and then a shelf with many phone numbers'
2025-12-16 01:04:07 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'online scam newsletter using a link containing malicious code, a female interviewer, and then a shelf with many phone numbers'
2025-12-16 01:04:07 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-16 01:04:08 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:04:08 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: online scam newsletter using a link containing malicious code, a female interviewer, and then a shelf with many phone numbers
2025-12-16 01:04:08 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:04:08 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: online scam newsletter using a link containing malicious code, a female interviewer, and then a shelf with many phone numbers
2025-12-16 01:04:08 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:04:08 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: online scam newsletter using a link containing malicious code, a female interviewer, and then a shelf with many phone numbers
2025-12-16 01:04:08 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-16 01:04:08 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-16 01:04:08 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-16 01:04:08 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-16 01:04:08 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-16 01:04:08 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-16 01:04:08 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 01:04:11 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='b·∫£n tin l·ª´a ƒë·∫£o qua m·∫°ng b·∫±ng h√¨nh th·ª©c d√πng link ch·ª©a m√£ ƒë·ªôc, ng∆∞·ªùi ph·ªèng v·∫•n l√† n·ªØ, sau ƒë√≥ l√† m·ªôt k·ªá t·ªß c√≥ nhi·ªÅu ƒëi·ªán tho·∫°i', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 01:04:11 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-16 01:04:11 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-16 01:04:11 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-16 01:04:12 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'b·∫£n tin l·ª´a ƒë·∫£o qua m·∫°ng b·∫±ng h√¨nh th·ª©c d√πng link ch·ª©a m√£ ƒë·ªôc, ng∆∞·ªùi ph·ªèng v·∫•n l√† n·ªØ, sau ƒë√≥ l√† m·ªôt k·ªá t·ªß c√≥ nhi·ªÅu ƒëi·ªán tho·∫°i' ‚Üí 'online scam newsletter using a link containing malicious code, a female interviewer, followed by a shelf with many phones'
2025-12-16 01:04:12 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'online scam newsletter using a link containing malicious code, a female interviewer, followed by a shelf with many phones'
2025-12-16 01:04:12 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-16 01:04:15 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 474084:1.0000, 87902:0.8166, 270841:0.8021, 211676:0.7099, 474071:0.6954, 260248:0.6913, 260250:0.6734, 260249:0.6645, 434111:0.6606, 38725:0.6417
2025-12-16 01:04:15 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 366054:1.0000, 226070:0.9100, 645177:0.8633, 605557:0.8471, 308017:0.8249, 645175:0.8201, 159713:0.8106, 605558:0.8063, 645176:0.8052, 106982:0.8037
2025-12-16 01:04:15 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 657088:1.0000, 189391:0.8422, 260248:0.8076, 651196:0.7551, 205569:0.7488, 189497:0.6800, 651195:0.6432, 657090:0.6430, 554102:0.6236, 657089:0.6048
2025-12-16 01:04:15 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 366054:1.0000, 230271:0.8996, 260248:0.8725, 226070:0.8631, 645177:0.7922, 605557:0.7675, 219813:0.7512, 308017:0.7337, 645175:0.7264, 605558:0.7053
2025-12-16 01:04:15 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-16 01:04:15 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-16 01:04:15 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 01:04:43 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='b·∫£n tin l·ª´a ƒë·∫£o qua m·∫°ng b·∫±ng h√¨nh th·ª©c d√πng link ch·ª©a m√£ ƒë·ªôc, ng∆∞·ªùi ph·ªèng v·∫•n l√† n·ªØ,', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 01:04:43 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-16 01:04:43 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-16 01:04:43 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-16 01:04:45 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'b·∫£n tin l·ª´a ƒë·∫£o qua m·∫°ng b·∫±ng h√¨nh th·ª©c d√πng link ch·ª©a m√£ ƒë·ªôc, ng∆∞·ªùi ph·ªèng v·∫•n l√† n·ªØ,' ‚Üí 'online scam newsletter using links containing malicious code, the interviewer is female,'
2025-12-16 01:04:45 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'online scam newsletter using links containing malicious code, the interviewer is female,'
2025-12-16 01:04:45 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-16 01:04:45 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:04:45 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: online scam newsletter using links containing malicious code, the interviewer is female,
2025-12-16 01:04:45 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:04:45 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: online scam newsletter using links containing malicious code, the interviewer is female,
2025-12-16 01:04:45 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:04:45 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: online scam newsletter using links containing malicious code, the interviewer is female,
2025-12-16 01:04:45 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-16 01:04:45 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-16 01:04:45 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-16 01:04:45 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-16 01:04:45 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-16 01:04:45 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-16 01:04:45 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 01:04:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 3 stages
2025-12-16 01:04:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='ph·ªèng v·∫•n l·ª´a ƒë·∫£o qua m·∫°ng ch·ª©a m√£ ƒë·ªôc', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:04:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='m·ªôt k·ªá t·ªß c√≥ nhi·ªÅu ƒëi·ªán tho·∫°i', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:04:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='web gi·∫£ vietcombank', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:04:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'ph·ªèng v·∫•n l·ª´a ƒë·∫£o qua m·∫°ng ch·ª©a m√£ ƒë·ªôc'
2025-12-16 01:04:47 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'ph·ªèng v·∫•n l·ª´a ƒë·∫£o qua m·∫°ng ch·ª©a m√£ ƒë·ªôc' ‚Üí 'Online scam interviews contain malicious code'
2025-12-16 01:04:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'Online scam interviews contain malicious code'
2025-12-16 01:04:47 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 01:04:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='Online scam interviews contain malicious code', Q1='Online scam interviews contain malicious code', Q2='Online scam interviews contain malicious code'
2025-12-16 01:04:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'm·ªôt k·ªá t·ªß c√≥ nhi·ªÅu ƒëi·ªán tho·∫°i'
2025-12-16 01:04:47 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 01:04:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: 'web gi·∫£ vietcombank'
2025-12-16 01:04:47 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 3 has no enabled methods
2025-12-16 01:04:47 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:04:47 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Online scam interviews contain malicious code
2025-12-16 01:04:48 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:04:48 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Online scam interviews contain malicious code
2025-12-16 01:04:48 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:04:48 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Online scam interviews contain malicious code
2025-12-16 01:04:49 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 01:04:49 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 3 stages in 2651.02ms
2025-12-16 01:04:49 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 01:04:49 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 3 stages
2025-12-16 01:04:49 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 01:04:56 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='trang web gi·∫£ m·∫°o ng√¢n h√†ng vietcombank', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 01:04:56 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-16 01:04:56 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-16 01:04:56 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-16 01:04:56 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'trang web gi·∫£ m·∫°o ng√¢n h√†ng vietcombank' ‚Üí 'Vietcombank fake website'
2025-12-16 01:04:56 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'Vietcombank fake website'
2025-12-16 01:04:56 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-16 01:04:57 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:04:57 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Vietcombank fake website
2025-12-16 01:04:57 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:04:57 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Vietcombank fake website
2025-12-16 01:04:58 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:04:58 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Vietcombank fake website
2025-12-16 01:04:58 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-16 01:04:58 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-16 01:04:58 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-16 01:04:58 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-16 01:04:58 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-16 01:04:58 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-16 01:04:58 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 01:05:00 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='trang web gi·∫£ m·∫°o ng√¢n h√†ng vietcombank', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 01:05:00 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-16 01:05:00 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-16 01:05:00 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-16 01:05:00 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'trang web gi·∫£ m·∫°o ng√¢n h√†ng vietcombank' ‚Üí 'Vietcombank fake website'
2025-12-16 01:05:00 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'Vietcombank fake website'
2025-12-16 01:05:00 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-16 01:05:03 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 657099:1.0000, 657098:0.9495, 536687:0.5928, 536689:0.5895, 638890:0.5723, 638487:0.5512, 428648:0.5225, 536688:0.5217, 536686:0.5117, 536682:0.4958
2025-12-16 01:05:03 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 638890:1.0000, 638488:0.9133, 474066:0.8939, 638889:0.8935, 474065:0.8737, 536688:0.8443, 536689:0.8281, 638888:0.7069, 319835:0.6359, 426186:0.6179
2025-12-16 01:05:03 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 657098:1.0000, 657099:0.8073, 638890:0.7610, 638921:0.5970, 614540:0.5696, 614538:0.5319, 114111:0.5238, 614539:0.5230, 536689:0.4998, 638889:0.4951
2025-12-16 01:05:03 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 638890:1.0000, 657098:0.7950, 638889:0.7785, 536689:0.7754, 638488:0.7171, 536688:0.7065, 474066:0.6079, 474065:0.5654, 657099:0.5130, 638888:0.4923
2025-12-16 01:05:03 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-16 01:05:03 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-16 01:05:03 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 01:06:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 3 stages
2025-12-16 01:06:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='ng∆∞·ªùi n·ªØ ph·ªèng v·∫•n l·ª´a ƒë·∫£o', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:06:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='m·ªôt k·ªá t·ªß c√≥ nhi·ªÅu ƒëi·ªán tho·∫°i', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:06:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='web gi·∫£ vietcombank', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:06:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'ng∆∞·ªùi n·ªØ ph·ªèng v·∫•n l·ª´a ƒë·∫£o'
2025-12-16 01:06:01 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'ng∆∞·ªùi n·ªØ ph·ªèng v·∫•n l·ª´a ƒë·∫£o' ‚Üí 'Fraudulent female interviewer'
2025-12-16 01:06:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'Fraudulent female interviewer'
2025-12-16 01:06:02 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 01:06:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='Fraudulent female interviewer', Q1='Fraudulent female interviewer', Q2='Fraudulent female interviewer'
2025-12-16 01:06:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'm·ªôt k·ªá t·ªß c√≥ nhi·ªÅu ƒëi·ªán tho·∫°i'
2025-12-16 01:06:02 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 01:06:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: 'web gi·∫£ vietcombank'
2025-12-16 01:06:02 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 3 has no enabled methods
2025-12-16 01:06:03 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:06:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Fraudulent female interviewer
2025-12-16 01:06:03 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:06:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Fraudulent female interviewer
2025-12-16 01:06:03 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:06:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Fraudulent female interviewer
2025-12-16 01:06:03 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:06:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Fraudulent female interviewer
2025-12-16 01:06:03 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:06:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Fraudulent female interviewer
2025-12-16 01:06:04 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:06:04 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Fraudulent female interviewer
2025-12-16 01:06:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 01:06:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 3 stages in 4049.74ms
2025-12-16 01:06:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 01:06:04 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 3 stages
2025-12-16 01:06:04 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 01:06:09 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='ph·ªèng v·∫•n qua m·∫°ng ch·ª©a link c√≥ m√£ ƒë·ªôc', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 01:06:09 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-16 01:06:09 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-16 01:06:09 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-16 01:06:11 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'ph·ªèng v·∫•n qua m·∫°ng ch·ª©a link c√≥ m√£ ƒë·ªôc' ‚Üí 'Online interviews contain malicious links'
2025-12-16 01:06:11 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'Online interviews contain malicious links'
2025-12-16 01:06:11 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-16 01:06:13 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 580335:1.0000, 580334:0.7922, 580333:0.7692, 486613:0.7334, 369745:0.6572, 140563:0.6344, 268103:0.6208, 278446:0.6180, 268091:0.6177, 268102:0.6132
2025-12-16 01:06:13 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 473976:1.0000, 286777:0.9741, 595381:0.9238, 580333:0.9010, 611964:0.8771, 132804:0.8038, 580335:0.7574, 369782:0.7546, 383226:0.7328, 581429:0.7139
2025-12-16 01:06:13 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 580335:1.0000, 278446:0.8992, 192693:0.8408, 656912:0.8057, 580334:0.7958, 449366:0.7653, 253406:0.7120, 580333:0.6935, 486611:0.6627, 656916:0.6603
2025-12-16 01:06:13 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 580335:1.0000, 580333:0.8788, 580334:0.7695, 595381:0.5995, 473976:0.4884, 286777:0.4564, 611964:0.4462, 278446:0.4267, 132804:0.3497, 611965:0.3457
2025-12-16 01:06:13 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-16 01:06:13 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-16 01:06:13 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 01:06:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 01:06:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='ph·ªèng v·∫•n qua m·∫°ng ch·ª©a link c√≥ m√£ ƒë·ªôc', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:06:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='k·ªá t·ªß c√≥ nhi·ªÅu ƒëi·ªán tho·∫°i', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:06:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'ph·ªèng v·∫•n qua m·∫°ng ch·ª©a link c√≥ m√£ ƒë·ªôc'
2025-12-16 01:06:17 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'ph·ªèng v·∫•n qua m·∫°ng ch·ª©a link c√≥ m√£ ƒë·ªôc' ‚Üí 'Online interviews contain malicious links'
2025-12-16 01:06:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'Online interviews contain malicious links'
2025-12-16 01:06:18 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 01:06:18 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='Online interviews contain malicious links', Q1='Online interviews contain malicious links', Q2='Online interviews contain malicious links'
2025-12-16 01:06:18 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'k·ªá t·ªß c√≥ nhi·ªÅu ƒëi·ªán tho·∫°i'
2025-12-16 01:06:18 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 01:06:18 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:06:18 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Online interviews contain malicious links
2025-12-16 01:06:18 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:06:18 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Online interviews contain malicious links
2025-12-16 01:06:18 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:06:18 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Online interviews contain malicious links
2025-12-16 01:06:18 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:06:18 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Online interviews contain malicious links
2025-12-16 01:06:19 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:06:19 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Online interviews contain malicious links
2025-12-16 01:06:19 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:06:19 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Online interviews contain malicious links
2025-12-16 01:06:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-16 01:06:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 1991.94ms
2025-12-16 01:06:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 01:06:19 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 01:06:19 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 01:06:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 3 stages
2025-12-16 01:06:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='ph·ªèng v·∫•n qua m·∫°ng ch·ª©a link c√≥ m√£ ƒë·ªôc', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:06:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='k·ªá t·ªß c√≥ nhi·ªÅu ƒëi·ªán tho·∫°i', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:06:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='trang web gi·∫£ m·∫°o ng√¢n h√†ng Vietcombbank', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:06:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'ph·ªèng v·∫•n qua m·∫°ng ch·ª©a link c√≥ m√£ ƒë·ªôc'
2025-12-16 01:06:32 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'ph·ªèng v·∫•n qua m·∫°ng ch·ª©a link c√≥ m√£ ƒë·ªôc' ‚Üí 'Online interviews contain malicious links'
2025-12-16 01:06:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'Online interviews contain malicious links'
2025-12-16 01:06:32 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 01:06:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='Online interviews contain malicious links', Q1='Online interviews contain malicious links', Q2='Online interviews contain malicious links'
2025-12-16 01:06:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'k·ªá t·ªß c√≥ nhi·ªÅu ƒëi·ªán tho·∫°i'
2025-12-16 01:06:32 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 01:06:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: 'trang web gi·∫£ m·∫°o ng√¢n h√†ng Vietcombbank'
2025-12-16 01:06:32 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 3 has no enabled methods
2025-12-16 01:06:32 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:06:32 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Online interviews contain malicious links
2025-12-16 01:06:33 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:06:33 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Online interviews contain malicious links
2025-12-16 01:06:33 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:06:33 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Online interviews contain malicious links
2025-12-16 01:06:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 01:06:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 3 stages in 2701.19ms
2025-12-16 01:06:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 01:06:34 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 3 stages
2025-12-16 01:06:34 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 01:06:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 3 stages
2025-12-16 01:06:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='ph·ªèng v·∫•n qua m·∫°ng ch·ª©a link c√≥ m√£ ƒë·ªôc, ng∆∞·ªùi ph·ªèng v·∫•n l√† n·ªØ', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:06:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='k·ªá t·ªß c√≥ nhi·ªÅu ƒëi·ªán tho·∫°i', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:06:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='trang web gi·∫£ m·∫°o ng√¢n h√†ng Vietcombbank', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:06:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'ph·ªèng v·∫•n qua m·∫°ng ch·ª©a link c√≥ m√£ ƒë·ªôc, ng∆∞·ªùi ph·ªèng v·∫•n l√† n·ªØ'
2025-12-16 01:06:47 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'ph·ªèng v·∫•n qua m·∫°ng ch·ª©a link c√≥ m√£ ƒë·ªôc, ng∆∞·ªùi ph·ªèng v·∫•n l√† n·ªØ' ‚Üí 'The online interview contained a malicious link and the interviewer was female'
2025-12-16 01:06:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'The online interview contained a malicious link and the interviewer was female'
2025-12-16 01:06:47 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 01:06:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='The online interview contained a malicious link and the interviewer was female', Q1='The online interview contained a malicious link and the interviewer was female', Q2='The online interview contained a malicious link and the interviewer was female'
2025-12-16 01:06:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'k·ªá t·ªß c√≥ nhi·ªÅu ƒëi·ªán tho·∫°i'
2025-12-16 01:06:47 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 01:06:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: 'trang web gi·∫£ m·∫°o ng√¢n h√†ng Vietcombbank'
2025-12-16 01:06:47 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 3 has no enabled methods
2025-12-16 01:06:48 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:06:48 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:06:48 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The online interview contained a malicious link and the interviewer was female
2025-12-16 01:06:48 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The online interview contained a malicious link and the interviewer was female
2025-12-16 01:06:48 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:06:48 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The online interview contained a malicious link and the interviewer was female
2025-12-16 01:06:48 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:06:48 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The online interview contained a malicious link and the interviewer was female
2025-12-16 01:06:48 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:06:48 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The online interview contained a malicious link and the interviewer was female
2025-12-16 01:06:48 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:06:48 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The online interview contained a malicious link and the interviewer was female
2025-12-16 01:06:49 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 0
2025-12-16 01:06:49 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 3 stages in 3676.81ms
2025-12-16 01:06:49 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 01:06:49 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 3 stages
2025-12-16 01:06:49 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 01:07:42 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='Trang web gi·∫£ m·∫°o ng√¢n h√†ng vietcombank', ocrText='vcb', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 01:07:42 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 01:07:42 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 01:07:42 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr', 'multimodal'}, Total: 2
2025-12-16 01:07:43 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'Trang web gi·∫£ m·∫°o ng√¢n h√†ng vietcombank' ‚Üí 'Vietcombank fake website'
2025-12-16 01:07:43 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'Vietcombank fake website'
2025-12-16 01:07:43 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'vcb'
2025-12-16 01:07:43 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-16 01:07:45 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 657099:1.0000, 657098:0.9495, 536687:0.5928, 536689:0.5895, 638890:0.5723, 638487:0.5512, 428648:0.5225, 536688:0.5217, 536686:0.5117, 536682:0.4958
2025-12-16 01:07:45 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 638890:1.0000, 638488:0.9133, 474066:0.8939, 638889:0.8935, 474065:0.8737, 536688:0.8443, 536689:0.8281, 638888:0.7069, 319835:0.6359, 426186:0.6179
2025-12-16 01:07:45 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 657098:1.0000, 657099:0.8073, 638890:0.7610, 638921:0.5970, 614540:0.5696, 614538:0.5319, 114111:0.5238, 614539:0.5230, 536689:0.4998, 638889:0.4951
2025-12-16 01:07:45 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 638890:1.0000, 657098:0.7950, 638889:0.7785, 536689:0.7754, 638488:0.7171, 536688:0.7065, 474066:0.6079, 474065:0.5654, 657099:0.5130, 638888:0.4923
2025-12-16 01:07:45 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'vcb'
2025-12-16 01:07:45 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.207s]
2025-12-16 01:07:45 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 436061:0.9721, 436062:0.9721, 434802:0.9633, 436051:0.9581, 434805:0.9548, 434815:0.9465, 434813:0.9421, 434816:0.9383, 434814:0.9289, 533347:0.9093
2025-12-16 01:07:45 - app.routers.search - INFO - [ENSEMBLE] Check: 2 enabled methods, per_method_results keys: ['multimodal', 'ocr']
2025-12-16 01:07:45 - app.routers.search - INFO - [ENSEMBLE] Ensembling 2 methods: {'ocr', 'multimodal'}
2025-12-16 01:07:45 - app.routers.search - INFO - [ENSEMBLE] Final ensemble top results: 638890:0.5000, 436061:0.4860, 436062:0.4860, 434802:0.4817, 436051:0.4791, 434805:0.4774, 434815:0.4732, 434813:0.4710, 434816:0.4692, 434814:0.4645, 533347:0.4546, 533339:0.4546, 533340:0.4546, 584204:0.4394, 584205:0.4394, 533346:0.4363, 456096:0.4342, 456097:0.4156, 301940:0.4028, 301941:0.4028
2025-12-16 01:07:45 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 01:08:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 3 stages
2025-12-16 01:08:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='ng∆∞·ªùi n·ªØ ph·ªèng v·∫•n l·ª´a ƒë·∫£o', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:08:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:08:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:08:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'ng∆∞·ªùi n·ªØ ph·ªèng v·∫•n l·ª´a ƒë·∫£o'
2025-12-16 01:08:12 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'ng∆∞·ªùi n·ªØ ph·ªèng v·∫•n l·ª´a ƒë·∫£o' ‚Üí 'Fraudulent female interviewer'
2025-12-16 01:08:12 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'Fraudulent female interviewer'
2025-12-16 01:08:12 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 01:08:12 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='Fraudulent female interviewer', Q1='Fraudulent female interviewer', Q2='Fraudulent female interviewer'
2025-12-16 01:08:12 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 01:08:12 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 01:08:12 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: ''
2025-12-16 01:08:12 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 3 has no enabled methods
2025-12-16 01:08:12 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:08:12 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Fraudulent female interviewer
2025-12-16 01:08:12 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:08:12 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Fraudulent female interviewer
2025-12-16 01:08:12 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:08:12 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Fraudulent female interviewer
2025-12-16 01:08:13 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:08:13 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Fraudulent female interviewer
2025-12-16 01:08:13 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:08:13 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Fraudulent female interviewer
2025-12-16 01:08:13 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:08:13 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Fraudulent female interviewer
2025-12-16 01:08:14 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 0
2025-12-16 01:08:14 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 3 stages in 3280.28ms
2025-12-16 01:08:14 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 01:08:14 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 3 stages
2025-12-16 01:08:14 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 01:09:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 3 stages
2025-12-16 01:09:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='ph·ªèng v·∫•n l·ª´a ƒë·∫£o qua link c√≥ m√£ ƒë·ªôc ', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:09:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:09:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:09:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'ph·ªèng v·∫•n l·ª´a ƒë·∫£o qua link c√≥ m√£ ƒë·ªôc '
2025-12-16 01:09:08 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'ph·ªèng v·∫•n l·ª´a ƒë·∫£o qua link c√≥ m√£ ƒë·ªôc ' ‚Üí 'Fraudulent interview via malicious link'
2025-12-16 01:09:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'Fraudulent interview via malicious link'
2025-12-16 01:09:08 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 01:09:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='Fraudulent interview via malicious link', Q1='Fraudulent interview via malicious link', Q2='Fraudulent interview via malicious link'
2025-12-16 01:09:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 01:09:08 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 01:09:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: ''
2025-12-16 01:09:08 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 3 has no enabled methods
2025-12-16 01:09:08 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:09:08 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Fraudulent interview via malicious link
2025-12-16 01:09:09 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:09:09 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Fraudulent interview via malicious link
2025-12-16 01:09:09 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:09:09 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Fraudulent interview via malicious link
2025-12-16 01:09:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 01:09:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 3 stages in 4030.28ms
2025-12-16 01:09:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 01:09:10 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 3 stages
2025-12-16 01:09:10 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 01:09:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 3 stages
2025-12-16 01:09:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='ph·ªèng v·∫•n l·ª´a ƒë·∫£o qua link c√≥ m√£ ƒë·ªôc ', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:09:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:09:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='web gi·∫£ m·∫°o vietcombank', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:09:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'ph·ªèng v·∫•n l·ª´a ƒë·∫£o qua link c√≥ m√£ ƒë·ªôc '
2025-12-16 01:09:20 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'ph·ªèng v·∫•n l·ª´a ƒë·∫£o qua link c√≥ m√£ ƒë·ªôc ' ‚Üí 'Fraudulent interview via malicious link'
2025-12-16 01:09:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'Fraudulent interview via malicious link'
2025-12-16 01:09:20 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 01:09:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='Fraudulent interview via malicious link', Q1='Fraudulent interview via malicious link', Q2='Fraudulent interview via malicious link'
2025-12-16 01:09:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 01:09:20 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 01:09:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: 'web gi·∫£ m·∫°o vietcombank'
2025-12-16 01:09:20 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 3 has no enabled methods
2025-12-16 01:09:20 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:09:20 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Fraudulent interview via malicious link
2025-12-16 01:09:20 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:09:20 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Fraudulent interview via malicious link
2025-12-16 01:09:20 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:09:20 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Fraudulent interview via malicious link
2025-12-16 01:09:20 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:09:20 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Fraudulent interview via malicious link
2025-12-16 01:09:21 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:09:21 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Fraudulent interview via malicious link
2025-12-16 01:09:21 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:09:21 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Fraudulent interview via malicious link
2025-12-16 01:09:21 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 0
2025-12-16 01:09:21 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 3 stages in 2091.47ms
2025-12-16 01:09:21 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 01:09:21 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 3 stages
2025-12-16 01:09:21 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 01:09:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 3 stages
2025-12-16 01:09:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='ph·ªèng v·∫•n l·ª´a ƒë·∫£o qua link c√≥ m√£ ƒë·ªôc ', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:09:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:09:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='web gi·∫£ m·∫°o vietcombank', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:09:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'ph·ªèng v·∫•n l·ª´a ƒë·∫£o qua link c√≥ m√£ ƒë·ªôc '
2025-12-16 01:09:28 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'ph·ªèng v·∫•n l·ª´a ƒë·∫£o qua link c√≥ m√£ ƒë·ªôc ' ‚Üí 'Fraudulent interview via malicious link'
2025-12-16 01:09:28 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'Fraudulent interview via malicious link'
2025-12-16 01:09:28 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 01:09:28 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='Fraudulent interview via malicious link', Q1='Fraudulent interview via malicious link', Q2='Fraudulent interview via malicious link'
2025-12-16 01:09:28 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 01:09:28 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 01:09:28 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: 'web gi·∫£ m·∫°o vietcombank'
2025-12-16 01:09:28 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 3 has no enabled methods
2025-12-16 01:09:28 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:09:28 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Fraudulent interview via malicious link
2025-12-16 01:09:29 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:09:29 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Fraudulent interview via malicious link
2025-12-16 01:09:29 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:09:29 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Fraudulent interview via malicious link
2025-12-16 01:09:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 01:09:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 3 stages in 2805.14ms
2025-12-16 01:09:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-16 01:09:30 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 3 stages
2025-12-16 01:09:30 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 92 videos with results
2025-12-16 01:09:30 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 0 videos with results
2025-12-16 01:09:30 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 3: 0 videos with results
2025-12-16 01:09:30 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] No common videos across all stages
2025-12-16 01:09:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 0 valid tuples
2025-12-16 01:09:51 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='ng·ªçn n√∫i gi·ªëng h√¨nh kim t·ª≠ th√°p', ocrText='vcb', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 01:09:51 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-16 01:09:51 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-16 01:09:51 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-16 01:09:51 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'ng·ªçn n√∫i gi·ªëng h√¨nh kim t·ª≠ th√°p' ‚Üí 'The mountain resembles a pyramid shape'
2025-12-16 01:09:51 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'The mountain resembles a pyramid shape'
2025-12-16 01:09:51 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-16 01:09:51 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:09:51 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The mountain resembles a pyramid shape
2025-12-16 01:09:51 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:09:51 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The mountain resembles a pyramid shape
2025-12-16 01:09:52 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:09:52 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The mountain resembles a pyramid shape
2025-12-16 01:09:52 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-16 01:09:52 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-16 01:09:52 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-16 01:09:52 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-16 01:09:52 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-16 01:09:52 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-16 01:09:52 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 01:09:58 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='ng·ªçn n√∫i gi·ªëng h√¨nh kim t·ª≠ th√°p', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 01:09:58 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-16 01:09:58 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-16 01:09:58 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-16 01:09:59 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'ng·ªçn n√∫i gi·ªëng h√¨nh kim t·ª≠ th√°p' ‚Üí 'The mountain resembles a pyramid shape'
2025-12-16 01:09:59 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'The mountain resembles a pyramid shape'
2025-12-16 01:09:59 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-16 01:10:02 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 421605:1.0000, 421606:0.9820, 421604:0.9530, 421621:0.9312, 421620:0.9291, 421619:0.9268, 421611:0.9144, 421613:0.9136, 421623:0.8865, 421612:0.8782
2025-12-16 01:10:02 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 421611:1.0000, 421608:0.9863, 421613:0.9848, 421606:0.9676, 421607:0.9026, 421300:0.9009, 421616:0.8965, 421605:0.8855, 660979:0.8740, 421609:0.8643
2025-12-16 01:10:02 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 421300:1.0000, 421605:0.9839, 421604:0.9375, 421616:0.9116, 421606:0.8743, 421622:0.8645, 421299:0.8493, 314541:0.8405, 421624:0.8315, 381522:0.8258
2025-12-16 01:10:02 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 421606:1.0000, 421605:0.9890, 421604:0.9411, 421616:0.9076, 421611:0.8743, 421300:0.8732, 421299:0.8207, 421613:0.8114, 421622:0.7890, 421624:0.7859
2025-12-16 01:10:02 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-16 01:10:02 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-16 01:10:02 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 01:10:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 3 stages
2025-12-16 01:10:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='nhi·ªÅu ng·ªçn n√∫i h√¨nh kim t·ª± th√°p, gi·ªØa nh·ªØng ng·ªçn n√∫i c√≥ c√°c ng√¥i nh√†', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:10:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:10:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='web gi·∫£ m·∫°o vietcombank', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:10:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'nhi·ªÅu ng·ªçn n√∫i h√¨nh kim t·ª± th√°p, gi·ªØa nh·ªØng ng·ªçn n√∫i c√≥ c√°c ng√¥i nh√†'
2025-12-16 01:10:03 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'nhi·ªÅu ng·ªçn n√∫i h√¨nh kim t·ª± th√°p, gi·ªØa nh·ªØng ng·ªçn n√∫i c√≥ c√°c ng√¥i nh√†' ‚Üí 'Many mountains are pyramid-shaped, with houses between the mountains'
2025-12-16 01:10:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'Many mountains are pyramid-shaped, with houses between the mountains'
2025-12-16 01:10:03 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 01:10:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='Many mountains are pyramid-shaped, with houses between the mountains', Q1='Many mountains are pyramid-shaped, with houses between the mountains', Q2='Many mountains are pyramid-shaped, with houses between the mountains'
2025-12-16 01:10:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 01:10:03 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 01:10:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: 'web gi·∫£ m·∫°o vietcombank'
2025-12-16 01:10:03 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 3 has no enabled methods
2025-12-16 01:10:03 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:10:03 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:10:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Many mountains are pyramid-shaped, with houses between the mountains
2025-12-16 01:10:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Many mountains are pyramid-shaped, with houses between the mountains
2025-12-16 01:10:03 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:10:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Many mountains are pyramid-shaped, with houses between the mountains
2025-12-16 01:10:04 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:10:04 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Many mountains are pyramid-shaped, with houses between the mountains
2025-12-16 01:10:05 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:10:05 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Many mountains are pyramid-shaped, with houses between the mountains
2025-12-16 01:10:05 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:10:05 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Many mountains are pyramid-shaped, with houses between the mountains
2025-12-16 01:10:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-16 01:10:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 3 stages in 3058.01ms
2025-12-16 01:10:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-16 01:10:06 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 3 stages
2025-12-16 01:10:06 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 64 videos with results
2025-12-16 01:10:06 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 0 videos with results
2025-12-16 01:10:06 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 3: 0 videos with results
2025-12-16 01:10:06 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] No common videos across all stages
2025-12-16 01:10:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 0 valid tuples
2025-12-16 01:10:08 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='ng·ªçn n√∫i h√¨nh kim t·ª± th√°p, ·ªü gi·ªØa c√≥ nh√† d√¢n', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 01:10:08 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-16 01:10:08 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-16 01:10:08 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-16 01:10:09 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'ng·ªçn n√∫i h√¨nh kim t·ª± th√°p, ·ªü gi·ªØa c√≥ nh√† d√¢n' ‚Üí 'The mountain is shaped like a pyramid, in the middle there is a house'
2025-12-16 01:10:09 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'The mountain is shaped like a pyramid, in the middle there is a house'
2025-12-16 01:10:09 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-16 01:10:13 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 421606:1.0000, 421605:0.9787, 421616:0.9577, 421604:0.9545, 421623:0.9049, 421624:0.8995, 421625:0.8717, 421641:0.8308, 421622:0.8172, 421299:0.7675
2025-12-16 01:10:13 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 457307:1.0000, 424750:0.9745, 448416:0.9490, 421608:0.9389, 564473:0.9036, 448415:0.8887, 457306:0.8767, 421606:0.8642, 421605:0.8590, 424751:0.8512
2025-12-16 01:10:13 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 421300:1.0000, 421616:0.9957, 421624:0.9929, 421605:0.9834, 421625:0.9532, 421623:0.9522, 421622:0.9486, 421604:0.9475, 421299:0.9134, 511401:0.8903
2025-12-16 01:10:13 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 421605:1.0000, 421606:0.9726, 421616:0.9595, 421604:0.9311, 421624:0.8932, 421300:0.8157, 421623:0.8152, 421622:0.8074, 421625:0.7978, 421299:0.7713
2025-12-16 01:10:13 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-16 01:10:13 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-16 01:10:13 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 01:10:28 - root - INFO - üì• Received submit request: query_text='ng·ªçn n√∫i h√¨nh kim t·ª± th√°p, ·ªü gi·ªØa c√≥ nh√† d√¢n...', keyframe_path='/keyframe/L14/L14_V023/9830.webp', result_id='421605', username='user1'
2025-12-16 01:10:28 - root - INFO - ‚úÖ Submission created: id=9, query='ng·ªçn n√∫i h√¨nh kim t·ª± th√°p, ·ªü gi·ªØa c√≥ nh√† d√¢n...', user=user1
2025-12-16 01:13:39 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='qu√Ω ch√¢u trung qu·ªëc', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 01:13:39 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 01:13:39 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 01:13:39 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 01:13:39 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'qu√Ω ch√¢u trung qu·ªëc'
2025-12-16 01:13:39 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'qu√Ω ch√¢u trung qu·ªëc'
2025-12-16 01:13:39 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.276s]
2025-12-16 01:13:39 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 284911:0.9684, 284910:0.9397, 209931:0.9320, 209932:0.9320, 421299:0.9271, 421300:0.9271, 421301:0.9271, 284909:0.9264, 284912:0.9264, 284913:0.9264
2025-12-16 01:13:39 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 01:13:39 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 01:13:39 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 01:16:18 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='C·∫£nh 2 ng∆∞·ªùi ƒë√†n √¥ng b·∫Øt tay nhau', ocrText='10', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 01:16:18 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 01:16:18 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 01:16:18 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr', 'multimodal'}, Total: 2
2025-12-16 01:16:20 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh 2 ng∆∞·ªùi ƒë√†n √¥ng b·∫Øt tay nhau' ‚Üí 'Scene of two men shaking hands'
2025-12-16 01:16:20 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'Scene of two men shaking hands'
2025-12-16 01:16:20 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): '10'
2025-12-16 01:16:20 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-16 01:16:20 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:16:20 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Scene of two men shaking hands
2025-12-16 01:16:20 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:16:20 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Scene of two men shaking hands
2025-12-16 01:16:20 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:16:20 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Scene of two men shaking hands
2025-12-16 01:16:20 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-16 01:16:20 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-16 01:16:20 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-16 01:16:20 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-16 01:16:20 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: '10'
2025-12-16 01:16:20 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.217s]
2025-12-16 01:16:20 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 597326:0.9810, 131364:0.9596, 60327:0.9592, 274958:0.9375, 42529:0.9271, 702208:0.9269, 702209:0.9269, 702210:0.9269, 702211:0.9269, 702212:0.9269
2025-12-16 01:16:20 - app.routers.search - INFO - [ENSEMBLE] Check: 2 enabled methods, per_method_results keys: ['multimodal', 'ocr']
2025-12-16 01:16:20 - app.routers.search - INFO - [ENSEMBLE] Ensembling 2 methods: {'ocr', 'multimodal'}
2025-12-16 01:16:20 - app.routers.search - INFO - [ENSEMBLE] Final ensemble top results: 597326:0.4905, 131364:0.4798, 60327:0.4796, 274958:0.4687, 42529:0.4636, 702208:0.4635, 702209:0.4635, 702210:0.4635, 702211:0.4635, 702212:0.4635, 60328:0.4609, 680455:0.4395, 264295:0.4336, 264293:0.4255, 530659:0.4255, 530660:0.4255, 540194:0.4255, 60326:0.4249, 264294:0.4167, 530661:0.4167
2025-12-16 01:16:20 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 01:16:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 3 stages
2025-12-16 01:16:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='hai ng∆∞·ªùi ƒë√†n √¥ng b·∫Øt tay  nhau tr∆∞·ªõc t√≤a nh√† c√≥ c·∫£nh c·ª≠a ƒë√°nh s·ªë 10', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:16:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:16:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='web gi·∫£ m·∫°o vietcombank', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:16:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'hai ng∆∞·ªùi ƒë√†n √¥ng b·∫Øt tay  nhau tr∆∞·ªõc t√≤a nh√† c√≥ c·∫£nh c·ª≠a ƒë√°nh s·ªë 10'
2025-12-16 01:16:22 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'hai ng∆∞·ªùi ƒë√†n √¥ng b·∫Øt tay  nhau tr∆∞·ªõc t√≤a nh√† c√≥ c·∫£nh c·ª≠a ƒë√°nh s·ªë 10' ‚Üí 'Two men shake hands in front of a building with a door numbered 10'
2025-12-16 01:16:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'Two men shake hands in front of a building with a door numbered 10'
2025-12-16 01:16:22 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 01:16:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='Two men shake hands in front of a building with a door numbered 10', Q1='Two men shake hands in front of a building with a door numbered 10', Q2='Two men shake hands in front of a building with a door numbered 10'
2025-12-16 01:16:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 01:16:22 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 01:16:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: 'web gi·∫£ m·∫°o vietcombank'
2025-12-16 01:16:22 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 3 has no enabled methods
2025-12-16 01:16:22 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='2 ng∆∞·ªùi ƒë√†n √¥ng b·∫Øt tay nhau tr∆∞·ªõc t√≤a nh√† c√≥ c·ª≠a s·ªë 10', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 01:16:22 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-16 01:16:22 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-16 01:16:22 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-16 01:16:22 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:16:22 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Two men shake hands in front of a building with a door numbered 10
2025-12-16 01:16:23 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: '2 ng∆∞·ªùi ƒë√†n √¥ng b·∫Øt tay nhau tr∆∞·ªõc t√≤a nh√† c√≥ c·ª≠a s·ªë 10' ‚Üí 'Two men shake hands in front of the building with door number 10'
2025-12-16 01:16:23 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'Two men shake hands in front of the building with door number 10'
2025-12-16 01:16:23 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-16 01:16:23 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:16:23 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Two men shake hands in front of the building with door number 10
2025-12-16 01:16:23 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:16:23 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Two men shake hands in front of the building with door number 10
2025-12-16 01:16:24 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:16:24 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Two men shake hands in front of a building with a door numbered 10
2025-12-16 01:16:25 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:16:25 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Two men shake hands in front of a building with a door numbered 10
2025-12-16 01:16:25 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-16 01:16:25 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-16 01:16:25 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 92171:1.0000, 304620:0.9014, 337303:0.8890, 186547:0.8852, 313799:0.8376, 92169:0.7774, 121453:0.7497, 99159:0.7340, 204281:0.7288, 394582:0.7285
2025-12-16 01:16:25 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 92171:1.0000, 304620:0.8837, 337303:0.8691, 186547:0.8647, 313799:0.8085, 92169:0.7375, 121453:0.7048, 99159:0.6864, 204281:0.6802, 394582:0.6799
2025-12-16 01:16:25 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-16 01:16:25 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-16 01:16:25 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 01:16:25 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='hai ng∆∞·ªùi ƒëan √¥ng b·∫Øt tay nhau tr∆∞·ªõc nh√† c·∫£nh c·ªßa s·ªë 10', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 01:16:25 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-16 01:16:25 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-16 01:16:25 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-16 01:16:25 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:16:25 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Two men shake hands in front of a building with a door numbered 10
2025-12-16 01:16:26 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'hai ng∆∞·ªùi ƒëan √¥ng b·∫Øt tay nhau tr∆∞·ªõc nh√† c·∫£nh c·ªßa s·ªë 10' ‚Üí 'Two men shook hands in front of the police house of number 10'
2025-12-16 01:16:26 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'Two men shook hands in front of the police house of number 10'
2025-12-16 01:16:26 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-16 01:16:31 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 59292:1.0000, 521850:0.7830, 422379:0.7770, 521722:0.6627, 303923:0.6273, 399340:0.5839, 354965:0.5604, 24531:0.5268, 560111:0.5221, 339442:0.5116
2025-12-16 01:16:31 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 556642:1.0000, 556638:0.9317, 556641:0.8891, 556640:0.7446, 556639:0.5813, 556636:0.5703, 3474:0.5461, 556637:0.4864, 3545:0.4863, 387021:0.4837
2025-12-16 01:16:31 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 318444:1.0000, 318445:0.8665, 635082:0.8147, 318401:0.7320, 614755:0.7050, 459413:0.5935, 568141:0.5891, 470454:0.5504, 318400:0.5429, 556972:0.5091
2025-12-16 01:16:31 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 556642:1.0000, 556638:0.9163, 556641:0.8640, 59292:0.6945, 556640:0.6868, 318401:0.6171, 318444:0.6003, 24531:0.5122, 318445:0.5034, 556639:0.4865
2025-12-16 01:16:31 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-16 01:16:31 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-16 01:16:31 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 01:16:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 01:16:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 3 stages in 10391.55ms
2025-12-16 01:16:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-16 01:16:31 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 3 stages
2025-12-16 01:16:31 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 106 videos with results
2025-12-16 01:16:31 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 0 videos with results
2025-12-16 01:16:31 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 3: 0 videos with results
2025-12-16 01:16:31 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] No common videos across all stages
2025-12-16 01:16:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 0 valid tuples
2025-12-16 01:16:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 01:16:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='hai ng∆∞·ªùi ƒë√†n √¥ng b·∫Øt tay  nhau tr∆∞·ªõc t√≤a nh√† c√≥ c·∫£nh c·ª≠a ƒë√°nh s·ªë 10', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:16:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:16:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'hai ng∆∞·ªùi ƒë√†n √¥ng b·∫Øt tay  nhau tr∆∞·ªõc t√≤a nh√† c√≥ c·∫£nh c·ª≠a ƒë√°nh s·ªë 10'
2025-12-16 01:16:34 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'hai ng∆∞·ªùi ƒë√†n √¥ng b·∫Øt tay  nhau tr∆∞·ªõc t√≤a nh√† c√≥ c·∫£nh c·ª≠a ƒë√°nh s·ªë 10' ‚Üí 'Two men shake hands in front of a building with a door numbered 10'
2025-12-16 01:16:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'Two men shake hands in front of a building with a door numbered 10'
2025-12-16 01:16:34 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 01:16:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='Two men shake hands in front of a building with a door numbered 10', Q1='Two men shake hands in front of a building with a door numbered 10', Q2='Two men shake hands in front of a building with a door numbered 10'
2025-12-16 01:16:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 01:16:34 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 01:16:34 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:16:34 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Two men shake hands in front of a building with a door numbered 10
2025-12-16 01:16:34 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:16:34 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Two men shake hands in front of a building with a door numbered 10
2025-12-16 01:16:34 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:16:34 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Two men shake hands in front of a building with a door numbered 10
2025-12-16 01:16:34 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:16:34 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Two men shake hands in front of a building with a door numbered 10
2025-12-16 01:16:35 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:16:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Two men shake hands in front of a building with a door numbered 10
2025-12-16 01:16:35 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:16:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Two men shake hands in front of a building with a door numbered 10
2025-12-16 01:16:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-16 01:16:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2627.89ms
2025-12-16 01:16:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-16 01:16:36 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 2 stages
2025-12-16 01:16:36 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 101 videos with results
2025-12-16 01:16:36 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 0 videos with results
2025-12-16 01:16:36 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] No common videos across all stages
2025-12-16 01:16:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 0 valid tuples
2025-12-16 01:16:39 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='C·∫£nh 2 ng∆∞·ªùi ƒë√†n √¥ng b·∫Øt tay nhau', ocrText='10', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 01:16:39 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-16 01:16:39 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-16 01:16:39 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-16 01:16:40 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh 2 ng∆∞·ªùi ƒë√†n √¥ng b·∫Øt tay nhau' ‚Üí 'Scene of two men shaking hands'
2025-12-16 01:16:40 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'Scene of two men shaking hands'
2025-12-16 01:16:40 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-16 01:16:45 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 241212:1.0000, 202915:0.9167, 68599:0.8691, 165148:0.8415, 227227:0.8379, 204363:0.8220, 68600:0.7361, 593619:0.6959, 93363:0.6927, 594859:0.6280
2025-12-16 01:16:45 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 68600:1.0000, 386935:0.9930, 18610:0.9809, 204363:0.9794, 655221:0.9776, 25470:0.9457, 24609:0.9165, 510142:0.9005, 444582:0.8999, 99141:0.8943
2025-12-16 01:16:45 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 386935:1.0000, 351018:0.9682, 30322:0.9334, 556638:0.9014, 180639:0.8872, 351017:0.8714, 614769:0.8254, 556639:0.7908, 351384:0.7762, 169439:0.7573
2025-12-16 01:16:45 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 68600:1.0000, 386935:0.9784, 68599:0.9745, 204363:0.9653, 241212:0.9510, 227227:0.8438, 165148:0.8059, 93363:0.7151, 100641:0.7067, 556638:0.7065
2025-12-16 01:16:45 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-16 01:16:45 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-16 01:16:45 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 01:16:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 01:16:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='hai ng∆∞·ªùi ƒë√†n √¥ng b·∫Øt tay  nhau tr∆∞·ªõc t√≤a nh√† c√≥ c·∫£nh c·ª≠a ƒë√°nh s·ªë 10', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:16:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:16:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'hai ng∆∞·ªùi ƒë√†n √¥ng b·∫Øt tay  nhau tr∆∞·ªõc t√≤a nh√† c√≥ c·∫£nh c·ª≠a ƒë√°nh s·ªë 10'
2025-12-16 01:16:46 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'hai ng∆∞·ªùi ƒë√†n √¥ng b·∫Øt tay  nhau tr∆∞·ªõc t√≤a nh√† c√≥ c·∫£nh c·ª≠a ƒë√°nh s·ªë 10' ‚Üí 'Two men shake hands in front of a building with a door numbered 10'
2025-12-16 01:16:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'Two men shake hands in front of a building with a door numbered 10'
2025-12-16 01:16:46 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 01:16:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='Two men shake hands in front of a building with a door numbered 10', Q1='Two men shake hands in front of a building with a door numbered 10', Q2='Two men shake hands in front of a building with a door numbered 10'
2025-12-16 01:16:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 01:16:46 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 01:16:46 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:16:46 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Two men shake hands in front of a building with a door numbered 10
2025-12-16 01:16:46 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:16:46 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Two men shake hands in front of a building with a door numbered 10
2025-12-16 01:16:46 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:16:46 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Two men shake hands in front of a building with a door numbered 10
2025-12-16 01:16:46 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:16:46 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Two men shake hands in front of a building with a door numbered 10
2025-12-16 01:16:47 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:16:47 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Two men shake hands in front of a building with a door numbered 10
2025-12-16 01:16:47 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:16:47 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Two men shake hands in front of a building with a door numbered 10
2025-12-16 01:16:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-16 01:16:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2359.22ms
2025-12-16 01:16:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 01:16:48 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 01:16:48 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 01:17:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 01:17:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='2 ng∆∞·ªùi ƒë√†n √¥ng b·∫Øt tay nhau tr∆∞·ªõc t√≤a nh√† c√≥ c·ª≠a s·ªë 10', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:17:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='con m√®o ƒëang ƒëi ƒë·∫±ng sau song s·∫Øt v√† c√≥ nhi·ªÅu l√° c·ªù nh·ªè ƒë∆∞·ª£c treo', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:17:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: '2 ng∆∞·ªùi ƒë√†n √¥ng b·∫Øt tay nhau tr∆∞·ªõc t√≤a nh√† c√≥ c·ª≠a s·ªë 10'
2025-12-16 01:17:31 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: '2 ng∆∞·ªùi ƒë√†n √¥ng b·∫Øt tay nhau tr∆∞·ªõc t√≤a nh√† c√≥ c·ª≠a s·ªë 10' ‚Üí 'Two men shake hands in front of the building with door number 10'
2025-12-16 01:17:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'Two men shake hands in front of the building with door number 10'
2025-12-16 01:17:31 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 01:17:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='Two men shake hands in front of the building with door number 10', Q1='Two men shake hands in front of the building with door number 10', Q2='Two men shake hands in front of the building with door number 10'
2025-12-16 01:17:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'con m√®o ƒëang ƒëi ƒë·∫±ng sau song s·∫Øt v√† c√≥ nhi·ªÅu l√° c·ªù nh·ªè ƒë∆∞·ª£c treo'
2025-12-16 01:17:32 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'con m√®o ƒëang ƒëi ƒë·∫±ng sau song s·∫Øt v√† c√≥ nhi·ªÅu l√° c·ªù nh·ªè ƒë∆∞·ª£c treo' ‚Üí 'The cat is walking behind bars and there are many small flags hanging'
2025-12-16 01:17:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'The cat is walking behind bars and there are many small flags hanging'
2025-12-16 01:17:32 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 01:17:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='The cat is walking behind bars and there are many small flags hanging', Q1='The cat is walking behind bars and there are many small flags hanging', Q2='The cat is walking behind bars and there are many small flags hanging'
2025-12-16 01:17:32 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:17:32 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The cat is walking behind bars and there are many small flags hanging
2025-12-16 01:17:32 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:17:32 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The cat is walking behind bars and there are many small flags hanging
2025-12-16 01:17:32 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:17:32 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Two men shake hands in front of the building with door number 10
2025-12-16 01:17:32 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:17:32 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The cat is walking behind bars and there are many small flags hanging
2025-12-16 01:17:34 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:17:34 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The cat is walking behind bars and there are many small flags hanging
2025-12-16 01:17:34 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:17:34 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Two men shake hands in front of the building with door number 10
2025-12-16 01:17:34 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:17:34 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The cat is walking behind bars and there are many small flags hanging
2025-12-16 01:17:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 01:17:34 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:17:34 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Two men shake hands in front of the building with door number 10
2025-12-16 01:17:35 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:17:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Two men shake hands in front of the building with door number 10
2025-12-16 01:17:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 01:17:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 5477.35ms
2025-12-16 01:17:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 01:17:35 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 400 unique ids from 2 stages
2025-12-16 01:17:35 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 400 unique ids
2025-12-16 01:20:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 01:20:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='donald trump ch·ª•p c√πng v·ªõi 3 ng∆∞·ªùi', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:20:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:20:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'donald trump ch·ª•p c√πng v·ªõi 3 ng∆∞·ªùi'
2025-12-16 01:20:11 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'donald trump ch·ª•p c√πng v·ªõi 3 ng∆∞·ªùi' ‚Üí 'Donald Trump took a photo with 3 people'
2025-12-16 01:20:11 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'Donald Trump took a photo with 3 people'
2025-12-16 01:20:12 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 01:20:12 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='Donald Trump took a photo with 3 people', Q1='Donald Trump took a photo with 3 people', Q2='Donald Trump took a photo with 3 people'
2025-12-16 01:20:12 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 01:20:12 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 01:20:13 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:20:13 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Donald Trump took a photo with 3 people
2025-12-16 01:20:14 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:20:14 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Donald Trump took a photo with 3 people
2025-12-16 01:20:14 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:20:14 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Donald Trump took a photo with 3 people
2025-12-16 01:20:16 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 01:20:16 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 5479.33ms
2025-12-16 01:20:16 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 01:20:16 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 01:20:16 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 01:21:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 01:21:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='C·∫£nh 2 ng∆∞·ªùi ƒë√†n √¥ng b·∫Øt tay nhau', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:21:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:21:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'C·∫£nh 2 ng∆∞·ªùi ƒë√†n √¥ng b·∫Øt tay nhau'
2025-12-16 01:21:24 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh 2 ng∆∞·ªùi ƒë√†n √¥ng b·∫Øt tay nhau' ‚Üí 'Scene of two men shaking hands'
2025-12-16 01:21:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'Scene of two men shaking hands'
2025-12-16 01:21:25 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 01:21:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='Scene of two men shaking hands', Q1='Scene of two men shaking hands', Q2='Scene of two men shaking hands'
2025-12-16 01:21:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 01:21:25 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 01:21:26 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:21:26 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:21:26 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Scene of two men shaking hands
2025-12-16 01:21:26 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Scene of two men shaking hands
2025-12-16 01:21:26 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:21:26 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Scene of two men shaking hands
2025-12-16 01:21:26 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:21:26 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Scene of two men shaking hands
2025-12-16 01:21:26 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:21:26 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Scene of two men shaking hands
2025-12-16 01:21:26 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:21:26 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Scene of two men shaking hands
2025-12-16 01:21:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-16 01:21:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2812.57ms
2025-12-16 01:21:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 01:21:27 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 01:21:27 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 01:28:15 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 01:28:15 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='nhi·ªÅu l√¥ h√†ng ƒë∆∞·ª£c th·∫£ t·ª´ tr√™n tr·ªùi', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:28:15 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:28:15 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'nhi·ªÅu l√¥ h√†ng ƒë∆∞·ª£c th·∫£ t·ª´ tr√™n tr·ªùi'
2025-12-16 01:28:16 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'nhi·ªÅu l√¥ h√†ng ƒë∆∞·ª£c th·∫£ t·ª´ tr√™n tr·ªùi' ‚Üí 'Many shipments were dropped from the sky'
2025-12-16 01:28:16 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'Many shipments were dropped from the sky'
2025-12-16 01:28:16 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 01:28:16 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='Many shipments were dropped from the sky', Q1='Many shipments were dropped from the sky', Q2='Many shipments were dropped from the sky'
2025-12-16 01:28:16 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 01:28:16 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 01:28:17 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:28:17 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Many shipments were dropped from the sky
2025-12-16 01:28:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 01:28:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='l√¥ h√†ng th·∫£ t·ª± do', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:28:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:28:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'l√¥ h√†ng th·∫£ t·ª± do'
2025-12-16 01:28:18 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'l√¥ h√†ng th·∫£ t·ª± do' ‚Üí 'free shipment'
2025-12-16 01:28:18 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'free shipment'
2025-12-16 01:28:18 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:28:18 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Many shipments were dropped from the sky
2025-12-16 01:28:18 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 01:28:18 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='free shipment', Q1='free shipment', Q2='free shipment'
2025-12-16 01:28:18 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 01:28:18 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 01:28:18 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:28:18 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: free shipment
2025-12-16 01:28:18 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:28:18 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: free shipment
2025-12-16 01:28:19 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:28:19 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: free shipment
2025-12-16 01:28:19 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:28:19 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: free shipment
2025-12-16 01:28:19 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:28:19 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Many shipments were dropped from the sky
2025-12-16 01:28:20 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:28:20 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: free shipment
2025-12-16 01:28:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 01:28:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 4988.85ms
2025-12-16 01:28:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 01:28:20 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 01:28:20 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 01:28:20 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:28:20 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: free shipment
2025-12-16 01:28:21 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-16 01:28:21 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 4513.30ms
2025-12-16 01:28:21 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 01:28:21 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 01:28:21 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 01:28:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 01:28:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='l√¥ h·∫£ng ƒë∆∞·ª£c th·∫£ t·ª± do tr√™n tr·ªùi', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:28:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:28:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'l√¥ h·∫£ng ƒë∆∞·ª£c th·∫£ t·ª± do tr√™n tr·ªùi'
2025-12-16 01:28:23 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'l√¥ h·∫£ng ƒë∆∞·ª£c th·∫£ t·ª± do tr√™n tr·ªùi' ‚Üí 'The shipment was released freely in the sky'
2025-12-16 01:28:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'The shipment was released freely in the sky'
2025-12-16 01:28:24 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 01:28:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='The shipment was released freely in the sky', Q1='The shipment was released freely in the sky', Q2='The shipment was released freely in the sky'
2025-12-16 01:28:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 01:28:24 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 01:28:24 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:28:24 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The shipment was released freely in the sky
2025-12-16 01:28:25 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:28:25 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The shipment was released freely in the sky
2025-12-16 01:28:25 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:28:25 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The shipment was released freely in the sky
2025-12-16 01:28:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 01:28:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 5241.30ms
2025-12-16 01:28:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 01:28:27 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 01:28:27 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 01:28:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 01:28:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='R·∫•t nhi·ªÅu l√¥ h√†ng ƒë∆∞·ª£c th·∫£ t·ª± do tr√™n tr·ªùi', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:28:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:28:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'R·∫•t nhi·ªÅu l√¥ h√†ng ƒë∆∞·ª£c th·∫£ t·ª± do tr√™n tr·ªùi'
2025-12-16 01:28:54 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'R·∫•t nhi·ªÅu l√¥ h√†ng ƒë∆∞·ª£c th·∫£ t·ª± do tr√™n tr·ªùi' ‚Üí 'Many shipments were released freely in the sky'
2025-12-16 01:28:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'Many shipments were released freely in the sky'
2025-12-16 01:28:55 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 01:28:55 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='Many shipments were released freely in the sky', Q1='Many shipments were released freely in the sky', Q2='Many shipments were released freely in the sky'
2025-12-16 01:28:55 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 01:28:55 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 01:28:55 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:28:55 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Many shipments were released freely in the sky
2025-12-16 01:28:55 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:28:55 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Many shipments were released freely in the sky
2025-12-16 01:28:55 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:28:55 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Many shipments were released freely in the sky
2025-12-16 01:28:55 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:28:55 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Many shipments were released freely in the sky
2025-12-16 01:28:56 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:28:56 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Many shipments were released freely in the sky
2025-12-16 01:28:56 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:28:56 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Many shipments were released freely in the sky
2025-12-16 01:28:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 0
2025-12-16 01:28:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 4290.98ms
2025-12-16 01:28:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 01:28:57 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 01:28:57 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 01:29:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 01:29:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='nhi·ªÅu l√¥ h√†ng ƒë∆∞·ª£c th·∫£ t·ª´ tr√™n tr·ªùi', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:29:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='m·ªôt √¥ng gi√† gi∆° m√≥n h√†ng xung quanh c√≥ nhi·ªÅu ng∆∞·ªùi v√¢y quanh', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:29:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'nhi·ªÅu l√¥ h√†ng ƒë∆∞·ª£c th·∫£ t·ª´ tr√™n tr·ªùi'
2025-12-16 01:29:42 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'nhi·ªÅu l√¥ h√†ng ƒë∆∞·ª£c th·∫£ t·ª´ tr√™n tr·ªùi' ‚Üí 'Many shipments were dropped from the sky'
2025-12-16 01:29:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'Many shipments were dropped from the sky'
2025-12-16 01:29:42 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 01:29:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='Many shipments were dropped from the sky', Q1='Many shipments were dropped from the sky', Q2='Many shipments were dropped from the sky'
2025-12-16 01:29:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'm·ªôt √¥ng gi√† gi∆° m√≥n h√†ng xung quanh c√≥ nhi·ªÅu ng∆∞·ªùi v√¢y quanh'
2025-12-16 01:29:42 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 01:29:42 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:29:42 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Many shipments were dropped from the sky
2025-12-16 01:29:43 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:29:43 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Many shipments were dropped from the sky
2025-12-16 01:29:43 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:29:43 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Many shipments were dropped from the sky
2025-12-16 01:29:44 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 01:29:44 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3897.49ms
2025-12-16 01:29:44 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 01:29:44 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 01:29:44 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 01:29:52 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 01:29:52 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='c·∫£nh m·ªôt c·ª• gi√† r√¢u t√≥c b·∫°c ph∆° gi∆° mmootj m√≤n h√†ng nhi·ªÅu ng∆∞·ªùi xung quanh', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:29:52 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:29:52 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'c·∫£nh m·ªôt c·ª• gi√† r√¢u t√≥c b·∫°c ph∆° gi∆° mmootj m√≤n h√†ng nhi·ªÅu ng∆∞·ªùi xung quanh'
2025-12-16 01:29:53 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c·∫£nh m·ªôt c·ª• gi√† r√¢u t√≥c b·∫°c ph∆° gi∆° mmootj m√≤n h√†ng nhi·ªÅu ng∆∞·ªùi xung quanh' ‚Üí 'The scene of an old man with a white beard and gray hair holding his hand out to many people around him'
2025-12-16 01:29:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'The scene of an old man with a white beard and gray hair holding his hand out to many people around him'
2025-12-16 01:29:53 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 01:29:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='The scene of an old man with a white beard and gray hair holding his hand out to many people around him', Q1='The scene of an old man with a white beard and gray hair holding his hand out to many people around him', Q2='The scene of an old man with a white beard and gray hair holding his hand out to many people around him'
2025-12-16 01:29:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 01:29:53 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 01:29:53 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:29:53 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The scene of an old man with a white beard and gray hair holding his hand out to many people around him
2025-12-16 01:29:53 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:29:53 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The scene of an old man with a white beard and gray hair holding his hand out to many people around him
2025-12-16 01:29:54 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:29:54 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The scene of an old man with a white beard and gray hair holding his hand out to many people around him
2025-12-16 01:29:54 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:29:54 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The scene of an old man with a white beard and gray hair holding his hand out to many people around him
2025-12-16 01:29:55 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:29:55 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The scene of an old man with a white beard and gray hair holding his hand out to many people around him
2025-12-16 01:29:56 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:29:56 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The scene of an old man with a white beard and gray hair holding his hand out to many people around him
2025-12-16 01:29:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-16 01:29:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 5310.30ms
2025-12-16 01:29:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 01:29:57 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 01:29:57 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 01:30:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 01:30:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='√îng c·ª• gi√† r√¢u t√≥c b·∫°c ph∆° gi∆° m·ªôt m√≥n h√†ng xung quang nhi·ªÅu ng∆∞·ªùi v√¢y quanh ', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:30:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:30:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: '√îng c·ª• gi√† r√¢u t√≥c b·∫°c ph∆° gi∆° m·ªôt m√≥n h√†ng xung quang nhi·ªÅu ng∆∞·ªùi v√¢y quanh '
2025-12-16 01:30:01 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: '√îng c·ª• gi√† r√¢u t√≥c b·∫°c ph∆° gi∆° m·ªôt m√≥n h√†ng xung quang nhi·ªÅu ng∆∞·ªùi v√¢y quanh ' ‚Üí 'The old man with white hair and beard held up an item surrounded by many people'
2025-12-16 01:30:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'The old man with white hair and beard held up an item surrounded by many people'
2025-12-16 01:30:02 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 01:30:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='The old man with white hair and beard held up an item surrounded by many people', Q1='The old man with white hair and beard held up an item surrounded by many people', Q2='The old man with white hair and beard held up an item surrounded by many people'
2025-12-16 01:30:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 01:30:02 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 01:30:02 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:30:02 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The old man with white hair and beard held up an item surrounded by many people
2025-12-16 01:30:03 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:30:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The old man with white hair and beard held up an item surrounded by many people
2025-12-16 01:30:03 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:30:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The old man with white hair and beard held up an item surrounded by many people
2025-12-16 01:30:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 01:30:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 4384.88ms
2025-12-16 01:30:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 01:30:04 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 01:30:04 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 01:32:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 01:32:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='sang gay', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:32:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:32:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'sang gay'
2025-12-16 01:32:25 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 01:32:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='sang gay', Q1='sang gay', Q2='sang gay'
2025-12-16 01:32:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 01:32:25 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 01:32:25 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:32:25 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: sang gay
2025-12-16 01:32:26 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:32:26 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: sang gay
2025-12-16 01:32:26 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:32:26 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: sang gay
2025-12-16 01:32:26 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:32:26 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: sang gay
2025-12-16 01:32:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 01:32:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='l√¥ h·∫£ng ƒë∆∞·ª£c th·∫£ t·ª± do tr√™n  tr·ªùi ', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:32:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='c·∫£nh m·ªôt √¥ng gi√† r√¢u t√≥c b·∫°c ph∆° xung quanh l√† ng∆∞·ªùi', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:32:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'l√¥ h·∫£ng ƒë∆∞·ª£c th·∫£ t·ª± do tr√™n  tr·ªùi '
2025-12-16 01:32:27 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:32:27 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: sang gay
2025-12-16 01:32:28 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'l√¥ h·∫£ng ƒë∆∞·ª£c th·∫£ t·ª± do tr√™n  tr·ªùi ' ‚Üí 'The shipment was released freely in the sky'
2025-12-16 01:32:28 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'The shipment was released freely in the sky'
2025-12-16 01:32:28 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 01:32:28 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='The shipment was released freely in the sky', Q1='The shipment was released freely in the sky', Q2='The shipment was released freely in the sky'
2025-12-16 01:32:28 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'c·∫£nh m·ªôt √¥ng gi√† r√¢u t√≥c b·∫°c ph∆° xung quanh l√† ng∆∞·ªùi'
2025-12-16 01:32:28 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:32:28 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: sang gay
2025-12-16 01:32:29 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c·∫£nh m·ªôt √¥ng gi√† r√¢u t√≥c b·∫°c ph∆° xung quanh l√† ng∆∞·ªùi' ‚Üí 'scene of an old man with gray hair and beard surrounded by people'
2025-12-16 01:32:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'scene of an old man with gray hair and beard surrounded by people'
2025-12-16 01:32:30 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 01:32:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='scene of an old man with gray hair and beard surrounded by people', Q1='scene of an old man with gray hair and beard surrounded by people', Q2='scene of an old man with gray hair and beard surrounded by people'
2025-12-16 01:32:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 0
2025-12-16 01:32:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 4811.16ms
2025-12-16 01:32:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 01:32:30 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 01:32:30 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 01:32:30 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:32:30 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The shipment was released freely in the sky
2025-12-16 01:32:30 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:32:30 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: scene of an old man with gray hair and beard surrounded by people
2025-12-16 01:32:30 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:32:30 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: scene of an old man with gray hair and beard surrounded by people
2025-12-16 01:32:30 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:32:30 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: scene of an old man with gray hair and beard surrounded by people
2025-12-16 01:32:31 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:32:31 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The shipment was released freely in the sky
2025-12-16 01:32:31 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:32:31 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The shipment was released freely in the sky
2025-12-16 01:32:31 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:32:31 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: scene of an old man with gray hair and beard surrounded by people
2025-12-16 01:32:31 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:32:31 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: scene of an old man with gray hair and beard surrounded by people
2025-12-16 01:32:31 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:32:31 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: scene of an old man with gray hair and beard surrounded by people
2025-12-16 01:32:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 01:32:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 01:32:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 5626.08ms
2025-12-16 01:32:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 01:32:32 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 400 unique ids from 2 stages
2025-12-16 01:32:32 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 400 unique ids
2025-12-16 01:32:40 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='l√¥ h·∫£ng ƒë∆∞·ª£c th·∫£ t·ª± do tr√™n  tr·ªùi ', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 01:32:40 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-16 01:32:40 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-16 01:32:40 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-16 01:32:42 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'l√¥ h·∫£ng ƒë∆∞·ª£c th·∫£ t·ª± do tr√™n  tr·ªùi' ‚Üí 'The shipment was released freely in the sky'
2025-12-16 01:32:42 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'The shipment was released freely in the sky'
2025-12-16 01:32:42 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-16 01:32:44 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 310294:1.0000, 73980:0.7324, 630919:0.7114, 630918:0.6264, 384725:0.6014, 340126:0.6010, 340133:0.5997, 347020:0.5992, 384724:0.5471, 484634:0.5418
2025-12-16 01:32:44 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 344834:1.0000, 574642:0.8953, 574640:0.8726, 574641:0.7577, 384724:0.7451, 384725:0.6718, 344835:0.6570, 233319:0.6170, 244748:0.6026, 283996:0.5950
2025-12-16 01:32:44 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 233331:1.0000, 233332:0.7888, 637173:0.6234, 340078:0.6058, 233356:0.5643, 320207:0.5203, 233358:0.5007, 662636:0.4656, 340105:0.4534, 340131:0.4510
2025-12-16 01:32:44 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 233331:1.0000, 344834:0.8748, 384724:0.8392, 384725:0.7910, 574642:0.7145, 574640:0.6559, 340133:0.6078, 233356:0.6021, 340126:0.5879, 310294:0.5866
2025-12-16 01:32:44 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-16 01:32:44 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-16 01:32:44 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 01:33:17 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframe/L12/L12_V003/13002.webp
2025-12-16 01:33:17 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframe/L12/L12_V003/13002.webp -> /app/app/data/keyframe/L12/L12_V003/13002.webp
2025-12-16 01:33:17 - root - ERROR - [IMAGE_SEARCH] Failed to get embedding from model server: Request URL is missing an 'http://' or 'https://' protocol.
2025-12-16 01:33:17 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframe/L12/L12_V003/13002.webp
2025-12-16 01:33:17 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframe/L12/L12_V003/13002.webp -> /app/app/data/keyframe/L12/L12_V003/13002.webp
2025-12-16 01:33:17 - root - ERROR - [IMAGE_SEARCH] Failed to get embedding from model server: Request URL is missing an 'http://' or 'https://' protocol.
2025-12-16 01:34:08 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframe/L10/L10_V025/31735.webp
2025-12-16 01:34:08 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframe/L10/L10_V025/31735.webp -> /app/app/data/keyframe/L10/L10_V025/31735.webp
2025-12-16 01:34:08 - root - ERROR - [IMAGE_SEARCH] Failed to get embedding from model server: Request URL is missing an 'http://' or 'https://' protocol.
2025-12-16 01:34:08 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframe/L10/L10_V025/31735.webp
2025-12-16 01:34:08 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframe/L10/L10_V025/31735.webp -> /app/app/data/keyframe/L10/L10_V025/31735.webp
2025-12-16 01:34:08 - root - ERROR - [IMAGE_SEARCH] Failed to get embedding from model server: Request URL is missing an 'http://' or 'https://' protocol.
2025-12-16 01:36:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 01:36:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='B·ªÉ c·∫£ ƒë∆∞·ª£c s∆°n m√†u h·ªìng v√† b√™n c·∫°nh l√† m·ªôt b√¨nh n∆∞·ªõc pha m√†u h·ªìng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:36:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:36:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'B·ªÉ c·∫£ ƒë∆∞·ª£c s∆°n m√†u h·ªìng v√† b√™n c·∫°nh l√† m·ªôt b√¨nh n∆∞·ªõc pha m√†u h·ªìng'
2025-12-16 01:36:20 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'B·ªÉ c·∫£ ƒë∆∞·ª£c s∆°n m√†u h·ªìng v√† b√™n c·∫°nh l√† m·ªôt b√¨nh n∆∞·ªõc pha m√†u h·ªìng' ‚Üí 'The whole tank is painted pink and next to it is a bottle of pink water'
2025-12-16 01:36:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'The whole tank is painted pink and next to it is a bottle of pink water'
2025-12-16 01:36:20 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 01:36:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='The whole tank is painted pink and next to it is a bottle of pink water', Q1='The whole tank is painted pink and next to it is a bottle of pink water', Q2='The whole tank is painted pink and next to it is a bottle of pink water'
2025-12-16 01:36:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 01:36:20 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 01:36:20 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:36:20 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The whole tank is painted pink and next to it is a bottle of pink water
2025-12-16 01:36:20 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:36:20 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The whole tank is painted pink and next to it is a bottle of pink water
2025-12-16 01:36:20 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:36:20 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The whole tank is painted pink and next to it is a bottle of pink water
2025-12-16 01:36:20 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:36:20 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The whole tank is painted pink and next to it is a bottle of pink water
2025-12-16 01:36:22 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:36:22 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The whole tank is painted pink and next to it is a bottle of pink water
2025-12-16 01:36:22 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:36:22 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The whole tank is painted pink and next to it is a bottle of pink water
2025-12-16 01:36:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 01:36:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='m·ªôt b·ªÉ c√° s∆°n m√†u h·ªìng, b√™n c·∫°nh l√† m·ªôt b√¨nh n∆∞·ªõc pha m√†u h·ªìng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:36:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:36:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'm·ªôt b·ªÉ c√° s∆°n m√†u h·ªìng, b√™n c·∫°nh l√† m·ªôt b√¨nh n∆∞·ªõc pha m√†u h·ªìng'
2025-12-16 01:36:25 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'm·ªôt b·ªÉ c√° s∆°n m√†u h·ªìng, b√™n c·∫°nh l√† m·ªôt b√¨nh n∆∞·ªõc pha m√†u h·ªìng' ‚Üí 'a pink-painted fish tank, next to a bottle of pink-colored water'
2025-12-16 01:36:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'a pink-painted fish tank, next to a bottle of pink-colored water'
2025-12-16 01:36:25 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 01:36:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='a pink-painted fish tank, next to a bottle of pink-colored water', Q1='a pink-painted fish tank, next to a bottle of pink-colored water', Q2='a pink-painted fish tank, next to a bottle of pink-colored water'
2025-12-16 01:36:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 01:36:25 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 01:36:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 0
2025-12-16 01:36:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 6383.09ms
2025-12-16 01:36:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 01:36:25 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 01:36:25 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 01:36:25 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:36:25 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: a pink-painted fish tank, next to a bottle of pink-colored water
2025-12-16 01:36:27 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:36:27 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: a pink-painted fish tank, next to a bottle of pink-colored water
2025-12-16 01:36:27 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:36:27 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: a pink-painted fish tank, next to a bottle of pink-colored water
2025-12-16 01:36:29 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='b·∫£n tin n√†y r·∫•t h·ªìng, b·ªÉ c√° ƒë∆∞·ª£c s∆°n m√†u h·ªìng b√¨nh n∆∞·ªõc pha m√†u h·ªìng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 01:36:29 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-16 01:36:29 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-16 01:36:29 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-16 01:36:31 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'b·∫£n tin n√†y r·∫•t h·ªìng, b·ªÉ c√° ƒë∆∞·ª£c s∆°n m√†u h·ªìng b√¨nh n∆∞·ªõc pha m√†u h·ªìng' ‚Üí 'This newsletter is very pink, the fish tank is painted pink and the water tank is mixed with pink'
2025-12-16 01:36:31 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'This newsletter is very pink, the fish tank is painted pink and the water tank is mixed with pink'
2025-12-16 01:36:31 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-16 01:36:31 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:36:31 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: This newsletter is very pink, the fish tank is painted pink and the water tank is mixed with pink
2025-12-16 01:36:31 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:36:31 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: This newsletter is very pink, the fish tank is painted pink and the water tank is mixed with pink
2025-12-16 01:36:31 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:36:31 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: This newsletter is very pink, the fish tank is painted pink and the water tank is mixed with pink
2025-12-16 01:36:31 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-16 01:36:31 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-16 01:36:31 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-16 01:36:31 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-16 01:36:31 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-16 01:36:31 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-16 01:36:31 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 01:36:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 01:36:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 7977.18ms
2025-12-16 01:36:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 01:36:31 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 01:36:31 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 01:36:36 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='b·∫£n tin n√†y r·∫•t h·ªìng, b·ªÉ c√° ƒë∆∞·ª£c s∆°n m√†u h·ªìng b√¨nh n∆∞·ªõc pha m√†u h·ªìng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 01:36:36 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-16 01:36:36 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-16 01:36:36 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-16 01:36:36 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'b·∫£n tin n√†y r·∫•t h·ªìng, b·ªÉ c√° ƒë∆∞·ª£c s∆°n m√†u h·ªìng b√¨nh n∆∞·ªõc pha m√†u h·ªìng' ‚Üí 'This newsletter is very pink, the fish tank is painted pink and the water tank is mixed with pink'
2025-12-16 01:36:36 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'This newsletter is very pink, the fish tank is painted pink and the water tank is mixed with pink'
2025-12-16 01:36:36 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-16 01:36:41 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 313770:1.0000, 103354:0.7238, 313769:0.7154, 313751:0.6681, 313776:0.6619, 292875:0.6294, 292874:0.6293, 23908:0.6252, 77554:0.5917, 38094:0.5887
2025-12-16 01:36:41 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 38082:1.0000, 385096:0.6662, 38083:0.6474, 38084:0.6295, 385097:0.6262, 38090:0.6196, 166093:0.5900, 292873:0.5883, 30833:0.5737, 292875:0.5464
2025-12-16 01:36:41 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 313726:1.0000, 381183:0.7133, 571303:0.6584, 553333:0.6296, 381180:0.6188, 571302:0.6117, 313725:0.5971, 622729:0.5797, 61293:0.5572, 571301:0.5558
2025-12-16 01:36:41 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 38082:1.0000, 166093:0.5775, 292873:0.5734, 292875:0.5710, 385096:0.5683, 38090:0.5522, 292874:0.5108, 292876:0.5030, 313726:0.4715, 38083:0.4623
2025-12-16 01:36:41 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-16 01:36:41 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-16 01:36:41 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 01:37:11 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 01:37:11 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='m·ªôt b·ªÉ c√° s∆°n m√†u h·ªìng, ', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': True}, objects=[]
2025-12-16 01:37:11 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:37:11 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'm·ªôt b·ªÉ c√° s∆°n m√†u h·ªìng, '
2025-12-16 01:37:13 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'm·ªôt b·ªÉ c√° s∆°n m√†u h·ªìng, ' ‚Üí 'a fish tank painted pink,'
2025-12-16 01:37:13 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'a fish tank painted pink,'
2025-12-16 01:37:13 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 01:37:13 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='a fish tank painted pink,', Q1='a fish tank painted pink,', Q2='a fish tank painted pink,'
2025-12-16 01:37:13 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 01:37:13 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 01:37:13 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:37:13 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: a fish tank painted pink,
2025-12-16 01:37:13 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:37:14 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: a fish tank painted pink,
2025-12-16 01:37:14 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:37:14 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: a fish tank painted pink,
2025-12-16 01:37:14 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:37:14 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: a fish tank painted pink,
2025-12-16 01:37:15 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:37:15 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: a fish tank painted pink,
2025-12-16 01:37:15 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:37:15 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: a fish tank painted pink,
2025-12-16 01:37:16 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-16 01:37:16 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 5226.84ms
2025-12-16 01:37:16 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 01:37:16 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 01:37:16 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 01:37:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 01:37:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='m·ªôt b·ªÉ c√° s∆°n m√†u h·ªìng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': True}, objects=[]
2025-12-16 01:37:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='ch·∫≠u c√¢y m√†u h·ªìng, c√≥ m·ªôt ch·∫≠u c√¢y m√†u tr·∫Øng', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:37:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'm·ªôt b·ªÉ c√° s∆°n m√†u h·ªìng'
2025-12-16 01:37:34 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'm·ªôt b·ªÉ c√° s∆°n m√†u h·ªìng' ‚Üí 'a fish tank painted pink'
2025-12-16 01:37:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'a fish tank painted pink'
2025-12-16 01:37:35 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 01:37:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='a fish tank painted pink', Q1='a fish tank painted pink', Q2='a fish tank painted pink'
2025-12-16 01:37:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'ch·∫≠u c√¢y m√†u h·ªìng, c√≥ m·ªôt ch·∫≠u c√¢y m√†u tr·∫Øng'
2025-12-16 01:37:35 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 01:37:35 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:37:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: a fish tank painted pink
2025-12-16 01:37:36 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:37:36 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: a fish tank painted pink
2025-12-16 01:37:36 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:37:36 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: a fish tank painted pink
2025-12-16 01:37:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 01:37:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='b·∫£n tin n√†y r·∫•t h·ªìng, b·ªÉ c√° ƒë∆∞·ª£c s∆°n m√†u h·ªìng b√¨nh n∆∞·ªõc pha m√†u h·ªìng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:37:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='ch·∫≠u c√¢y m√†u h·ªìng c√≥ m·ªôt c√¢y m√†u trang 3 b√¥ng hoa', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:37:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'b·∫£n tin n√†y r·∫•t h·ªìng, b·ªÉ c√° ƒë∆∞·ª£c s∆°n m√†u h·ªìng b√¨nh n∆∞·ªõc pha m√†u h·ªìng'
2025-12-16 01:37:37 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'b·∫£n tin n√†y r·∫•t h·ªìng, b·ªÉ c√° ƒë∆∞·ª£c s∆°n m√†u h·ªìng b√¨nh n∆∞·ªõc pha m√†u h·ªìng' ‚Üí 'This newsletter is very pink, the fish tank is painted pink and the water tank is mixed with pink'
2025-12-16 01:37:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'This newsletter is very pink, the fish tank is painted pink and the water tank is mixed with pink'
2025-12-16 01:37:38 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 01:37:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='This newsletter is very pink, the fish tank is painted pink and the water tank is mixed with pink', Q1='This newsletter is very pink, the fish tank is painted pink and the water tank is mixed with pink', Q2='This newsletter is very pink, the fish tank is painted pink and the water tank is mixed with pink'
2025-12-16 01:37:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'ch·∫≠u c√¢y m√†u h·ªìng c√≥ m·ªôt c√¢y m√†u trang 3 b√¥ng hoa'
2025-12-16 01:37:39 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'ch·∫≠u c√¢y m√†u h·ªìng c√≥ m·ªôt c√¢y m√†u trang 3 b√¥ng hoa' ‚Üí 'The pink plant pot has a colored plant with 3 flowers'
2025-12-16 01:37:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'The pink plant pot has a colored plant with 3 flowers'
2025-12-16 01:37:40 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 01:37:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='The pink plant pot has a colored plant with 3 flowers', Q1='The pink plant pot has a colored plant with 3 flowers', Q2='The pink plant pot has a colored plant with 3 flowers'
2025-12-16 01:37:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 01:37:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 7966.10ms
2025-12-16 01:37:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 01:37:40 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 01:37:40 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 01:37:40 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:37:40 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The pink plant pot has a colored plant with 3 flowers
2025-12-16 01:37:40 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:37:40 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: This newsletter is very pink, the fish tank is painted pink and the water tank is mixed with pink
2025-12-16 01:37:40 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:37:40 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: This newsletter is very pink, the fish tank is painted pink and the water tank is mixed with pink
2025-12-16 01:37:40 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:37:40 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The pink plant pot has a colored plant with 3 flowers
2025-12-16 01:37:40 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:37:40 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: This newsletter is very pink, the fish tank is painted pink and the water tank is mixed with pink
2025-12-16 01:37:40 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:37:40 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The pink plant pot has a colored plant with 3 flowers
2025-12-16 01:37:41 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:37:41 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: This newsletter is very pink, the fish tank is painted pink and the water tank is mixed with pink
2025-12-16 01:37:41 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:37:41 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The pink plant pot has a colored plant with 3 flowers
2025-12-16 01:37:42 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:37:42 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The pink plant pot has a colored plant with 3 flowers
2025-12-16 01:37:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 01:37:44 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 0, Q2: 200
2025-12-16 01:37:44 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 8126.13ms
2025-12-16 01:37:44 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 01:37:45 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 397 unique ids from 2 stages
2025-12-16 01:37:45 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 397 unique ids
2025-12-16 01:37:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 01:37:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='ch·∫≠u c√¢y m√†u h·ªìng, c√≥ m·ªôt ch·∫≠u c√¢y m√†u tr·∫Øng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': True}, objects=[]
2025-12-16 01:37:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:37:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'ch·∫≠u c√¢y m√†u h·ªìng, c√≥ m·ªôt ch·∫≠u c√¢y m√†u tr·∫Øng'
2025-12-16 01:37:53 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'ch·∫≠u c√¢y m√†u h·ªìng, c√≥ m·ªôt ch·∫≠u c√¢y m√†u tr·∫Øng' ‚Üí 'Pink plant pot, with a white plant pot'
2025-12-16 01:37:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'Pink plant pot, with a white plant pot'
2025-12-16 01:37:54 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 01:37:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='Pink plant pot, with a white plant pot', Q1='Pink plant pot, with a white plant pot', Q2='Pink plant pot, with a white plant pot'
2025-12-16 01:37:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 01:37:54 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 01:37:54 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:37:54 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Pink plant pot, with a white plant pot
2025-12-16 01:37:54 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:37:54 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Pink plant pot, with a white plant pot
2025-12-16 01:37:54 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:37:54 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Pink plant pot, with a white plant pot
2025-12-16 01:37:54 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:37:54 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Pink plant pot, with a white plant pot
2025-12-16 01:37:55 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:37:55 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Pink plant pot, with a white plant pot
2025-12-16 01:37:55 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:37:55 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Pink plant pot, with a white plant pot
2025-12-16 01:37:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-16 01:37:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 4082.06ms
2025-12-16 01:37:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 01:37:57 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 01:37:57 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 01:38:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 01:38:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='B√™n tr√°i l√† ƒë∆∞·ªùng t√†u, ·ªü gi·ªØa l√† h√†ng c√¢y v√† b√™n ph·∫£i c√≥ m·ªôt cƒÉn nh√† r·∫•t v√†ng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:38:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:38:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'B√™n tr√°i l√† ƒë∆∞·ªùng t√†u, ·ªü gi·ªØa l√† h√†ng c√¢y v√† b√™n ph·∫£i c√≥ m·ªôt cƒÉn nh√† r·∫•t v√†ng'
2025-12-16 01:38:31 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'B√™n tr√°i l√† ƒë∆∞·ªùng t√†u, ·ªü gi·ªØa l√† h√†ng c√¢y v√† b√™n ph·∫£i c√≥ m·ªôt cƒÉn nh√† r·∫•t v√†ng' ‚Üí 'On the left is the train line, in the middle is a row of trees and on the right there is a very yellow house'
2025-12-16 01:38:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'On the left is the train line, in the middle is a row of trees and on the right there is a very yellow house'
2025-12-16 01:38:32 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 01:38:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='On the left is the train line, in the middle is a row of trees and on the right there is a very yellow house', Q1='On the left is the train line, in the middle is a row of trees and on the right there is a very yellow house', Q2='On the left is the train line, in the middle is a row of trees and on the right there is a very yellow house'
2025-12-16 01:38:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 01:38:32 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 01:38:32 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:38:32 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: On the left is the train line, in the middle is a row of trees and on the right there is a very yellow house
2025-12-16 01:38:34 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:38:34 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: On the left is the train line, in the middle is a row of trees and on the right there is a very yellow house
2025-12-16 01:38:35 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:38:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: On the left is the train line, in the middle is a row of trees and on the right there is a very yellow house
2025-12-16 01:38:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 01:38:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 5459.75ms
2025-12-16 01:38:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 01:38:35 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 01:38:35 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 01:38:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 01:38:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='B·ªÉ c·∫£ ƒë∆∞·ª£c s∆°n m√†u h·ªìng v√† b√™n c·∫°nh l√† m·ªôt b√¨nh n∆∞·ªõc pha m√†u h√¥ng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:38:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='B√™n tr√°i l√† ƒë∆∞·ªùng t√†u, ·ªü gi·ªØa l√† h√†ng c√¢y v√† b√™n ph·∫£i c√≥ m·ªôt cƒÉn nh√† r·∫•t v√†ng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:38:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'B·ªÉ c·∫£ ƒë∆∞·ª£c s∆°n m√†u h·ªìng v√† b√™n c·∫°nh l√† m·ªôt b√¨nh n∆∞·ªõc pha m√†u h√¥ng'
2025-12-16 01:39:01 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'B·ªÉ c·∫£ ƒë∆∞·ª£c s∆°n m√†u h·ªìng v√† b√™n c·∫°nh l√† m·ªôt b√¨nh n∆∞·ªõc pha m√†u h√¥ng' ‚Üí 'The whole tank is painted pink and next to it is a bottle of pink-colored water'
2025-12-16 01:39:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'The whole tank is painted pink and next to it is a bottle of pink-colored water'
2025-12-16 01:39:02 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 01:39:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='The whole tank is painted pink and next to it is a bottle of pink-colored water', Q1='The whole tank is painted pink and next to it is a bottle of pink-colored water', Q2='The whole tank is painted pink and next to it is a bottle of pink-colored water'
2025-12-16 01:39:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'B√™n tr√°i l√† ƒë∆∞·ªùng t√†u, ·ªü gi·ªØa l√† h√†ng c√¢y v√† b√™n ph·∫£i c√≥ m·ªôt cƒÉn nh√† r·∫•t v√†ng'
2025-12-16 01:39:02 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'B√™n tr√°i l√† ƒë∆∞·ªùng t√†u, ·ªü gi·ªØa l√† h√†ng c√¢y v√† b√™n ph·∫£i c√≥ m·ªôt cƒÉn nh√† r·∫•t v√†ng' ‚Üí 'On the left is the train line, in the middle is a row of trees and on the right there is a very yellow house'
2025-12-16 01:39:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'On the left is the train line, in the middle is a row of trees and on the right there is a very yellow house'
2025-12-16 01:39:03 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 01:39:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='On the left is the train line, in the middle is a row of trees and on the right there is a very yellow house', Q1='On the left is the train line, in the middle is a row of trees and on the right there is a very yellow house', Q2='On the left is the train line, in the middle is a row of trees and on the right there is a very yellow house'
2025-12-16 01:39:04 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:39:04 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The whole tank is painted pink and next to it is a bottle of pink-colored water
2025-12-16 01:39:04 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:39:04 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: On the left is the train line, in the middle is a row of trees and on the right there is a very yellow house
2025-12-16 01:39:04 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:39:04 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The whole tank is painted pink and next to it is a bottle of pink-colored water
2025-12-16 01:39:05 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:39:05 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: On the left is the train line, in the middle is a row of trees and on the right there is a very yellow house
2025-12-16 01:39:05 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:39:05 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The whole tank is painted pink and next to it is a bottle of pink-colored water
2025-12-16 01:39:05 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:39:05 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The whole tank is painted pink and next to it is a bottle of pink-colored water
2025-12-16 01:39:05 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:39:05 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: On the left is the train line, in the middle is a row of trees and on the right there is a very yellow house
2025-12-16 01:39:05 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:39:05 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: On the left is the train line, in the middle is a row of trees and on the right there is a very yellow house
2025-12-16 01:39:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 01:39:06 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:39:06 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The whole tank is painted pink and next to it is a bottle of pink-colored water
2025-12-16 01:39:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 0
2025-12-16 01:39:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 7147.58ms
2025-12-16 01:39:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 01:39:06 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 400 unique ids from 2 stages
2025-12-16 01:39:06 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 400 unique ids
2025-12-16 01:39:11 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 3 stages
2025-12-16 01:39:11 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='b·∫£n tin n√†y r·∫•t h·ªìng, b·ªÉ c√° ƒë∆∞·ª£c s∆°n m√†u h·ªìng b√¨nh n∆∞·ªõc pha m√†u h·ªìng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:39:11 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='ch·∫≠u c√¢y m√†u h·ªìng c√≥ m·ªôt c√¢y m√†u trang 3 b√¥ng hoa', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:39:11 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='b√™n tr√°i l√† ƒë∆∞·ªùng t√†u gi·ªØa h√†ng c√¢y b√™n ph·∫£i c√≥ nhi·ªÅu nh√† v√†ng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:39:11 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'b·∫£n tin n√†y r·∫•t h·ªìng, b·ªÉ c√° ƒë∆∞·ª£c s∆°n m√†u h·ªìng b√¨nh n∆∞·ªõc pha m√†u h·ªìng'
2025-12-16 01:39:12 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'b·∫£n tin n√†y r·∫•t h·ªìng, b·ªÉ c√° ƒë∆∞·ª£c s∆°n m√†u h·ªìng b√¨nh n∆∞·ªõc pha m√†u h·ªìng' ‚Üí 'This newsletter is very pink, the fish tank is painted pink and the water tank is mixed with pink'
2025-12-16 01:39:12 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'This newsletter is very pink, the fish tank is painted pink and the water tank is mixed with pink'
2025-12-16 01:39:13 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 01:39:13 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='This newsletter is very pink, the fish tank is painted pink and the water tank is mixed with pink', Q1='This newsletter is very pink, the fish tank is painted pink and the water tank is mixed with pink', Q2='This newsletter is very pink, the fish tank is painted pink and the water tank is mixed with pink'
2025-12-16 01:39:13 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'ch·∫≠u c√¢y m√†u h·ªìng c√≥ m·ªôt c√¢y m√†u trang 3 b√¥ng hoa'
2025-12-16 01:39:13 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'ch·∫≠u c√¢y m√†u h·ªìng c√≥ m·ªôt c√¢y m√†u trang 3 b√¥ng hoa' ‚Üí 'The pink plant pot has a colored plant with 3 flowers'
2025-12-16 01:39:13 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'The pink plant pot has a colored plant with 3 flowers'
2025-12-16 01:39:14 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 01:39:14 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='The pink plant pot has a colored plant with 3 flowers', Q1='The pink plant pot has a colored plant with 3 flowers', Q2='The pink plant pot has a colored plant with 3 flowers'
2025-12-16 01:39:14 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: 'b√™n tr√°i l√† ƒë∆∞·ªùng t√†u gi·ªØa h√†ng c√¢y b√™n ph·∫£i c√≥ nhi·ªÅu nh√† v√†ng'
2025-12-16 01:39:15 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'b√™n tr√°i l√† ƒë∆∞·ªùng t√†u gi·ªØa h√†ng c√¢y b√™n ph·∫£i c√≥ nhi·ªÅu nh√† v√†ng' ‚Üí 'On the left is the train track between rows of trees, on the right there are many yellow houses'
2025-12-16 01:39:15 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 translated: 'On the left is the train track between rows of trees, on the right there are many yellow houses'
2025-12-16 01:39:16 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 01:39:16 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 queries: Q0='On the left is the train track between rows of trees, on the right there are many yellow houses', Q1='On the left is the train track between rows of trees, on the right there are many yellow houses', Q2='On the left is the train track between rows of trees, on the right there are many yellow houses'
2025-12-16 01:39:17 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:39:17 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: This newsletter is very pink, the fish tank is painted pink and the water tank is mixed with pink
2025-12-16 01:39:17 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:39:17 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: This newsletter is very pink, the fish tank is painted pink and the water tank is mixed with pink
2025-12-16 01:39:17 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:39:17 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: On the left is the train track between rows of trees, on the right there are many yellow houses
2025-12-16 01:39:17 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:39:17 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The pink plant pot has a colored plant with 3 flowers
2025-12-16 01:39:17 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:39:17 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: On the left is the train track between rows of trees, on the right there are many yellow houses
2025-12-16 01:39:18 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:39:18 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The pink plant pot has a colored plant with 3 flowers
2025-12-16 01:39:18 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:39:18 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: This newsletter is very pink, the fish tank is painted pink and the water tank is mixed with pink
2025-12-16 01:39:18 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:39:18 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: This newsletter is very pink, the fish tank is painted pink and the water tank is mixed with pink
2025-12-16 01:39:18 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:39:18 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The pink plant pot has a colored plant with 3 flowers
2025-12-16 01:39:18 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:39:18 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: On the left is the train track between rows of trees, on the right there are many yellow houses
2025-12-16 01:39:18 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:39:18 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The pink plant pot has a colored plant with 3 flowers
2025-12-16 01:39:18 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:39:18 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 01:39:18 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: This newsletter is very pink, the fish tank is painted pink and the water tank is mixed with pink
2025-12-16 01:39:18 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:39:18 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: This newsletter is very pink, the fish tank is painted pink and the water tank is mixed with pink
2025-12-16 01:39:18 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-16 01:39:19 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:39:19 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: On the left is the train track between rows of trees, on the right there are many yellow houses
2025-12-16 01:39:19 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:39:19 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: On the left is the train track between rows of trees, on the right there are many yellow houses
2025-12-16 01:39:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 01:39:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 3 stages in 7405.39ms
2025-12-16 01:39:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 01:39:19 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 594 unique ids from 3 stages
2025-12-16 01:39:19 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 594 unique ids
2025-12-16 01:41:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 01:41:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='meo meo', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:41:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:41:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'meo meo'
2025-12-16 01:41:46 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 01:41:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='meo meo', Q1='meo meo', Q2='meo meo'
2025-12-16 01:41:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 01:41:46 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 01:41:47 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:41:47 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: meo meo
2025-12-16 01:41:48 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:41:48 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: meo meo
2025-12-16 01:41:51 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:41:51 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: meo meo
2025-12-16 01:41:51 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 01:41:51 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 6060.84ms
2025-12-16 01:41:51 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 01:41:51 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 01:41:51 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 01:43:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 01:43:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='trong m√°y bay, th·∫•y c·ª≠a m√°y bay bung ra', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:43:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:43:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'trong m√°y bay, th·∫•y c·ª≠a m√°y bay bung ra'
2025-12-16 01:43:08 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'trong m√°y bay, th·∫•y c·ª≠a m√°y bay bung ra' ‚Üí 'Inside the plane, the plane door opened'
2025-12-16 01:43:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'Inside the plane, the plane door opened'
2025-12-16 01:43:09 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 01:43:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='Inside the plane, the plane door opened', Q1='Inside the plane, the plane door opened', Q2='Inside the plane, the plane door opened'
2025-12-16 01:43:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 01:43:09 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 01:43:09 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:43:09 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Inside the plane, the plane door opened
2025-12-16 01:43:09 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:43:09 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Inside the plane, the plane door opened
2025-12-16 01:43:10 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:43:10 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Inside the plane, the plane door opened
2025-12-16 01:43:11 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:43:11 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Inside the plane, the plane door opened
2025-12-16 01:43:11 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:43:11 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Inside the plane, the plane door opened
2025-12-16 01:43:12 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:43:12 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Inside the plane, the plane door opened
2025-12-16 01:43:12 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-16 01:43:12 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 5369.96ms
2025-12-16 01:43:12 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 01:43:12 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 01:43:12 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 01:43:20 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='c·∫£nh quay t·ª´ trong m√°y bay c√≥ th·ªÉ th·∫•y c√°nh c·ª≠a m√°y bay bung ra', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 01:43:20 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-16 01:43:20 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-16 01:43:20 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-16 01:43:21 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c·∫£nh quay t·ª´ trong m√°y bay c√≥ th·ªÉ th·∫•y c√°nh c·ª≠a m√°y bay bung ra' ‚Üí 'Footage from inside the plane can be seen when the plane door opens'
2025-12-16 01:43:21 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'Footage from inside the plane can be seen when the plane door opens'
2025-12-16 01:43:21 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-16 01:43:24 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 556497:1.0000, 264390:0.9114, 556506:0.8031, 556501:0.7827, 239182:0.7604, 482771:0.7590, 556503:0.7521, 238052:0.7489, 239598:0.7431, 239590:0.7072
2025-12-16 01:43:24 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 549903:1.0000, 318470:0.8407, 202313:0.8358, 238046:0.8285, 444247:0.8198, 58735:0.7849, 318468:0.7844, 283911:0.7790, 556499:0.7759, 444246:0.7634
2025-12-16 01:43:24 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 556497:1.0000, 238045:0.9617, 556495:0.9608, 32597:0.9437, 184913:0.9419, 523226:0.9348, 283923:0.9190, 296818:0.8990, 239185:0.8767, 556496:0.8655
2025-12-16 01:43:24 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 318470:1.0000, 318468:0.9853, 318471:0.9176, 318467:0.8750, 238041:0.8677, 238040:0.8669, 318469:0.8664, 318466:0.8459, 556499:0.8111, 238046:0.8043
2025-12-16 01:43:24 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-16 01:43:24 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-16 01:43:24 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 01:43:24 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='T·ª´ b√™n trong m√°y bay, th·∫•y c√°nh b·ªã tung ra', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 01:43:24 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-16 01:43:24 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-16 01:43:24 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-16 01:43:25 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'T·ª´ b√™n trong m√°y bay, th·∫•y c√°nh b·ªã tung ra' ‚Üí 'From inside the plane, the wings were seen to be blown off'
2025-12-16 01:43:25 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'From inside the plane, the wings were seen to be blown off'
2025-12-16 01:43:25 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-16 01:43:26 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:43:26 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: From inside the plane, the wings were seen to be blown off
2025-12-16 01:43:27 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:43:27 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: From inside the plane, the wings were seen to be blown off
2025-12-16 01:43:28 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:43:28 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: From inside the plane, the wings were seen to be blown off
2025-12-16 01:43:28 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-16 01:43:28 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-16 01:43:28 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-16 01:43:28 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-16 01:43:28 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-16 01:43:28 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-16 01:43:28 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 01:43:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 01:43:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='T·ª´ b√™n trong m√°y bay, th·∫•y c√°nh b·ªã tung ra', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:43:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:43:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'T·ª´ b√™n trong m√°y bay, th·∫•y c√°nh b·ªã tung ra'
2025-12-16 01:43:33 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'T·ª´ b√™n trong m√°y bay, th·∫•y c√°nh b·ªã tung ra' ‚Üí 'From inside the plane, the wings were seen to be blown off'
2025-12-16 01:43:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'From inside the plane, the wings were seen to be blown off'
2025-12-16 01:43:34 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 01:43:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='From inside the plane, the wings were seen to be blown off', Q1='From inside the plane, the wings were seen to be blown off', Q2='From inside the plane, the wings were seen to be blown off'
2025-12-16 01:43:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 01:43:34 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 01:43:34 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:43:34 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: From inside the plane, the wings were seen to be blown off
2025-12-16 01:43:35 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:43:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: From inside the plane, the wings were seen to be blown off
2025-12-16 01:43:36 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:43:36 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: From inside the plane, the wings were seen to be blown off
2025-12-16 01:43:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 01:43:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3548.81ms
2025-12-16 01:43:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 01:43:36 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 01:43:36 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 01:43:43 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 01:43:43 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='c·∫£nh quay t·ª´ trong m√°y bay c·ª≠a m√°y bay bung ra', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:43:43 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:43:43 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'c·∫£nh quay t·ª´ trong m√°y bay c·ª≠a m√°y bay bung ra'
2025-12-16 01:43:45 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c·∫£nh quay t·ª´ trong m√°y bay c·ª≠a m√°y bay bung ra' ‚Üí 'scene shot from inside the plane the plane door opened'
2025-12-16 01:43:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'scene shot from inside the plane the plane door opened'
2025-12-16 01:43:45 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 01:43:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='scene shot from inside the plane the plane door opened', Q1='scene shot from inside the plane the plane door opened', Q2='scene shot from inside the plane the plane door opened'
2025-12-16 01:43:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 01:43:45 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 01:43:46 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:43:46 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:43:46 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: scene shot from inside the plane the plane door opened
2025-12-16 01:43:46 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: scene shot from inside the plane the plane door opened
2025-12-16 01:43:46 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:43:46 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: scene shot from inside the plane the plane door opened
2025-12-16 01:43:47 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:43:47 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: scene shot from inside the plane the plane door opened
2025-12-16 01:43:47 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:43:47 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: scene shot from inside the plane the plane door opened
2025-12-16 01:43:47 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:43:47 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: scene shot from inside the plane the plane door opened
2025-12-16 01:43:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-16 01:43:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 4359.42ms
2025-12-16 01:43:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 01:43:47 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 01:43:47 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 01:43:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 01:43:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='T·ª´ b√™n trong m√°y bay, th·∫•y c√°nh c·ª≠a b·ªã tung ra', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:43:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:43:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'T·ª´ b√™n trong m√°y bay, th·∫•y c√°nh c·ª≠a b·ªã tung ra'
2025-12-16 01:43:48 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'T·ª´ b√™n trong m√°y bay, th·∫•y c√°nh c·ª≠a b·ªã tung ra' ‚Üí 'From inside the plane, the door was seen being thrown open'
2025-12-16 01:43:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'From inside the plane, the door was seen being thrown open'
2025-12-16 01:43:49 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 01:43:49 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='From inside the plane, the door was seen being thrown open', Q1='From inside the plane, the door was seen being thrown open', Q2='From inside the plane, the door was seen being thrown open'
2025-12-16 01:43:49 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 01:43:49 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 01:43:49 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:43:49 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: From inside the plane, the door was seen being thrown open
2025-12-16 01:43:50 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:43:50 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: From inside the plane, the door was seen being thrown open
2025-12-16 01:43:51 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:43:51 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: From inside the plane, the door was seen being thrown open
2025-12-16 01:43:51 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 01:43:51 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3569.10ms
2025-12-16 01:43:51 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 01:43:51 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 01:43:51 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 01:50:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 01:50:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='nhi·ªÅu ng∆∞·ªùi ƒë√†n √¥ng l·ª±c l∆∞·ª°ng khoe c∆° b·∫Øp sƒÉn ch·∫Øc c·ªßa m√¨nh, c√≥ 4 ng∆∞·ªùi ƒë√†n √¥ng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:50:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:50:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'nhi·ªÅu ng∆∞·ªùi ƒë√†n √¥ng l·ª±c l∆∞·ª°ng khoe c∆° b·∫Øp sƒÉn ch·∫Øc c·ªßa m√¨nh, c√≥ 4 ng∆∞·ªùi ƒë√†n √¥ng'
2025-12-16 01:50:37 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'nhi·ªÅu ng∆∞·ªùi ƒë√†n √¥ng l·ª±c l∆∞·ª°ng khoe c∆° b·∫Øp sƒÉn ch·∫Øc c·ªßa m√¨nh, c√≥ 4 ng∆∞·ªùi ƒë√†n √¥ng' ‚Üí 'many muscular men showed off their toned muscles, there were 4 men'
2025-12-16 01:50:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'many muscular men showed off their toned muscles, there were 4 men'
2025-12-16 01:50:37 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 01:50:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='many muscular men showed off their toned muscles, there were 4 men', Q1='many muscular men showed off their toned muscles, there were 4 men', Q2='many muscular men showed off their toned muscles, there were 4 men'
2025-12-16 01:50:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 01:50:37 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 01:50:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 01:50:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query=' C·∫£nh ·ªü ƒë·∫ßu l√† nhi·ªÅu ng∆∞·ªùi ƒë√†n √¥ng l·ª±c l∆∞·ª°ng khoe c∆° b·∫Øp sƒÉn ch·∫Øc c·ªßa m√¨nh, c√≥ 4 ng∆∞·ªùi ƒë√†n √¥ng nh∆∞ v·∫≠y ', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:50:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:50:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: ' C·∫£nh ·ªü ƒë·∫ßu l√† nhi·ªÅu ng∆∞·ªùi ƒë√†n √¥ng l·ª±c l∆∞·ª°ng khoe c∆° b·∫Øp sƒÉn ch·∫Øc c·ªßa m√¨nh, c√≥ 4 ng∆∞·ªùi ƒë√†n √¥ng nh∆∞ v·∫≠y '
2025-12-16 01:50:37 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:50:37 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:50:37 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: many muscular men showed off their toned muscles, there were 4 men
2025-12-16 01:50:37 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: many muscular men showed off their toned muscles, there were 4 men
2025-12-16 01:50:38 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: ' C·∫£nh ·ªü ƒë·∫ßu l√† nhi·ªÅu ng∆∞·ªùi ƒë√†n √¥ng l·ª±c l∆∞·ª°ng khoe c∆° b·∫Øp sƒÉn ch·∫Øc c·ªßa m√¨nh, c√≥ 4 ng∆∞·ªùi ƒë√†n √¥ng nh∆∞ v·∫≠y ' ‚Üí 'The scene at the beginning is of many muscular men showing off their toned muscles, there are 4 such men'
2025-12-16 01:50:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'The scene at the beginning is of many muscular men showing off their toned muscles, there are 4 such men'
2025-12-16 01:50:38 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:50:38 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: many muscular men showed off their toned muscles, there were 4 men
2025-12-16 01:50:38 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:50:38 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: many muscular men showed off their toned muscles, there were 4 men
2025-12-16 01:50:38 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 01:50:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='The scene at the beginning is of many muscular men showing off their toned muscles, there are 4 such men', Q1='The scene at the beginning is of many muscular men showing off their toned muscles, there are 4 such men', Q2='The scene at the beginning is of many muscular men showing off their toned muscles, there are 4 such men'
2025-12-16 01:50:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 01:50:38 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 01:50:38 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:50:38 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The scene at the beginning is of many muscular men showing off their toned muscles, there are 4 such men
2025-12-16 01:50:38 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:50:38 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The scene at the beginning is of many muscular men showing off their toned muscles, there are 4 such men
2025-12-16 01:50:39 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:50:39 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The scene at the beginning is of many muscular men showing off their toned muscles, there are 4 such men
2025-12-16 01:50:39 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:50:39 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The scene at the beginning is of many muscular men showing off their toned muscles, there are 4 such men
2025-12-16 01:50:40 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:50:40 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: many muscular men showed off their toned muscles, there were 4 men
2025-12-16 01:50:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 01:50:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3812.70ms
2025-12-16 01:50:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 01:50:41 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 01:50:41 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 01:50:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 0
2025-12-16 01:50:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 5318.90ms
2025-12-16 01:50:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 01:50:41 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 01:50:41 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 01:50:49 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query=' C·∫£nh ·ªü ƒë·∫ßu l√† nhi·ªÅu ng∆∞·ªùi ƒë√†n √¥ng l·ª±c l∆∞·ª°ng khoe c∆° b·∫Øp sƒÉn ch·∫Øc c·ªßa m√¨nh, c√≥ 4 ng∆∞·ªùi ƒë√†n √¥ng nh∆∞ v·∫≠y ', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 01:50:49 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-16 01:50:49 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-16 01:50:49 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-16 01:50:50 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh ·ªü ƒë·∫ßu l√† nhi·ªÅu ng∆∞·ªùi ƒë√†n √¥ng l·ª±c l∆∞·ª°ng khoe c∆° b·∫Øp sƒÉn ch·∫Øc c·ªßa m√¨nh, c√≥ 4 ng∆∞·ªùi ƒë√†n √¥ng nh∆∞ v·∫≠y' ‚Üí 'The scene at the beginning is of many muscular men showing off their toned muscles, there are 4 such men'
2025-12-16 01:50:50 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'The scene at the beginning is of many muscular men showing off their toned muscles, there are 4 such men'
2025-12-16 01:50:50 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-16 01:50:50 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:50:50 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The scene at the beginning is of many muscular men showing off their toned muscles, there are 4 such men
2025-12-16 01:50:50 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:50:50 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The scene at the beginning is of many muscular men showing off their toned muscles, there are 4 such men
2025-12-16 01:50:50 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:50:50 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The scene at the beginning is of many muscular men showing off their toned muscles, there are 4 such men
2025-12-16 01:50:50 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-16 01:50:50 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-16 01:50:50 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-16 01:50:50 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-16 01:50:50 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-16 01:50:50 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-16 01:50:50 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 01:50:55 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query=' C·∫£nh ·ªü ƒë·∫ßu l√† nhi·ªÅu ng∆∞·ªùi ƒë√†n √¥ng l·ª±c l∆∞·ª°ng khoe c∆° b·∫Øp sƒÉn ch·∫Øc c·ªßa m√¨nh, c√≥ 4 ng∆∞·ªùi ƒë√†n √¥ng nh∆∞ v·∫≠y ', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 01:50:55 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-16 01:50:55 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-16 01:50:55 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-16 01:50:55 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh ·ªü ƒë·∫ßu l√† nhi·ªÅu ng∆∞·ªùi ƒë√†n √¥ng l·ª±c l∆∞·ª°ng khoe c∆° b·∫Øp sƒÉn ch·∫Øc c·ªßa m√¨nh, c√≥ 4 ng∆∞·ªùi ƒë√†n √¥ng nh∆∞ v·∫≠y' ‚Üí 'The scene at the beginning is of many muscular men showing off their toned muscles, there are 4 such men'
2025-12-16 01:50:55 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'The scene at the beginning is of many muscular men showing off their toned muscles, there are 4 such men'
2025-12-16 01:50:55 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-16 01:50:57 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 168127:1.0000, 168128:0.9254, 325221:0.8618, 325366:0.8295, 325342:0.7940, 325365:0.7464, 325339:0.7349, 325341:0.7193, 325340:0.6990, 412900:0.6899
2025-12-16 01:50:57 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 168127:1.0000, 325342:0.9226, 168128:0.8062, 325221:0.7827, 380772:0.7602, 325339:0.7532, 325341:0.7384, 325220:0.7295, 325365:0.7066, 222056:0.6180
2025-12-16 01:50:57 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 168127:1.0000, 168128:0.9866, 155759:0.8240, 168102:0.7989, 325366:0.7569, 325336:0.7038, 325335:0.7001, 325365:0.6842, 325218:0.5992, 325337:0.5826
2025-12-16 01:50:57 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 168127:1.0000, 168128:0.8511, 325342:0.7341, 325365:0.6379, 325366:0.6234, 325341:0.6169, 325339:0.5740, 325221:0.5578, 325220:0.5097, 325361:0.4637
2025-12-16 01:50:57 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-16 01:50:57 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-16 01:50:57 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 01:51:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 01:51:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query=' C·∫£nh ·ªü ƒë·∫ßu l√† nhi·ªÅu ng∆∞·ªùi ƒë√†n √¥ng l·ª±c l∆∞·ª°ng khoe c∆° b·∫Øp sƒÉn ch·∫Øc c·ªßa m√¨nh, c√≥ 4 ng∆∞·ªùi ƒë√†n √¥ng nh∆∞ v·∫≠y ', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:51:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query=' sau ƒë√≥ l√† c·∫£nh nhi·ªÅu ng∆∞·ªùi ƒë√†n √¥ng c∆° b·∫Øp c·ªüi tr·∫ßn ƒëang ƒë·ª©ng ch·ª•p h√¨nh c√πng m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o ƒëen c√≥ h√¨nh con ch√≥ ', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:51:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: ' C·∫£nh ·ªü ƒë·∫ßu l√† nhi·ªÅu ng∆∞·ªùi ƒë√†n √¥ng l·ª±c l∆∞·ª°ng khoe c∆° b·∫Øp sƒÉn ch·∫Øc c·ªßa m√¨nh, c√≥ 4 ng∆∞·ªùi ƒë√†n √¥ng nh∆∞ v·∫≠y '
2025-12-16 01:51:46 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: ' C·∫£nh ·ªü ƒë·∫ßu l√† nhi·ªÅu ng∆∞·ªùi ƒë√†n √¥ng l·ª±c l∆∞·ª°ng khoe c∆° b·∫Øp sƒÉn ch·∫Øc c·ªßa m√¨nh, c√≥ 4 ng∆∞·ªùi ƒë√†n √¥ng nh∆∞ v·∫≠y ' ‚Üí 'The scene at the beginning is of many muscular men showing off their toned muscles, there are 4 such men'
2025-12-16 01:51:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'The scene at the beginning is of many muscular men showing off their toned muscles, there are 4 such men'
2025-12-16 01:51:46 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 01:51:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='The scene at the beginning is of many muscular men showing off their toned muscles, there are 4 such men', Q1='The scene at the beginning is of many muscular men showing off their toned muscles, there are 4 such men', Q2='The scene at the beginning is of many muscular men showing off their toned muscles, there are 4 such men'
2025-12-16 01:51:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ' sau ƒë√≥ l√† c·∫£nh nhi·ªÅu ng∆∞·ªùi ƒë√†n √¥ng c∆° b·∫Øp c·ªüi tr·∫ßn ƒëang ƒë·ª©ng ch·ª•p h√¨nh c√πng m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o ƒëen c√≥ h√¨nh con ch√≥ '
2025-12-16 01:51:47 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: ' sau ƒë√≥ l√† c·∫£nh nhi·ªÅu ng∆∞·ªùi ƒë√†n √¥ng c∆° b·∫Øp c·ªüi tr·∫ßn ƒëang ƒë·ª©ng ch·ª•p h√¨nh c√πng m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o ƒëen c√≥ h√¨nh con ch√≥ ' ‚Üí 'Next is a scene of many shirtless muscular men standing and taking pictures with a man wearing a black shirt with a dog image.'
2025-12-16 01:51:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'Next is a scene of many shirtless muscular men standing and taking pictures with a man wearing a black shirt with a dog image.'
2025-12-16 01:51:47 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 01:51:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='Next is a scene of many shirtless muscular men standing and taking pictures with a man wearing a black shirt with a dog image.', Q1='Next is a scene of many shirtless muscular men standing and taking pictures with a man wearing a black shirt with a dog image.', Q2='Next is a scene of many shirtless muscular men standing and taking pictures with a man wearing a black shirt with a dog image.'
2025-12-16 01:51:48 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:51:48 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The scene at the beginning is of many muscular men showing off their toned muscles, there are 4 such men
2025-12-16 01:51:48 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:51:48 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Next is a scene of many shirtless muscular men standing and taking pictures with a man wearing a black shirt with a dog image.
2025-12-16 01:51:48 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:51:48 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The scene at the beginning is of many muscular men showing off their toned muscles, there are 4 such men
2025-12-16 01:51:49 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:51:49 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The scene at the beginning is of many muscular men showing off their toned muscles, there are 4 such men
2025-12-16 01:51:49 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:51:49 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Next is a scene of many shirtless muscular men standing and taking pictures with a man wearing a black shirt with a dog image.
2025-12-16 01:51:49 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:51:49 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The scene at the beginning is of many muscular men showing off their toned muscles, there are 4 such men
2025-12-16 01:51:50 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:51:50 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The scene at the beginning is of many muscular men showing off their toned muscles, there are 4 such men
2025-12-16 01:51:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 01:51:50 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:51:50 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Next is a scene of many shirtless muscular men standing and taking pictures with a man wearing a black shirt with a dog image.
2025-12-16 01:51:51 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:51:51 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Next is a scene of many shirtless muscular men standing and taking pictures with a man wearing a black shirt with a dog image.
2025-12-16 01:51:51 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 01:51:51 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 5533.47ms
2025-12-16 01:51:51 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 01:51:51 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 343 unique ids from 2 stages
2025-12-16 01:51:51 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 343 unique ids
2025-12-16 01:51:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 01:51:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='nhi·ªÅu ng∆∞·ªùi ƒë√†n √¥ng l·ª±c l∆∞·ª°ng khoe c∆° b·∫Øp sƒÉn ch·∫Øc c·ªßa m√¨nh, c√≥ 4 ng∆∞·ªùi ƒë√†n √¥ng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:51:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='√°o ƒëen h√¨nh con ch√≥', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:51:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'nhi·ªÅu ng∆∞·ªùi ƒë√†n √¥ng l·ª±c l∆∞·ª°ng khoe c∆° b·∫Øp sƒÉn ch·∫Øc c·ªßa m√¨nh, c√≥ 4 ng∆∞·ªùi ƒë√†n √¥ng'
2025-12-16 01:51:55 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'nhi·ªÅu ng∆∞·ªùi ƒë√†n √¥ng l·ª±c l∆∞·ª°ng khoe c∆° b·∫Øp sƒÉn ch·∫Øc c·ªßa m√¨nh, c√≥ 4 ng∆∞·ªùi ƒë√†n √¥ng' ‚Üí 'many muscular men showed off their toned muscles, there were 4 men'
2025-12-16 01:51:55 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'many muscular men showed off their toned muscles, there were 4 men'
2025-12-16 01:51:55 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 01:51:55 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='many muscular men showed off their toned muscles, there were 4 men', Q1='many muscular men showed off their toned muscles, there were 4 men', Q2='many muscular men showed off their toned muscles, there were 4 men'
2025-12-16 01:51:55 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: '√°o ƒëen h√¨nh con ch√≥'
2025-12-16 01:51:55 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 01:51:56 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:51:56 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:51:56 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: many muscular men showed off their toned muscles, there were 4 men
2025-12-16 01:51:56 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: many muscular men showed off their toned muscles, there were 4 men
2025-12-16 01:51:56 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:51:56 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: many muscular men showed off their toned muscles, there were 4 men
2025-12-16 01:51:56 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:51:56 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: many muscular men showed off their toned muscles, there were 4 men
2025-12-16 01:51:57 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:51:57 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: many muscular men showed off their toned muscles, there were 4 men
2025-12-16 01:51:57 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:51:57 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: many muscular men showed off their toned muscles, there were 4 men
2025-12-16 01:51:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-16 01:51:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3012.96ms
2025-12-16 01:51:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 01:51:57 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 01:51:57 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 01:57:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 01:57:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='Ng∆∞·ªùi ƒë√†n √¥ng tr·ªçc ƒë·∫ßu g√¢y tai n·∫°n m·∫∑c √°o s·ªçc', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:57:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:57:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'Ng∆∞·ªùi ƒë√†n √¥ng tr·ªçc ƒë·∫ßu g√¢y tai n·∫°n m·∫∑c √°o s·ªçc'
2025-12-16 01:57:30 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'Ng∆∞·ªùi ƒë√†n √¥ng tr·ªçc ƒë·∫ßu g√¢y tai n·∫°n m·∫∑c √°o s·ªçc' ‚Üí 'The bald man who caused the accident was wearing a striped shirt'
2025-12-16 01:57:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'The bald man who caused the accident was wearing a striped shirt'
2025-12-16 01:57:30 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 01:57:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='The bald man who caused the accident was wearing a striped shirt', Q1='The bald man who caused the accident was wearing a striped shirt', Q2='The bald man who caused the accident was wearing a striped shirt'
2025-12-16 01:57:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 01:57:30 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 01:57:31 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:57:31 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The bald man who caused the accident was wearing a striped shirt
2025-12-16 01:57:32 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:57:32 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The bald man who caused the accident was wearing a striped shirt
2025-12-16 01:57:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 01:57:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query=' Ng∆∞·ªùi ƒë√†n √¥ng tr·ªçc ƒë·∫ßu g√¢y tai n·∫°n m·∫∑c √°o s·ªçc ', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:57:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:57:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: ' Ng∆∞·ªùi ƒë√†n √¥ng tr·ªçc ƒë·∫ßu g√¢y tai n·∫°n m·∫∑c √°o s·ªçc '
2025-12-16 01:57:33 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:57:33 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The bald man who caused the accident was wearing a striped shirt
2025-12-16 01:57:33 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: ' Ng∆∞·ªùi ƒë√†n √¥ng tr·ªçc ƒë·∫ßu g√¢y tai n·∫°n m·∫∑c √°o s·ªçc ' ‚Üí 'The bald man who caused the accident was wearing a striped shirt'
2025-12-16 01:57:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'The bald man who caused the accident was wearing a striped shirt'
2025-12-16 01:57:33 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 01:57:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='The bald man who caused the accident was wearing a striped shirt', Q1='The bald man who caused the accident was wearing a striped shirt', Q2='The bald man who caused the accident was wearing a striped shirt'
2025-12-16 01:57:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 01:57:33 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 01:57:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 01:57:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 4132.03ms
2025-12-16 01:57:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 01:57:33 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 01:57:33 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 01:57:34 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:57:34 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The bald man who caused the accident was wearing a striped shirt
2025-12-16 01:57:34 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 01:57:34 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The bald man who caused the accident was wearing a striped shirt
2025-12-16 01:57:35 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:57:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The bald man who caused the accident was wearing a striped shirt
2025-12-16 01:57:35 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 01:57:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The bald man who caused the accident was wearing a striped shirt
2025-12-16 01:57:36 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:57:36 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The bald man who caused the accident was wearing a striped shirt
2025-12-16 01:57:36 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 01:57:36 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The bald man who caused the accident was wearing a striped shirt
2025-12-16 01:57:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 0
2025-12-16 01:57:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2984.41ms
2025-12-16 01:57:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 01:57:36 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 01:57:36 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 01:57:42 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query=' Ng∆∞·ªùi ƒë√†n √¥ng tr·ªçc ƒë·∫ßu g√¢y tai n·∫°n m·∫∑c √°o s·ªçc ', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 01:57:42 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-16 01:57:42 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-16 01:57:42 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-16 01:57:42 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'Ng∆∞·ªùi ƒë√†n √¥ng tr·ªçc ƒë·∫ßu g√¢y tai n·∫°n m·∫∑c √°o s·ªçc' ‚Üí 'The bald man who caused the accident was wearing a striped shirt'
2025-12-16 01:57:42 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'The bald man who caused the accident was wearing a striped shirt'
2025-12-16 01:57:42 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-16 01:57:44 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 541844:1.0000, 401578:0.9664, 541845:0.9171, 647675:0.9106, 541846:0.8618, 411754:0.8069, 647790:0.7609, 37532:0.7512, 149213:0.7359, 432343:0.7175
2025-12-16 01:57:44 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 545234:1.0000, 204714:0.7445, 543202:0.7069, 52966:0.6784, 106374:0.6610, 288611:0.6358, 543201:0.6021, 516278:0.5833, 532811:0.5740, 328013:0.5682
2025-12-16 01:57:44 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 321919:1.0000, 160856:0.8658, 569351:0.8210, 569350:0.7895, 94598:0.7521, 224463:0.7327, 677288:0.7299, 224464:0.7287, 499726:0.6909, 94597:0.6784
2025-12-16 01:57:44 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 545234:1.0000, 204714:0.6632, 543202:0.6135, 52966:0.5760, 288611:0.5197, 106374:0.4773, 543201:0.4754, 516278:0.4505, 532811:0.4384, 328013:0.4307
2025-12-16 01:57:44 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-16 01:57:44 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-16 01:57:44 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 01:59:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 01:59:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, objects=[]
2025-12-16 01:59:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 01:59:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: ''
2025-12-16 01:59:41 - app.services.gemini.query_augmentation - WARNING - [QUERY AUG] Empty query, returning original
2025-12-16 01:59:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='', Q1='', Q2=''
2025-12-16 01:59:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 01:59:41 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 01:59:41 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.221s]
2025-12-16 01:59:41 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.224s]
2025-12-16 01:59:41 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.222s]
2025-12-16 01:59:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 01:59:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 245.00ms
2025-12-16 01:59:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 01:59:41 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 01:59:41 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 02:01:54 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query=' Bi·∫øt r·∫±ng tai n·∫°n n√†y x·∫£y ra t·∫°i Vƒ©nh Long v√†o ng√†y 18/6 ', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 02:01:54 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-16 02:01:54 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-16 02:01:54 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-16 02:01:54 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'Bi·∫øt r·∫±ng tai n·∫°n n√†y x·∫£y ra t·∫°i Vƒ©nh Long v√†o ng√†y 18/6' ‚Üí 'Know that this accident happened in Vinh Long on June 18'
2025-12-16 02:01:54 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'Know that this accident happened in Vinh Long on June 18'
2025-12-16 02:01:54 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-16 02:01:55 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:01:55 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Know that this accident happened in Vinh Long on June 18
2025-12-16 02:01:55 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:01:55 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Know that this accident happened in Vinh Long on June 18
2025-12-16 02:01:55 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:01:55 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Know that this accident happened in Vinh Long on June 18
2025-12-16 02:01:55 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-16 02:01:55 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-16 02:01:55 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-16 02:01:55 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-16 02:01:55 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-16 02:01:55 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-16 02:01:55 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 02:01:56 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query=' Bi·∫øt r·∫±ng tai n·∫°n n√†y x·∫£y ra t·∫°i Vƒ©nh Long v√†o ng√†y 18/6 ', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 02:01:56 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-16 02:01:56 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-16 02:01:56 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-16 02:01:57 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'Bi·∫øt r·∫±ng tai n·∫°n n√†y x·∫£y ra t·∫°i Vƒ©nh Long v√†o ng√†y 18/6' ‚Üí 'Know that this accident happened in Vinh Long on June 18'
2025-12-16 02:01:57 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'Know that this accident happened in Vinh Long on June 18'
2025-12-16 02:01:57 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-16 02:02:00 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 137693:1.0000, 4181:0.7992, 181116:0.7947, 137692:0.7839, 165304:0.7517, 613178:0.6805, 165301:0.6709, 513871:0.6686, 513869:0.6627, 530411:0.6365
2025-12-16 02:02:00 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 192306:1.0000, 126934:0.8722, 66740:0.8077, 306124:0.7999, 58012:0.7676, 58013:0.7507, 192307:0.6834, 66741:0.6810, 66755:0.6747, 569466:0.6726
2025-12-16 02:02:00 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 521367:1.0000, 521373:0.9893, 521366:0.9774, 538811:0.9588, 493059:0.8708, 396371:0.8637, 536859:0.8545, 631047:0.8506, 521368:0.8430, 530436:0.7812
2025-12-16 02:02:00 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 192306:1.0000, 126934:0.8219, 66740:0.7322, 306124:0.7212, 58013:0.6314, 527950:0.5962, 58012:0.5629, 192307:0.5590, 66741:0.5556, 66755:0.5469
2025-12-16 02:02:00 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-16 02:02:00 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-16 02:02:00 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 02:04:28 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 02:04:28 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='M·ªôt c√¥ g√°i b∆∞·ªõc ra v·ªõi b·ªô ƒë·ªì l∆∞·ªõi tr·∫Øng v√† c·ªï ƒëeo nhi·ªÅu v√≤ng tr·∫Øng

', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:04:28 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:04:28 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'M·ªôt c√¥ g√°i b∆∞·ªõc ra v·ªõi b·ªô ƒë·ªì l∆∞·ªõi tr·∫Øng v√† c·ªï ƒëeo nhi·ªÅu v√≤ng tr·∫Øng

'
2025-12-16 02:04:30 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'M·ªôt c√¥ g√°i b∆∞·ªõc ra v·ªõi b·ªô ƒë·ªì l∆∞·ªõi tr·∫Øng v√† c·ªï ƒëeo nhi·ªÅu v√≤ng tr·∫Øng

' ‚Üí 'A girl stepped out wearing a white mesh outfit and many white necklaces around her neck'
2025-12-16 02:04:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'A girl stepped out wearing a white mesh outfit and many white necklaces around her neck'
2025-12-16 02:04:30 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 02:04:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='A girl stepped out wearing a white mesh outfit and many white necklaces around her neck', Q1='A girl stepped out wearing a white mesh outfit and many white necklaces around her neck', Q2='A girl stepped out wearing a white mesh outfit and many white necklaces around her neck'
2025-12-16 02:04:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 02:04:30 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 02:04:30 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:04:30 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A girl stepped out wearing a white mesh outfit and many white necklaces around her neck
2025-12-16 02:04:30 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:04:30 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A girl stepped out wearing a white mesh outfit and many white necklaces around her neck
2025-12-16 02:04:30 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:04:30 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A girl stepped out wearing a white mesh outfit and many white necklaces around her neck
2025-12-16 02:04:31 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:04:31 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A girl stepped out wearing a white mesh outfit and many white necklaces around her neck
2025-12-16 02:04:33 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:04:33 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A girl stepped out wearing a white mesh outfit and many white necklaces around her neck
2025-12-16 02:04:33 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:04:33 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A girl stepped out wearing a white mesh outfit and many white necklaces around her neck
2025-12-16 02:04:34 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query=' M·ªôt c√¥ g√°i b∆∞·ªõc ra v·ªõi b·ªô ƒë·ªì l∆∞·ªõi tr·∫Øng v√† c·ªï ƒëeo nhi·ªÅu v√≤ng tr·∫Øng ', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 02:04:34 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-16 02:04:34 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-16 02:04:34 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-16 02:04:35 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'M·ªôt c√¥ g√°i b∆∞·ªõc ra v·ªõi b·ªô ƒë·ªì l∆∞·ªõi tr·∫Øng v√† c·ªï ƒëeo nhi·ªÅu v√≤ng tr·∫Øng' ‚Üí 'A girl stepped out wearing a white mesh outfit and many white necklaces around her neck'
2025-12-16 02:04:35 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'A girl stepped out wearing a white mesh outfit and many white necklaces around her neck'
2025-12-16 02:04:35 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-16 02:04:37 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 180899:1.0000, 180898:0.7872, 485100:0.6417, 480397:0.6298, 633284:0.6258, 180897:0.5893, 180904:0.5805, 480394:0.5612, 461399:0.5255, 180903:0.5213
2025-12-16 02:04:37 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 180899:1.0000, 277220:0.9040, 343807:0.8141, 180898:0.7347, 277187:0.7086, 180869:0.6820, 180868:0.6751, 277223:0.6477, 255921:0.6394, 255924:0.6327
2025-12-16 02:04:37 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 180899:1.0000, 180869:0.9953, 180868:0.8770, 480397:0.7712, 661676:0.7701, 180898:0.7234, 480374:0.7218, 44965:0.6956, 309366:0.6441, 661675:0.6393
2025-12-16 02:04:37 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 180899:1.0000, 180898:0.6856, 180869:0.5611, 180868:0.4870, 277220:0.4217, 343807:0.3613, 180903:0.3062, 151282:0.3051, 277187:0.3025, 480397:0.2939
2025-12-16 02:04:37 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-16 02:04:37 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-16 02:04:37 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 02:04:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 02:04:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query=' M·ªôt c√¥ g√°i b∆∞·ªõc ra v·ªõi b·ªô ƒë·ªì l∆∞·ªõi tr·∫Øng v√† c·ªï ƒëeo nhi·ªÅu v√≤ng tr·∫Øng ', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:04:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:04:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: ' M·ªôt c√¥ g√°i b∆∞·ªõc ra v·ªõi b·ªô ƒë·ªì l∆∞·ªõi tr·∫Øng v√† c·ªï ƒëeo nhi·ªÅu v√≤ng tr·∫Øng '
2025-12-16 02:04:37 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: ' M·ªôt c√¥ g√°i b∆∞·ªõc ra v·ªõi b·ªô ƒë·ªì l∆∞·ªõi tr·∫Øng v√† c·ªï ƒëeo nhi·ªÅu v√≤ng tr·∫Øng ' ‚Üí 'A girl stepped out wearing a white mesh outfit and many white necklaces around her neck'
2025-12-16 02:04:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'A girl stepped out wearing a white mesh outfit and many white necklaces around her neck'
2025-12-16 02:04:38 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 02:04:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='A girl stepped out wearing a white mesh outfit and many white necklaces around her neck', Q1='A girl stepped out wearing a white mesh outfit and many white necklaces around her neck', Q2='A girl stepped out wearing a white mesh outfit and many white necklaces around her neck'
2025-12-16 02:04:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 02:04:38 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 02:04:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-16 02:04:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 9859.81ms
2025-12-16 02:04:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 02:04:38 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 02:04:38 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 02:04:38 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:04:38 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A girl stepped out wearing a white mesh outfit and many white necklaces around her neck
2025-12-16 02:04:38 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:04:38 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A girl stepped out wearing a white mesh outfit and many white necklaces around her neck
2025-12-16 02:04:38 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:04:38 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A girl stepped out wearing a white mesh outfit and many white necklaces around her neck
2025-12-16 02:04:38 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:04:38 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A girl stepped out wearing a white mesh outfit and many white necklaces around her neck
2025-12-16 02:04:38 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:04:38 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A girl stepped out wearing a white mesh outfit and many white necklaces around her neck
2025-12-16 02:04:39 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:04:39 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A girl stepped out wearing a white mesh outfit and many white necklaces around her neck
2025-12-16 02:04:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 0
2025-12-16 02:04:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2497.85ms
2025-12-16 02:04:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 02:04:39 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 02:04:39 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 02:04:42 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query=' M·ªôt c√¥ g√°i b∆∞·ªõc ra v·ªõi b·ªô ƒë·ªì l∆∞·ªõi tr·∫Øng v√† c·ªï ƒëeo nhi·ªÅu v√≤ng tr·∫Øng ', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 02:04:42 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-16 02:04:42 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-16 02:04:42 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-16 02:04:43 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'M·ªôt c√¥ g√°i b∆∞·ªõc ra v·ªõi b·ªô ƒë·ªì l∆∞·ªõi tr·∫Øng v√† c·ªï ƒëeo nhi·ªÅu v√≤ng tr·∫Øng' ‚Üí 'A girl stepped out wearing a white mesh outfit and many white necklaces around her neck'
2025-12-16 02:04:43 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'A girl stepped out wearing a white mesh outfit and many white necklaces around her neck'
2025-12-16 02:04:43 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-16 02:04:45 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 180899:1.0000, 180898:0.7872, 485100:0.6417, 480397:0.6298, 633284:0.6258, 180897:0.5893, 180904:0.5805, 480394:0.5612, 461399:0.5255, 180903:0.5213
2025-12-16 02:04:45 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 180899:1.0000, 277220:0.9040, 343807:0.8141, 180898:0.7347, 277187:0.7086, 180869:0.6820, 180868:0.6751, 277223:0.6477, 255921:0.6394, 255924:0.6327
2025-12-16 02:04:45 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 180899:1.0000, 180869:0.9953, 180868:0.8770, 480397:0.7712, 661676:0.7701, 180898:0.7234, 480374:0.7218, 44965:0.6956, 309366:0.6441, 661675:0.6393
2025-12-16 02:04:45 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 180899:1.0000, 180898:0.6856, 180869:0.5611, 180868:0.4870, 277220:0.4217, 343807:0.3613, 180903:0.3062, 151282:0.3051, 277187:0.3025, 480397:0.2939
2025-12-16 02:04:45 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-16 02:04:45 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-16 02:04:45 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 02:10:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 02:10:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='m·ªôt c√¥ g√°i m·∫∑c ƒë·∫ßm t√≠m ƒëeo d√¢y chuy·ªÅn v√† ƒëeo bao gƒÉng tay m√†u ƒëen ƒëang ƒë·ª©ng gi·ªØa m·ªôt n∆°i ƒë√¥ng ng∆∞·ªùi
', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:10:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:10:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'm·ªôt c√¥ g√°i m·∫∑c ƒë·∫ßm t√≠m ƒëeo d√¢y chuy·ªÅn v√† ƒëeo bao gƒÉng tay m√†u ƒëen ƒëang ƒë·ª©ng gi·ªØa m·ªôt n∆°i ƒë√¥ng ng∆∞·ªùi
'
2025-12-16 02:10:59 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'm·ªôt c√¥ g√°i m·∫∑c ƒë·∫ßm t√≠m ƒëeo d√¢y chuy·ªÅn v√† ƒëeo bao gƒÉng tay m√†u ƒëen ƒëang ƒë·ª©ng gi·ªØa m·ªôt n∆°i ƒë√¥ng ng∆∞·ªùi
' ‚Üí 'A girl wearing a purple dress with a necklace and black gloves was standing in the middle of a crowded place'
2025-12-16 02:10:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'A girl wearing a purple dress with a necklace and black gloves was standing in the middle of a crowded place'
2025-12-16 02:11:00 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 02:11:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='A girl wearing a purple dress with a necklace and black gloves was standing in the middle of a crowded place', Q1='A girl wearing a purple dress with a necklace and black gloves was standing in the middle of a crowded place', Q2='A girl wearing a purple dress with a necklace and black gloves was standing in the middle of a crowded place'
2025-12-16 02:11:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 02:11:00 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 02:11:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 02:11:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='C·∫£nh m·ªôt c√¥ g√°i m·∫∑c ƒë·∫ßm t√≠m ƒëeo d√¢y chuy·ªÅn v√† ƒëeo bao gƒÉng tay m√†u ƒëen ƒëang ƒë·ª©ng gi·ªØa m·ªôt n∆°i ƒë√¥ng ng∆∞·ªùi', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:11:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:11:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'C·∫£nh m·ªôt c√¥ g√°i m·∫∑c ƒë·∫ßm t√≠m ƒëeo d√¢y chuy·ªÅn v√† ƒëeo bao gƒÉng tay m√†u ƒëen ƒëang ƒë·ª©ng gi·ªØa m·ªôt n∆°i ƒë√¥ng ng∆∞·ªùi'
2025-12-16 02:11:00 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:11:00 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A girl wearing a purple dress with a necklace and black gloves was standing in the middle of a crowded place
2025-12-16 02:11:00 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:11:00 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A girl wearing a purple dress with a necklace and black gloves was standing in the middle of a crowded place
2025-12-16 02:11:01 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:11:01 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A girl wearing a purple dress with a necklace and black gloves was standing in the middle of a crowded place
2025-12-16 02:11:01 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:11:01 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A girl wearing a purple dress with a necklace and black gloves was standing in the middle of a crowded place
2025-12-16 02:11:01 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh m·ªôt c√¥ g√°i m·∫∑c ƒë·∫ßm t√≠m ƒëeo d√¢y chuy·ªÅn v√† ƒëeo bao gƒÉng tay m√†u ƒëen ƒëang ƒë·ª©ng gi·ªØa m·ªôt n∆°i ƒë√¥ng ng∆∞·ªùi' ‚Üí 'Scene of a girl wearing a purple dress with a necklace and black gloves standing in the middle of a crowded place'
2025-12-16 02:11:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'Scene of a girl wearing a purple dress with a necklace and black gloves standing in the middle of a crowded place'
2025-12-16 02:11:02 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:11:02 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A girl wearing a purple dress with a necklace and black gloves was standing in the middle of a crowded place
2025-12-16 02:11:02 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:11:02 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A girl wearing a purple dress with a necklace and black gloves was standing in the middle of a crowded place
2025-12-16 02:11:02 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 02:11:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='Scene of a girl wearing a purple dress with a necklace and black gloves standing in the middle of a crowded place', Q1='Scene of a girl wearing a purple dress with a necklace and black gloves standing in the middle of a crowded place', Q2='Scene of a girl wearing a purple dress with a necklace and black gloves standing in the middle of a crowded place'
2025-12-16 02:11:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 02:11:02 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 02:11:02 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='C·∫£nh m·ªôt c√¥ g√°i m·∫∑c ƒë·∫ßm t√≠m ƒëeo d√¢y chuy·ªÅn v√† ƒëeo bao gƒÉng tay m√†u ƒëen ƒëang ƒë·ª©ng gi·ªØa m·ªôt n∆°i ƒë√¥ng ng∆∞·ªùi', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 02:11:02 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-16 02:11:02 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-16 02:11:02 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-16 02:11:02 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:11:02 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Scene of a girl wearing a purple dress with a necklace and black gloves standing in the middle of a crowded place
2025-12-16 02:11:03 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh m·ªôt c√¥ g√°i m·∫∑c ƒë·∫ßm t√≠m ƒëeo d√¢y chuy·ªÅn v√† ƒëeo bao gƒÉng tay m√†u ƒëen ƒëang ƒë·ª©ng gi·ªØa m·ªôt n∆°i ƒë√¥ng ng∆∞·ªùi' ‚Üí 'Scene of a girl wearing a purple dress with a necklace and black gloves standing in the middle of a crowded place'
2025-12-16 02:11:03 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'Scene of a girl wearing a purple dress with a necklace and black gloves standing in the middle of a crowded place'
2025-12-16 02:11:03 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-16 02:11:03 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:11:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Scene of a girl wearing a purple dress with a necklace and black gloves standing in the middle of a crowded place
2025-12-16 02:11:03 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:11:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Scene of a girl wearing a purple dress with a necklace and black gloves standing in the middle of a crowded place
2025-12-16 02:11:03 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:11:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Scene of a girl wearing a purple dress with a necklace and black gloves standing in the middle of a crowded place
2025-12-16 02:11:03 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:11:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Scene of a girl wearing a purple dress with a necklace and black gloves standing in the middle of a crowded place
2025-12-16 02:11:04 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-16 02:11:04 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-16 02:11:04 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 586880:1.0000, 586881:0.9644, 586878:0.9509, 580678:0.9464, 586879:0.9301, 580679:0.9258, 638273:0.8961, 388016:0.8432, 659081:0.8342, 586520:0.8308
2025-12-16 02:11:04 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 586880:1.0000, 586881:0.9590, 586878:0.9434, 580678:0.9382, 586879:0.9195, 580679:0.9144, 638273:0.8803, 388016:0.8192, 659081:0.8089, 586520:0.8050
2025-12-16 02:11:04 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-16 02:11:04 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-16 02:11:04 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 02:11:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-16 02:11:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 5386.79ms
2025-12-16 02:11:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 02:11:04 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 02:11:04 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 02:11:04 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:11:04 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Scene of a girl wearing a purple dress with a necklace and black gloves standing in the middle of a crowded place
2025-12-16 02:11:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 02:11:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3736.33ms
2025-12-16 02:11:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 02:11:04 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 02:11:04 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 02:11:15 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query=' C·∫£nh m·ªôt c√¥ g√°i m·∫∑c ƒë·∫ßm t√≠m ƒëeo d√¢y chuy·ªÅn v√† ƒëeo bao gƒÉng tay m√†u ƒëen ƒëang ƒë·ª©ng gi·ªØa m·ªôt n∆°i ƒë√¥ng ng∆∞·ªùi ', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 02:11:15 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-16 02:11:15 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-16 02:11:15 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-16 02:11:15 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh m·ªôt c√¥ g√°i m·∫∑c ƒë·∫ßm t√≠m ƒëeo d√¢y chuy·ªÅn v√† ƒëeo bao gƒÉng tay m√†u ƒëen ƒëang ƒë·ª©ng gi·ªØa m·ªôt n∆°i ƒë√¥ng ng∆∞·ªùi' ‚Üí 'Scene of a girl wearing a purple dress with a necklace and black gloves standing in the middle of a crowded place'
2025-12-16 02:11:15 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'Scene of a girl wearing a purple dress with a necklace and black gloves standing in the middle of a crowded place'
2025-12-16 02:11:15 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-16 02:11:17 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 388017:1.0000, 497758:0.9679, 388016:0.8850, 586878:0.8673, 586879:0.8523, 497752:0.8419, 34472:0.8312, 537810:0.8229, 586880:0.8149, 586881:0.7480
2025-12-16 02:11:17 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 342651:1.0000, 158727:0.7676, 333298:0.7650, 342650:0.7526, 417493:0.7110, 234632:0.6922, 243274:0.6596, 586880:0.6255, 110198:0.5955, 110166:0.5807
2025-12-16 02:11:17 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 586880:1.0000, 586881:0.9644, 586878:0.9509, 580678:0.9464, 586879:0.9301, 580679:0.9258, 638273:0.8961, 388016:0.8432, 659081:0.8342, 586520:0.8308
2025-12-16 02:11:17 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 586880:1.0000, 586879:0.8805, 586878:0.7946, 342651:0.7598, 586881:0.6699, 388017:0.5551, 158727:0.5183, 388016:0.5181, 586520:0.5113, 342650:0.5027
2025-12-16 02:11:17 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-16 02:11:17 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-16 02:11:17 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 02:17:22 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='C·∫£nh nhi·ªÅu mi·∫øng l√≥t d√©p l√≥t gi√†y n·∫±m ng·ªïn ngang', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 02:17:22 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-16 02:17:22 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-16 02:17:22 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-16 02:17:22 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh nhi·ªÅu mi·∫øng l√≥t d√©p l√≥t gi√†y n·∫±m ng·ªïn ngang' ‚Üí 'The scene of many shoe insoles lying around'
2025-12-16 02:17:22 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'The scene of many shoe insoles lying around'
2025-12-16 02:17:22 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-16 02:17:22 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:17:22 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The scene of many shoe insoles lying around
2025-12-16 02:17:23 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:17:23 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The scene of many shoe insoles lying around
2025-12-16 02:17:23 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:17:23 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The scene of many shoe insoles lying around
2025-12-16 02:17:23 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-16 02:17:23 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-16 02:17:23 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-16 02:17:23 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-16 02:17:23 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-16 02:17:23 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-16 02:17:23 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 02:17:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 02:17:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='nhi·ªÅu mi·∫øng l√≥t d√©p l√≥t gi√†y n·∫±m ng·ªïn ngang', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:17:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:17:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'nhi·ªÅu mi·∫øng l√≥t d√©p l√≥t gi√†y n·∫±m ng·ªïn ngang'
2025-12-16 02:17:23 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'nhi·ªÅu mi·∫øng l√≥t d√©p l√≥t gi√†y n·∫±m ng·ªïn ngang' ‚Üí 'Many shoe insoles were lying around'
2025-12-16 02:17:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'Many shoe insoles were lying around'
2025-12-16 02:17:24 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 02:17:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='Many shoe insoles were lying around', Q1='Many shoe insoles were lying around', Q2='Many shoe insoles were lying around'
2025-12-16 02:17:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 02:17:24 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 02:17:24 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:17:24 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Many shoe insoles were lying around
2025-12-16 02:17:25 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='C·∫£nh nhi·ªÅu mi·∫øng l√≥t d√©p l√≥t gi√†y n·∫±m ng·ªïn ngang', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 02:17:25 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-16 02:17:25 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-16 02:17:25 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-16 02:17:25 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:17:25 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Many shoe insoles were lying around
2025-12-16 02:17:26 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:17:26 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Many shoe insoles were lying around
2025-12-16 02:17:26 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh nhi·ªÅu mi·∫øng l√≥t d√©p l√≥t gi√†y n·∫±m ng·ªïn ngang' ‚Üí 'The scene of many shoe insoles lying around'
2025-12-16 02:17:26 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'The scene of many shoe insoles lying around'
2025-12-16 02:17:26 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-16 02:17:26 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:17:26 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The scene of many shoe insoles lying around
2025-12-16 02:17:26 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:17:26 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The scene of many shoe insoles lying around
2025-12-16 02:17:27 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:17:27 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The scene of many shoe insoles lying around
2025-12-16 02:17:27 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-16 02:17:27 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-16 02:17:27 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-16 02:17:27 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-16 02:17:27 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-16 02:17:27 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-16 02:17:27 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 02:17:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 02:17:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3625.01ms
2025-12-16 02:17:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 02:17:27 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 02:17:27 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 02:17:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 02:17:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='C·∫£nh nhi·ªÅu mi·∫øng l√≥t d√©p l√≥t gi√†y n·∫±m ng·ªïn ngang

', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:17:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:17:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'C·∫£nh nhi·ªÅu mi·∫øng l√≥t d√©p l√≥t gi√†y n·∫±m ng·ªïn ngang

'
2025-12-16 02:17:28 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh nhi·ªÅu mi·∫øng l√≥t d√©p l√≥t gi√†y n·∫±m ng·ªïn ngang

' ‚Üí 'The scene of many shoe insoles lying around'
2025-12-16 02:17:28 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'The scene of many shoe insoles lying around'
2025-12-16 02:17:28 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 02:17:28 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='The scene of many shoe insoles lying around', Q1='The scene of many shoe insoles lying around', Q2='The scene of many shoe insoles lying around'
2025-12-16 02:17:28 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 02:17:28 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 02:17:28 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:17:28 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The scene of many shoe insoles lying around
2025-12-16 02:17:29 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='C·∫£nh nhi·ªÅu mi·∫øng l√≥t d√©p l√≥t gi√†y n·∫±m ng·ªïn ngang', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 02:17:29 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-16 02:17:29 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-16 02:17:29 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-16 02:17:29 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:17:29 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The scene of many shoe insoles lying around
2025-12-16 02:17:29 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh nhi·ªÅu mi·∫øng l√≥t d√©p l√≥t gi√†y n·∫±m ng·ªïn ngang' ‚Üí 'The scene of many shoe insoles lying around'
2025-12-16 02:17:29 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'The scene of many shoe insoles lying around'
2025-12-16 02:17:29 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-16 02:17:29 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:17:29 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The scene of many shoe insoles lying around
2025-12-16 02:17:29 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:17:29 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The scene of many shoe insoles lying around
2025-12-16 02:17:30 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:17:30 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The scene of many shoe insoles lying around
2025-12-16 02:17:30 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:17:30 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The scene of many shoe insoles lying around
2025-12-16 02:17:30 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-16 02:17:30 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-16 02:17:30 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-16 02:17:30 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-16 02:17:30 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-16 02:17:30 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-16 02:17:30 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 02:17:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 02:17:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2783.01ms
2025-12-16 02:17:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 02:17:30 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 02:17:30 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 02:17:31 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='C·∫£nh nhi·ªÅu mi·∫øng l√≥t d√©p l√≥t gi√†y n·∫±m ng·ªïn ngang', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 02:17:31 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-16 02:17:31 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-16 02:17:31 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-16 02:17:32 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh nhi·ªÅu mi·∫øng l√≥t d√©p l√≥t gi√†y n·∫±m ng·ªïn ngang' ‚Üí 'The scene of many shoe insoles lying around'
2025-12-16 02:17:32 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'The scene of many shoe insoles lying around'
2025-12-16 02:17:32 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-16 02:17:34 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 145980:1.0000, 497092:0.8562, 497093:0.8030, 249566:0.7812, 22339:0.7191, 249567:0.6378, 106405:0.6279, 287599:0.6194, 497076:0.6155, 497090:0.5895
2025-12-16 02:17:34 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 461560:1.0000, 461561:0.9836, 461570:0.9048, 461559:0.8852, 61310:0.8481, 461569:0.8030, 461562:0.7938, 647638:0.7385, 647639:0.7013, 118228:0.6911
2025-12-16 02:17:34 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 249566:1.0000, 434278:0.9897, 415674:0.9110, 415673:0.8517, 215147:0.8366, 215148:0.8089, 89031:0.8057, 637857:0.7953, 611200:0.7745, 38474:0.7659
2025-12-16 02:17:34 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 497093:1.0000, 461560:0.8523, 461561:0.8329, 461570:0.7394, 22341:0.7182, 461559:0.7161, 249566:0.7011, 61310:0.6722, 461569:0.6187, 461562:0.6078
2025-12-16 02:17:34 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-16 02:17:34 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-16 02:17:34 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 02:17:34 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query=' C·∫£nh nhi·ªÅu mi·∫øng l√≥t d√©p l√≥t gi√†y n·∫±m ng·ªïn ngang ', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 02:17:34 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-16 02:17:34 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-16 02:17:34 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-16 02:17:35 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh nhi·ªÅu mi·∫øng l√≥t d√©p l√≥t gi√†y n·∫±m ng·ªïn ngang' ‚Üí 'The scene of many shoe insoles lying around'
2025-12-16 02:17:35 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'The scene of many shoe insoles lying around'
2025-12-16 02:17:35 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-16 02:17:35 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:17:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The scene of many shoe insoles lying around
2025-12-16 02:17:35 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:17:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The scene of many shoe insoles lying around
2025-12-16 02:17:35 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:17:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The scene of many shoe insoles lying around
2025-12-16 02:17:35 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-16 02:17:35 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-16 02:17:35 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-16 02:17:35 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-16 02:17:35 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-16 02:17:35 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-16 02:17:35 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 02:17:39 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query=' C·∫£nh nhi·ªÅu mi·∫øng l√≥t d√©p l√≥t gi√†y n·∫±m ng·ªïn ngang ', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 02:17:39 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-16 02:17:39 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-16 02:17:39 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-16 02:17:40 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh nhi·ªÅu mi·∫øng l√≥t d√©p l√≥t gi√†y n·∫±m ng·ªïn ngang' ‚Üí 'The scene of many shoe insoles lying around'
2025-12-16 02:17:40 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'The scene of many shoe insoles lying around'
2025-12-16 02:17:40 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-16 02:17:42 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 145980:1.0000, 497092:0.8562, 497093:0.8030, 249566:0.7812, 22339:0.7191, 249567:0.6378, 106405:0.6279, 287599:0.6194, 497076:0.6155, 497090:0.5895
2025-12-16 02:17:42 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 461560:1.0000, 461561:0.9836, 461570:0.9048, 461559:0.8852, 61310:0.8481, 461569:0.8030, 461562:0.7938, 647638:0.7385, 647639:0.7013, 118228:0.6911
2025-12-16 02:17:42 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 249566:1.0000, 434278:0.9897, 415674:0.9110, 415673:0.8517, 215147:0.8366, 215148:0.8089, 89031:0.8057, 637857:0.7953, 611200:0.7745, 38474:0.7659
2025-12-16 02:17:42 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 497093:1.0000, 461560:0.8523, 461561:0.8329, 461570:0.7394, 22341:0.7182, 461559:0.7161, 249566:0.7011, 61310:0.6722, 461569:0.6187, 461562:0.6078
2025-12-16 02:17:42 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-16 02:17:42 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-16 02:17:42 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 02:18:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 02:18:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='C·∫£nh nhi·ªÅu mi·∫øng l√≥t d√©p l√≥t gi√†y n·∫±m ng·ªïn ngang', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:18:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='sao ƒë√≥ c·∫£nh m·ªôt ng∆∞·ªùi ƒë√†n √¥ng b∆∞·ªõc xu·ªëng xe ph√≠a b√™n tr√°i c√≥ m·ªôt ƒë√°m ch√°y

', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:18:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'C·∫£nh nhi·ªÅu mi·∫øng l√≥t d√©p l√≥t gi√†y n·∫±m ng·ªïn ngang'
2025-12-16 02:18:31 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh nhi·ªÅu mi·∫øng l√≥t d√©p l√≥t gi√†y n·∫±m ng·ªïn ngang' ‚Üí 'The scene of many shoe insoles lying around'
2025-12-16 02:18:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'The scene of many shoe insoles lying around'
2025-12-16 02:18:31 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 02:18:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='The scene of many shoe insoles lying around', Q1='The scene of many shoe insoles lying around', Q2='The scene of many shoe insoles lying around'
2025-12-16 02:18:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'sao ƒë√≥ c·∫£nh m·ªôt ng∆∞·ªùi ƒë√†n √¥ng b∆∞·ªõc xu·ªëng xe ph√≠a b√™n tr√°i c√≥ m·ªôt ƒë√°m ch√°y

'
2025-12-16 02:18:31 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'sao ƒë√≥ c·∫£nh m·ªôt ng∆∞·ªùi ƒë√†n √¥ng b∆∞·ªõc xu·ªëng xe ph√≠a b√™n tr√°i c√≥ m·ªôt ƒë√°m ch√°y

' ‚Üí 'Then there was a fire in the scene of a man getting out of the car. On the left side, there was a fire'
2025-12-16 02:18:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'Then there was a fire in the scene of a man getting out of the car. On the left side, there was a fire'
2025-12-16 02:18:32 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 02:18:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='Then there was a fire in the scene of a man getting out of the car. On the left side, there was a fire', Q1='Then there was a fire in the scene of a man getting out of the car. On the left side, there was a fire', Q2='Then there was a fire in the scene of a man getting out of the car. On the left side, there was a fire'
2025-12-16 02:18:32 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:18:32 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The scene of many shoe insoles lying around
2025-12-16 02:18:32 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:18:32 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Then there was a fire in the scene of a man getting out of the car. On the left side, there was a fire
2025-12-16 02:18:32 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:18:32 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The scene of many shoe insoles lying around
2025-12-16 02:18:33 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:18:33 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The scene of many shoe insoles lying around
2025-12-16 02:18:33 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:18:33 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Then there was a fire in the scene of a man getting out of the car. On the left side, there was a fire
2025-12-16 02:18:34 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:18:34 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Then there was a fire in the scene of a man getting out of the car. On the left side, there was a fire
2025-12-16 02:18:34 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:18:34 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The scene of many shoe insoles lying around
2025-12-16 02:18:34 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:18:34 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The scene of many shoe insoles lying around
2025-12-16 02:18:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 02:18:34 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:18:34 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Then there was a fire in the scene of a man getting out of the car. On the left side, there was a fire
2025-12-16 02:18:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 02:18:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 4836.96ms
2025-12-16 02:18:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 02:18:35 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 400 unique ids from 2 stages
2025-12-16 02:18:35 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 400 unique ids
2025-12-16 02:18:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 02:18:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='nhi·ªÅu mi·∫øng l√≥t d√©p l√≥t gi√†y n·∫±m ng·ªïn ngang', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:18:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='c·∫£nh m·ªôt ng∆∞·ªùi ƒë√†n √¥ng b∆∞·ªõc xu·ªëng xe ph√≠a b√™n tr√°i c√≥ m·ªôt ƒë√°m ch√°y', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:18:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'nhi·ªÅu mi·∫øng l√≥t d√©p l√≥t gi√†y n·∫±m ng·ªïn ngang'
2025-12-16 02:18:36 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'nhi·ªÅu mi·∫øng l√≥t d√©p l√≥t gi√†y n·∫±m ng·ªïn ngang' ‚Üí 'Many shoe insoles were lying around'
2025-12-16 02:18:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'Many shoe insoles were lying around'
2025-12-16 02:18:36 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 02:18:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='Many shoe insoles were lying around', Q1='Many shoe insoles were lying around', Q2='Many shoe insoles were lying around'
2025-12-16 02:18:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'c·∫£nh m·ªôt ng∆∞·ªùi ƒë√†n √¥ng b∆∞·ªõc xu·ªëng xe ph√≠a b√™n tr√°i c√≥ m·ªôt ƒë√°m ch√°y'
2025-12-16 02:18:36 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 02:18:37 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:18:37 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Many shoe insoles were lying around
2025-12-16 02:18:37 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:18:37 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Many shoe insoles were lying around
2025-12-16 02:18:38 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:18:38 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Many shoe insoles were lying around
2025-12-16 02:18:38 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:18:38 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Many shoe insoles were lying around
2025-12-16 02:18:38 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:18:38 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Many shoe insoles were lying around
2025-12-16 02:18:39 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:18:39 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Many shoe insoles were lying around
2025-12-16 02:18:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 0
2025-12-16 02:18:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3014.95ms
2025-12-16 02:18:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 02:18:39 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 02:18:39 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 02:18:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 02:18:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='sao ƒë√≥ c·∫£nh m·ªôt ng∆∞·ªùi ƒë√†n √¥ng b∆∞·ªõc xu·ªëng xe ph√≠a b√™n tr√°i c√≥ m·ªôt ƒë√°m ch√°y

', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:18:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:18:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'sao ƒë√≥ c·∫£nh m·ªôt ng∆∞·ªùi ƒë√†n √¥ng b∆∞·ªõc xu·ªëng xe ph√≠a b√™n tr√°i c√≥ m·ªôt ƒë√°m ch√°y

'
2025-12-16 02:18:39 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'sao ƒë√≥ c·∫£nh m·ªôt ng∆∞·ªùi ƒë√†n √¥ng b∆∞·ªõc xu·ªëng xe ph√≠a b√™n tr√°i c√≥ m·ªôt ƒë√°m ch√°y

' ‚Üí 'Then there was a fire in the scene of a man getting out of the car. On the left side, there was a fire'
2025-12-16 02:18:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'Then there was a fire in the scene of a man getting out of the car. On the left side, there was a fire'
2025-12-16 02:18:39 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 02:18:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='Then there was a fire in the scene of a man getting out of the car. On the left side, there was a fire', Q1='Then there was a fire in the scene of a man getting out of the car. On the left side, there was a fire', Q2='Then there was a fire in the scene of a man getting out of the car. On the left side, there was a fire'
2025-12-16 02:18:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 02:18:39 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 02:18:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 02:18:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='nhi·ªÅu mi·∫øng l√≥t d√©p l√≥t gi√†y n·∫±m ng·ªïn ngang', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:18:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='c·∫£nh m·ªôt ng∆∞·ªùi ƒë√†n √¥ng b∆∞·ªõc xu·ªëng xe ph√≠a b√™n tr√°i c√≥ m·ªôt ƒë√°m ch√°y', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:18:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'nhi·ªÅu mi·∫øng l√≥t d√©p l√≥t gi√†y n·∫±m ng·ªïn ngang'
2025-12-16 02:18:40 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'nhi·ªÅu mi·∫øng l√≥t d√©p l√≥t gi√†y n·∫±m ng·ªïn ngang' ‚Üí 'Many shoe insoles were lying around'
2025-12-16 02:18:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'Many shoe insoles were lying around'
2025-12-16 02:18:40 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:18:40 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Then there was a fire in the scene of a man getting out of the car. On the left side, there was a fire
2025-12-16 02:18:40 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 02:18:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='Many shoe insoles were lying around', Q1='Many shoe insoles were lying around', Q2='Many shoe insoles were lying around'
2025-12-16 02:18:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'c·∫£nh m·ªôt ng∆∞·ªùi ƒë√†n √¥ng b∆∞·ªõc xu·ªëng xe ph√≠a b√™n tr√°i c√≥ m·ªôt ƒë√°m ch√°y'
2025-12-16 02:18:41 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:18:41 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Then there was a fire in the scene of a man getting out of the car. On the left side, there was a fire
2025-12-16 02:18:42 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c·∫£nh m·ªôt ng∆∞·ªùi ƒë√†n √¥ng b∆∞·ªõc xu·ªëng xe ph√≠a b√™n tr√°i c√≥ m·ªôt ƒë√°m ch√°y' ‚Üí 'scene of a man getting out of a car on the left side where there is a fire'
2025-12-16 02:18:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'scene of a man getting out of a car on the left side where there is a fire'
2025-12-16 02:18:42 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:18:42 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Then there was a fire in the scene of a man getting out of the car. On the left side, there was a fire
2025-12-16 02:18:42 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 02:18:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='scene of a man getting out of a car on the left side where there is a fire', Q1='scene of a man getting out of a car on the left side where there is a fire', Q2='scene of a man getting out of a car on the left side where there is a fire'
2025-12-16 02:18:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 02:18:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3003.09ms
2025-12-16 02:18:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 02:18:42 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 02:18:42 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 02:18:43 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:18:43 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: scene of a man getting out of a car on the left side where there is a fire
2025-12-16 02:18:43 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:18:43 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Many shoe insoles were lying around
2025-12-16 02:18:43 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:18:43 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Many shoe insoles were lying around
2025-12-16 02:18:43 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:18:43 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Many shoe insoles were lying around
2025-12-16 02:18:44 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:18:44 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Many shoe insoles were lying around
2025-12-16 02:18:44 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:18:44 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: scene of a man getting out of a car on the left side where there is a fire
2025-12-16 02:18:44 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:18:44 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Many shoe insoles were lying around
2025-12-16 02:18:44 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 02:18:44 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:18:44 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: scene of a man getting out of a car on the left side where there is a fire
2025-12-16 02:18:44 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:18:44 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: scene of a man getting out of a car on the left side where there is a fire
2025-12-16 02:18:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 02:18:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 4762.73ms
2025-12-16 02:18:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 02:18:45 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 400 unique ids from 2 stages
2025-12-16 02:18:45 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 400 unique ids
2025-12-16 02:18:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 02:18:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='nhi·ªÅu mi·∫øng l√≥t d√©p l√≥t gi√†y n·∫±m ng·ªïn ngang', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:18:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='c·∫£nh m·ªôt ng∆∞·ªùi ƒë√†n √¥ng b∆∞·ªõc xu·ªëng xe ph√≠a b√™n tr√°i c√≥ m·ªôt ƒë√°m ch√°y', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:18:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'nhi·ªÅu mi·∫øng l√≥t d√©p l√≥t gi√†y n·∫±m ng·ªïn ngang'
2025-12-16 02:18:53 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'nhi·ªÅu mi·∫øng l√≥t d√©p l√≥t gi√†y n·∫±m ng·ªïn ngang' ‚Üí 'Many shoe insoles were lying around'
2025-12-16 02:18:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'Many shoe insoles were lying around'
2025-12-16 02:18:54 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 02:18:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='Many shoe insoles were lying around', Q1='Many shoe insoles were lying around', Q2='Many shoe insoles were lying around'
2025-12-16 02:18:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'c·∫£nh m·ªôt ng∆∞·ªùi ƒë√†n √¥ng b∆∞·ªõc xu·ªëng xe ph√≠a b√™n tr√°i c√≥ m·ªôt ƒë√°m ch√°y'
2025-12-16 02:18:54 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c·∫£nh m·ªôt ng∆∞·ªùi ƒë√†n √¥ng b∆∞·ªõc xu·ªëng xe ph√≠a b√™n tr√°i c√≥ m·ªôt ƒë√°m ch√°y' ‚Üí 'scene of a man getting out of a car on the left side where there is a fire'
2025-12-16 02:18:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'scene of a man getting out of a car on the left side where there is a fire'
2025-12-16 02:18:54 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 02:18:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='scene of a man getting out of a car on the left side where there is a fire', Q1='scene of a man getting out of a car on the left side where there is a fire', Q2='scene of a man getting out of a car on the left side where there is a fire'
2025-12-16 02:18:55 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:18:55 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Many shoe insoles were lying around
2025-12-16 02:18:55 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:18:55 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: scene of a man getting out of a car on the left side where there is a fire
2025-12-16 02:18:55 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:18:55 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Many shoe insoles were lying around
2025-12-16 02:18:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 02:18:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='C·∫£nh nhi·ªÅu mi·∫øng l√≥t d√©p l√≥t gi√†y n·∫±m ng·ªïn ngang

', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:18:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='sao ƒë√≥ c·∫£nh m·ªôt ng∆∞·ªùi ƒë√†n √¥ng b∆∞·ªõc xu·ªëng xe ph√≠a b√™n tr√°i c√≥ m·ªôt ƒë√°m ch√°y

', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:18:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'C·∫£nh nhi·ªÅu mi·∫øng l√≥t d√©p l√≥t gi√†y n·∫±m ng·ªïn ngang

'
2025-12-16 02:18:56 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:18:56 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: scene of a man getting out of a car on the left side where there is a fire
2025-12-16 02:18:56 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:18:56 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: scene of a man getting out of a car on the left side where there is a fire
2025-12-16 02:18:56 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:18:56 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: scene of a man getting out of a car on the left side where there is a fire
2025-12-16 02:18:56 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh nhi·ªÅu mi·∫øng l√≥t d√©p l√≥t gi√†y n·∫±m ng·ªïn ngang

' ‚Üí 'The scene of many shoe insoles lying around'
2025-12-16 02:18:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'The scene of many shoe insoles lying around'
2025-12-16 02:18:56 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 02:18:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='The scene of many shoe insoles lying around', Q1='The scene of many shoe insoles lying around', Q2='The scene of many shoe insoles lying around'
2025-12-16 02:18:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'sao ƒë√≥ c·∫£nh m·ªôt ng∆∞·ªùi ƒë√†n √¥ng b∆∞·ªõc xu·ªëng xe ph√≠a b√™n tr√°i c√≥ m·ªôt ƒë√°m ch√°y

'
2025-12-16 02:18:56 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:18:56 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Many shoe insoles were lying around
2025-12-16 02:18:56 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'sao ƒë√≥ c·∫£nh m·ªôt ng∆∞·ªùi ƒë√†n √¥ng b∆∞·ªõc xu·ªëng xe ph√≠a b√™n tr√°i c√≥ m·ªôt ƒë√°m ch√°y

' ‚Üí 'Then there was a fire in the scene of a man getting out of the car. On the left side, there was a fire'
2025-12-16 02:18:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'Then there was a fire in the scene of a man getting out of the car. On the left side, there was a fire'
2025-12-16 02:18:56 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:18:56 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Many shoe insoles were lying around
2025-12-16 02:18:56 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:18:56 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: scene of a man getting out of a car on the left side where there is a fire
2025-12-16 02:18:57 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 02:18:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='Then there was a fire in the scene of a man getting out of the car. On the left side, there was a fire', Q1='Then there was a fire in the scene of a man getting out of the car. On the left side, there was a fire', Q2='Then there was a fire in the scene of a man getting out of the car. On the left side, there was a fire'
2025-12-16 02:18:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 02:18:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 02:18:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3708.80ms
2025-12-16 02:18:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-16 02:18:57 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 2 stages
2025-12-16 02:18:57 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 91 videos with results
2025-12-16 02:18:57 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 78 videos with results
2025-12-16 02:18:57 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 11 common videos across all stages
2025-12-16 02:18:57 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 38 valid tuples
2025-12-16 02:18:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 38 valid tuples
2025-12-16 02:18:57 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:18:57 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Then there was a fire in the scene of a man getting out of the car. On the left side, there was a fire
2025-12-16 02:18:57 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:18:57 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:18:57 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The scene of many shoe insoles lying around
2025-12-16 02:18:57 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The scene of many shoe insoles lying around
2025-12-16 02:18:58 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:18:58 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The scene of many shoe insoles lying around
2025-12-16 02:18:58 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:18:58 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Then there was a fire in the scene of a man getting out of the car. On the left side, there was a fire
2025-12-16 02:18:58 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:18:58 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The scene of many shoe insoles lying around
2025-12-16 02:18:59 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:18:59 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Then there was a fire in the scene of a man getting out of the car. On the left side, there was a fire
2025-12-16 02:18:59 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:18:59 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Then there was a fire in the scene of a man getting out of the car. On the left side, there was a fire
2025-12-16 02:18:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 02:18:59 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:18:59 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The scene of many shoe insoles lying around
2025-12-16 02:18:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 02:18:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3463.80ms
2025-12-16 02:18:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 02:18:59 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 400 unique ids from 2 stages
2025-12-16 02:18:59 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 400 unique ids
2025-12-16 02:19:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 02:19:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query=' C·∫£nh nhi·ªÅu mi·∫øng l√≥t d√©p l√≥t gi√†y n·∫±m ng·ªïn ngang ', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:19:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query=' sao ƒë√≥ c·∫£nh m·ªôt ng∆∞·ªùi ƒë√†n √¥ng b∆∞·ªõc xu·ªëng xe ph√≠a b√™n tr√°i c√≥ m·ªôt ƒë√°m ch√°y ', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:19:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: ' C·∫£nh nhi·ªÅu mi·∫øng l√≥t d√©p l√≥t gi√†y n·∫±m ng·ªïn ngang '
2025-12-16 02:19:05 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: ' C·∫£nh nhi·ªÅu mi·∫øng l√≥t d√©p l√≥t gi√†y n·∫±m ng·ªïn ngang ' ‚Üí 'The scene of many shoe insoles lying around'
2025-12-16 02:19:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'The scene of many shoe insoles lying around'
2025-12-16 02:19:05 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 02:19:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='The scene of many shoe insoles lying around', Q1='The scene of many shoe insoles lying around', Q2='The scene of many shoe insoles lying around'
2025-12-16 02:19:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ' sao ƒë√≥ c·∫£nh m·ªôt ng∆∞·ªùi ƒë√†n √¥ng b∆∞·ªõc xu·ªëng xe ph√≠a b√™n tr√°i c√≥ m·ªôt ƒë√°m ch√°y '
2025-12-16 02:19:06 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: ' sao ƒë√≥ c·∫£nh m·ªôt ng∆∞·ªùi ƒë√†n √¥ng b∆∞·ªõc xu·ªëng xe ph√≠a b√™n tr√°i c√≥ m·ªôt ƒë√°m ch√°y ' ‚Üí 'Then there was a fire in the scene of a man getting out of the car. On the left side, there was a fire'
2025-12-16 02:19:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'Then there was a fire in the scene of a man getting out of the car. On the left side, there was a fire'
2025-12-16 02:19:06 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 02:19:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='Then there was a fire in the scene of a man getting out of the car. On the left side, there was a fire', Q1='Then there was a fire in the scene of a man getting out of the car. On the left side, there was a fire', Q2='Then there was a fire in the scene of a man getting out of the car. On the left side, there was a fire'
2025-12-16 02:19:07 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:19:07 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Then there was a fire in the scene of a man getting out of the car. On the left side, there was a fire
2025-12-16 02:19:07 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:19:07 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The scene of many shoe insoles lying around
2025-12-16 02:19:07 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:19:07 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The scene of many shoe insoles lying around
2025-12-16 02:19:07 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:19:07 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Then there was a fire in the scene of a man getting out of the car. On the left side, there was a fire
2025-12-16 02:19:07 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:19:07 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The scene of many shoe insoles lying around
2025-12-16 02:19:07 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:19:07 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The scene of many shoe insoles lying around
2025-12-16 02:19:08 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:19:08 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Then there was a fire in the scene of a man getting out of the car. On the left side, there was a fire
2025-12-16 02:19:08 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:19:08 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Then there was a fire in the scene of a man getting out of the car. On the left side, there was a fire
2025-12-16 02:19:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 02:19:09 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:19:09 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The scene of many shoe insoles lying around
2025-12-16 02:19:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 02:19:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 4500.58ms
2025-12-16 02:19:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 02:19:09 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 400 unique ids from 2 stages
2025-12-16 02:19:09 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 400 unique ids
2025-12-16 02:20:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 02:20:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='C·∫£nh nhi·ªÅu mi·∫øng l√≥t d√©p l√≥t gi√†y n·∫±m ng·ªïn ngang', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:20:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='sao ƒë√≥ c·∫£nh m·ªôt ng∆∞·ªùi ƒë√†n √¥ng b∆∞·ªõc xu·ªëng xe ph√≠a b√™n tr√°i c√≥ m·ªôt ƒë√°m ch√°y

', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:20:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'C·∫£nh nhi·ªÅu mi·∫øng l√≥t d√©p l√≥t gi√†y n·∫±m ng·ªïn ngang'
2025-12-16 02:20:19 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh nhi·ªÅu mi·∫øng l√≥t d√©p l√≥t gi√†y n·∫±m ng·ªïn ngang' ‚Üí 'The scene of many shoe insoles lying around'
2025-12-16 02:20:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'The scene of many shoe insoles lying around'
2025-12-16 02:20:19 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 02:20:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='The scene of many shoe insoles lying around', Q1='The scene of many shoe insoles lying around', Q2='The scene of many shoe insoles lying around'
2025-12-16 02:20:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'sao ƒë√≥ c·∫£nh m·ªôt ng∆∞·ªùi ƒë√†n √¥ng b∆∞·ªõc xu·ªëng xe ph√≠a b√™n tr√°i c√≥ m·ªôt ƒë√°m ch√°y

'
2025-12-16 02:20:20 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'sao ƒë√≥ c·∫£nh m·ªôt ng∆∞·ªùi ƒë√†n √¥ng b∆∞·ªõc xu·ªëng xe ph√≠a b√™n tr√°i c√≥ m·ªôt ƒë√°m ch√°y

' ‚Üí 'Then there was a fire in the scene of a man getting out of the car. On the left side, there was a fire'
2025-12-16 02:20:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'Then there was a fire in the scene of a man getting out of the car. On the left side, there was a fire'
2025-12-16 02:20:20 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 02:20:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='Then there was a fire in the scene of a man getting out of the car. On the left side, there was a fire', Q1='Then there was a fire in the scene of a man getting out of the car. On the left side, there was a fire', Q2='Then there was a fire in the scene of a man getting out of the car. On the left side, there was a fire'
2025-12-16 02:20:20 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:20:20 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Then there was a fire in the scene of a man getting out of the car. On the left side, there was a fire
2025-12-16 02:20:20 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:20:20 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The scene of many shoe insoles lying around
2025-12-16 02:20:20 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:20:20 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The scene of many shoe insoles lying around
2025-12-16 02:20:20 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:20:20 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Then there was a fire in the scene of a man getting out of the car. On the left side, there was a fire
2025-12-16 02:20:20 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:20:20 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The scene of many shoe insoles lying around
2025-12-16 02:20:20 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:20:20 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Then there was a fire in the scene of a man getting out of the car. On the left side, there was a fire
2025-12-16 02:20:21 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:20:21 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The scene of many shoe insoles lying around
2025-12-16 02:20:21 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:20:21 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The scene of many shoe insoles lying around
2025-12-16 02:20:21 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:20:21 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Then there was a fire in the scene of a man getting out of the car. On the left side, there was a fire
2025-12-16 02:20:21 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 02:20:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 0, Q2: 200
2025-12-16 02:20:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3466.66ms
2025-12-16 02:20:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 02:20:22 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 400 unique ids from 2 stages
2025-12-16 02:20:22 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 400 unique ids
2025-12-16 02:21:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 02:21:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='nhi·ªÅu mi·∫øng l√≥t d√©p l√≥t gi√†y n·∫±m ng·ªïn ngang', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:21:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='c·∫£nh m·ªôt ng∆∞·ªùi ƒë√†n √¥ng b∆∞·ªõc xu·ªëng xe ph√≠a b√™n tr√°i c√≥ m·ªôt ƒë√°m ch√°y', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:21:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'nhi·ªÅu mi·∫øng l√≥t d√©p l√≥t gi√†y n·∫±m ng·ªïn ngang'
2025-12-16 02:21:07 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'nhi·ªÅu mi·∫øng l√≥t d√©p l√≥t gi√†y n·∫±m ng·ªïn ngang' ‚Üí 'Many shoe insoles were lying around'
2025-12-16 02:21:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'Many shoe insoles were lying around'
2025-12-16 02:21:07 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 02:21:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='Many shoe insoles were lying around', Q1='Many shoe insoles were lying around', Q2='Many shoe insoles were lying around'
2025-12-16 02:21:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'c·∫£nh m·ªôt ng∆∞·ªùi ƒë√†n √¥ng b∆∞·ªõc xu·ªëng xe ph√≠a b√™n tr√°i c√≥ m·ªôt ƒë√°m ch√°y'
2025-12-16 02:21:07 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c·∫£nh m·ªôt ng∆∞·ªùi ƒë√†n √¥ng b∆∞·ªõc xu·ªëng xe ph√≠a b√™n tr√°i c√≥ m·ªôt ƒë√°m ch√°y' ‚Üí 'scene of a man getting out of a car on the left side where there is a fire'
2025-12-16 02:21:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'scene of a man getting out of a car on the left side where there is a fire'
2025-12-16 02:21:08 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 02:21:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='scene of a man getting out of a car on the left side where there is a fire', Q1='scene of a man getting out of a car on the left side where there is a fire', Q2='scene of a man getting out of a car on the left side where there is a fire'
2025-12-16 02:21:08 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:21:08 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Many shoe insoles were lying around
2025-12-16 02:21:08 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:21:08 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Many shoe insoles were lying around
2025-12-16 02:21:08 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:21:08 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: scene of a man getting out of a car on the left side where there is a fire
2025-12-16 02:21:08 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:21:08 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Many shoe insoles were lying around
2025-12-16 02:21:08 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:21:08 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: scene of a man getting out of a car on the left side where there is a fire
2025-12-16 02:21:08 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:21:08 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Many shoe insoles were lying around
2025-12-16 02:21:09 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:21:09 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: scene of a man getting out of a car on the left side where there is a fire
2025-12-16 02:21:09 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:21:09 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Many shoe insoles were lying around
2025-12-16 02:21:09 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:21:09 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: scene of a man getting out of a car on the left side where there is a fire
2025-12-16 02:21:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 02:21:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-16 02:21:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3322.41ms
2025-12-16 02:21:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-16 02:21:10 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 2 stages
2025-12-16 02:21:10 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 94 videos with results
2025-12-16 02:21:10 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 77 videos with results
2025-12-16 02:21:10 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 10 common videos across all stages
2025-12-16 02:21:10 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 40 valid tuples
2025-12-16 02:21:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 40 valid tuples
2025-12-16 02:24:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 02:24:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='R·∫•t nhi·ªÅu ng∆∞·ªùi ƒë·ªôi n√≥n m√†u tr·∫Øng, ƒëeo kh·∫©u trang m·∫∑c ƒë·ªì m√†u xanh l√° c√¢y l√† ch·ªß y·∫øu

', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:24:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:24:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'R·∫•t nhi·ªÅu ng∆∞·ªùi ƒë·ªôi n√≥n m√†u tr·∫Øng, ƒëeo kh·∫©u trang m·∫∑c ƒë·ªì m√†u xanh l√° c√¢y l√† ch·ªß y·∫øu

'
2025-12-16 02:24:20 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'R·∫•t nhi·ªÅu ng∆∞·ªùi ƒë·ªôi n√≥n m√†u tr·∫Øng, ƒëeo kh·∫©u trang m·∫∑c ƒë·ªì m√†u xanh l√° c√¢y l√† ch·ªß y·∫øu

' ‚Üí 'Many people wear white hats and masks and wear mainly green clothes'
2025-12-16 02:24:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'Many people wear white hats and masks and wear mainly green clothes'
2025-12-16 02:24:21 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 02:24:21 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='Many people wear white hats and masks and wear mainly green clothes', Q1='Many people wear white hats and masks and wear mainly green clothes', Q2='Many people wear white hats and masks and wear mainly green clothes'
2025-12-16 02:24:21 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 02:24:21 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 02:24:21 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:24:21 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:24:21 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Many people wear white hats and masks and wear mainly green clothes
2025-12-16 02:24:21 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Many people wear white hats and masks and wear mainly green clothes
2025-12-16 02:24:22 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:24:22 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Many people wear white hats and masks and wear mainly green clothes
2025-12-16 02:24:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 02:24:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='R·∫•t nhi·ªÅu ng∆∞·ªùi ƒë·ªôi n√≥n m√†u tr·∫Øng, ƒëeo kh·∫©u trang m·∫∑c ƒë·ªì m√†u xanh l√° c√¢y l√† ch·ªß y·∫øu

', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:24:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:24:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'R·∫•t nhi·ªÅu ng∆∞·ªùi ƒë·ªôi n√≥n m√†u tr·∫Øng, ƒëeo kh·∫©u trang m·∫∑c ƒë·ªì m√†u xanh l√° c√¢y l√† ch·ªß y·∫øu

'
2025-12-16 02:24:22 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:24:22 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Many people wear white hats and masks and wear mainly green clothes
2025-12-16 02:24:23 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:24:23 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Many people wear white hats and masks and wear mainly green clothes
2025-12-16 02:24:23 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'R·∫•t nhi·ªÅu ng∆∞·ªùi ƒë·ªôi n√≥n m√†u tr·∫Øng, ƒëeo kh·∫©u trang m·∫∑c ƒë·ªì m√†u xanh l√° c√¢y l√† ch·ªß y·∫øu

' ‚Üí 'Many people wear white hats and masks and wear mainly green clothes'
2025-12-16 02:24:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'Many people wear white hats and masks and wear mainly green clothes'
2025-12-16 02:24:23 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 02:24:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='Many people wear white hats and masks and wear mainly green clothes', Q1='Many people wear white hats and masks and wear mainly green clothes', Q2='Many people wear white hats and masks and wear mainly green clothes'
2025-12-16 02:24:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 02:24:23 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 02:24:24 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:24:24 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Many people wear white hats and masks and wear mainly green clothes
2025-12-16 02:24:24 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:24:24 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Many people wear white hats and masks and wear mainly green clothes
2025-12-16 02:24:25 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:24:25 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Many people wear white hats and masks and wear mainly green clothes
2025-12-16 02:24:25 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:24:25 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Many people wear white hats and masks and wear mainly green clothes
2025-12-16 02:24:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 0
2025-12-16 02:24:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 5732.84ms
2025-12-16 02:24:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 02:24:25 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 02:24:25 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 02:24:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 02:24:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3048.34ms
2025-12-16 02:24:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 02:24:25 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 02:24:25 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 02:24:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 02:24:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='R·∫•t nhi·ªÅu ng∆∞·ªùi ƒë·ªôi n√≥n m√†u tr·∫Øng, ƒëeo kh·∫©u trang m·∫∑c ƒë·ªì m√†u xanh l√° c√¢y', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:24:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:24:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'R·∫•t nhi·ªÅu ng∆∞·ªùi ƒë·ªôi n√≥n m√†u tr·∫Øng, ƒëeo kh·∫©u trang m·∫∑c ƒë·ªì m√†u xanh l√° c√¢y'
2025-12-16 02:24:29 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'R·∫•t nhi·ªÅu ng∆∞·ªùi ƒë·ªôi n√≥n m√†u tr·∫Øng, ƒëeo kh·∫©u trang m·∫∑c ƒë·ªì m√†u xanh l√° c√¢y' ‚Üí 'Many people wore white hats, masks and green clothes'
2025-12-16 02:24:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'Many people wore white hats, masks and green clothes'
2025-12-16 02:24:29 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 02:24:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='Many people wore white hats, masks and green clothes', Q1='Many people wore white hats, masks and green clothes', Q2='Many people wore white hats, masks and green clothes'
2025-12-16 02:24:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 02:24:29 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 02:24:29 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:24:29 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Many people wore white hats, masks and green clothes
2025-12-16 02:24:29 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:24:29 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Many people wore white hats, masks and green clothes
2025-12-16 02:24:30 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:24:30 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Many people wore white hats, masks and green clothes
2025-12-16 02:24:30 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:24:30 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Many people wore white hats, masks and green clothes
2025-12-16 02:24:30 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:24:30 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Many people wore white hats, masks and green clothes
2025-12-16 02:24:31 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:24:31 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Many people wore white hats, masks and green clothes
2025-12-16 02:24:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 0
2025-12-16 02:24:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 4512.46ms
2025-12-16 02:24:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-16 02:24:31 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 2 stages
2025-12-16 02:24:31 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 75 videos with results
2025-12-16 02:24:31 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 0 videos with results
2025-12-16 02:24:31 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] No common videos across all stages
2025-12-16 02:24:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 0 valid tuples
2025-12-16 02:25:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 02:25:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='R·∫•t nhi·ªÅu ng∆∞·ªùi ƒë·ªôi n√≥n m√†u tr·∫Øng, ƒëeo kh·∫©u trang m·∫∑c ƒë·ªì m√†u xanh l√° c√¢y', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:25:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='xe c·ª©u h·ªèa m√†u v√†ng ƒëang ch·ªØa ch√°y t·∫°i m·ªôt nh√† m√°y pin', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:25:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'R·∫•t nhi·ªÅu ng∆∞·ªùi ƒë·ªôi n√≥n m√†u tr·∫Øng, ƒëeo kh·∫©u trang m·∫∑c ƒë·ªì m√†u xanh l√° c√¢y'
2025-12-16 02:25:28 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'R·∫•t nhi·ªÅu ng∆∞·ªùi ƒë·ªôi n√≥n m√†u tr·∫Øng, ƒëeo kh·∫©u trang m·∫∑c ƒë·ªì m√†u xanh l√° c√¢y' ‚Üí 'Many people wore white hats, masks and green clothes'
2025-12-16 02:25:28 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'Many people wore white hats, masks and green clothes'
2025-12-16 02:25:28 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 02:25:28 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='Many people wore white hats, masks and green clothes', Q1='Many people wore white hats, masks and green clothes', Q2='Many people wore white hats, masks and green clothes'
2025-12-16 02:25:28 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'xe c·ª©u h·ªèa m√†u v√†ng ƒëang ch·ªØa ch√°y t·∫°i m·ªôt nh√† m√°y pin'
2025-12-16 02:25:30 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'xe c·ª©u h·ªèa m√†u v√†ng ƒëang ch·ªØa ch√°y t·∫°i m·ªôt nh√† m√°y pin' ‚Üí 'Yellow fire truck is fighting a fire at a battery factory'
2025-12-16 02:25:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'Yellow fire truck is fighting a fire at a battery factory'
2025-12-16 02:25:30 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 02:25:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='Yellow fire truck is fighting a fire at a battery factory', Q1='Yellow fire truck is fighting a fire at a battery factory', Q2='Yellow fire truck is fighting a fire at a battery factory'
2025-12-16 02:25:30 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:25:30 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Many people wore white hats, masks and green clothes
2025-12-16 02:25:30 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:25:30 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:25:30 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Yellow fire truck is fighting a fire at a battery factory
2025-12-16 02:25:30 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Yellow fire truck is fighting a fire at a battery factory
2025-12-16 02:25:31 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:25:31 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Yellow fire truck is fighting a fire at a battery factory
2025-12-16 02:25:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 02:25:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='R·∫•t nhi·ªÅu ng∆∞·ªùi ƒë·ªôi n√≥n m√†u tr·∫Øng, ƒëeo kh·∫©u trang m·∫∑c ƒë·ªì m√†u xanh l√° c√¢y l√† ch·ªß y·∫øu

', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:25:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='C·∫£nh xe c·ª©u h·ªèa m√†u v√†ng ƒëang ch·ªØa ch√°y t·∫°i m·ªôt nh√† m√°y pin

', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:25:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'R·∫•t nhi·ªÅu ng∆∞·ªùi ƒë·ªôi n√≥n m√†u tr·∫Øng, ƒëeo kh·∫©u trang m·∫∑c ƒë·ªì m√†u xanh l√° c√¢y l√† ch·ªß y·∫øu

'
2025-12-16 02:25:31 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'R·∫•t nhi·ªÅu ng∆∞·ªùi ƒë·ªôi n√≥n m√†u tr·∫Øng, ƒëeo kh·∫©u trang m·∫∑c ƒë·ªì m√†u xanh l√° c√¢y l√† ch·ªß y·∫øu

' ‚Üí 'Many people wear white hats and masks and wear mainly green clothes'
2025-12-16 02:25:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'Many people wear white hats and masks and wear mainly green clothes'
2025-12-16 02:25:31 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:25:31 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Many people wore white hats, masks and green clothes
2025-12-16 02:25:31 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:25:31 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Many people wore white hats, masks and green clothes
2025-12-16 02:25:31 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 02:25:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='Many people wear white hats and masks and wear mainly green clothes', Q1='Many people wear white hats and masks and wear mainly green clothes', Q2='Many people wear white hats and masks and wear mainly green clothes'
2025-12-16 02:25:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'C·∫£nh xe c·ª©u h·ªèa m√†u v√†ng ƒëang ch·ªØa ch√°y t·∫°i m·ªôt nh√† m√°y pin

'
2025-12-16 02:25:31 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:25:31 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Yellow fire truck is fighting a fire at a battery factory
2025-12-16 02:25:32 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:25:32 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Yellow fire truck is fighting a fire at a battery factory
2025-12-16 02:25:32 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh xe c·ª©u h·ªèa m√†u v√†ng ƒëang ch·ªØa ch√°y t·∫°i m·ªôt nh√† m√°y pin

' ‚Üí 'Scene of a yellow fire truck fighting a fire at a battery factory'
2025-12-16 02:25:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'Scene of a yellow fire truck fighting a fire at a battery factory'
2025-12-16 02:25:32 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:25:32 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Many people wore white hats, masks and green clothes
2025-12-16 02:25:32 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 02:25:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='Scene of a yellow fire truck fighting a fire at a battery factory', Q1='Scene of a yellow fire truck fighting a fire at a battery factory', Q2='Scene of a yellow fire truck fighting a fire at a battery factory'
2025-12-16 02:25:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 02:25:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='R·∫•t nhi·ªÅu ng∆∞·ªùi ƒë·ªôi n√≥n m√†u tr·∫Øng, ƒëeo kh·∫©u trang m·∫∑c ƒë·ªì m√†u xanh l√° c√¢y l√† ch·ªß y·∫øu

', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:25:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='C·∫£nh xe c·ª©u h·ªèa m√†u v√†ng ƒëang ch·ªØa ch√°y t·∫°i m·ªôt nh√† m√°y pin

', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:25:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'R·∫•t nhi·ªÅu ng∆∞·ªùi ƒë·ªôi n√≥n m√†u tr·∫Øng, ƒëeo kh·∫©u trang m·∫∑c ƒë·ªì m√†u xanh l√° c√¢y l√† ch·ªß y·∫øu

'
2025-12-16 02:25:32 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:25:32 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Many people wear white hats and masks and wear mainly green clothes
2025-12-16 02:25:32 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:25:32 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Scene of a yellow fire truck fighting a fire at a battery factory
2025-12-16 02:25:32 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:25:32 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Scene of a yellow fire truck fighting a fire at a battery factory
2025-12-16 02:25:32 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:25:32 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Scene of a yellow fire truck fighting a fire at a battery factory
2025-12-16 02:25:32 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'R·∫•t nhi·ªÅu ng∆∞·ªùi ƒë·ªôi n√≥n m√†u tr·∫Øng, ƒëeo kh·∫©u trang m·∫∑c ƒë·ªì m√†u xanh l√° c√¢y l√† ch·ªß y·∫øu

' ‚Üí 'Many people wear white hats and masks and wear mainly green clothes'
2025-12-16 02:25:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'Many people wear white hats and masks and wear mainly green clothes'
2025-12-16 02:25:32 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 02:25:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='Many people wear white hats and masks and wear mainly green clothes', Q1='Many people wear white hats and masks and wear mainly green clothes', Q2='Many people wear white hats and masks and wear mainly green clothes'
2025-12-16 02:25:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'C·∫£nh xe c·ª©u h·ªèa m√†u v√†ng ƒëang ch·ªØa ch√°y t·∫°i m·ªôt nh√† m√°y pin

'
2025-12-16 02:25:32 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 02:25:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 02:25:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 02:25:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 5498.99ms
2025-12-16 02:25:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-16 02:25:32 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 2 stages
2025-12-16 02:25:32 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 74 videos with results
2025-12-16 02:25:32 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 74 videos with results
2025-12-16 02:25:32 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 10 common videos across all stages
2025-12-16 02:25:32 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 78 valid tuples
2025-12-16 02:25:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 78 valid tuples
2025-12-16 02:25:32 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:25:32 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Many people wear white hats and masks and wear mainly green clothes
2025-12-16 02:25:33 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:25:33 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Many people wear white hats and masks and wear mainly green clothes
2025-12-16 02:25:33 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:25:33 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Scene of a yellow fire truck fighting a fire at a battery factory
2025-12-16 02:25:33 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:25:33 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Many people wear white hats and masks and wear mainly green clothes
2025-12-16 02:25:33 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:25:33 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Scene of a yellow fire truck fighting a fire at a battery factory
2025-12-16 02:25:33 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:25:33 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Many people wear white hats and masks and wear mainly green clothes
2025-12-16 02:25:33 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:25:33 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Many people wear white hats and masks and wear mainly green clothes
2025-12-16 02:25:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 02:25:33 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:25:33 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Many people wear white hats and masks and wear mainly green clothes
2025-12-16 02:25:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 02:25:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2762.83ms
2025-12-16 02:25:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 02:25:33 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 400 unique ids from 2 stages
2025-12-16 02:25:33 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 400 unique ids
2025-12-16 02:25:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 02:25:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2904.14ms
2025-12-16 02:25:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 02:25:35 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 02:25:35 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 02:25:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 02:25:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='R·∫•t nhi·ªÅu ng∆∞·ªùi ƒë·ªôi n√≥n m√†u tr·∫Øng, ƒëeo kh·∫©u trang m·∫∑c ƒë·ªì m√†u xanh l√° c√¢y l√† ch·ªß y·∫øu

', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:25:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='C·∫£nh xe c·ª©u h·ªèa m√†u v√†ng ƒëang ch·ªØa ch√°y t·∫°i m·ªôt nh√† m√°y pin

', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:25:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'R·∫•t nhi·ªÅu ng∆∞·ªùi ƒë·ªôi n√≥n m√†u tr·∫Øng, ƒëeo kh·∫©u trang m·∫∑c ƒë·ªì m√†u xanh l√° c√¢y l√† ch·ªß y·∫øu

'
2025-12-16 02:25:36 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'R·∫•t nhi·ªÅu ng∆∞·ªùi ƒë·ªôi n√≥n m√†u tr·∫Øng, ƒëeo kh·∫©u trang m·∫∑c ƒë·ªì m√†u xanh l√° c√¢y l√† ch·ªß y·∫øu

' ‚Üí 'Many people wear white hats and masks and wear mainly green clothes'
2025-12-16 02:25:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'Many people wear white hats and masks and wear mainly green clothes'
2025-12-16 02:25:37 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 02:25:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='Many people wear white hats and masks and wear mainly green clothes', Q1='Many people wear white hats and masks and wear mainly green clothes', Q2='Many people wear white hats and masks and wear mainly green clothes'
2025-12-16 02:25:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'C·∫£nh xe c·ª©u h·ªèa m√†u v√†ng ƒëang ch·ªØa ch√°y t·∫°i m·ªôt nh√† m√°y pin

'
2025-12-16 02:25:38 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh xe c·ª©u h·ªèa m√†u v√†ng ƒëang ch·ªØa ch√°y t·∫°i m·ªôt nh√† m√°y pin

' ‚Üí 'Scene of a yellow fire truck fighting a fire at a battery factory'
2025-12-16 02:25:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'Scene of a yellow fire truck fighting a fire at a battery factory'
2025-12-16 02:25:38 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 02:25:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='Scene of a yellow fire truck fighting a fire at a battery factory', Q1='Scene of a yellow fire truck fighting a fire at a battery factory', Q2='Scene of a yellow fire truck fighting a fire at a battery factory'
2025-12-16 02:25:38 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:25:38 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Scene of a yellow fire truck fighting a fire at a battery factory
2025-12-16 02:25:38 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:25:38 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Many people wear white hats and masks and wear mainly green clothes
2025-12-16 02:25:38 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:25:38 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Many people wear white hats and masks and wear mainly green clothes
2025-12-16 02:25:38 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:25:38 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Scene of a yellow fire truck fighting a fire at a battery factory
2025-12-16 02:25:38 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:25:38 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Many people wear white hats and masks and wear mainly green clothes
2025-12-16 02:25:38 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:25:38 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Scene of a yellow fire truck fighting a fire at a battery factory
2025-12-16 02:25:39 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:25:39 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Many people wear white hats and masks and wear mainly green clothes
2025-12-16 02:25:39 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:25:39 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Many people wear white hats and masks and wear mainly green clothes
2025-12-16 02:25:39 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:25:39 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Scene of a yellow fire truck fighting a fire at a battery factory
2025-12-16 02:25:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 02:25:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 0, Q2: 200
2025-12-16 02:25:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3842.54ms
2025-12-16 02:25:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 02:25:40 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 400 unique ids from 2 stages
2025-12-16 02:25:40 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 400 unique ids
2025-12-16 02:27:25 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframe/L17/L17_V025/17269.webp
2025-12-16 02:27:25 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframe/L17/L17_V025/17269.webp -> /app/app/data/keyframe/L17/L17_V025/17269.webp
2025-12-16 02:27:25 - root - ERROR - [IMAGE_SEARCH] Failed to get embedding from model server: Request URL is missing an 'http://' or 'https://' protocol.
2025-12-16 02:27:25 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframe/L17/L17_V025/17269.webp
2025-12-16 02:27:25 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframe/L17/L17_V025/17269.webp -> /app/app/data/keyframe/L17/L17_V025/17269.webp
2025-12-16 02:27:25 - root - ERROR - [IMAGE_SEARCH] Failed to get embedding from model server: Request URL is missing an 'http://' or 'https://' protocol.
2025-12-16 02:27:59 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframe/L11/L11_V017/23712.webp
2025-12-16 02:27:59 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframe/L11/L11_V017/23712.webp -> /app/app/data/keyframe/L11/L11_V017/23712.webp
2025-12-16 02:27:59 - root - ERROR - [IMAGE_SEARCH] Failed to get embedding from model server: Request URL is missing an 'http://' or 'https://' protocol.
2025-12-16 02:27:59 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframe/L11/L11_V017/23712.webp
2025-12-16 02:27:59 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframe/L11/L11_V017/23712.webp -> /app/app/data/keyframe/L11/L11_V017/23712.webp
2025-12-16 02:27:59 - root - ERROR - [IMAGE_SEARCH] Failed to get embedding from model server: Request URL is missing an 'http://' or 'https://' protocol.
2025-12-16 02:41:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 02:41:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='R·∫•t nhi·ªÅu ng∆∞·ªùi ƒë·ªôi n√≥n m√†u tr·∫Øng, ƒëeo kh·∫©u trang m·∫∑c ƒë·ªì m√†u xanh l√° c√¢y', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:41:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='xe c·ª©u h·ªèa m√†u v√†ng ƒëang ch·ªØa ch√°y t·∫°i m·ªôt nh√† m√°y pin', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:41:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'R·∫•t nhi·ªÅu ng∆∞·ªùi ƒë·ªôi n√≥n m√†u tr·∫Øng, ƒëeo kh·∫©u trang m·∫∑c ƒë·ªì m√†u xanh l√° c√¢y'
2025-12-16 02:41:34 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'R·∫•t nhi·ªÅu ng∆∞·ªùi ƒë·ªôi n√≥n m√†u tr·∫Øng, ƒëeo kh·∫©u trang m·∫∑c ƒë·ªì m√†u xanh l√° c√¢y' ‚Üí 'Many people wore white hats, masks and green clothes'
2025-12-16 02:41:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'Many people wore white hats, masks and green clothes'
2025-12-16 02:41:34 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 02:41:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='Many people wore white hats, masks and green clothes', Q1='Many people wore white hats, masks and green clothes', Q2='Many people wore white hats, masks and green clothes'
2025-12-16 02:41:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'xe c·ª©u h·ªèa m√†u v√†ng ƒëang ch·ªØa ch√°y t·∫°i m·ªôt nh√† m√°y pin'
2025-12-16 02:41:34 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'xe c·ª©u h·ªèa m√†u v√†ng ƒëang ch·ªØa ch√°y t·∫°i m·ªôt nh√† m√°y pin' ‚Üí 'Yellow fire truck is fighting a fire at a battery factory'
2025-12-16 02:41:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'Yellow fire truck is fighting a fire at a battery factory'
2025-12-16 02:41:34 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 02:41:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='Yellow fire truck is fighting a fire at a battery factory', Q1='Yellow fire truck is fighting a fire at a battery factory', Q2='Yellow fire truck is fighting a fire at a battery factory'
2025-12-16 02:41:35 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:41:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Many people wore white hats, masks and green clothes
2025-12-16 02:41:35 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:41:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Many people wore white hats, masks and green clothes
2025-12-16 02:41:35 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:41:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Yellow fire truck is fighting a fire at a battery factory
2025-12-16 02:41:35 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:41:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Many people wore white hats, masks and green clothes
2025-12-16 02:41:35 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:41:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Yellow fire truck is fighting a fire at a battery factory
2025-12-16 02:41:35 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:41:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Many people wore white hats, masks and green clothes
2025-12-16 02:41:35 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:41:35 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:41:36 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Yellow fire truck is fighting a fire at a battery factory
2025-12-16 02:41:36 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Many people wore white hats, masks and green clothes
2025-12-16 02:41:36 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:41:36 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Yellow fire truck is fighting a fire at a battery factory
2025-12-16 02:41:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 02:41:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-16 02:41:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3472.68ms
2025-12-16 02:41:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-16 02:41:37 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 2 stages
2025-12-16 02:41:37 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 53 videos with results
2025-12-16 02:41:37 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 73 videos with results
2025-12-16 02:41:37 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 9 common videos across all stages
2025-12-16 02:41:37 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 100 valid tuples
2025-12-16 02:41:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 100 valid tuples
2025-12-16 02:41:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 02:41:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='r·ª´ng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:41:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:41:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'r·ª´ng'
2025-12-16 02:41:50 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-16 02:41:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'forest'
2025-12-16 02:41:50 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 02:41:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='forest', Q1='forest', Q2='forest'
2025-12-16 02:41:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 02:41:50 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 02:41:51 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:41:51 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest
2025-12-16 02:41:51 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:41:51 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest
2025-12-16 02:41:51 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:41:51 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-16 02:41:51 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:41:51 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-16 02:41:52 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:41:52 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-16 02:41:52 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:41:52 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-16 02:41:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-16 02:41:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2927.29ms
2025-12-16 02:41:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-16 02:41:53 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 2 stages
2025-12-16 02:41:53 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 71 videos with results
2025-12-16 02:41:53 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 0 videos with results
2025-12-16 02:41:53 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] No common videos across all stages
2025-12-16 02:41:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 0 valid tuples
2025-12-16 02:50:12 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 02:50:12 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='r·ª´ng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:50:12 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:50:12 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'r·ª´ng'
2025-12-16 02:50:13 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-16 02:50:13 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'forest'
2025-12-16 02:50:13 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 02:50:13 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='forest', Q1='forest', Q2='forest'
2025-12-16 02:50:13 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 02:50:13 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 02:50:13 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:50:13 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest
2025-12-16 02:50:14 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:50:14 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-16 02:50:14 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:50:14 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-16 02:50:15 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 02:50:15 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2998.16ms
2025-12-16 02:50:15 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-16 02:50:15 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 2 stages
2025-12-16 02:50:15 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 65 videos with results
2025-12-16 02:50:15 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 0 videos with results
2025-12-16 02:50:15 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] No common videos across all stages
2025-12-16 02:50:15 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 0 valid tuples
2025-12-16 02:50:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 02:50:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='ng∆∞·ªùi ƒë√†n b√† ', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:50:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:50:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'ng∆∞·ªùi ƒë√†n b√† '
2025-12-16 02:50:36 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'ng∆∞·ªùi ƒë√†n b√† ' ‚Üí 'woman'
2025-12-16 02:50:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'woman'
2025-12-16 02:50:37 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 02:50:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='woman', Q1='woman', Q2='woman'
2025-12-16 02:50:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 02:50:37 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 02:50:37 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:50:37 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 02:50:37 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: woman
2025-12-16 02:50:37 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: woman
2025-12-16 02:50:37 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:50:37 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: woman
2025-12-16 02:50:37 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:50:37 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: woman
2025-12-16 02:50:40 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 02:50:40 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: woman
2025-12-16 02:50:41 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 02:50:41 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: woman
2025-12-16 02:50:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-16 02:50:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 6357.34ms
2025-12-16 02:50:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-16 02:50:42 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 2 stages
2025-12-16 02:50:42 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 97 videos with results
2025-12-16 02:50:42 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 0 videos with results
2025-12-16 02:50:42 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] No common videos across all stages
2025-12-16 02:50:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 0 valid tuples
2025-12-16 02:50:58 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='Bi·ªÉn', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 02:50:58 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-16 02:50:58 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-16 02:50:58 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-16 02:50:58 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'Bi·ªÉn' ‚Üí 'Sea'
2025-12-16 02:50:58 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'Sea'
2025-12-16 02:50:58 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-16 02:51:04 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 668660:1.0000, 589563:0.9828, 383011:0.9757, 383010:0.9749, 89493:0.9537, 499435:0.9390, 566801:0.9325, 451234:0.9181, 499434:0.9079, 566800:0.8669
2025-12-16 02:51:04 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 544649:1.0000, 544650:0.9658, 613775:0.9050, 668660:0.8690, 544648:0.8561, 378606:0.8363, 584538:0.7927, 368053:0.7888, 368052:0.7851, 378608:0.7798
2025-12-16 02:51:04 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 102628:1.0000, 70050:0.8409, 668663:0.8204, 113629:0.8165, 7541:0.8087, 40792:0.7865, 102629:0.7629, 668656:0.7153, 113628:0.7112, 598281:0.6705
2025-12-16 02:51:04 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 668660:1.0000, 668663:0.8344, 544649:0.6630, 368053:0.6607, 383009:0.6459, 499436:0.6255, 544650:0.5794, 613775:0.5789, 378606:0.5184, 668664:0.5156
2025-12-16 02:51:04 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-16 02:51:04 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-16 02:51:04 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 02:51:04 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='22 ng∆∞·ªùi thi·ªát m·∫°ng', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 02:51:04 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 02:51:04 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 02:51:04 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 02:51:04 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): '22 ng∆∞·ªùi thi·ªát m·∫°ng'
2025-12-16 02:51:04 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: '22 ng∆∞·ªùi thi·ªát m·∫°ng'
2025-12-16 02:51:04 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.342s]
2025-12-16 02:51:04 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 350503:0.9684, 159902:0.9512, 127865:0.9417, 127866:0.9417, 274940:0.9312, 159903:0.9306, 279136:0.9022, 144488:0.8970, 249716:0.8970, 474637:0.8872
2025-12-16 02:51:04 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 02:51:04 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 02:51:04 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 02:51:09 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframe/L22/L22_V022/26146.webp
2025-12-16 02:51:09 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframe/L22/L22_V022/26146.webp -> /app/app/data/keyframe/L22/L22_V022/26146.webp
2025-12-16 02:51:09 - root - ERROR - [IMAGE_SEARCH] Failed to get embedding from model server: Request URL is missing an 'http://' or 'https://' protocol.
2025-12-16 02:51:09 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframe/L22/L22_V022/26146.webp
2025-12-16 02:51:09 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframe/L22/L22_V022/26146.webp -> /app/app/data/keyframe/L22/L22_V022/26146.webp
2025-12-16 02:51:09 - root - ERROR - [IMAGE_SEARCH] Failed to get embedding from model server: Request URL is missing an 'http://' or 'https://' protocol.
2025-12-16 02:51:21 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='22 ng∆∞·ªùi thi·ªát m·∫°ng trong v·ª• n·ªï nh√† m√°y pin', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 02:51:21 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 02:51:21 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 02:51:21 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 02:51:21 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): '22 ng∆∞·ªùi thi·ªát m·∫°ng trong v·ª• n·ªï nh√† m√°y pin'
2025-12-16 02:51:21 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: '22 ng∆∞·ªùi thi·ªát m·∫°ng trong v·ª• n·ªï nh√† m√°y pin'
2025-12-16 02:51:21 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.186s]
2025-12-16 02:51:21 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 515881:0.9964, 515882:0.9964, 515883:0.9964, 264739:0.9503, 516381:0.9343, 516382:0.9343, 516383:0.8748, 516384:0.8748, 516385:0.8748, 288031:0.8635
2025-12-16 02:51:21 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 02:51:21 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 02:51:21 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 02:54:43 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 02:54:43 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, objects=[]
2025-12-16 02:54:43 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:54:43 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: ''
2025-12-16 02:54:43 - app.services.gemini.query_augmentation - WARNING - [QUERY AUG] Empty query, returning original
2025-12-16 02:54:43 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='', Q1='', Q2=''
2025-12-16 02:54:43 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 02:54:43 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 02:54:43 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.351s]
2025-12-16 02:54:43 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.354s]
2025-12-16 02:54:43 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.360s]
2025-12-16 02:54:44 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 02:54:44 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 371.93ms
2025-12-16 02:54:44 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-16 02:54:44 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 2 stages
2025-12-16 02:54:44 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 34 videos with results
2025-12-16 02:54:44 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 0 videos with results
2025-12-16 02:54:44 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] No common videos across all stages
2025-12-16 02:54:44 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 0 valid tuples
2025-12-16 02:56:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 02:56:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='t·ª≠ vong sau khi ƒë√°m ch√°y lan r·ªông', toggles={'multimodal': False, 'ic': False, 'asr': True, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:56:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:56:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 't·ª≠ vong sau khi ƒë√°m ch√°y lan r·ªông'
2025-12-16 02:56:47 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 02:56:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='t·ª≠ vong sau khi ƒë√°m ch√°y lan r·ªông', Q1='t·ª≠ vong sau khi ƒë√°m ch√°y lan r·ªông', Q2='t·ª≠ vong sau khi ƒë√°m ch√°y lan r·ªông'
2025-12-16 02:56:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 02:56:47 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 02:56:48 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.449s]
2025-12-16 02:56:48 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.447s]
2025-12-16 02:56:48 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.448s]
2025-12-16 02:56:49 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 02:56:49 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 1657.65ms
2025-12-16 02:56:49 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-16 02:56:49 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 2 stages
2025-12-16 02:56:49 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 157 videos with results
2025-12-16 02:56:49 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 0 videos with results
2025-12-16 02:56:49 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] No common videos across all stages
2025-12-16 02:56:49 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 0 valid tuples
2025-12-16 02:57:16 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 02:57:16 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='ti·∫øng n·ªï gi·ªëng nh∆∞ m∆∞a ƒë·∫°n v·∫≠y', toggles={'multimodal': False, 'ic': False, 'asr': True, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:57:16 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 02:57:16 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'ti·∫øng n·ªï gi·ªëng nh∆∞ m∆∞a ƒë·∫°n v·∫≠y'
2025-12-16 02:57:17 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 02:57:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='ti·∫øng n·ªï gi·ªëng nh∆∞ m∆∞a ƒë·∫°n v·∫≠y', Q1='ti·∫øng n·ªï gi·ªëng nh∆∞ m∆∞a ƒë·∫°n v·∫≠y', Q2='ti·∫øng n·ªï gi·ªëng nh∆∞ m∆∞a ƒë·∫°n v·∫≠y'
2025-12-16 02:57:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 02:57:17 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 02:57:17 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.092s]
2025-12-16 02:57:17 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.092s]
2025-12-16 02:57:17 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.100s]
2025-12-16 02:57:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 02:57:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 354.51ms
2025-12-16 02:57:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-16 02:57:17 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 2 stages
2025-12-16 02:57:17 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 171 videos with results
2025-12-16 02:57:17 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 0 videos with results
2025-12-16 02:57:17 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] No common videos across all stages
2025-12-16 02:57:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 0 valid tuples
2025-12-16 03:02:39 - root - INFO - üõë Shutting down FastAPI application...
2025-12-16 03:02:49 - root - INFO - Mounted keyframe directory at /keyframe: /app/app/data/keyframe
2025-12-16 03:02:49 - root - INFO - üöÄ Starting FastAPI application...
2025-12-16 03:02:49 - root - INFO - Log directory: logs/
2025-12-16 03:02:49 - root - INFO - Search queries log: logs/search_queries.log
2025-12-16 03:02:49 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-16 03:02:49 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-16 03:02:49 - app.database.db - INFO -    Current submissions count: 2
2025-12-16 03:02:51 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='s√¥ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:02:51 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-16 03:02:51 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-16 03:02:51 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-16 03:02:51 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-16 03:02:51 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'river'
2025-12-16 03:02:51 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-16 03:02:52 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-16 03:02:53 - app.services.method.clip_client - INFO - [CLIP] Batch endpoint available, processed 1 texts
2025-12-16 03:02:55 - app.services.method.beit3_client - INFO - [BEiT3] Batch endpoint available, processed 1 texts
2025-12-16 03:02:56 - app.services.method.bigg_client - INFO - [BIGG] Batch endpoint available, processed 1 texts
2025-12-16 03:02:58 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 647:1.0000, 529140:0.9460, 356123:0.8423, 356127:0.7780, 581944:0.7694, 537346:0.7518, 537347:0.7372, 356122:0.7333, 581943:0.7038, 452901:0.6916
2025-12-16 03:02:58 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 555451:1.0000, 537338:0.9548, 548721:0.9467, 61812:0.9170, 548920:0.9061, 44767:0.8970, 538953:0.8893, 191846:0.8797, 565716:0.8681, 555450:0.8677
2025-12-16 03:02:58 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 538951:1.0000, 538980:0.8688, 515256:0.8546, 538952:0.8066, 529140:0.7967, 555451:0.7779, 452898:0.7648, 225469:0.7264, 538995:0.6962, 655529:0.6898
2025-12-16 03:02:58 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 555451:1.0000, 538951:0.9438, 515256:0.7174, 555450:0.6917, 538953:0.6843, 538952:0.6517, 537338:0.5491, 515253:0.4819, 44767:0.4687, 548721:0.4592
2025-12-16 03:02:58 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-16 03:02:58 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-16 03:02:58 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:03:02 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframe/L19/L19_V003/23452.webp
2025-12-16 03:03:02 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframe/L19/L19_V003/23452.webp -> /app/app/data/keyframe/L19/L19_V003/23452.webp
2025-12-16 03:03:02 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframe/L19/L19_V003/23452.webp
2025-12-16 03:03:02 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframe/L19/L19_V003/23452.webp -> /app/app/data/keyframe/L19/L19_V003/23452.webp
2025-12-16 03:03:04 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-16 03:03:04 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-16 03:03:04 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-16 03:03:04 - root - INFO - [IMAGE_SEARCH] Result #0: ID=555451, Path=/keyframe/L19/L19_V003/23452.webp, Score=0.9937199950218201
2025-12-16 03:03:04 - root - INFO - [IMAGE_SEARCH] Result #1: ID=555450, Path=/keyframe/L19/L19_V003/23412.webp, Score=0.9814665913581848
2025-12-16 03:03:04 - root - INFO - [IMAGE_SEARCH] Result #2: ID=555449, Path=/keyframe/L19/L19_V003/23372.webp, Score=0.9701037406921387
2025-12-16 03:03:04 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 2480.24ms
2025-12-16 03:03:04 - root - INFO - [IMAGE_SEARCH] First result sample: {'id': 555451, 'keyframe_path': '/keyframe/L19/L19_V003/23452.webp', 'score': 0.9937199950218201, 'video': '', 'frame_idx': None}
2025-12-16 03:03:04 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-16 03:03:04 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-16 03:03:04 - root - INFO - [IMAGE_SEARCH] Result #0: ID=555451, Path=/keyframe/L19/L19_V003/23452.webp, Score=0.9937199950218201
2025-12-16 03:03:04 - root - INFO - [IMAGE_SEARCH] Result #1: ID=555450, Path=/keyframe/L19/L19_V003/23412.webp, Score=0.9814665913581848
2025-12-16 03:03:04 - root - INFO - [IMAGE_SEARCH] Result #2: ID=555449, Path=/keyframe/L19/L19_V003/23372.webp, Score=0.9701037406921387
2025-12-16 03:03:04 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 2539.61ms
2025-12-16 03:03:04 - root - INFO - [IMAGE_SEARCH] First result sample: {'id': 555451, 'keyframe_path': '/keyframe/L19/L19_V003/23452.webp', 'score': 0.9937199950218201, 'video': '', 'frame_idx': None}
2025-12-16 03:03:59 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='ƒëua ng·ª±a m·ª´ng nƒÉm m·ªõi t·∫°i t√¢n c∆∞∆°ng', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:03:59 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 03:03:59 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 03:03:59 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 03:03:59 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'ƒëua ng·ª±a m·ª´ng nƒÉm m·ªõi t·∫°i t√¢n c∆∞∆°ng'
2025-12-16 03:03:59 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'ƒëua ng·ª±a m·ª´ng nƒÉm m·ªõi t·∫°i t√¢n c∆∞∆°ng'
2025-12-16 03:03:59 - elastic_transport.transport - INFO - GET http://elasticsearch:9200/ [status:200 duration:0.005s]
2025-12-16 03:04:00 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.292s]
2025-12-16 03:04:00 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 183202:0.9923, 183204:0.9875, 183205:0.9875, 183206:0.9875, 183207:0.9875, 183203:0.9870, 183208:0.9853, 243437:0.8872, 243438:0.8872, 243439:0.8030
2025-12-16 03:04:00 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 03:04:00 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 03:04:00 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:04:06 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='h·ªç ƒë√£ ch·ªçn ra nh·ªØng con ng·ª±a kh·ªèe nh·∫•t', ocrText='', toggles={'multimodal': False, 'ic': False, 'asr': True, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:04:06 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: text
2025-12-16 03:04:06 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': True, 'ocr': False, 'objectFilter': False}
2025-12-16 03:04:06 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'asr'}, Total: 1
2025-12-16 03:04:06 - app.routers.search - INFO - [ENSEMBLE] Running ASR search
2025-12-16 03:04:06 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.047s]
2025-12-16 03:04:06 - app.routers.search - INFO - [ENSEMBLE] ASR top results (scaled): 60097:1.0000, 81166:0.9587, 164930:0.9362, 210111:0.9042, 71411:0.8337, 135524:0.8012, 39117:0.7826, 77891:0.7798, 73188:0.7433, 189918:0.7426
2025-12-16 03:04:06 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['asr']
2025-12-16 03:04:06 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['asr']
2025-12-16 03:04:06 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:04:12 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='ƒëua ng·ª±a m·ª´ng nƒÉm m·ªõi t·∫°i t√¢n c∆∞∆°ng', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:04:12 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 03:04:12 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 03:04:12 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 03:04:12 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'ƒëua ng·ª±a m·ª´ng nƒÉm m·ªõi t·∫°i t√¢n c∆∞∆°ng'
2025-12-16 03:04:12 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'ƒëua ng·ª±a m·ª´ng nƒÉm m·ªõi t·∫°i t√¢n c∆∞∆°ng'
2025-12-16 03:04:13 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.105s]
2025-12-16 03:04:13 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 183202:0.9923, 183204:0.9875, 183205:0.9875, 183206:0.9875, 183207:0.9875, 183203:0.9870, 183208:0.9853, 243437:0.8872, 243438:0.8872, 243439:0.8030
2025-12-16 03:04:13 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 03:04:13 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 03:04:13 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:06:11 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframe/L07/L07_V001/24541.webp
2025-12-16 03:06:11 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframe/L07/L07_V001/24541.webp -> /app/app/data/keyframe/L07/L07_V001/24541.webp
2025-12-16 03:06:11 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframe/L07/L07_V001/24541.webp
2025-12-16 03:06:11 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframe/L07/L07_V001/24541.webp -> /app/app/data/keyframe/L07/L07_V001/24541.webp
2025-12-16 03:06:12 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-16 03:06:12 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-16 03:06:12 - root - INFO - [IMAGE_SEARCH] Result #0: ID=183202, Path=/keyframe/L07/L07_V001/24541.webp, Score=0.9946696162223816
2025-12-16 03:06:12 - root - INFO - [IMAGE_SEARCH] Result #1: ID=258199, Path=/keyframe/L09/L09_V013/30548.webp, Score=0.9651473760604858
2025-12-16 03:06:12 - root - INFO - [IMAGE_SEARCH] Result #2: ID=258198, Path=/keyframe/L09/L09_V013/30508.webp, Score=0.9567941427230835
2025-12-16 03:06:12 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1543.75ms
2025-12-16 03:06:12 - root - INFO - [IMAGE_SEARCH] First result sample: {'id': 183202, 'keyframe_path': '/keyframe/L07/L07_V001/24541.webp', 'score': 0.9946696162223816, 'video': '', 'frame_idx': None}
2025-12-16 03:06:12 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-16 03:06:12 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-16 03:06:12 - root - INFO - [IMAGE_SEARCH] Result #0: ID=183202, Path=/keyframe/L07/L07_V001/24541.webp, Score=0.9946696162223816
2025-12-16 03:06:12 - root - INFO - [IMAGE_SEARCH] Result #1: ID=258199, Path=/keyframe/L09/L09_V013/30548.webp, Score=0.9651473760604858
2025-12-16 03:06:12 - root - INFO - [IMAGE_SEARCH] Result #2: ID=258198, Path=/keyframe/L09/L09_V013/30508.webp, Score=0.9567941427230835
2025-12-16 03:06:12 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1588.04ms
2025-12-16 03:06:12 - root - INFO - [IMAGE_SEARCH] First result sample: {'id': 183202, 'keyframe_path': '/keyframe/L07/L07_V001/24541.webp', 'score': 0.9946696162223816, 'video': '', 'frame_idx': None}
2025-12-16 03:10:24 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='anh c≈©ng l√† th·ª£ sƒÉn c√° s·∫•u', ocrText='', toggles={'multimodal': False, 'ic': False, 'asr': True, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:10:24 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: text
2025-12-16 03:10:24 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': True, 'ocr': False, 'objectFilter': False}
2025-12-16 03:10:24 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'asr'}, Total: 1
2025-12-16 03:10:24 - app.routers.search - INFO - [ENSEMBLE] Running ASR search
2025-12-16 03:10:24 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.040s]
2025-12-16 03:10:24 - app.routers.search - INFO - [ENSEMBLE] ASR top results (scaled): 25970:0.9907, 23718:0.9737, 139924:0.9707, 168960:0.9696, 134065:0.9471, 20003:0.9281, 14215:0.9215, 14958:0.9194, 45931:0.9188, 202669:0.9021
2025-12-16 03:10:24 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['asr']
2025-12-16 03:10:24 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['asr']
2025-12-16 03:10:24 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:10:27 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='m·ªπ s∆° t√°n ng∆∞·ªùi d√¢n', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:10:27 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 03:10:27 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 03:10:27 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 03:10:27 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'm·ªπ s∆° t√°n ng∆∞·ªùi d√¢n'
2025-12-16 03:10:27 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'm·ªπ s∆° t√°n ng∆∞·ªùi d√¢n'
2025-12-16 03:10:27 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.100s]
2025-12-16 03:10:27 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 469897:0.9687, 470174:0.9669, 462900:0.9299, 462901:0.9299, 462902:0.9299, 462903:0.9299, 556496:0.9101, 44767:0.9088, 44768:0.9088, 44769:0.8905
2025-12-16 03:10:27 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 03:10:27 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 03:10:27 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:10:31 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='Bluecollar', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:10:31 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 03:10:31 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 03:10:31 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 03:10:31 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'Bluecollar'
2025-12-16 03:10:31 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'Bluecollar'
2025-12-16 03:10:31 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.009s]
2025-12-16 03:10:31 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 
2025-12-16 03:10:31 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 03:10:31 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 03:10:31 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:10:34 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='Bluecollar', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:10:34 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 03:10:34 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 03:10:34 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 03:10:34 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'Bluecollar'
2025-12-16 03:10:34 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'Bluecollar'
2025-12-16 03:10:34 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.010s]
2025-12-16 03:10:34 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 
2025-12-16 03:10:34 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 03:10:34 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 03:10:34 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:10:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 03:10:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, objects=[]
2025-12-16 03:10:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 03:10:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: ''
2025-12-16 03:10:37 - app.services.gemini.query_augmentation - WARNING - [QUERY AUG] Empty query, returning original
2025-12-16 03:10:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='', Q1='', Q2=''
2025-12-16 03:10:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 03:10:37 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 03:10:37 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.010s]
2025-12-16 03:10:37 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.009s]
2025-12-16 03:10:37 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.011s]
2025-12-16 03:10:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 0, Q2: 0
2025-12-16 03:10:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 17.02ms
2025-12-16 03:10:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 03:10:37 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 0 unique ids from 2 stages
2025-12-16 03:10:37 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 0 unique ids
2025-12-16 03:10:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 03:10:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, objects=[]
2025-12-16 03:10:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 03:10:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: ''
2025-12-16 03:10:38 - app.services.gemini.query_augmentation - WARNING - [QUERY AUG] Empty query, returning original
2025-12-16 03:10:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='', Q1='', Q2=''
2025-12-16 03:10:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 03:10:38 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 03:10:38 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.007s]
2025-12-16 03:10:38 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.008s]
2025-12-16 03:10:38 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.009s]
2025-12-16 03:10:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 0, Q2: 0
2025-12-16 03:10:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 13.27ms
2025-12-16 03:10:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 03:10:38 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 0 unique ids from 2 stages
2025-12-16 03:10:38 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 0 unique ids
2025-12-16 03:10:48 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='blue_collar', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:10:48 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 03:10:48 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 03:10:48 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 03:10:48 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'blue_collar'
2025-12-16 03:10:48 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'blue_collar'
2025-12-16 03:10:48 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.012s]
2025-12-16 03:10:48 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 
2025-12-16 03:10:48 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 03:10:48 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 03:10:48 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:10:50 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='blue_collar', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:10:50 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 03:10:50 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 03:10:50 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 03:10:50 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'blue_collar'
2025-12-16 03:10:50 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'blue_collar'
2025-12-16 03:10:50 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.008s]
2025-12-16 03:10:50 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 
2025-12-16 03:10:50 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 03:10:50 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 03:10:50 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:10:50 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='blue_collar', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:10:50 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 03:10:50 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 03:10:50 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 03:10:50 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'blue_collar'
2025-12-16 03:10:50 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'blue_collar'
2025-12-16 03:10:50 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.010s]
2025-12-16 03:10:50 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 
2025-12-16 03:10:50 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 03:10:50 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 03:10:50 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:10:51 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='blue_collar', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:10:51 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 03:10:51 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 03:10:51 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 03:10:51 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'blue_collar'
2025-12-16 03:10:51 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'blue_collar'
2025-12-16 03:10:51 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.010s]
2025-12-16 03:10:51 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 
2025-12-16 03:10:51 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 03:10:51 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 03:10:51 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:11:05 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='blue_collar', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:11:05 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 03:11:05 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 03:11:05 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 03:11:05 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'blue_collar'
2025-12-16 03:11:05 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'blue_collar'
2025-12-16 03:11:05 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.012s]
2025-12-16 03:11:05 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 
2025-12-16 03:11:05 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 03:11:05 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 03:11:05 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:11:07 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='blue_collar', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:11:07 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 03:11:07 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 03:11:07 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 03:11:07 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'blue_collar'
2025-12-16 03:11:07 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'blue_collar'
2025-12-16 03:11:07 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.010s]
2025-12-16 03:11:07 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 
2025-12-16 03:11:07 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 03:11:07 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 03:11:07 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:11:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 03:11:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='blue_collar', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, objects=[]
2025-12-16 03:11:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 03:11:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'blue_collar'
2025-12-16 03:11:21 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 03:11:21 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='blue_collar', Q1='blue_collar', Q2='blue_collar'
2025-12-16 03:11:21 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 03:11:21 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 03:11:21 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.009s]
2025-12-16 03:11:21 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.009s]
2025-12-16 03:11:21 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.011s]
2025-12-16 03:11:21 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 0, Q2: 0
2025-12-16 03:11:21 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 1054.88ms
2025-12-16 03:11:21 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 03:11:21 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 0 unique ids from 2 stages
2025-12-16 03:11:21 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 0 unique ids
2025-12-16 03:11:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 03:11:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='blue_collar', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, objects=[]
2025-12-16 03:11:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 03:11:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'blue_collar'
2025-12-16 03:11:24 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 03:11:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='blue_collar', Q1='blue_collar', Q2='blue_collar'
2025-12-16 03:11:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 03:11:24 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 03:11:24 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.009s]
2025-12-16 03:11:24 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.008s]
2025-12-16 03:11:24 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.010s]
2025-12-16 03:11:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 0, Q2: 0
2025-12-16 03:11:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 945.89ms
2025-12-16 03:11:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 03:11:24 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 0 unique ids from 2 stages
2025-12-16 03:11:24 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 0 unique ids
2025-12-16 03:11:48 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='blue', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:11:48 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 03:11:48 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 03:11:48 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 03:11:48 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'blue'
2025-12-16 03:11:48 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'blue'
2025-12-16 03:11:49 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.068s]
2025-12-16 03:11:49 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 63318:0.9790, 32175:0.9359, 32176:0.9359, 87483:0.9350, 529727:0.9320, 265443:0.9259, 307601:0.9064, 29167:0.9026, 63312:0.8899, 63313:0.8899
2025-12-16 03:11:49 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 03:11:49 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 03:11:49 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:12:01 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='blue_collar', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:12:01 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 03:12:01 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 03:12:01 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 03:12:01 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'blue_collar'
2025-12-16 03:12:01 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'blue_collar'
2025-12-16 03:12:01 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.009s]
2025-12-16 03:12:01 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 
2025-12-16 03:12:01 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 03:12:01 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 03:12:01 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:12:03 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='blue_collar', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:12:03 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 03:12:03 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 03:12:03 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 03:12:03 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'blue_collar'
2025-12-16 03:12:03 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'blue_collar'
2025-12-16 03:12:03 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.010s]
2025-12-16 03:12:03 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 
2025-12-16 03:12:03 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 03:12:03 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 03:12:03 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:12:06 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='bluecollar', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:12:06 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 03:12:06 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 03:12:06 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 03:12:06 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'bluecollar'
2025-12-16 03:12:06 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'bluecollar'
2025-12-16 03:12:06 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.011s]
2025-12-16 03:12:06 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 
2025-12-16 03:12:06 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 03:12:06 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 03:12:06 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:12:07 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='bluecollar', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:12:07 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 03:12:07 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 03:12:07 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 03:12:07 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'bluecollar'
2025-12-16 03:12:07 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'bluecollar'
2025-12-16 03:12:07 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.010s]
2025-12-16 03:12:07 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 
2025-12-16 03:12:07 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 03:12:07 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 03:12:07 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:12:14 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='brawler', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:12:14 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 03:12:14 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 03:12:14 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 03:12:14 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'brawler'
2025-12-16 03:12:14 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'brawler'
2025-12-16 03:12:14 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.036s]
2025-12-16 03:12:14 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 178241:0.9292, 154790:0.9188, 154791:0.9188, 178242:0.8926, 178243:0.8708, 604371:0.8093, 604372:0.8093, 273925:0.7925, 188482:0.7751, 604370:0.7751
2025-12-16 03:12:14 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 03:12:14 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 03:12:14 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:12:39 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='brawler/IG', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:12:39 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 03:12:39 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 03:12:39 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 03:12:39 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'brawler/IG'
2025-12-16 03:12:39 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'brawler/IG'
2025-12-16 03:12:39 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.025s]
2025-12-16 03:12:39 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 325000:0.9679, 325001:0.9634, 324968:0.9592, 324969:0.9592, 425923:0.8893, 425951:0.8074, 425952:0.8074, 425953:0.8074, 425921:0.7961, 425922:0.7961
2025-12-16 03:12:39 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 03:12:39 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 03:12:39 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:12:55 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 03:12:55 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, objects=[]
2025-12-16 03:12:55 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 03:12:55 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: ''
2025-12-16 03:12:55 - app.services.gemini.query_augmentation - WARNING - [QUERY AUG] Empty query, returning original
2025-12-16 03:12:55 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='', Q1='', Q2=''
2025-12-16 03:12:55 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 03:12:55 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 03:12:55 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.010s]
2025-12-16 03:12:55 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.010s]
2025-12-16 03:12:55 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.010s]
2025-12-16 03:12:55 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 0, Q2: 0
2025-12-16 03:12:55 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 15.26ms
2025-12-16 03:12:55 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 03:12:55 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 0 unique ids from 2 stages
2025-12-16 03:12:55 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 0 unique ids
2025-12-16 03:12:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 03:12:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, objects=[]
2025-12-16 03:12:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 03:12:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: ''
2025-12-16 03:12:56 - app.services.gemini.query_augmentation - WARNING - [QUERY AUG] Empty query, returning original
2025-12-16 03:12:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='', Q1='', Q2=''
2025-12-16 03:12:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 03:12:56 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 03:12:56 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.009s]
2025-12-16 03:12:56 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.010s]
2025-12-16 03:12:56 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.011s]
2025-12-16 03:12:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 0, Q2: 0
2025-12-16 03:12:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 15.60ms
2025-12-16 03:12:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 03:12:56 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 0 unique ids from 2 stages
2025-12-16 03:12:56 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 0 unique ids
2025-12-16 03:12:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 03:12:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, objects=[]
2025-12-16 03:12:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 03:12:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: ''
2025-12-16 03:12:58 - app.services.gemini.query_augmentation - WARNING - [QUERY AUG] Empty query, returning original
2025-12-16 03:12:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='', Q1='', Q2=''
2025-12-16 03:12:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 03:12:58 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 03:12:58 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.007s]
2025-12-16 03:12:58 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.009s]
2025-12-16 03:12:58 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.009s]
2025-12-16 03:12:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 0, Q2: 0
2025-12-16 03:12:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 13.22ms
2025-12-16 03:12:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 03:12:58 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 0 unique ids from 2 stages
2025-12-16 03:12:58 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 0 unique ids
2025-12-16 03:13:08 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='blue_collar', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:13:08 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 03:13:08 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 03:13:08 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 03:13:08 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'blue_collar'
2025-12-16 03:13:08 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'blue_collar'
2025-12-16 03:13:08 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.011s]
2025-12-16 03:13:08 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 
2025-12-16 03:13:08 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 03:13:08 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 03:13:08 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:13:24 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='blue_collar', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:13:24 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 03:13:24 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 03:13:24 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 03:13:24 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'blue_collar'
2025-12-16 03:13:24 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'blue_collar'
2025-12-16 03:13:24 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.008s]
2025-12-16 03:13:24 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 
2025-12-16 03:13:24 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 03:13:24 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 03:13:24 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:13:34 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='bluecollar', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:13:34 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 03:13:34 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 03:13:34 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 03:13:34 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'bluecollar'
2025-12-16 03:13:34 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'bluecollar'
2025-12-16 03:13:34 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.009s]
2025-12-16 03:13:34 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 
2025-12-16 03:13:34 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 03:13:34 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 03:13:34 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:13:38 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='blue', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:13:38 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 03:13:38 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 03:13:38 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 03:13:38 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'blue'
2025-12-16 03:13:38 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'blue'
2025-12-16 03:13:38 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.009s]
2025-12-16 03:13:38 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 63318:0.9790, 32175:0.9359, 32176:0.9359, 87483:0.9350, 529727:0.9320, 265443:0.9259, 307601:0.9064, 29167:0.9026, 63312:0.8899, 63313:0.8899
2025-12-16 03:13:38 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 03:13:38 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 03:13:38 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:17:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 03:17:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='thi·ªán v√† ph√≤ng ng·ª´a t·ªôi ph·∫°m\', toggles={'multimodal': False, 'ic': False, 'asr': True, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 03:17:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 03:17:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'thi·ªán v√† ph√≤ng ng·ª´a t·ªôi ph·∫°m\'
2025-12-16 03:17:19 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 03:17:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='thi·ªán v√† ph√≤ng ng·ª´a t·ªôi ph·∫°m\', Q1='thi·ªán v√† ph√≤ng ng·ª´a t·ªôi ph·∫°m\', Q2='thi·ªán v√† ph√≤ng ng·ª´a t·ªôi ph·∫°m\'
2025-12-16 03:17:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 03:17:19 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 03:17:19 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.036s]
2025-12-16 03:17:19 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.037s]
2025-12-16 03:17:19 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.039s]
2025-12-16 03:17:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 03:17:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 384.75ms
2025-12-16 03:17:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 03:17:19 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 03:17:19 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 03:17:25 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='c·ª±u gi√°m ƒë·ªëc c√¥ng ty h√πng th·∫°nh', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:17:25 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 03:17:25 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 03:17:25 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 03:17:25 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'c·ª±u gi√°m ƒë·ªëc c√¥ng ty h√πng th·∫°nh'
2025-12-16 03:17:25 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'c·ª±u gi√°m ƒë·ªëc c√¥ng ty h√πng th·∫°nh'
2025-12-16 03:17:26 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.164s]
2025-12-16 03:17:26 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 234103:0.9376, 234104:0.9376, 234105:0.9376, 39868:0.9282, 158860:0.9277, 308663:0.9248, 160717:0.9079, 160718:0.9079, 234106:0.9019, 628108:0.8953
2025-12-16 03:17:26 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 03:17:26 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 03:17:26 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:17:26 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='C·ª±u gi√°m ƒë·ªôc c√¥ng ty H√πng Th·∫°nh', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:17:26 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 03:17:26 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 03:17:26 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 03:17:26 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'C·ª±u gi√°m ƒë·ªôc c√¥ng ty H√πng Th·∫°nh'
2025-12-16 03:17:26 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'C·ª±u gi√°m ƒë·ªôc c√¥ng ty H√πng Th·∫°nh'
2025-12-16 03:17:26 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.082s]
2025-12-16 03:17:26 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 234103:0.9457, 234104:0.9457, 234105:0.9457, 308663:0.9361, 158860:0.9247, 160717:0.9202, 160718:0.9202, 234106:0.9148, 160716:0.9013, 160719:0.9013
2025-12-16 03:17:26 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 03:17:26 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 03:17:26 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:18:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 03:18:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='thi·ªán v√† ph√≤ng ng·ª´a t·ªôi ph·∫°m\ sang gay', toggles={'multimodal': False, 'ic': False, 'asr': True, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 03:18:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 03:18:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'thi·ªán v√† ph√≤ng ng·ª´a t·ªôi ph·∫°m\ sang gay'
2025-12-16 03:18:35 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 03:18:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='thi·ªán v√† ph√≤ng ng·ª´a t·ªôi ph·∫°m\ sang gay', Q1='thi·ªán v√† ph√≤ng ng·ª´a t·ªôi ph·∫°m\ sang gay', Q2='thi·ªán v√† ph√≤ng ng·ª´a t·ªôi ph·∫°m\ sang gay'
2025-12-16 03:18:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 03:18:35 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 03:18:35 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.036s]
2025-12-16 03:18:35 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.041s]
2025-12-16 03:18:35 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.046s]
2025-12-16 03:18:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 03:18:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 365.20ms
2025-12-16 03:18:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 03:18:35 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 03:18:35 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 03:23:48 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='Louis vuitton', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:23:48 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 03:23:48 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 03:23:48 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 03:23:48 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'Louis vuitton'
2025-12-16 03:23:48 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'Louis vuitton'
2025-12-16 03:23:48 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.050s]
2025-12-16 03:23:48 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 172888:0.9595, 172889:0.9538, 258650:0.9129, 451263:0.9129, 669896:0.8915, 669895:0.8819, 669894:0.8770, 669891:0.8669, 669892:0.8565, 669893:0.8565
2025-12-16 03:23:48 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 03:23:48 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 03:23:48 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:23:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 03:23:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='c√≥ m√°i che tr√™n ƒë·∫°i l·ªô', toggles={'multimodal': False, 'ic': False, 'asr': True, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 03:23:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 03:23:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'c√≥ m√°i che tr√™n ƒë·∫°i l·ªô'
2025-12-16 03:23:50 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 03:23:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='c√≥ m√°i che tr√™n ƒë·∫°i l·ªô', Q1='c√≥ m√°i che tr√™n ƒë·∫°i l·ªô', Q2='c√≥ m√°i che tr√™n ƒë·∫°i l·ªô'
2025-12-16 03:23:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 03:23:50 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 03:23:50 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.041s]
2025-12-16 03:23:50 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.043s]
2025-12-16 03:23:50 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.043s]
2025-12-16 03:23:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 03:23:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 389.61ms
2025-12-16 03:23:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 03:23:50 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 03:23:50 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 03:23:52 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='louis vuston ra m·∫Øt b·ªô s∆∞u t·∫≠p xu√¢n', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:23:52 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 03:23:52 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 03:23:52 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 03:23:52 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'louis vuston ra m·∫Øt b·ªô s∆∞u t·∫≠p xu√¢n'
2025-12-16 03:23:52 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'louis vuston ra m·∫Øt b·ªô s∆∞u t·∫≠p xu√¢n'
2025-12-16 03:23:52 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.094s]
2025-12-16 03:23:52 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 485068:0.9293, 485067:0.9196, 485066:0.9039, 26320:0.9012, 26321:0.9012, 26322:0.8948, 485069:0.8902, 26317:0.8881, 26315:0.8814, 26316:0.8814
2025-12-16 03:23:52 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 03:23:52 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 03:23:52 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:24:02 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='Louis vuitton ra m·∫Øt b·ªô s∆∞u t·∫≠p xu√¢n h√®', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:24:02 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 03:24:02 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 03:24:02 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 03:24:02 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'Louis vuitton ra m·∫Øt b·ªô s∆∞u t·∫≠p xu√¢n h√®'
2025-12-16 03:24:02 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'Louis vuitton ra m·∫Øt b·ªô s∆∞u t·∫≠p xu√¢n h√®'
2025-12-16 03:24:02 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.043s]
2025-12-16 03:24:02 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 26320:0.9295, 26321:0.9295, 26322:0.9246, 26317:0.9195, 26315:0.9143, 26316:0.9143, 26319:0.9143, 26314:0.9089, 26313:0.9033, 26318:0.8976
2025-12-16 03:24:02 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 03:24:02 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 03:24:02 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:24:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 03:24:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='c√≥ m√°i che tr√™n ƒë·∫°i l·ªô v√† r·∫•t s√°ng t·∫°o', toggles={'multimodal': False, 'ic': False, 'asr': True, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 03:24:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 03:24:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'c√≥ m√°i che tr√™n ƒë·∫°i l·ªô v√† r·∫•t s√°ng t·∫°o'
2025-12-16 03:24:08 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 03:24:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='c√≥ m√°i che tr√™n ƒë·∫°i l·ªô v√† r·∫•t s√°ng t·∫°o', Q1='c√≥ m√°i che tr√™n ƒë·∫°i l·ªô v√† r·∫•t s√°ng t·∫°o', Q2='c√≥ m√°i che tr√™n ƒë·∫°i l·ªô v√† r·∫•t s√°ng t·∫°o'
2025-12-16 03:24:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 03:24:08 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 03:24:08 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.053s]
2025-12-16 03:24:08 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.064s]
2025-12-16 03:24:08 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.063s]
2025-12-16 03:24:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 03:24:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 326.29ms
2025-12-16 03:24:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 03:24:08 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 03:24:08 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 03:28:04 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='HOPE\n', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:28:04 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 03:28:04 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 03:28:04 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 03:28:04 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'HOPE
'
2025-12-16 03:28:04 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'HOPE
'
2025-12-16 03:28:04 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.097s]
2025-12-16 03:28:04 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 263079:0.9996, 330464:0.9930, 330465:0.9039, 330466:0.9039, 330467:0.9039, 460272:0.9039, 96004:0.8901, 83775:0.8398, 263078:0.8229, 624243:0.8185
2025-12-16 03:28:04 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 03:28:04 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 03:28:04 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:28:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 03:28:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='kh√¥ng ng·∫°i truy·ªÅn ƒë·∫°t suy nghƒ© c·ªßa m√¨nh', toggles={'multimodal': False, 'ic': False, 'asr': True, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 03:28:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 03:28:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'kh√¥ng ng·∫°i truy·ªÅn ƒë·∫°t suy nghƒ© c·ªßa m√¨nh'
2025-12-16 03:28:10 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 03:28:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='kh√¥ng ng·∫°i truy·ªÅn ƒë·∫°t suy nghƒ© c·ªßa m√¨nh', Q1='kh√¥ng ng·∫°i truy·ªÅn ƒë·∫°t suy nghƒ© c·ªßa m√¨nh', Q2='kh√¥ng ng·∫°i truy·ªÅn ƒë·∫°t suy nghƒ© c·ªßa m√¨nh'
2025-12-16 03:28:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 03:28:10 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 03:28:10 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.052s]
2025-12-16 03:28:10 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.051s]
2025-12-16 03:28:10 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.052s]
2025-12-16 03:28:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 03:28:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 368.77ms
2025-12-16 03:28:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 03:28:10 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 03:28:10 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 03:28:10 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='ba doanh nghi·ªáp pin h√†ng ƒë·∫ßu', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:28:10 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 03:28:10 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 03:28:10 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 03:28:10 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'ba doanh nghi·ªáp pin h√†ng ƒë·∫ßu'
2025-12-16 03:28:10 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'ba doanh nghi·ªáp pin h√†ng ƒë·∫ßu'
2025-12-16 03:28:10 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.102s]
2025-12-16 03:28:10 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 460276:0.9926, 460273:0.9889, 460274:0.9889, 460275:0.9889, 460277:0.9886, 460278:0.9870, 460279:0.9870, 460280:0.9336, 460281:0.8989, 322344:0.8703
2025-12-16 03:28:10 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 03:28:10 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 03:28:10 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:29:44 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='hope', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:29:44 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 03:29:44 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 03:29:44 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 03:29:44 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'hope'
2025-12-16 03:29:44 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'hope'
2025-12-16 03:29:44 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.013s]
2025-12-16 03:29:44 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 263079:0.9996, 330464:0.9930, 330465:0.9039, 330466:0.9039, 330467:0.9039, 460272:0.9039, 96004:0.8901, 83775:0.8398, 263078:0.8229, 624243:0.8185
2025-12-16 03:29:44 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 03:29:44 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 03:29:44 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:30:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 03:30:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='kh√¥ng ng·∫°i truy·ªÅn ƒë·∫°t suy nghƒ© c·ªßa m√¨nh', toggles={'multimodal': False, 'ic': False, 'asr': True, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 03:30:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 03:30:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'kh√¥ng ng·∫°i truy·ªÅn ƒë·∫°t suy nghƒ© c·ªßa m√¨nh'
2025-12-16 03:30:11 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 03:30:11 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='kh√¥ng ng·∫°i truy·ªÅn ƒë·∫°t suy nghƒ© c·ªßa m√¨nh', Q1='kh√¥ng ng·∫°i truy·ªÅn ƒë·∫°t suy nghƒ© c·ªßa m√¨nh', Q2='kh√¥ng ng·∫°i truy·ªÅn ƒë·∫°t suy nghƒ© c·ªßa m√¨nh'
2025-12-16 03:30:11 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 03:30:11 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 03:30:11 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.045s]
2025-12-16 03:30:11 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.053s]
2025-12-16 03:30:11 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.058s]
2025-12-16 03:30:11 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 03:30:11 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 366.15ms
2025-12-16 03:30:11 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 03:30:11 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 03:30:11 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 03:30:58 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='hope', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:30:58 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 03:30:58 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 03:30:58 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 03:30:58 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'hope'
2025-12-16 03:30:58 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'hope'
2025-12-16 03:30:58 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.011s]
2025-12-16 03:30:58 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 263079:0.9996, 330464:0.9930, 330465:0.9039, 330466:0.9039, 330467:0.9039, 460272:0.9039, 96004:0.8901, 83775:0.8398, 263078:0.8229, 624243:0.8185
2025-12-16 03:30:58 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 03:30:58 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 03:30:58 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:31:48 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframe/L16/L16_V002/25245.webp
2025-12-16 03:31:48 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframe/L16/L16_V002/25245.webp -> /app/app/data/keyframe/L16/L16_V002/25245.webp
2025-12-16 03:31:48 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframe/L16/L16_V002/25245.webp
2025-12-16 03:31:48 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframe/L16/L16_V002/25245.webp -> /app/app/data/keyframe/L16/L16_V002/25245.webp
2025-12-16 03:31:49 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-16 03:31:49 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-16 03:31:50 - root - INFO - [IMAGE_SEARCH] Result #0: ID=460272, Path=/keyframe/L16/L16_V002/25245.webp, Score=0.996944010257721
2025-12-16 03:31:50 - root - INFO - [IMAGE_SEARCH] Result #1: ID=460273, Path=/keyframe/L16/L16_V002/25285.webp, Score=0.9783023595809937
2025-12-16 03:31:50 - root - INFO - [IMAGE_SEARCH] Result #2: ID=460274, Path=/keyframe/L16/L16_V002/25300.webp, Score=0.8967351317405701
2025-12-16 03:31:50 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1964.70ms
2025-12-16 03:31:50 - root - INFO - [IMAGE_SEARCH] First result sample: {'id': 460272, 'keyframe_path': '/keyframe/L16/L16_V002/25245.webp', 'score': 0.996944010257721, 'video': '', 'frame_idx': None}
2025-12-16 03:31:50 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-16 03:31:50 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-16 03:31:50 - root - INFO - [IMAGE_SEARCH] Result #0: ID=460272, Path=/keyframe/L16/L16_V002/25245.webp, Score=0.996944010257721
2025-12-16 03:31:50 - root - INFO - [IMAGE_SEARCH] Result #1: ID=460273, Path=/keyframe/L16/L16_V002/25285.webp, Score=0.9783023595809937
2025-12-16 03:31:50 - root - INFO - [IMAGE_SEARCH] Result #2: ID=460274, Path=/keyframe/L16/L16_V002/25300.webp, Score=0.8967351317405701
2025-12-16 03:31:50 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1957.78ms
2025-12-16 03:31:50 - root - INFO - [IMAGE_SEARCH] First result sample: {'id': 460272, 'keyframe_path': '/keyframe/L16/L16_V002/25245.webp', 'score': 0.996944010257721, 'video': '', 'frame_idx': None}
2025-12-16 03:34:14 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='Th·ªß t∆∞·ªõng Peru', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:34:14 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 03:34:14 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 03:34:14 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 03:34:14 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'Th·ªß t∆∞·ªõng Peru'
2025-12-16 03:34:14 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'Th·ªß t∆∞·ªõng Peru'
2025-12-16 03:34:14 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.055s]
2025-12-16 03:34:14 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 313949:0.9896, 343569:0.9795, 343568:0.9760, 313947:0.9571, 361060:0.9522, 343570:0.9504, 313950:0.9478, 313951:0.9369, 313952:0.9244, 361059:0.9234
2025-12-16 03:34:14 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 03:34:14 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 03:34:14 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:34:16 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 03:34:16 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='16 b√°nh ma t√∫y', toggles={'multimodal': False, 'ic': False, 'asr': True, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 03:34:16 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 03:34:16 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: '16 b√°nh ma t√∫y'
2025-12-16 03:34:16 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 03:34:16 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='16 b√°nh ma t√∫y', Q1='16 b√°nh ma t√∫y', Q2='16 b√°nh ma t√∫y'
2025-12-16 03:34:16 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 03:34:16 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 03:34:16 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.022s]
2025-12-16 03:34:16 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.021s]
2025-12-16 03:34:16 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.027s]
2025-12-16 03:34:16 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 03:34:16 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 286.01ms
2025-12-16 03:34:16 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 03:34:16 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 03:34:16 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 03:34:17 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='albeto', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:34:17 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 03:34:17 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 03:34:17 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 03:34:17 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'albeto'
2025-12-16 03:34:17 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'albeto'
2025-12-16 03:34:17 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.033s]
2025-12-16 03:34:18 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 313947:0.8753, 313950:0.8651, 313949:0.8544, 313951:0.8544, 544981:0.8544, 313952:0.8435, 555540:0.8208, 343569:0.8090, 343568:0.7971, 343571:0.7971
2025-12-16 03:34:18 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 03:34:18 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 03:34:18 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:34:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 03:34:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='tang v·∫≠t thu gi·ªØ g·ªìm b√°nh ma t√∫y', toggles={'multimodal': False, 'ic': False, 'asr': True, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 03:34:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 03:34:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'tang v·∫≠t thu gi·ªØ g·ªìm b√°nh ma t√∫y'
2025-12-16 03:34:24 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 03:34:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='tang v·∫≠t thu gi·ªØ g·ªìm b√°nh ma t√∫y', Q1='tang v·∫≠t thu gi·ªØ g·ªìm b√°nh ma t√∫y', Q2='tang v·∫≠t thu gi·ªØ g·ªìm b√°nh ma t√∫y'
2025-12-16 03:34:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 03:34:24 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 03:34:24 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.045s]
2025-12-16 03:34:24 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.049s]
2025-12-16 03:34:24 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.053s]
2025-12-16 03:34:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 03:34:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 325.51ms
2025-12-16 03:34:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 03:34:24 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 03:34:24 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 03:40:53 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='eu kh·∫≥ng ƒë·ªãnh ·ªßng h·ªô', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:40:53 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 03:40:53 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 03:40:53 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 03:40:53 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'eu kh·∫≥ng ƒë·ªãnh ·ªßng h·ªô'
2025-12-16 03:40:53 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'eu kh·∫≥ng ƒë·ªãnh ·ªßng h·ªô'
2025-12-16 03:40:53 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.074s]
2025-12-16 03:40:53 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 573185:0.9522, 174892:0.9489, 175276:0.9439, 573710:0.9436, 175525:0.9327, 175277:0.9286, 175284:0.9132, 175285:0.9132, 175286:0.9132, 175287:0.9132
2025-12-16 03:40:53 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 03:40:53 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 03:40:53 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:40:53 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='Eu kh·∫≥ng ƒë·ªãnh ·ªßng h·ªô gi·∫£i ph√°p', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:40:53 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 03:40:53 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 03:40:53 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 03:40:53 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'Eu kh·∫≥ng ƒë·ªãnh ·ªßng h·ªô gi·∫£i ph√°p'
2025-12-16 03:40:53 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'Eu kh·∫≥ng ƒë·ªãnh ·ªßng h·ªô gi·∫£i ph√°p'
2025-12-16 03:40:53 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.051s]
2025-12-16 03:40:53 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 573710:0.9590, 573185:0.9539, 175525:0.9392, 573181:0.9390, 573182:0.9315, 573711:0.9315, 175284:0.9244, 175285:0.9244, 175286:0.9244, 175287:0.9244
2025-12-16 03:40:53 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 03:40:53 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 03:40:53 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:40:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 03:40:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='v·ªën n·ªïi ti·∫øng nh·ªù b·ªô phim c√¥ng vi√™n k·ª∑', toggles={'multimodal': False, 'ic': False, 'asr': True, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 03:40:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 03:40:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'v·ªën n·ªïi ti·∫øng nh·ªù b·ªô phim c√¥ng vi√™n k·ª∑'
2025-12-16 03:40:58 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 03:40:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='v·ªën n·ªïi ti·∫øng nh·ªù b·ªô phim c√¥ng vi√™n k·ª∑', Q1='v·ªën n·ªïi ti·∫øng nh·ªù b·ªô phim c√¥ng vi√™n k·ª∑', Q2='v·ªën n·ªïi ti·∫øng nh·ªù b·ªô phim c√¥ng vi√™n k·ª∑'
2025-12-16 03:40:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 03:40:58 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 03:40:58 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.050s]
2025-12-16 03:40:58 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.053s]
2025-12-16 03:40:58 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.059s]
2025-12-16 03:40:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 03:40:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 317.63ms
2025-12-16 03:40:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 03:40:58 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 03:40:58 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 03:46:52 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='tphcm hai ng∆∞·ªùi t·ª≠ vong', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:46:52 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 03:46:52 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 03:46:52 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 03:46:52 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'tphcm hai ng∆∞·ªùi t·ª≠ vong'
2025-12-16 03:46:52 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'tphcm hai ng∆∞·ªùi t·ª≠ vong'
2025-12-16 03:46:52 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.074s]
2025-12-16 03:46:52 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 282622:0.9887, 282623:0.9454, 5325:0.9284, 5326:0.9202, 597773:0.9138, 5124:0.9123, 282624:0.8989, 282625:0.8989, 282628:0.8989, 282629:0.8989
2025-12-16 03:46:52 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 03:46:52 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 03:46:52 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:46:53 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='Hai ng∆∞·ªùi t·ª≠ vong', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:46:53 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 03:46:53 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 03:46:53 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 03:46:53 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'Hai ng∆∞·ªùi t·ª≠ vong'
2025-12-16 03:46:53 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'Hai ng∆∞·ªùi t·ª≠ vong'
2025-12-16 03:46:53 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.021s]
2025-12-16 03:46:53 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 282622:0.9914, 282623:0.9581, 282624:0.9217, 282625:0.9217, 282628:0.9217, 282629:0.9217, 282630:0.9217, 282631:0.9217, 207449:0.8995, 616129:0.8971
2025-12-16 03:46:53 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 03:46:53 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 03:46:53 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:47:00 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='tphcm hai ng∆∞·ªùi t·ª≠ vong trong v·ª• ch√°y', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:47:00 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 03:47:00 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 03:47:00 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 03:47:00 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'tphcm hai ng∆∞·ªùi t·ª≠ vong trong v·ª• ch√°y'
2025-12-16 03:47:00 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'tphcm hai ng∆∞·ªùi t·ª≠ vong trong v·ª• ch√°y'
2025-12-16 03:47:00 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.073s]
2025-12-16 03:47:00 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 511750:0.9961, 511751:0.9961, 511752:0.9961, 597773:0.9853, 321707:0.9447, 321708:0.9153, 597770:0.8882, 597771:0.8876, 597772:0.8876, 344743:0.7790
2025-12-16 03:47:00 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 03:47:00 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 03:47:00 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:47:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 03:47:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='kh√≥i l·ª≠a b√πng ch√°y d·ªØ d·ªôi ·ªü c∆° s·ªü b·ªôt nhang', toggles={'multimodal': False, 'ic': False, 'asr': True, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 03:47:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 03:47:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'kh√≥i l·ª≠a b√πng ch√°y d·ªØ d·ªôi ·ªü c∆° s·ªü b·ªôt nhang'
2025-12-16 03:47:00 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 03:47:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='kh√≥i l·ª≠a b√πng ch√°y d·ªØ d·ªôi ·ªü c∆° s·ªü b·ªôt nhang', Q1='kh√≥i l·ª≠a b√πng ch√°y d·ªØ d·ªôi ·ªü c∆° s·ªü b·ªôt nhang', Q2='kh√≥i l·ª≠a b√πng ch√°y d·ªØ d·ªôi ·ªü c∆° s·ªü b·ªôt nhang'
2025-12-16 03:47:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 03:47:00 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 03:47:00 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.046s]
2025-12-16 03:47:00 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.047s]
2025-12-16 03:47:00 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.048s]
2025-12-16 03:47:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 03:47:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 429.86ms
2025-12-16 03:47:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 03:47:00 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 03:47:00 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 03:47:15 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='C·ªü s·ªü b·ªôt nguy√™n', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:47:15 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 03:47:15 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 03:47:15 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 03:47:15 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'C·ªü s·ªü b·ªôt nguy√™n'
2025-12-16 03:47:15 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'C·ªü s·ªü b·ªôt nguy√™n'
2025-12-16 03:47:15 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.045s]
2025-12-16 03:47:15 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 200882:0.9924, 200884:0.9846, 200881:0.9838, 200883:0.9781, 580922:0.9445, 207375:0.8970, 207376:0.8970, 134610:0.8906, 199429:0.8788, 200885:0.8788
2025-12-16 03:47:15 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 03:47:15 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 03:47:15 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:48:22 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='C∆° s·ªü b·ªôt nhang', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:48:22 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 03:48:22 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 03:48:22 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 03:48:22 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'C∆° s·ªü b·ªôt nhang'
2025-12-16 03:48:22 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'C∆° s·ªü b·ªôt nhang'
2025-12-16 03:48:22 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.026s]
2025-12-16 03:48:22 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 543275:0.9914, 511758:0.9554, 511760:0.9554, 511765:0.9074, 512218:0.8948, 543276:0.8948, 543277:0.8948, 543278:0.8948, 543279:0.8948, 511762:0.8939
2025-12-16 03:48:22 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 03:48:22 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 03:48:22 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:52:27 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='M·ªπ k√Ω th·ªèa thu·∫≠n h·ªó tr·ª£ kinh t·∫ø', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:52:27 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 03:52:27 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 03:52:27 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 03:52:27 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'M·ªπ k√Ω th·ªèa thu·∫≠n h·ªó tr·ª£ kinh t·∫ø'
2025-12-16 03:52:27 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'M·ªπ k√Ω th·ªèa thu·∫≠n h·ªó tr·ª£ kinh t·∫ø'
2025-12-16 03:52:27 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.065s]
2025-12-16 03:52:27 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 12943:0.9842, 12939:0.9841, 12940:0.9813, 12941:0.9813, 12942:0.9813, 12936:0.9704, 12937:0.9704, 12938:0.9659, 12935:0.9491, 349139:0.8824
2025-12-16 03:52:27 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 03:52:27 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 03:52:27 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:52:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 03:52:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='r·ªìi ch·∫∑n li√™n l·∫°c v√† t·∫Øt ƒëi·ªán tho·∫°i', toggles={'multimodal': False, 'ic': False, 'asr': True, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 03:52:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 03:52:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'r·ªìi ch·∫∑n li√™n l·∫°c v√† t·∫Øt ƒëi·ªán tho·∫°i'
2025-12-16 03:52:33 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 03:52:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='r·ªìi ch·∫∑n li√™n l·∫°c v√† t·∫Øt ƒëi·ªán tho·∫°i', Q1='r·ªìi ch·∫∑n li√™n l·∫°c v√† t·∫Øt ƒëi·ªán tho·∫°i', Q2='r·ªìi ch·∫∑n li√™n l·∫°c v√† t·∫Øt ƒëi·ªán tho·∫°i'
2025-12-16 03:52:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 03:52:33 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 03:52:33 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.050s]
2025-12-16 03:52:33 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.054s]
2025-12-16 03:52:33 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.052s]
2025-12-16 03:52:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 03:52:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 372.74ms
2025-12-16 03:52:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 03:52:33 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 03:52:33 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 03:52:34 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='m·ªπ k√Ω th·ªèa thu·∫≠n h√¥ tr·ª£ kinh t·∫ø 20 nƒÉm', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:52:34 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 03:52:34 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 03:52:34 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 03:52:34 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'm·ªπ k√Ω th·ªèa thu·∫≠n h√¥ tr·ª£ kinh t·∫ø 20 nƒÉm'
2025-12-16 03:52:34 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'm·ªπ k√Ω th·ªèa thu·∫≠n h√¥ tr·ª£ kinh t·∫ø 20 nƒÉm'
2025-12-16 03:52:34 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.064s]
2025-12-16 03:52:34 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 12939:0.9900, 12943:0.9896, 12940:0.9883, 12941:0.9883, 12942:0.9883, 12936:0.9816, 12937:0.9816, 12938:0.9788, 349139:0.8826, 349140:0.8826
2025-12-16 03:52:34 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 03:52:34 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 03:52:34 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:52:38 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='Qu·∫ßn h·∫£o marshall', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:52:38 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 03:52:38 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 03:52:38 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 03:52:38 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'Qu·∫ßn h·∫£o marshall'
2025-12-16 03:52:38 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'Qu·∫ßn h·∫£o marshall'
2025-12-16 03:52:38 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.027s]
2025-12-16 03:52:38 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 375819:0.9866, 61114:0.9733, 12939:0.9705, 12945:0.9705, 61115:0.9689, 12940:0.9672, 12941:0.9672, 12942:0.9672, 12944:0.9637, 61116:0.9589
2025-12-16 03:52:38 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 03:52:38 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 03:52:38 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:52:55 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='m·ªπ k√Ω th·ªèa thu·∫≠n h√¥ tr·ª£ kinh t·∫ø 20 nƒÉm qu·∫ßn ƒë·∫£o marshall', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:52:55 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 03:52:55 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 03:52:55 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 03:52:55 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'm·ªπ k√Ω th·ªèa thu·∫≠n h√¥ tr·ª£ kinh t·∫ø 20 nƒÉm qu·∫ßn ƒë·∫£o marshall'
2025-12-16 03:52:55 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'm·ªπ k√Ω th·ªèa thu·∫≠n h√¥ tr·ª£ kinh t·∫ø 20 nƒÉm qu·∫ßn ƒë·∫£o marshall'
2025-12-16 03:52:56 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.067s]
2025-12-16 03:52:56 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 12939:0.9942, 12940:0.9933, 12941:0.9933, 12942:0.9933, 12943:0.9926, 12937:0.9903, 12938:0.9892, 12936:0.8506, 289360:0.7672, 12944:0.7177
2025-12-16 03:52:56 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 03:52:56 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 03:52:56 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:53:02 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='Doanh s·ªë ƒëi·ªán tho·∫°i', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:53:02 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 03:53:02 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 03:53:02 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 03:53:02 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'Doanh s·ªë ƒëi·ªán tho·∫°i'
2025-12-16 03:53:02 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'Doanh s·ªë ƒëi·ªán tho·∫°i'
2025-12-16 03:53:02 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.024s]
2025-12-16 03:53:02 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 12946:0.9833, 12945:0.9689, 12944:0.9546, 12947:0.9546, 652682:0.9499, 652683:0.9499, 583179:0.9449, 88139:0.9260, 12943:0.9242, 84353:0.9135
2025-12-16 03:53:02 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 03:53:02 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 03:53:02 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:53:26 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='Doanh s·ªë ƒëi·ªán tho·∫°i th√¥ng minh', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:53:26 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 03:53:26 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 03:53:26 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 03:53:26 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'Doanh s·ªë ƒëi·ªán tho·∫°i th√¥ng minh'
2025-12-16 03:53:26 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'Doanh s·ªë ƒëi·ªán tho·∫°i th√¥ng minh'
2025-12-16 03:53:26 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.058s]
2025-12-16 03:53:26 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 12946:0.9867, 12943:0.9828, 12945:0.9759, 12944:0.9654, 12947:0.9654, 652682:0.9509, 652683:0.9509, 486613:0.9434, 486615:0.9322, 486616:0.9322
2025-12-16 03:53:26 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 03:53:26 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 03:53:26 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:53:36 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='m·ªπ k√Ω th·ªèa thu·∫≠n h√¥ tr·ª£ kinh t·∫ø 20 nƒÉm qu·∫ßn ƒë·∫£o marshall doanh s·ªë ', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:53:36 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 03:53:36 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 03:53:36 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 03:53:36 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'm·ªπ k√Ω th·ªèa thu·∫≠n h√¥ tr·ª£ kinh t·∫ø 20 nƒÉm qu·∫ßn ƒë·∫£o marshall doanh s·ªë '
2025-12-16 03:53:36 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'm·ªπ k√Ω th·ªèa thu·∫≠n h√¥ tr·ª£ kinh t·∫ø 20 nƒÉm qu·∫ßn ƒë·∫£o marshall doanh s·ªë '
2025-12-16 03:53:36 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.070s]
2025-12-16 03:53:36 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 12943:0.9972, 12939:0.9929, 12940:0.9919, 12941:0.9919, 12942:0.9919, 12937:0.9884, 12938:0.9870, 12944:0.8843, 12936:0.8336, 12945:0.7594
2025-12-16 03:53:36 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 03:53:36 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 03:53:36 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:53:44 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='m·ªπ k√Ω th·ªèa thu·∫≠n h√¥ tr·ª£ kinh t·∫ø 20 nƒÉm qu·∫ßn ƒë·∫£o marshall doanh s·ªë ƒëi·ªán tho·∫°i', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:53:44 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 03:53:44 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 03:53:44 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 03:53:44 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'm·ªπ k√Ω th·ªèa thu·∫≠n h√¥ tr·ª£ kinh t·∫ø 20 nƒÉm qu·∫ßn ƒë·∫£o marshall doanh s·ªë ƒëi·ªán tho·∫°i'
2025-12-16 03:53:44 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'm·ªπ k√Ω th·ªèa thu·∫≠n h√¥ tr·ª£ kinh t·∫ø 20 nƒÉm qu·∫ßn ƒë·∫£o marshall doanh s·ªë ƒëi·ªán tho·∫°i'
2025-12-16 03:53:44 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.105s]
2025-12-16 03:53:44 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 12943:0.9990, 12939:0.9903, 12940:0.9890, 12941:0.9890, 12942:0.9890, 12937:0.9842, 12938:0.9823, 12944:0.9577, 12945:0.9075, 12946:0.7944
2025-12-16 03:53:44 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 03:53:44 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 03:53:44 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:53:58 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='Qu·∫ßn ƒë·∫£o marshall', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:53:58 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 03:53:58 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 03:53:58 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 03:53:58 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'Qu·∫ßn ƒë·∫£o marshall'
2025-12-16 03:53:58 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'Qu·∫ßn ƒë·∫£o marshall'
2025-12-16 03:53:58 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.027s]
2025-12-16 03:53:58 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 375819:0.9853, 12939:0.9797, 12945:0.9797, 12940:0.9772, 12941:0.9772, 12942:0.9772, 12944:0.9744, 12937:0.9681, 12938:0.9646, 12943:0.9646
2025-12-16 03:53:58 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 03:53:58 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 03:53:58 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:54:17 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='m·ªπ k√Ω k·∫øt th·ªèa thu·∫≠n h·ªó tr·ª£ kinh t·∫ø 20 nƒÉm qu·∫ßn ƒë·∫£o marshall', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:54:17 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 03:54:17 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 03:54:17 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 03:54:17 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'm·ªπ k√Ω k·∫øt th·ªèa thu·∫≠n h·ªó tr·ª£ kinh t·∫ø 20 nƒÉm qu·∫ßn ƒë·∫£o marshall'
2025-12-16 03:54:17 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'm·ªπ k√Ω k·∫øt th·ªèa thu·∫≠n h·ªó tr·ª£ kinh t·∫ø 20 nƒÉm qu·∫ßn ƒë·∫£o marshall'
2025-12-16 03:54:17 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.077s]
2025-12-16 03:54:17 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 12939:0.9945, 12940:0.9937, 12941:0.9937, 12942:0.9937, 12943:0.9928, 12937:0.9908, 12938:0.9897, 12936:0.8781, 289360:0.6927, 12935:0.6832
2025-12-16 03:54:17 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 03:54:17 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 03:54:17 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:54:49 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='m·ªπ k√Ω th·ªèa thu·∫≠n h·ªó tr·ª£ kinh t·∫ø 20 nƒÉm qu·∫ßn ƒë·∫£o marshall', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:54:49 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 03:54:49 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 03:54:49 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 03:54:49 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'm·ªπ k√Ω th·ªèa thu·∫≠n h·ªó tr·ª£ kinh t·∫ø 20 nƒÉm qu·∫ßn ƒë·∫£o marshall'
2025-12-16 03:54:49 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'm·ªπ k√Ω th·ªèa thu·∫≠n h·ªó tr·ª£ kinh t·∫ø 20 nƒÉm qu·∫ßn ƒë·∫£o marshall'
2025-12-16 03:54:49 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.063s]
2025-12-16 03:54:49 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 12939:0.9944, 12940:0.9936, 12941:0.9936, 12942:0.9936, 12943:0.9927, 12937:0.9908, 12938:0.9897, 12936:0.8845, 289360:0.7115, 12935:0.7027
2025-12-16 03:54:49 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 03:54:49 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 03:54:49 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:55:41 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='doanh s·ªë ƒëi·ªán tho·∫°i th√¥ng minh', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:55:41 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 03:55:41 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 03:55:41 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 03:55:41 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'doanh s·ªë ƒëi·ªán tho·∫°i th√¥ng minh'
2025-12-16 03:55:41 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'doanh s·ªë ƒëi·ªán tho·∫°i th√¥ng minh'
2025-12-16 03:55:41 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.054s]
2025-12-16 03:55:41 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 12946:0.9867, 12943:0.9828, 12945:0.9759, 12944:0.9654, 12947:0.9654, 652682:0.9509, 652683:0.9509, 486613:0.9434, 486615:0.9322, 486616:0.9322
2025-12-16 03:55:41 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 03:55:41 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 03:55:41 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:55:48 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='ƒêi·ªán tho·∫°i gi·∫£ tr√™n gi·∫•y', ocrText='Qu·∫ßn ƒë·∫£o marshall', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:55:48 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 03:55:48 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 03:55:48 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr', 'multimodal'}, Total: 2
2025-12-16 03:55:50 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'ƒêi·ªán tho·∫°i gi·∫£ tr√™n gi·∫•y' ‚Üí 'Fake phone on paper'
2025-12-16 03:55:50 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'Fake phone on paper'
2025-12-16 03:55:50 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'Qu·∫ßn ƒë·∫£o marshall'
2025-12-16 03:55:50 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-16 03:55:50 - app.services.method.clip_client - WARNING - [CLIP] Batch request failed: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text/batch, falling back to individual calls
2025-12-16 03:55:53 - app.services.method.beit3_client - WARNING - [BEiT3] Batch request failed: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text/batch, falling back to individual calls
2025-12-16 03:55:55 - app.services.method.bigg_client - WARNING - [BIGG] Batch request failed: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text/batch, falling back to individual calls
2025-12-16 03:55:56 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 12587:1.0000, 209572:0.9783, 209571:0.9753, 12586:0.9686, 305140:0.9604, 251988:0.9546, 674245:0.9433, 12585:0.9365, 251989:0.9170, 390674:0.8807
2025-12-16 03:55:56 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 674245:1.0000, 12585:0.9369, 589133:0.9276, 140550:0.9159, 618344:0.8990, 12587:0.8866, 257786:0.8647, 674244:0.8543, 12586:0.8528, 66866:0.7326
2025-12-16 03:55:56 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 140553:1.0000, 140551:0.8831, 674245:0.8000, 674244:0.7907, 251990:0.7857, 140552:0.7677, 251987:0.7657, 140550:0.6807, 674242:0.6790, 674243:0.6591
2025-12-16 03:55:56 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 674245:1.0000, 12585:0.8843, 674244:0.8690, 12587:0.8620, 12586:0.8387, 140550:0.6982, 140551:0.6783, 251990:0.6454, 589133:0.4584, 618344:0.4381
2025-12-16 03:55:56 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'Qu·∫ßn ƒë·∫£o marshall'
2025-12-16 03:55:57 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.032s]
2025-12-16 03:55:57 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 375819:0.9853, 12939:0.9797, 12945:0.9797, 12940:0.9772, 12941:0.9772, 12942:0.9772, 12944:0.9744, 12937:0.9681, 12938:0.9646, 12943:0.9646
2025-12-16 03:55:57 - app.routers.search - INFO - [ENSEMBLE] Check: 2 enabled methods, per_method_results keys: ['multimodal', 'ocr']
2025-12-16 03:55:57 - app.routers.search - INFO - [ENSEMBLE] Ensembling 2 methods: {'ocr', 'multimodal'}
2025-12-16 03:55:57 - app.routers.search - INFO - [ENSEMBLE] Final ensemble top results: 674245:0.5000, 375819:0.4927, 12939:0.4899, 12945:0.4899, 12940:0.4886, 12941:0.4886, 12942:0.4886, 12944:0.4872, 12937:0.4841, 12938:0.4823, 12943:0.4823, 61114:0.4693, 61115:0.4648, 61116:0.4547, 12585:0.4422, 674244:0.4345, 12587:0.4310, 61117:0.4302, 61118:0.4197, 61119:0.4197
2025-12-16 03:55:57 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:58:16 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='der leyen', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:58:16 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 03:58:16 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 03:58:16 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 03:58:16 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'der leyen'
2025-12-16 03:58:16 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'der leyen'
2025-12-16 03:58:16 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.012s]
2025-12-16 03:58:16 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 265892:0.9596, 517343:0.9264, 517340:0.9106, 517342:0.9106, 265897:0.8994, 517341:0.8994, 265895:0.8936, 265896:0.8936, 265899:0.8936, 571709:0.8936
2025-12-16 03:58:16 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 03:58:16 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 03:58:16 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:58:20 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='M·ªπ th√¥ng b√°o s·∫Ω h√†nh ƒë·ªông n·∫øu Iran kh√¥ng h·ª£p t√°c', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:58:20 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 03:58:20 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 03:58:20 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 03:58:20 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'M·ªπ th√¥ng b√°o s·∫Ω h√†nh ƒë·ªông n·∫øu Iran kh√¥ng h·ª£p t√°c'
2025-12-16 03:58:20 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'M·ªπ th√¥ng b√°o s·∫Ω h√†nh ƒë·ªông n·∫øu Iran kh√¥ng h·ª£p t√°c'
2025-12-16 03:58:20 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.107s]
2025-12-16 03:58:20 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 315071:0.9540, 315072:0.9488, 315074:0.9488, 315075:0.9488, 315076:0.9488, 315077:0.9488, 315078:0.9488, 315086:0.9209, 315081:0.9159, 315082:0.9159
2025-12-16 03:58:20 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 03:58:20 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 03:58:20 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 03:58:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 03:58:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='√¥ng nguy·ªÖn vƒÉn b√¨nh', toggles={'multimodal': False, 'ic': False, 'asr': True, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 03:58:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 03:58:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: '√¥ng nguy·ªÖn vƒÉn b√¨nh'
2025-12-16 03:58:22 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 03:58:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='√¥ng nguy·ªÖn vƒÉn b√¨nh', Q1='√¥ng nguy·ªÖn vƒÉn b√¨nh', Q2='√¥ng nguy·ªÖn vƒÉn b√¨nh'
2025-12-16 03:58:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 03:58:22 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 03:58:22 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.033s]
2025-12-16 03:58:22 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.034s]
2025-12-16 03:58:22 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.044s]
2025-12-16 03:58:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 03:58:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 363.34ms
2025-12-16 03:58:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 03:58:22 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 03:58:22 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 03:58:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 03:58:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='√¥ng nguy·ªÖn vƒÉn b√¨nh 54 tu·ªïi', toggles={'multimodal': False, 'ic': False, 'asr': True, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 03:58:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 03:58:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: '√¥ng nguy·ªÖn vƒÉn b√¨nh 54 tu·ªïi'
2025-12-16 03:58:30 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 03:58:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='√¥ng nguy·ªÖn vƒÉn b√¨nh 54 tu·ªïi', Q1='√¥ng nguy·ªÖn vƒÉn b√¨nh 54 tu·ªïi', Q2='√¥ng nguy·ªÖn vƒÉn b√¨nh 54 tu·ªïi'
2025-12-16 03:58:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 03:58:30 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 03:58:30 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.032s]
2025-12-16 03:58:30 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.035s]
2025-12-16 03:58:30 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.049s]
2025-12-16 03:58:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 03:58:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 307.49ms
2025-12-16 03:58:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 03:58:30 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 03:58:30 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 03:59:09 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='b√¨nh ph∆∞·ªõc m√¢u thu·∫´n ƒë√°t ƒëai', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 03:59:09 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-16 03:59:09 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-16 03:59:09 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-16 03:59:09 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'b√¨nh ph∆∞·ªõc m√¢u thu·∫´n ƒë√°t ƒëai'
2025-12-16 03:59:09 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'b√¨nh ph∆∞·ªõc m√¢u thu·∫´n ƒë√°t ƒëai'
2025-12-16 03:59:09 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.049s]
2025-12-16 03:59:09 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 341422:0.9468, 314943:0.9278, 314944:0.9045, 314947:0.9045, 314948:0.9045, 341417:0.9045, 341418:0.9045, 341419:0.9045, 341420:0.9045, 341421:0.9045
2025-12-16 03:59:09 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-16 03:59:09 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-16 03:59:09 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 04:04:22 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='t·∫øt m√∫a l√¢n', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 04:04:22 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-16 04:04:22 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-16 04:04:22 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-16 04:04:23 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 't·∫øt m√∫a l√¢n' ‚Üí 'lion dance festival'
2025-12-16 04:04:23 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'lion dance festival'
2025-12-16 04:04:23 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-16 04:04:23 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 04:04:23 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: lion dance festival
2025-12-16 04:04:24 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 04:04:24 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: lion dance festival
2025-12-16 04:04:24 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 04:04:24 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: lion dance festival
2025-12-16 04:04:24 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-16 04:04:24 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-16 04:04:24 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-16 04:04:24 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-16 04:04:24 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-16 04:04:24 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-16 04:04:24 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 04:04:27 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='t·∫øt m√∫a l√¢n', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-16 04:04:27 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-16 04:04:27 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-16 04:04:27 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-16 04:04:27 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 't·∫øt m√∫a l√¢n' ‚Üí 'lion dance festival'
2025-12-16 04:04:27 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'lion dance festival'
2025-12-16 04:04:27 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-16 04:04:30 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 696168:1.0000, 696942:0.6278, 698483:0.5931, 689246:0.5563, 701536:0.5436, 701506:0.5195, 689248:0.4789, 696268:0.4718, 700338:0.4606, 701549:0.4554
2025-12-16 04:04:30 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 271610:1.0000, 154171:0.8400, 296997:0.6617, 254067:0.6476, 154170:0.6064, 689323:0.5943, 693354:0.5935, 687024:0.5526, 693353:0.5451, 687745:0.5329
2025-12-16 04:04:30 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 689056:1.0000, 698172:0.9482, 701372:0.8639, 697670:0.8038, 694547:0.7739, 697484:0.7448, 694745:0.7432, 701348:0.7317, 699739:0.7107, 695312:0.7092
2025-12-16 04:04:31 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 271610:1.0000, 154171:0.7783, 696168:0.5645, 296997:0.5314, 254067:0.5118, 154170:0.4547, 689323:0.4379, 693354:0.4368, 687024:0.3802, 693353:0.3698
2025-12-16 04:04:31 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-16 04:04:31 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-16 04:04:31 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-16 04:04:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 04:04:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='con l√¢n m√†u v√†ng ', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 04:04:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 04:04:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'con l√¢n m√†u v√†ng '
2025-12-16 04:04:31 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'con l√¢n m√†u v√†ng ' ‚Üí 'yellow unicorn'
2025-12-16 04:04:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'yellow unicorn'
2025-12-16 04:04:32 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 04:04:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='yellow unicorn', Q1='yellow unicorn', Q2='yellow unicorn'
2025-12-16 04:04:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 04:04:32 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 04:04:32 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 04:04:32 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: yellow unicorn
2025-12-16 04:04:32 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 04:04:32 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: yellow unicorn
2025-12-16 04:04:32 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 04:04:32 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: yellow unicorn
2025-12-16 04:04:32 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 04:04:32 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: yellow unicorn
2025-12-16 04:04:33 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 04:04:33 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: yellow unicorn
2025-12-16 04:04:33 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 04:04:33 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: yellow unicorn
2025-12-16 04:04:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-16 04:04:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3393.33ms
2025-12-16 04:04:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 04:04:34 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 04:04:34 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 04:04:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 04:04:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='con l√¢n m√†u v√†ng ', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, objects=[]
2025-12-16 04:04:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 04:04:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'con l√¢n m√†u v√†ng '
2025-12-16 04:04:48 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'con l√¢n m√†u v√†ng ' ‚Üí 'yellow unicorn'
2025-12-16 04:04:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'yellow unicorn'
2025-12-16 04:04:48 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 04:04:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='yellow unicorn', Q1='yellow unicorn', Q2='yellow unicorn'
2025-12-16 04:04:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 04:04:48 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 04:04:49 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 04:04:49 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: yellow unicorn
2025-12-16 04:04:49 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 04:04:49 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: yellow unicorn
2025-12-16 04:04:49 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 04:04:49 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: yellow unicorn
2025-12-16 04:04:49 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.019s]
2025-12-16 04:04:50 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.016s]
2025-12-16 04:04:50 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.018s]
2025-12-16 04:04:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 04:04:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2585.13ms
2025-12-16 04:04:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 04:04:50 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 04:04:50 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 04:05:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 04:05:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='con l√¢n m√†u v√†ng nh·∫£y ban ng√†y', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, objects=[]
2025-12-16 04:05:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 04:05:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'con l√¢n m√†u v√†ng nh·∫£y ban ng√†y'
2025-12-16 04:05:10 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'con l√¢n m√†u v√†ng nh·∫£y ban ng√†y' ‚Üí 'The yellow unicorn dances during the day'
2025-12-16 04:05:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'The yellow unicorn dances during the day'
2025-12-16 04:05:10 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 04:05:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='The yellow unicorn dances during the day', Q1='The yellow unicorn dances during the day', Q2='The yellow unicorn dances during the day'
2025-12-16 04:05:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 04:05:10 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 04:05:10 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 04:05:10 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The yellow unicorn dances during the day
2025-12-16 04:05:10 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 04:05:10 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The yellow unicorn dances during the day
2025-12-16 04:05:10 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 04:05:10 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The yellow unicorn dances during the day
2025-12-16 04:05:10 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 04:05:10 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The yellow unicorn dances during the day
2025-12-16 04:05:10 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.019s]
2025-12-16 04:05:11 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 04:05:11 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The yellow unicorn dances during the day
2025-12-16 04:05:11 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 04:05:11 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The yellow unicorn dances during the day
2025-12-16 04:05:11 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.017s]
2025-12-16 04:05:12 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.016s]
2025-12-16 04:05:12 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 04:05:12 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2994.56ms
2025-12-16 04:05:12 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 04:05:12 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 04:05:12 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 04:06:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 04:06:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='con l√¢n m√†u v√†ng nh·∫£y con r·ªìng ph√≠a sau', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 04:06:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 04:06:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'con l√¢n m√†u v√†ng nh·∫£y con r·ªìng ph√≠a sau'
2025-12-16 04:06:20 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'con l√¢n m√†u v√†ng nh·∫£y con r·ªìng ph√≠a sau' ‚Üí 'The yellow unicorn jumps the dragon behind'
2025-12-16 04:06:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'The yellow unicorn jumps the dragon behind'
2025-12-16 04:06:21 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 04:06:21 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='The yellow unicorn jumps the dragon behind', Q1='The yellow unicorn jumps the dragon behind', Q2='The yellow unicorn jumps the dragon behind'
2025-12-16 04:06:21 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 04:06:21 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 04:06:21 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 04:06:21 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The yellow unicorn jumps the dragon behind
2025-12-16 04:06:22 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 04:06:22 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The yellow unicorn jumps the dragon behind
2025-12-16 04:06:23 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 04:06:23 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The yellow unicorn jumps the dragon behind
2025-12-16 04:06:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 04:06:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3786.01ms
2025-12-16 04:06:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 04:06:23 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 04:06:23 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 04:06:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 04:06:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='con l√¢n m√†u v√†ng nh·∫£y con r·ªìng ph√≠a sau m√†u v√†ng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 04:06:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 04:06:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'con l√¢n m√†u v√†ng nh·∫£y con r·ªìng ph√≠a sau m√†u v√†ng'
2025-12-16 04:06:28 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'con l√¢n m√†u v√†ng nh·∫£y con r·ªìng ph√≠a sau m√†u v√†ng' ‚Üí 'The yellow unicorn jumps the yellow dragon behind'
2025-12-16 04:06:28 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'The yellow unicorn jumps the yellow dragon behind'
2025-12-16 04:06:28 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 04:06:28 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='The yellow unicorn jumps the yellow dragon behind', Q1='The yellow unicorn jumps the yellow dragon behind', Q2='The yellow unicorn jumps the yellow dragon behind'
2025-12-16 04:06:28 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 04:06:28 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 04:06:28 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 04:06:28 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The yellow unicorn jumps the yellow dragon behind
2025-12-16 04:06:28 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 04:06:28 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The yellow unicorn jumps the yellow dragon behind
2025-12-16 04:06:28 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 04:06:28 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The yellow unicorn jumps the yellow dragon behind
2025-12-16 04:06:28 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 04:06:28 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The yellow unicorn jumps the yellow dragon behind
2025-12-16 04:06:29 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 04:06:29 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The yellow unicorn jumps the yellow dragon behind
2025-12-16 04:06:29 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 04:06:29 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The yellow unicorn jumps the yellow dragon behind
2025-12-16 04:06:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-16 04:06:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2689.72ms
2025-12-16 04:06:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 04:06:30 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 04:06:30 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 04:06:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 04:06:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='con l√¢n m√†u v√†ng nh·∫£y con r·ªìng ph√≠a sau m√†u v√†ng c√≥ m·ªôt l√° c·ªù xanh d∆∞∆°ng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 04:06:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 04:06:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'con l√¢n m√†u v√†ng nh·∫£y con r·ªìng ph√≠a sau m√†u v√†ng c√≥ m·ªôt l√° c·ªù xanh d∆∞∆°ng'
2025-12-16 04:06:43 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'con l√¢n m√†u v√†ng nh·∫£y con r·ªìng ph√≠a sau m√†u v√†ng c√≥ m·ªôt l√° c·ªù xanh d∆∞∆°ng' ‚Üí 'The yellow unicorn jumps. The yellow dragon has a blue flag behind it'
2025-12-16 04:06:43 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'The yellow unicorn jumps. The yellow dragon has a blue flag behind it'
2025-12-16 04:06:43 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 04:06:43 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='The yellow unicorn jumps. The yellow dragon has a blue flag behind it', Q1='The yellow unicorn jumps. The yellow dragon has a blue flag behind it', Q2='The yellow unicorn jumps. The yellow dragon has a blue flag behind it'
2025-12-16 04:06:43 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 04:06:43 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 04:06:44 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 04:06:44 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The yellow unicorn jumps. The yellow dragon has a blue flag behind it
2025-12-16 04:06:44 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 04:06:44 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The yellow unicorn jumps. The yellow dragon has a blue flag behind it
2025-12-16 04:06:44 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 04:06:45 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The yellow unicorn jumps. The yellow dragon has a blue flag behind it
2025-12-16 04:06:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-16 04:06:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3412.77ms
2025-12-16 04:06:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 04:06:46 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 04:06:46 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-16 04:07:59 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframe/L24/L24_V021/16264.webp
2025-12-16 04:07:59 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframe/L24/L24_V021/16264.webp -> /app/app/data/keyframe/L24/L24_V021/16264.webp
2025-12-16 04:07:59 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframe/L24/L24_V021/16264.webp
2025-12-16 04:07:59 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframe/L24/L24_V021/16264.webp -> /app/app/data/keyframe/L24/L24_V021/16264.webp
2025-12-16 04:08:00 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-16 04:08:00 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-16 04:08:00 - root - INFO - [IMAGE_SEARCH] Result #0: ID=693359, Path=/keyframe/L24/L24_V021/16264.webp, Score=0.9957515001296997
2025-12-16 04:08:00 - root - INFO - [IMAGE_SEARCH] Result #1: ID=693358, Path=/keyframe/L24/L24_V021/16224.webp, Score=0.9756907820701599
2025-12-16 04:08:00 - root - INFO - [IMAGE_SEARCH] Result #2: ID=693360, Path=/keyframe/L24/L24_V021/16304.webp, Score=0.9738681316375732
2025-12-16 04:08:00 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1328.37ms
2025-12-16 04:08:00 - root - INFO - [IMAGE_SEARCH] First result sample: {'id': 693359, 'keyframe_path': '/keyframe/L24/L24_V021/16264.webp', 'score': 0.9957515001296997, 'video': '', 'frame_idx': None}
2025-12-16 04:08:00 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-16 04:08:00 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-16 04:08:00 - root - INFO - [IMAGE_SEARCH] Result #0: ID=693359, Path=/keyframe/L24/L24_V021/16264.webp, Score=0.9957515001296997
2025-12-16 04:08:00 - root - INFO - [IMAGE_SEARCH] Result #1: ID=693358, Path=/keyframe/L24/L24_V021/16224.webp, Score=0.9756907820701599
2025-12-16 04:08:00 - root - INFO - [IMAGE_SEARCH] Result #2: ID=693360, Path=/keyframe/L24/L24_V021/16304.webp, Score=0.9738681316375732
2025-12-16 04:08:00 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1633.40ms
2025-12-16 04:08:00 - root - INFO - [IMAGE_SEARCH] First result sample: {'id': 693359, 'keyframe_path': '/keyframe/L24/L24_V021/16264.webp', 'score': 0.9957515001296997, 'video': '', 'frame_idx': None}
2025-12-16 04:08:10 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframe/L24/L24_V020/1259.webp
2025-12-16 04:08:10 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframe/L24/L24_V020/1259.webp -> /app/app/data/keyframe/L24/L24_V020/1259.webp
2025-12-16 04:08:10 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframe/L24/L24_V020/1259.webp
2025-12-16 04:08:10 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframe/L24/L24_V020/1259.webp -> /app/app/data/keyframe/L24/L24_V020/1259.webp
2025-12-16 04:08:11 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-16 04:08:11 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-16 04:08:11 - root - INFO - [IMAGE_SEARCH] Result #0: ID=692514, Path=/keyframe/L24/L24_V020/1259.webp, Score=0.9958941340446472
2025-12-16 04:08:11 - root - INFO - [IMAGE_SEARCH] Result #1: ID=692516, Path=/keyframe/L24/L24_V020/1339.webp, Score=0.9668980836868286
2025-12-16 04:08:11 - root - INFO - [IMAGE_SEARCH] Result #2: ID=695458, Path=/keyframe/L24/L24_V026/3802.webp, Score=0.9595910906791687
2025-12-16 04:08:11 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1273.16ms
2025-12-16 04:08:11 - root - INFO - [IMAGE_SEARCH] First result sample: {'id': 692514, 'keyframe_path': '/keyframe/L24/L24_V020/1259.webp', 'score': 0.9958941340446472, 'video': '', 'frame_idx': None}
2025-12-16 04:08:11 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-16 04:08:11 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-16 04:08:11 - root - INFO - [IMAGE_SEARCH] Result #0: ID=692514, Path=/keyframe/L24/L24_V020/1259.webp, Score=0.9958941340446472
2025-12-16 04:08:11 - root - INFO - [IMAGE_SEARCH] Result #1: ID=692516, Path=/keyframe/L24/L24_V020/1339.webp, Score=0.9668980836868286
2025-12-16 04:08:11 - root - INFO - [IMAGE_SEARCH] Result #2: ID=695458, Path=/keyframe/L24/L24_V026/3802.webp, Score=0.9595910906791687
2025-12-16 04:08:11 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1564.60ms
2025-12-16 04:08:11 - root - INFO - [IMAGE_SEARCH] First result sample: {'id': 692514, 'keyframe_path': '/keyframe/L24/L24_V020/1259.webp', 'score': 0.9958941340446472, 'video': '', 'frame_idx': None}
2025-12-16 04:08:55 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-16 04:08:55 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='con l√¢n m√†u v√†ng nh·∫£y con r·ªìng ph√≠a sau m√†u v√†ng c√≥ m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o xanh bi·ªÉn', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 04:08:55 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-16 04:08:55 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'con l√¢n m√†u v√†ng nh·∫£y con r·ªìng ph√≠a sau m√†u v√†ng c√≥ m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o xanh bi·ªÉn'
2025-12-16 04:08:56 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'con l√¢n m√†u v√†ng nh·∫£y con r·ªìng ph√≠a sau m√†u v√†ng c√≥ m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o xanh bi·ªÉn' ‚Üí 'The yellow unicorn jumps. Behind the yellow dragon is a man wearing a blue shirt'
2025-12-16 04:08:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'The yellow unicorn jumps. Behind the yellow dragon is a man wearing a blue shirt'
2025-12-16 04:08:56 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-16 04:08:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='The yellow unicorn jumps. Behind the yellow dragon is a man wearing a blue shirt', Q1='The yellow unicorn jumps. Behind the yellow dragon is a man wearing a blue shirt', Q2='The yellow unicorn jumps. Behind the yellow dragon is a man wearing a blue shirt'
2025-12-16 04:08:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-16 04:08:56 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-16 04:08:57 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 04:08:57 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The yellow unicorn jumps. Behind the yellow dragon is a man wearing a blue shirt
2025-12-16 04:08:57 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-16 04:08:57 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The yellow unicorn jumps. Behind the yellow dragon is a man wearing a blue shirt
2025-12-16 04:08:58 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 04:08:58 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The yellow unicorn jumps. Behind the yellow dragon is a man wearing a blue shirt
2025-12-16 04:08:58 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-16 04:08:58 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The yellow unicorn jumps. Behind the yellow dragon is a man wearing a blue shirt
2025-12-16 04:08:59 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 04:08:59 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The yellow unicorn jumps. Behind the yellow dragon is a man wearing a blue shirt
2025-12-16 04:08:59 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-16 04:08:59 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The yellow unicorn jumps. Behind the yellow dragon is a man wearing a blue shirt
2025-12-16 04:08:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 0
2025-12-16 04:08:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 4512.88ms
2025-12-16 04:08:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-16 04:08:59 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-16 04:08:59 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-19 07:04:01 - root - INFO - [IMAGE_SEARCH] Uploaded image: image-removebg-preview.png
2025-12-19 07:04:01 - httpx - INFO - HTTP Request: POST https://privative-startingly-justa.ngrok-free.dev//embedding/clip/image "HTTP/1.1 404 Not Found"
2025-12-19 07:04:01 - root - ERROR - [IMAGE_SEARCH] Model server error: Client error '404 Not Found' for url 'https://privative-startingly-justa.ngrok-free.dev//embedding/clip/image'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404
2025-12-19 07:07:44 - root - INFO - [IMAGE_SEARCH] Uploaded image: pasted-image-1766128064608.png
2025-12-19 07:07:45 - root - ERROR - [IMAGE_SEARCH] Model server error: 
2025-12-19 07:07:51 - root - INFO - [IMAGE_SEARCH] Uploaded image: pasted-image-1766128064608.png
2025-12-19 07:07:52 - root - ERROR - [IMAGE_SEARCH] Model server error: 
2025-12-19 07:07:56 - root - INFO - [IMAGE_SEARCH] Uploaded image: image-removebg-preview (1).png
2025-12-19 07:07:56 - httpx - INFO - HTTP Request: POST https://privative-startingly-justa.ngrok-free.dev//embedding/clip/image "HTTP/1.1 404 Not Found"
2025-12-19 07:07:56 - root - ERROR - [IMAGE_SEARCH] Model server error: Client error '404 Not Found' for url 'https://privative-startingly-justa.ngrok-free.dev//embedding/clip/image'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404
2025-12-19 07:08:49 - root - INFO - [IMAGE_SEARCH] Uploaded image: pasted-image-1766128130209.png
2025-12-19 07:08:50 - root - ERROR - [IMAGE_SEARCH] Model server error: 
2025-12-19 07:19:26 - root - INFO - [IMAGE_SEARCH] Uploaded image: pasted-image-1766128766715.png
2025-12-19 07:19:26 - httpx - INFO - HTTP Request: POST https://privative-startingly-justa.ngrok-free.dev//embedding/clip/image "HTTP/1.1 404 Not Found"
2025-12-19 07:19:26 - root - ERROR - [IMAGE_SEARCH] Model server error: Client error '404 Not Found' for url 'https://privative-startingly-justa.ngrok-free.dev//embedding/clip/image'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404
2025-12-19 07:19:39 - root - INFO - [IMAGE_SEARCH] Uploaded image: image-removebg-preview.png
2025-12-19 07:19:39 - httpx - INFO - HTTP Request: POST https://privative-startingly-justa.ngrok-free.dev//embedding/clip/image "HTTP/1.1 404 Not Found"
2025-12-19 07:19:39 - root - ERROR - [IMAGE_SEARCH] Model server error: Client error '404 Not Found' for url 'https://privative-startingly-justa.ngrok-free.dev//embedding/clip/image'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404
2025-12-19 07:19:49 - root - INFO - [IMAGE_SEARCH] Uploaded image: pasted-image-1766128787424.png
2025-12-19 07:19:50 - root - ERROR - [IMAGE_SEARCH] Model server error: 
2025-12-19 07:31:20 - root - INFO - [IMAGE_SEARCH] Uploaded image: pasted-image-1766129478831.png
2025-12-19 07:31:21 - root - ERROR - [IMAGE_SEARCH] Model server error: 
2025-12-19 07:31:29 - root - INFO - [IMAGE_SEARCH] Uploaded image: image-removebg-preview.png
2025-12-19 07:31:29 - httpx - INFO - HTTP Request: POST https://privative-startingly-justa.ngrok-free.dev//embedding/clip/image "HTTP/1.1 404 Not Found"
2025-12-19 07:31:29 - root - ERROR - [IMAGE_SEARCH] Model server error: Client error '404 Not Found' for url 'https://privative-startingly-justa.ngrok-free.dev//embedding/clip/image'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404
2025-12-19 07:31:38 - root - INFO - [IMAGE_SEARCH] Uploaded image: pasted-image-1766129498466.png
2025-12-19 07:31:39 - root - ERROR - [IMAGE_SEARCH] Model server error: 
2025-12-22 02:04:24 - root - INFO - üõë Shutting down FastAPI application...
2025-12-22 02:06:06 - root - INFO - Mounted keyframe directory at /keyframe: /app/app/data/keyframe
2025-12-22 02:06:06 - root - INFO - üöÄ Starting FastAPI application...
2025-12-22 02:06:06 - root - INFO - Log directory: logs/
2025-12-22 02:06:06 - root - INFO - Search queries log: logs/search_queries.log
2025-12-22 02:06:06 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-22 02:06:06 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-22 02:06:06 - app.database.db - INFO -    Current submissions count: 2
2025-12-22 02:06:13 - root - INFO - [IMAGE_SEARCH] Uploaded image: 1921681200_02_20251209131608827-13.17.22-09.12.2025.jpg
2025-12-22 02:06:14 - root - ERROR - [IMAGE_SEARCH] Model server error: 
2025-12-22 02:09:40 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='c·∫£nh nhi·ªÅu m√≥n h√†ng r∆°i t·ª´ tren tr·ªùi xu·ªëng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-22 02:09:40 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-22 02:09:40 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-22 02:09:40 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-22 02:09:42 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c·∫£nh nhi·ªÅu m√≥n h√†ng r∆°i t·ª´ tren tr·ªùi xu·ªëng' ‚Üí 'scene of many items falling from the sky'
2025-12-22 02:09:42 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'scene of many items falling from the sky'
2025-12-22 02:09:42 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-22 02:09:42 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-22 02:09:42 - app.services.method.clip_client - INFO - [CLIP] Batch endpoint not available (status 404), using individual calls
2025-12-22 02:09:42 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-22 02:09:42 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: scene of many items falling from the sky
2025-12-22 02:09:42 - app.services.method.beit3_client - INFO - [BEiT3] Batch endpoint not available (status 404), using individual calls
2025-12-22 02:09:43 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-22 02:09:43 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: scene of many items falling from the sky
2025-12-22 02:09:43 - app.services.method.bigg_client - INFO - [BIGG] Batch endpoint not available (status 404), using individual calls
2025-12-22 02:09:43 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-22 02:09:43 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: scene of many items falling from the sky
2025-12-22 02:09:43 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-22 02:09:43 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-22 02:09:43 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-22 02:09:43 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-22 02:09:43 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-22 02:09:43 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-22 02:09:43 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-22 02:09:45 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='c·∫£nh nhi·ªÅu m√≥n h√†ng r∆°i t·ª´ tren tr·ªùi xu·ªëng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-22 02:09:45 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-22 02:09:45 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-22 02:09:45 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-22 02:09:45 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c·∫£nh nhi·ªÅu m√≥n h√†ng r∆°i t·ª´ tren tr·ªùi xu·ªëng' ‚Üí 'scene of many items falling from the sky'
2025-12-22 02:09:45 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'scene of many items falling from the sky'
2025-12-22 02:09:45 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-22 02:09:45 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/text
2025-12-22 02:09:45 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: scene of many items falling from the sky
2025-12-22 02:09:46 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/beit3/text
2025-12-22 02:09:46 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: scene of many items falling from the sky
2025-12-22 02:09:46 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/bigg/text
2025-12-22 02:09:46 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: scene of many items falling from the sky
2025-12-22 02:09:46 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-22 02:09:46 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-22 02:09:46 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-22 02:09:46 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-22 02:09:46 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-22 02:09:46 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-22 02:09:46 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-22 02:18:51 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='c·∫£nh nhi·ªÅu m√≥n h√†ng r∆°i t·ª´ tren tr·ªùi xu·ªëng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-22 02:18:51 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-22 02:18:51 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-22 02:18:51 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-22 02:18:52 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c·∫£nh nhi·ªÅu m√≥n h√†ng r∆°i t·ª´ tren tr·ªùi xu·ªëng' ‚Üí 'scene of many items falling from the sky'
2025-12-22 02:18:52 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'scene of many items falling from the sky'
2025-12-22 02:18:52 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-22 02:18:52 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-22 02:18:52 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: scene of many items falling from the sky
2025-12-22 02:18:52 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-22 02:18:52 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: scene of many items falling from the sky
2025-12-22 02:18:53 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-22 02:18:53 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: scene of many items falling from the sky
2025-12-22 02:18:53 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-22 02:18:53 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-22 02:18:53 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-22 02:18:53 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-22 02:18:53 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-22 02:18:53 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-22 02:18:53 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-22 02:19:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-22 02:19:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='c·∫£nh nhi·ªÅu m√≥n h√†ng r∆°i t·ª´ tren tr·ªùi xu·ªëng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-22 02:19:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-22 02:19:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'c·∫£nh nhi·ªÅu m√≥n h√†ng r∆°i t·ª´ tren tr·ªùi xu·ªëng'
2025-12-22 02:19:05 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c·∫£nh nhi·ªÅu m√≥n h√†ng r∆°i t·ª´ tren tr·ªùi xu·ªëng' ‚Üí 'scene of many items falling from the sky'
2025-12-22 02:19:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'scene of many items falling from the sky'
2025-12-22 02:19:05 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-22 02:19:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='scene of many items falling from the sky', Q1='scene of many items falling from the sky', Q2='scene of many items falling from the sky'
2025-12-22 02:19:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-22 02:19:05 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-22 02:19:05 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-22 02:19:05 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: scene of many items falling from the sky
2025-12-22 02:19:11 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-22 02:19:11 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: scene of many items falling from the sky
2025-12-22 02:19:12 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-22 02:19:12 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: scene of many items falling from the sky
2025-12-22 02:19:14 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-22 02:19:14 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 9488.25ms
2025-12-22 02:19:14 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-22 02:19:14 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-22 02:19:14 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-22 02:21:52 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-22 02:21:52 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='c·∫£nh nhi·ªÅu m√≥n h√†ng r∆°i t·ª´ tren tr·ªùi xu·ªëng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-22 02:21:52 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-22 02:21:52 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'c·∫£nh nhi·ªÅu m√≥n h√†ng r∆°i t·ª´ tren tr·ªùi xu·ªëng'
2025-12-22 02:21:52 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c·∫£nh nhi·ªÅu m√≥n h√†ng r∆°i t·ª´ tren tr·ªùi xu·ªëng' ‚Üí 'scene of many items falling from the sky'
2025-12-22 02:21:52 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'scene of many items falling from the sky'
2025-12-22 02:21:52 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-22 02:21:52 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='scene of many items falling from the sky', Q1='scene of many items falling from the sky', Q2='scene of many items falling from the sky'
2025-12-22 02:21:52 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-22 02:21:52 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-22 02:21:53 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-22 02:21:53 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: scene of many items falling from the sky
2025-12-22 02:21:53 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-22 02:21:53 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: scene of many items falling from the sky
2025-12-22 02:21:53 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-22 02:21:53 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: scene of many items falling from the sky
2025-12-22 02:21:53 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-22 02:21:53 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: scene of many items falling from the sky
2025-12-22 02:21:53 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-22 02:21:53 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: scene of many items falling from the sky
2025-12-22 02:21:54 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-22 02:21:54 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: scene of many items falling from the sky
2025-12-22 02:21:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 0
2025-12-22 02:21:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2262.85ms
2025-12-22 02:21:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-22 02:21:54 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-22 02:21:54 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-22 02:21:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-22 02:21:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='c·∫£nh nhi·ªÅu m√≥n h√†ng r∆°i t·ª´ tren tr·ªùi xu·ªëng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-22 02:21:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-22 02:21:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'c·∫£nh nhi·ªÅu m√≥n h√†ng r∆°i t·ª´ tren tr·ªùi xu·ªëng'
2025-12-22 02:21:58 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c·∫£nh nhi·ªÅu m√≥n h√†ng r∆°i t·ª´ tren tr·ªùi xu·ªëng' ‚Üí 'scene of many items falling from the sky'
2025-12-22 02:21:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'scene of many items falling from the sky'
2025-12-22 02:21:59 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-22 02:21:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='scene of many items falling from the sky', Q1='scene of many items falling from the sky', Q2='scene of many items falling from the sky'
2025-12-22 02:21:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-22 02:21:59 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-22 02:21:59 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-22 02:21:59 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: scene of many items falling from the sky
2025-12-22 02:22:00 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-22 02:22:00 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: scene of many items falling from the sky
2025-12-22 02:22:00 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-22 02:22:00 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: scene of many items falling from the sky
2025-12-22 02:22:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-22 02:22:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2521.23ms
2025-12-22 02:22:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-22 02:22:01 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-22 02:22:01 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-22 02:22:12 - root - INFO - [IMAGE_SEARCH] Uploaded image: 1921681200_02_20251209131608827-13.17.22-09.12.2025.jpg
2025-12-22 02:22:13 - httpx - INFO - HTTP Request: POST https://privative-startingly-justa.ngrok-free.dev//embedding/clip/image "HTTP/1.1 404 Not Found"
2025-12-22 02:22:13 - root - ERROR - [IMAGE_SEARCH] Model server error: Client error '404 Not Found' for url 'https://privative-startingly-justa.ngrok-free.dev//embedding/clip/image'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404
2025-12-22 02:22:21 - root - INFO - [IMAGE_SEARCH] Uploaded image: 1921681200_02_20251209131608827-13.17.22-09.12.2025.jpg
2025-12-22 02:22:21 - httpx - INFO - HTTP Request: POST https://privative-startingly-justa.ngrok-free.dev//embedding/clip/image "HTTP/1.1 404 Not Found"
2025-12-22 02:22:21 - root - ERROR - [IMAGE_SEARCH] Model server error: Client error '404 Not Found' for url 'https://privative-startingly-justa.ngrok-free.dev//embedding/clip/image'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404
2025-12-22 02:22:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-22 02:22:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='c·∫£nh nhi·ªÅu m√≥n h√†ng r∆°i t·ª´ tren tr·ªùi xu·ªëng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-22 02:22:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-22 02:22:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'c·∫£nh nhi·ªÅu m√≥n h√†ng r∆°i t·ª´ tren tr·ªùi xu·ªëng'
2025-12-22 02:22:23 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c·∫£nh nhi·ªÅu m√≥n h√†ng r∆°i t·ª´ tren tr·ªùi xu·ªëng' ‚Üí 'scene of many items falling from the sky'
2025-12-22 02:22:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'scene of many items falling from the sky'
2025-12-22 02:22:24 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-22 02:22:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='scene of many items falling from the sky', Q1='scene of many items falling from the sky', Q2='scene of many items falling from the sky'
2025-12-22 02:22:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-22 02:22:24 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-22 02:22:24 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-22 02:22:24 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: scene of many items falling from the sky
2025-12-22 02:22:24 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-22 02:22:24 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: scene of many items falling from the sky
2025-12-22 02:22:24 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-22 02:22:24 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: scene of many items falling from the sky
2025-12-22 02:22:24 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-22 02:22:24 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: scene of many items falling from the sky
2025-12-22 02:22:24 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-22 02:22:24 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: scene of many items falling from the sky
2025-12-22 02:22:25 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-22 02:22:25 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: scene of many items falling from the sky
2025-12-22 02:22:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-22 02:22:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2133.62ms
2025-12-22 02:22:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-22 02:22:25 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-22 02:22:25 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-22 02:22:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-22 02:22:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='c·∫£nh nhi·ªÅu m√≥n h√†ng r∆°i t·ª´ tren tr·ªùi xu·ªëng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-22 02:22:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-22 02:22:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'c·∫£nh nhi·ªÅu m√≥n h√†ng r∆°i t·ª´ tren tr·ªùi xu·ªëng'
2025-12-22 02:22:26 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c·∫£nh nhi·ªÅu m√≥n h√†ng r∆°i t·ª´ tren tr·ªùi xu·ªëng' ‚Üí 'scene of many items falling from the sky'
2025-12-22 02:22:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'scene of many items falling from the sky'
2025-12-22 02:22:27 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-22 02:22:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='scene of many items falling from the sky', Q1='scene of many items falling from the sky', Q2='scene of many items falling from the sky'
2025-12-22 02:22:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-22 02:22:27 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-22 02:22:27 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-22 02:22:27 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: scene of many items falling from the sky
2025-12-22 02:22:28 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-22 02:22:28 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: scene of many items falling from the sky
2025-12-22 02:22:28 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-22 02:22:28 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: scene of many items falling from the sky
2025-12-22 02:22:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-22 02:22:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2497.84ms
2025-12-22 02:22:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-22 02:22:29 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-22 02:22:29 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-22 02:22:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-22 02:22:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='c·∫£nh nhi·ªÅu m√≥n h√†ng r∆°i t·ª´ tren tr·ªùi xu·ªëng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-22 02:22:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-22 02:22:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'c·∫£nh nhi·ªÅu m√≥n h√†ng r∆°i t·ª´ tren tr·ªùi xu·ªëng'
2025-12-22 02:22:32 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c·∫£nh nhi·ªÅu m√≥n h√†ng r∆°i t·ª´ tren tr·ªùi xu·ªëng' ‚Üí 'scene of many items falling from the sky'
2025-12-22 02:22:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'scene of many items falling from the sky'
2025-12-22 02:22:32 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-22 02:22:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='scene of many items falling from the sky', Q1='scene of many items falling from the sky', Q2='scene of many items falling from the sky'
2025-12-22 02:22:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-22 02:22:32 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-22 02:22:32 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-22 02:22:32 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-22 02:22:32 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: scene of many items falling from the sky
2025-12-22 02:22:32 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: scene of many items falling from the sky
2025-12-22 02:22:33 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-22 02:22:33 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: scene of many items falling from the sky
2025-12-22 02:22:33 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-22 02:22:33 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: scene of many items falling from the sky
2025-12-22 02:22:33 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-22 02:22:33 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: scene of many items falling from the sky
2025-12-22 02:22:33 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-22 02:22:33 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: scene of many items falling from the sky
2025-12-22 02:22:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-22 02:22:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2131.53ms
2025-12-22 02:22:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-22 02:22:34 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-22 02:22:34 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-22 02:22:36 - root - INFO - [IMAGE_SEARCH] Uploaded image: 1921681200_02_20251209131608827-13.17.22-09.12.2025.jpg
2025-12-22 02:22:36 - root - ERROR - [IMAGE_SEARCH] Model server error: 
2025-12-22 02:22:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-22 02:22:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='c·∫£nh nhi·ªÅu m√≥n h√†ng r∆°i t·ª´ tren tr·ªùi xu·ªëng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-22 02:22:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-22 02:22:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'c·∫£nh nhi·ªÅu m√≥n h√†ng r∆°i t·ª´ tren tr·ªùi xu·ªëng'
2025-12-22 02:22:40 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c·∫£nh nhi·ªÅu m√≥n h√†ng r∆°i t·ª´ tren tr·ªùi xu·ªëng' ‚Üí 'scene of many items falling from the sky'
2025-12-22 02:22:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'scene of many items falling from the sky'
2025-12-22 02:22:41 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-22 02:22:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='scene of many items falling from the sky', Q1='scene of many items falling from the sky', Q2='scene of many items falling from the sky'
2025-12-22 02:22:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-22 02:22:41 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-22 02:22:41 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-22 02:22:41 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: scene of many items falling from the sky
2025-12-22 02:22:42 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-22 02:22:42 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: scene of many items falling from the sky
2025-12-22 02:22:42 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-22 02:22:42 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: scene of many items falling from the sky
2025-12-22 02:22:43 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-22 02:22:43 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2451.63ms
2025-12-22 02:22:43 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-22 02:22:43 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-22 02:22:43 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-22 02:22:44 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframe/L22/L22_V017/25649.webp
2025-12-22 02:22:44 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframe/L22/L22_V017/25649.webp -> /app/app/data/keyframe/L22/L22_V017/25649.webp
2025-12-22 02:22:44 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframe/L22/L22_V017/25649.webp
2025-12-22 02:22:44 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframe/L22/L22_V017/25649.webp -> /app/app/data/keyframe/L22/L22_V017/25649.webp
2025-12-22 02:22:47 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-22 02:22:47 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-22 02:22:47 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-22 02:22:47 - root - INFO - [IMAGE_SEARCH] Result #0: ID=662985, Path=/keyframe/L22/L22_V017/25649.webp, Score=0.9949368238449097
2025-12-22 02:22:47 - root - INFO - [IMAGE_SEARCH] Result #1: ID=662986, Path=/keyframe/L22/L22_V017/25689.webp, Score=0.9813750982284546
2025-12-22 02:22:47 - root - INFO - [IMAGE_SEARCH] Result #2: ID=662984, Path=/keyframe/L22/L22_V017/25609.webp, Score=0.9746485352516174
2025-12-22 02:22:47 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 2563.91ms
2025-12-22 02:22:47 - root - INFO - [IMAGE_SEARCH] First result sample: {'id': 662985, 'keyframe_path': '/keyframe/L22/L22_V017/25649.webp', 'score': 0.9949368238449097, 'video': '', 'frame_idx': None}
2025-12-22 02:22:47 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-22 02:22:47 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-22 02:22:47 - root - INFO - [IMAGE_SEARCH] Result #0: ID=662985, Path=/keyframe/L22/L22_V017/25649.webp, Score=0.9949368238449097
2025-12-22 02:22:47 - root - INFO - [IMAGE_SEARCH] Result #1: ID=662986, Path=/keyframe/L22/L22_V017/25689.webp, Score=0.9813750982284546
2025-12-22 02:22:47 - root - INFO - [IMAGE_SEARCH] Result #2: ID=662984, Path=/keyframe/L22/L22_V017/25609.webp, Score=0.9746485352516174
2025-12-22 02:22:47 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 2568.13ms
2025-12-22 02:22:47 - root - INFO - [IMAGE_SEARCH] First result sample: {'id': 662985, 'keyframe_path': '/keyframe/L22/L22_V017/25649.webp', 'score': 0.9949368238449097, 'video': '', 'frame_idx': None}
2025-12-22 02:22:50 - root - INFO - [IMAGE_SEARCH] Uploaded image: 1921681200_02_20251209131608827-13.17.22-09.12.2025.jpg
2025-12-22 02:22:51 - root - ERROR - [IMAGE_SEARCH] Model server error: 
2025-12-22 02:50:08 - root - INFO - üõë Shutting down FastAPI application...
2025-12-22 06:08:29 - root - INFO - Mounted keyframe directory at /keyframe: /app/app/data/keyframe
2025-12-22 06:08:29 - root - INFO - üöÄ Starting FastAPI application...
2025-12-22 06:08:29 - root - INFO - Log directory: logs/
2025-12-22 06:08:29 - root - INFO - Search queries log: logs/search_queries.log
2025-12-22 06:08:29 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-22 06:08:29 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-22 06:08:29 - app.database.db - INFO -    Current submissions count: 2
2025-12-22 06:08:29 - root - INFO - [IMAGE_SEARCH] Uploaded image: pasted-image-1766383567913.png
2025-12-22 06:08:30 - root - ERROR - [IMAGE_SEARCH] Model server error: 
2025-12-22 06:08:34 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='l≈© l·ª•t', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-22 06:08:34 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-22 06:08:34 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-22 06:08:34 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-22 06:08:35 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'l≈© l·ª•t' ‚Üí 'flood'
2025-12-22 06:08:35 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'flood'
2025-12-22 06:08:35 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-22 06:08:35 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-22 06:08:36 - app.services.method.clip_client - INFO - [CLIP] Batch endpoint available, processed 1 texts
2025-12-22 06:08:39 - app.services.method.beit3_client - INFO - [BEiT3] Batch endpoint available, processed 1 texts
2025-12-22 06:08:40 - app.services.method.bigg_client - INFO - [BIGG] Batch endpoint available, processed 1 texts
2025-12-22 06:08:40 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 294424:1.0000, 672045:0.9745, 408053:0.8432, 79499:0.7860, 11333:0.7810, 331088:0.7461, 622704:0.7230, 145416:0.7225, 25850:0.6941, 605198:0.6609
2025-12-22 06:08:40 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 494661:1.0000, 494682:0.9356, 494683:0.9249, 494681:0.9201, 494689:0.9072, 14109:0.8298, 392741:0.8154, 494686:0.8127, 409144:0.8000, 494687:0.7024
2025-12-22 06:08:40 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 530766:1.0000, 530767:0.8570, 530769:0.7525, 530768:0.7292, 607603:0.7080, 25851:0.5707, 231189:0.5701, 586372:0.5683, 50157:0.5666, 232325:0.5414
2025-12-22 06:08:40 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 494661:1.0000, 494682:0.9824, 494689:0.9468, 494681:0.8644, 494683:0.8591, 232338:0.7813, 14109:0.7196, 232336:0.7112, 494686:0.6945, 530766:0.6706
2025-12-22 06:08:40 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-22 06:08:40 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-22 06:08:40 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-22 06:08:44 - root - INFO - [IMAGE_SEARCH] Uploaded image: pasted-image-1766383724630.png
2025-12-22 06:08:45 - root - ERROR - [IMAGE_SEARCH] Model server error: 
2025-12-22 06:08:50 - root - INFO - üõë Shutting down FastAPI application...
2025-12-22 06:08:54 - root - INFO - Mounted keyframe directory at /keyframe: /app/app/data/keyframe
2025-12-22 06:08:54 - root - INFO - üöÄ Starting FastAPI application...
2025-12-22 06:08:54 - root - INFO - Log directory: logs/
2025-12-22 06:08:54 - root - INFO - Search queries log: logs/search_queries.log
2025-12-22 06:08:54 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-22 06:08:54 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-22 06:08:54 - app.database.db - INFO -    Current submissions count: 2
2025-12-22 06:09:21 - root - INFO - [IMAGE_SEARCH] Uploaded image: pasted-image-1766383761557.png
2025-12-22 06:09:22 - root - ERROR - [IMAGE_SEARCH] Model server error: 
2025-12-22 06:11:04 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='l≈© l·ª•t', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-22 06:11:04 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-22 06:11:04 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-22 06:11:04 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-22 06:11:04 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'l≈© l·ª•t' ‚Üí 'flood'
2025-12-22 06:11:04 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'flood'
2025-12-22 06:11:04 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-22 06:11:04 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-22 06:11:05 - app.services.method.clip_client - INFO - [CLIP] Batch endpoint available, processed 1 texts
2025-12-22 06:11:07 - app.services.method.beit3_client - INFO - [BEiT3] Batch endpoint available, processed 1 texts
2025-12-22 06:11:07 - app.services.method.bigg_client - INFO - [BIGG] Batch endpoint available, processed 1 texts
2025-12-22 06:11:07 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 294424:1.0000, 672045:0.9745, 408053:0.8432, 79499:0.7860, 11333:0.7810, 331088:0.7461, 622704:0.7230, 145416:0.7225, 25850:0.6941, 605198:0.6609
2025-12-22 06:11:07 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 494661:1.0000, 494682:0.9356, 494683:0.9249, 494681:0.9201, 494689:0.9072, 14109:0.8298, 392741:0.8154, 494686:0.8127, 409144:0.8000, 494687:0.7024
2025-12-22 06:11:07 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 530766:1.0000, 530767:0.8570, 530769:0.7525, 530768:0.7292, 607603:0.7080, 25851:0.5707, 231189:0.5701, 586372:0.5683, 50157:0.5666, 232325:0.5414
2025-12-22 06:11:07 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 494661:1.0000, 494682:0.9824, 494689:0.9468, 494681:0.8644, 494683:0.8591, 232338:0.7813, 14109:0.7196, 232336:0.7112, 494686:0.6945, 530766:0.6706
2025-12-22 06:11:07 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-22 06:11:07 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-22 06:11:07 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-22 06:11:10 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframe/L17/L17_V002/17620.webp
2025-12-22 06:11:10 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframe/L17/L17_V002/17620.webp -> /app/app/data/keyframe/L17/L17_V002/17620.webp
2025-12-22 06:11:10 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframe/L17/L17_V002/17620.webp
2025-12-22 06:11:10 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframe/L17/L17_V002/17620.webp -> /app/app/data/keyframe/L17/L17_V002/17620.webp
2025-12-22 06:11:12 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-22 06:11:12 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-22 06:11:12 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-22 06:11:12 - root - INFO - [IMAGE_SEARCH] Result #0: ID=494661, Path=/keyframe/L17/L17_V002/17620.webp, Score=0.9969171285629272
2025-12-22 06:11:12 - root - INFO - [IMAGE_SEARCH] Result #1: ID=494660, Path=/keyframe/L17/L17_V002/17580.webp, Score=0.9697971343994141
2025-12-22 06:11:12 - root - INFO - [IMAGE_SEARCH] Result #2: ID=494662, Path=/keyframe/L17/L17_V002/17660.webp, Score=0.9569288492202759
2025-12-22 06:11:12 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 2077.51ms
2025-12-22 06:11:12 - root - INFO - [IMAGE_SEARCH] First result sample: {'id': 494661, 'keyframe_path': '/keyframe/L17/L17_V002/17620.webp', 'score': 0.9969171285629272, 'video': '', 'frame_idx': None}
2025-12-22 06:11:12 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-22 06:11:12 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-22 06:11:12 - root - INFO - [IMAGE_SEARCH] Result #0: ID=494661, Path=/keyframe/L17/L17_V002/17620.webp, Score=0.9969171285629272
2025-12-22 06:11:12 - root - INFO - [IMAGE_SEARCH] Result #1: ID=494660, Path=/keyframe/L17/L17_V002/17580.webp, Score=0.9697971343994141
2025-12-22 06:11:12 - root - INFO - [IMAGE_SEARCH] Result #2: ID=494662, Path=/keyframe/L17/L17_V002/17660.webp, Score=0.9569288492202759
2025-12-22 06:11:12 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 2336.13ms
2025-12-22 06:11:12 - root - INFO - [IMAGE_SEARCH] First result sample: {'id': 494661, 'keyframe_path': '/keyframe/L17/L17_V002/17620.webp', 'score': 0.9969171285629272, 'video': '', 'frame_idx': None}
2025-12-22 06:12:45 - root - INFO - üõë Shutting down FastAPI application...
2025-12-22 06:12:49 - root - INFO - Mounted keyframe directory at /keyframe: /app/app/data/keyframe
2025-12-22 06:12:49 - root - INFO - üöÄ Starting FastAPI application...
2025-12-22 06:12:49 - root - INFO - Log directory: logs/
2025-12-22 06:12:49 - root - INFO - Search queries log: logs/search_queries.log
2025-12-22 06:12:49 - app.database.db - INFO - Initializing chatbox database at: postgres:5432/aivideo_chatbox
2025-12-22 06:12:49 - app.database.db - INFO - ‚úÖ Chatbox database initialized successfully
2025-12-22 06:12:49 - app.database.db - INFO -    Current submissions count: 2
2025-12-22 06:13:27 - root - INFO - [IMAGE_SEARCH] Uploaded image: pasted-image-1766384007364.png
2025-12-22 06:13:27 - root - INFO - [IMAGE_SEARCH] Calling model server: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image
2025-12-22 06:13:29 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-22 06:13:29 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-22 06:13:29 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-22 06:13:30 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 3344.65ms
2025-12-22 06:13:37 - root - INFO - [IMAGE_SEARCH] Uploaded image: pasted-image-1766384007364.png
2025-12-22 06:13:37 - root - INFO - [IMAGE_SEARCH] Calling model server: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image
2025-12-22 06:13:39 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-22 06:13:39 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-22 06:13:39 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1535.03ms
2025-12-22 06:13:42 - root - INFO - [IMAGE_SEARCH] Uploaded image: hinh7.jpg
2025-12-22 06:13:42 - root - INFO - [IMAGE_SEARCH] Calling model server: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image
2025-12-22 06:13:43 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-22 06:13:43 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-22 06:13:44 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1767.29ms
2025-12-22 06:14:27 - root - INFO - [IMAGE_SEARCH] Uploaded image: matsaubevy.jpg
2025-12-22 06:14:27 - root - INFO - [IMAGE_SEARCH] Calling model server: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image
2025-12-22 06:14:29 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-22 06:14:29 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-22 06:14:30 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 2072.94ms
2025-12-22 06:15:11 - root - INFO - [IMAGE_SEARCH] Uploaded image: pasted-image-1766384111047.png
2025-12-22 06:15:11 - root - INFO - [IMAGE_SEARCH] Calling model server: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image
2025-12-22 06:15:12 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-22 06:15:13 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-22 06:15:13 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 2139.95ms
2025-12-22 06:15:29 - root - INFO - [IMAGE_SEARCH] Uploaded image: pasted-image-1766384129287.png
2025-12-22 06:15:29 - root - INFO - [IMAGE_SEARCH] Calling model server: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image
2025-12-22 06:15:31 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-22 06:15:31 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-22 06:15:31 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1885.27ms
2025-12-22 16:50:12 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='l≈© l·ª•t', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-22 16:50:12 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-22 16:50:12 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-22 16:50:12 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-22 16:50:13 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'l≈© l·ª•t' ‚Üí 'flood'
2025-12-22 16:50:13 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'flood'
2025-12-22 16:50:13 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-22 16:50:13 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-22 16:50:14 - app.services.method.clip_client - INFO - [CLIP] Batch endpoint not available (status 404), using individual calls
2025-12-22 16:50:14 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-22 16:50:14 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: flood
2025-12-22 16:50:14 - app.services.method.beit3_client - INFO - [BEiT3] Batch endpoint not available (status 404), using individual calls
2025-12-22 16:50:14 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-22 16:50:14 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: flood
2025-12-22 16:50:14 - app.services.method.bigg_client - INFO - [BIGG] Batch endpoint not available (status 404), using individual calls
2025-12-22 16:50:14 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-22 16:50:14 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: flood
2025-12-22 16:50:14 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-22 16:50:14 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-22 16:50:14 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-22 16:50:14 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-22 16:50:14 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-22 16:50:14 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-22 16:50:14 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-22 16:50:20 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='l≈© l·ª•t', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-22 16:50:20 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-22 16:50:20 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-22 16:50:20 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-22 16:50:21 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'l≈© l·ª•t' ‚Üí 'flood'
2025-12-22 16:50:21 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'flood'
2025-12-22 16:50:21 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-22 16:50:21 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/text
2025-12-22 16:50:21 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: flood
2025-12-22 16:50:21 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/beit3/text
2025-12-22 16:50:21 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: flood
2025-12-22 16:50:22 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/bigg/text
2025-12-22 16:50:22 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: flood
2025-12-22 16:50:22 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-22 16:50:22 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-22 16:50:22 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-22 16:50:22 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-22 16:50:22 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-22 16:50:22 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-22 16:50:22 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-22 16:50:24 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='l≈© l·ª•t', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-22 16:50:24 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-22 16:50:24 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-22 16:50:24 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-22 16:50:25 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'l≈© l·ª•t' ‚Üí 'flood'
2025-12-22 16:50:25 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'flood'
2025-12-22 16:50:25 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-22 16:50:25 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-22 16:50:25 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: flood
2025-12-22 16:50:25 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-22 16:50:25 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: flood
2025-12-22 16:50:25 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-22 16:50:25 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: flood
2025-12-22 16:50:25 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-22 16:50:25 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-22 16:50:25 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-22 16:50:25 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-22 16:50:25 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-22 16:50:25 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-22 16:50:25 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-22 16:50:31 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='l≈© l·ª•t', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-22 16:50:31 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-22 16:50:31 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-22 16:50:31 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-22 16:50:32 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'l≈© l·ª•t' ‚Üí 'flood'
2025-12-22 16:50:32 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'flood'
2025-12-22 16:50:32 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-22 16:50:32 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/text
2025-12-22 16:50:32 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: flood
2025-12-22 16:50:33 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/beit3/text
2025-12-22 16:50:33 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: flood
2025-12-22 16:50:33 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/bigg/text
2025-12-22 16:50:33 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: flood
2025-12-22 16:50:33 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-22 16:50:33 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-22 16:50:33 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-22 16:50:33 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-22 16:50:33 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-22 16:50:33 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-22 16:50:33 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-22 16:50:42 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='iphone', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-22 16:50:42 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-22 16:50:42 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-22 16:50:42 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-22 16:50:42 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'iphone'
2025-12-22 16:50:42 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'iphone'
2025-12-22 16:50:42 - elastic_transport.transport - INFO - GET http://elasticsearch:9200/ [status:200 duration:0.005s]
2025-12-22 16:50:42 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.146s]
2025-12-22 16:50:42 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 29157:0.9681, 29158:0.9681, 28878:0.9654, 29156:0.9647, 29042:0.9635, 29043:0.9635, 29041:0.9579, 96602:0.9462, 245805:0.9402, 29159:0.9303
2025-12-22 16:50:42 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-22 16:50:42 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-22 16:50:42 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-22 16:52:42 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='ƒëi·ªán tho·∫°i', ocrText='iphone', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-22 16:52:42 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-22 16:52:42 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-22 16:52:42 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr', 'multimodal'}, Total: 2
2025-12-22 16:52:43 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'ƒëi·ªán tho·∫°i' ‚Üí 'phone'
2025-12-22 16:52:43 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'phone'
2025-12-22 16:52:43 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'iphone'
2025-12-22 16:52:43 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-22 16:52:43 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-22 16:52:43 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: phone
2025-12-22 16:52:43 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-22 16:52:43 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: phone
2025-12-22 16:52:43 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-22 16:52:43 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: phone
2025-12-22 16:52:43 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-22 16:52:43 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-22 16:52:43 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-22 16:52:43 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-22 16:52:43 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'iphone'
2025-12-22 16:52:43 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.035s]
2025-12-22 16:52:43 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 29157:0.9681, 29158:0.9681, 28878:0.9654, 29156:0.9647, 29042:0.9635, 29043:0.9635, 29041:0.9579, 96602:0.9462, 245805:0.9402, 29159:0.9303
2025-12-22 16:52:43 - app.routers.search - INFO - [ENSEMBLE] Check: 2 enabled methods, per_method_results keys: ['multimodal', 'ocr']
2025-12-22 16:52:43 - app.routers.search - INFO - [ENSEMBLE] Ensembling 2 methods: {'ocr', 'multimodal'}
2025-12-22 16:52:43 - app.routers.search - INFO - [ENSEMBLE] Final ensemble top results: 29157:0.4840, 29158:0.4840, 28878:0.4827, 29156:0.4824, 29042:0.4818, 29043:0.4818, 29041:0.4789, 96602:0.4731, 245805:0.4701, 29159:0.4651, 29045:0.4642, 29144:0.4512, 29044:0.4491, 29046:0.4432, 138782:0.4370, 138781:0.4261, 138780:0.4142, 52463:0.3930, 52464:0.3930, 52465:0.3930
2025-12-22 16:52:43 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-22 16:52:45 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='ƒëi·ªán tho·∫°i', ocrText='iphone', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-22 16:52:45 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-22 16:52:45 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-22 16:52:45 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-22 16:52:45 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'ƒëi·ªán tho·∫°i' ‚Üí 'phone'
2025-12-22 16:52:45 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'phone'
2025-12-22 16:52:45 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-22 16:52:45 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/text
2025-12-22 16:52:45 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: phone
2025-12-22 16:52:45 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/beit3/text
2025-12-22 16:52:45 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: phone
2025-12-22 16:52:46 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/bigg/text
2025-12-22 16:52:46 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: phone
2025-12-22 16:52:46 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-22 16:52:46 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-22 16:52:46 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-22 16:52:46 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-22 16:52:46 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-22 16:52:46 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-22 16:52:46 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-22 16:52:48 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='ƒëi·ªán tho·∫°i', ocrText='iphone', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-22 16:52:48 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-22 16:52:48 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-22 16:52:48 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-22 16:52:48 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'ƒëi·ªán tho·∫°i' ‚Üí 'phone'
2025-12-22 16:52:48 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'phone'
2025-12-22 16:52:48 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-22 16:52:48 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-22 16:52:48 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: phone
2025-12-22 16:52:49 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-22 16:52:49 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: phone
2025-12-22 16:52:49 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-22 16:52:49 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: phone
2025-12-22 16:52:49 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-22 16:52:49 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-22 16:52:49 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-22 16:52:49 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-22 16:52:49 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-22 16:52:49 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-22 16:52:49 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-22 16:52:59 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='l≈© l·ª•t', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-22 16:52:59 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-22 16:52:59 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-22 16:52:59 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-22 16:53:00 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'l≈© l·ª•t' ‚Üí 'flood'
2025-12-22 16:53:00 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'flood'
2025-12-22 16:53:00 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-22 16:53:00 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/text
2025-12-22 16:53:00 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: flood
2025-12-22 16:53:00 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/beit3/text
2025-12-22 16:53:00 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: flood
2025-12-22 16:53:00 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/bigg/text
2025-12-22 16:53:00 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: flood
2025-12-22 16:53:00 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-22 16:53:00 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-22 16:53:00 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-22 16:53:00 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-22 16:53:00 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-22 16:53:00 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-22 16:53:00 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-22 16:53:03 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='l≈© l·ª•t', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-22 16:53:03 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-22 16:53:03 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-22 16:53:03 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-22 16:53:04 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'l≈© l·ª•t' ‚Üí 'flood'
2025-12-22 16:53:04 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'flood'
2025-12-22 16:53:04 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-22 16:53:04 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-22 16:53:04 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: flood
2025-12-22 16:53:04 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-22 16:53:04 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: flood
2025-12-22 16:53:04 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-22 16:53:04 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: flood
2025-12-22 16:53:04 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-22 16:53:04 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-22 16:53:04 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-22 16:53:04 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-22 16:53:04 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-22 16:53:04 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-22 16:53:04 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-22 16:53:26 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='l≈© l·ª•t', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-22 16:53:26 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-22 16:53:26 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-22 16:53:26 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-22 16:53:27 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'l≈© l·ª•t' ‚Üí 'flood'
2025-12-22 16:53:27 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'flood'
2025-12-22 16:53:27 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-22 16:53:31 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 294424:1.0000, 672045:0.9745, 408053:0.8432, 79499:0.7860, 11333:0.7810, 331088:0.7461, 622704:0.7230, 145416:0.7225, 25850:0.6941, 605198:0.6609
2025-12-22 16:53:31 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 494661:1.0000, 494682:0.9356, 494683:0.9249, 494681:0.9201, 494689:0.9072, 14109:0.8298, 392741:0.8154, 494686:0.8127, 409144:0.8000, 494687:0.7024
2025-12-22 16:53:31 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 530766:1.0000, 530767:0.8570, 530769:0.7525, 530768:0.7292, 607603:0.7080, 25851:0.5707, 231189:0.5701, 586372:0.5683, 50157:0.5666, 232325:0.5414
2025-12-22 16:53:31 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 494661:1.0000, 494682:0.9824, 494689:0.9468, 494681:0.8644, 494683:0.8591, 232338:0.7813, 14109:0.7196, 232336:0.7112, 494686:0.6945, 530766:0.6706
2025-12-22 16:53:31 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-22 16:53:31 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-22 16:53:31 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-22 16:56:02 - root - INFO - [IMAGE_SEARCH] Uploaded image: pasted-image-1766422562332.png
2025-12-22 16:56:02 - root - INFO - [IMAGE_SEARCH] Calling model server: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image
2025-12-22 16:56:05 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-22 16:56:05 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-22 16:56:05 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 3112.50ms
2025-12-22 16:56:09 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframe/L20/L20_V025/20713.webp
2025-12-22 16:56:09 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframe/L20/L20_V025/20713.webp -> /app/app/data/keyframe/L20/L20_V025/20713.webp
2025-12-22 16:56:09 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframe/L20/L20_V025/20713.webp
2025-12-22 16:56:09 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframe/L20/L20_V025/20713.webp -> /app/app/data/keyframe/L20/L20_V025/20713.webp
2025-12-22 16:56:10 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-22 16:56:10 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-22 16:56:10 - root - INFO - [IMAGE_SEARCH] Result #0: ID=609362, Path=/keyframe/L20/L20_V025/20713.webp, Score=0.9952430129051208
2025-12-22 16:56:10 - root - INFO - [IMAGE_SEARCH] Result #1: ID=273906, Path=/keyframe/L09/L09_V028/18880.webp, Score=0.9790551066398621
2025-12-22 16:56:10 - root - INFO - [IMAGE_SEARCH] Result #2: ID=609361, Path=/keyframe/L20/L20_V025/20673.webp, Score=0.9735739231109619
2025-12-22 16:56:10 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1611.74ms
2025-12-22 16:56:10 - root - INFO - [IMAGE_SEARCH] First result sample: {'id': 609362, 'keyframe_path': '/keyframe/L20/L20_V025/20713.webp', 'score': 0.9952430129051208, 'video': '', 'frame_idx': None}
2025-12-22 16:56:10 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-22 16:56:10 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-22 16:56:10 - root - INFO - [IMAGE_SEARCH] Result #0: ID=609362, Path=/keyframe/L20/L20_V025/20713.webp, Score=0.9952430129051208
2025-12-22 16:56:10 - root - INFO - [IMAGE_SEARCH] Result #1: ID=273906, Path=/keyframe/L09/L09_V028/18880.webp, Score=0.9790551066398621
2025-12-22 16:56:10 - root - INFO - [IMAGE_SEARCH] Result #2: ID=609361, Path=/keyframe/L20/L20_V025/20673.webp, Score=0.9735739231109619
2025-12-22 16:56:10 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1759.89ms
2025-12-22 16:56:10 - root - INFO - [IMAGE_SEARCH] First result sample: {'id': 609362, 'keyframe_path': '/keyframe/L20/L20_V025/20713.webp', 'score': 0.9952430129051208, 'video': '', 'frame_idx': None}
2025-12-22 23:51:08 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='tuy·∫øt', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-22 23:51:08 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-22 23:51:08 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-22 23:51:08 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-22 23:51:08 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'tuy·∫øt' ‚Üí 'snow'
2025-12-22 23:51:08 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'snow'
2025-12-22 23:51:08 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-22 23:51:09 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-22 23:51:09 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: snow
2025-12-22 23:51:09 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-22 23:51:09 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: snow
2025-12-22 23:51:09 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-22 23:51:09 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: snow
2025-12-22 23:51:09 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-22 23:51:09 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-22 23:51:09 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-22 23:51:09 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-22 23:51:09 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-22 23:51:09 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-22 23:51:09 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-22 23:51:13 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='l≈© l·ª•t', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-22 23:51:13 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-22 23:51:13 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-22 23:51:13 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-22 23:51:13 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'l≈© l·ª•t' ‚Üí 'flood'
2025-12-22 23:51:13 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'flood'
2025-12-22 23:51:13 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-22 23:51:15 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 294424:1.0000, 672045:0.9745, 408053:0.8432, 79499:0.7860, 11333:0.7810, 331088:0.7461, 622704:0.7230, 145416:0.7225, 25850:0.6941, 605198:0.6609
2025-12-22 23:51:15 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 494661:1.0000, 494682:0.9356, 494683:0.9249, 494681:0.9201, 494689:0.9072, 14109:0.8298, 392741:0.8154, 494686:0.8127, 409144:0.8000, 494687:0.7024
2025-12-22 23:51:15 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 530766:1.0000, 530767:0.8570, 530769:0.7525, 530768:0.7292, 607603:0.7080, 25851:0.5707, 231189:0.5701, 586372:0.5683, 50157:0.5666, 232325:0.5414
2025-12-22 23:51:15 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 494661:1.0000, 494682:0.9824, 494689:0.9468, 494681:0.8644, 494683:0.8591, 232338:0.7813, 14109:0.7196, 232336:0.7112, 494686:0.6945, 530766:0.6706
2025-12-22 23:51:15 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-22 23:51:15 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-22 23:51:15 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 00:35:24 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='r·ª´ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 00:35:24 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-23 00:35:24 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-23 00:35:24 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-23 00:35:24 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-23 00:35:24 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'forest'
2025-12-23 00:35:24 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-23 00:35:25 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 00:35:25 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest
2025-12-23 00:35:25 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 00:35:25 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-23 00:35:25 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 00:35:25 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-23 00:35:25 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-23 00:35:25 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-23 00:35:25 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-23 00:35:25 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-23 00:35:25 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-23 00:35:25 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-23 00:35:25 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 00:35:26 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='r·ª´ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 00:35:26 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-23 00:35:26 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-23 00:35:26 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-23 00:35:26 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-23 00:35:26 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'forest'
2025-12-23 00:35:26 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-23 00:35:30 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 364952:1.0000, 12752:0.9831, 452470:0.9779, 181833:0.9235, 181837:0.8812, 181816:0.8536, 181815:0.8497, 181831:0.8332, 627259:0.8236, 181832:0.8198
2025-12-23 00:35:30 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 632682:1.0000, 632681:0.9716, 630826:0.9047, 632658:0.8735, 632184:0.8615, 62631:0.8571, 260279:0.8532, 633771:0.8439, 452470:0.8424, 630825:0.8226
2025-12-23 00:35:30 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 452470:1.0000, 579573:0.9221, 174012:0.8316, 627259:0.7723, 573747:0.7122, 579777:0.6898, 632670:0.6840, 630818:0.6780, 260279:0.6638, 579791:0.6584
2025-12-23 00:35:30 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 452470:1.0000, 260279:0.7699, 181831:0.6622, 630818:0.6435, 181814:0.6255, 181821:0.5932, 181816:0.5561, 632658:0.5520, 181825:0.5477, 632682:0.5218
2025-12-23 00:35:30 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-23 00:35:30 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-23 00:35:30 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 00:37:51 - root - INFO - [IMAGE_SEARCH] Uploaded image: pasted-image-1766450269769.png
2025-12-23 00:37:51 - root - INFO - [IMAGE_SEARCH] Calling model server: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image
2025-12-23 00:37:53 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 00:37:53 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 00:37:54 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 2474.71ms
2025-12-23 00:57:13 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='tuy·∫øt', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 00:57:13 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-23 00:57:13 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-23 00:57:13 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-23 00:57:13 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'tuy·∫øt' ‚Üí 'snow'
2025-12-23 00:57:13 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'snow'
2025-12-23 00:57:13 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-23 00:57:13 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 00:57:13 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: snow
2025-12-23 00:57:14 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 00:57:14 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: snow
2025-12-23 00:57:14 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 00:57:14 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: snow
2025-12-23 00:57:14 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-23 00:57:14 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-23 00:57:14 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-23 00:57:14 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-23 00:57:14 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-23 00:57:14 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-23 00:57:14 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 00:57:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 00:57:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='tuy·∫øt', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 00:57:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 00:57:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'tuy·∫øt'
2025-12-23 00:57:19 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'tuy·∫øt' ‚Üí 'snow'
2025-12-23 00:57:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'snow'
2025-12-23 00:57:20 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 00:57:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='snow', Q1='snow', Q2='snow'
2025-12-23 00:57:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 00:57:20 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 00:57:20 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 00:57:20 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: snow
2025-12-23 00:57:21 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 00:57:21 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: snow
2025-12-23 00:57:22 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 00:57:22 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: snow
2025-12-23 00:57:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 00:57:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3588.74ms
2025-12-23 00:57:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 00:57:23 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-23 00:57:23 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-23 00:57:24 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='con ng∆∞·ªùi', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 00:57:24 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-23 00:57:24 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-23 00:57:24 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-23 00:57:24 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'con ng∆∞·ªùi' ‚Üí 'human'
2025-12-23 00:57:24 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'human'
2025-12-23 00:57:24 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-23 00:57:24 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 00:57:24 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: human
2025-12-23 00:57:25 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 00:57:25 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: human
2025-12-23 00:57:25 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 00:57:25 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: human
2025-12-23 00:57:25 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-23 00:57:25 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-23 00:57:25 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-23 00:57:25 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-23 00:57:25 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-23 00:57:25 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-23 00:57:25 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 00:57:25 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='con ng∆∞·ªùi', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 00:57:25 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-23 00:57:25 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-23 00:57:25 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-23 00:57:26 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'con ng∆∞·ªùi' ‚Üí 'human'
2025-12-23 00:57:26 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'human'
2025-12-23 00:57:26 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-23 00:57:29 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 138080:1.0000, 17641:0.7604, 98902:0.7323, 139856:0.6759, 138089:0.6561, 139847:0.6533, 75986:0.6474, 75988:0.6413, 36367:0.6276, 347071:0.6237
2025-12-23 00:57:29 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 547909:1.0000, 349386:0.8076, 254730:0.7899, 384302:0.7748, 138080:0.7353, 98897:0.7113, 75986:0.6934, 489223:0.6861, 568535:0.6724, 98901:0.6574
2025-12-23 00:57:29 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 275003:1.0000, 274368:0.6517, 85152:0.6438, 275004:0.6156, 213700:0.6069, 274997:0.6001, 143734:0.5982, 449434:0.5666, 213701:0.5547, 129069:0.5480
2025-12-23 00:57:29 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 138080:1.0000, 75986:0.7362, 547909:0.7300, 98897:0.6627, 254730:0.5994, 349386:0.5833, 384302:0.5824, 98899:0.5494, 275003:0.4849, 489223:0.4822
2025-12-23 00:57:29 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-23 00:57:29 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-23 00:57:29 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 00:57:35 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='tuy·∫øt', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 00:57:35 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-23 00:57:35 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-23 00:57:35 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-23 00:57:35 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'tuy·∫øt' ‚Üí 'snow'
2025-12-23 00:57:35 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'snow'
2025-12-23 00:57:35 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-23 00:57:35 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 00:57:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: snow
2025-12-23 00:57:36 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 00:57:36 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: snow
2025-12-23 00:57:36 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 00:57:36 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: snow
2025-12-23 00:57:36 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-23 00:57:36 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-23 00:57:36 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-23 00:57:36 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-23 00:57:36 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-23 00:57:36 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-23 00:57:36 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 00:57:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 00:57:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='tuy·∫øt', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 00:57:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 00:57:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'tuy·∫øt'
2025-12-23 00:57:40 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'tuy·∫øt' ‚Üí 'snow'
2025-12-23 00:57:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'snow'
2025-12-23 00:57:40 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 00:57:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='snow', Q1='snow', Q2='snow'
2025-12-23 00:57:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 00:57:40 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 00:57:40 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 00:57:40 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: snow
2025-12-23 00:57:41 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 00:57:41 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: snow
2025-12-23 00:57:41 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 00:57:41 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: snow
2025-12-23 00:57:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 00:57:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2524.00ms
2025-12-23 00:57:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 00:57:42 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-23 00:57:42 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-23 00:58:41 - root - INFO - [IMAGE_SEARCH] Uploaded image: pasted-image-1766451520183.png
2025-12-23 00:58:41 - root - INFO - [IMAGE_SEARCH] Calling model server: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image
2025-12-23 00:58:42 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 00:58:42 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 00:58:43 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1966.47ms
2025-12-23 00:59:50 - root - INFO - [IMAGE_SEARCH] Uploaded image: pasted-image-1766451589293.png
2025-12-23 00:59:50 - root - INFO - [IMAGE_SEARCH] Calling model server: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image
2025-12-23 00:59:52 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 00:59:52 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 00:59:52 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1852.07ms
2025-12-23 00:59:55 - root - INFO - [IMAGE_SEARCH] Uploaded image: pasted-image-1766451593832.png
2025-12-23 00:59:55 - root - INFO - [IMAGE_SEARCH] Calling model server: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image
2025-12-23 00:59:57 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 00:59:57 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 00:59:57 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 2148.70ms
2025-12-23 01:04:57 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='soong', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 01:04:57 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-23 01:04:57 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-23 01:04:57 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-23 01:04:57 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-23 01:04:57 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:04:57 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: soong
2025-12-23 01:04:58 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:04:58 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: soong
2025-12-23 01:04:58 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:04:58 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: soong
2025-12-23 01:04:58 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-23 01:04:58 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-23 01:04:58 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-23 01:04:58 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-23 01:04:58 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-23 01:04:58 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-23 01:04:58 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 01:04:59 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='soong', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 01:04:59 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-23 01:04:59 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-23 01:04:59 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-23 01:04:59 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-23 01:05:03 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 297497:1.0000, 297496:0.9591, 637708:0.8822, 232596:0.8608, 27522:0.8540, 637709:0.8229, 27521:0.8012, 541128:0.7879, 637711:0.7227, 613851:0.7214
2025-12-23 01:05:03 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 469312:1.0000, 256741:0.9302, 496471:0.9266, 524288:0.9192, 447727:0.8873, 447728:0.8632, 391983:0.8422, 384074:0.8400, 469313:0.8243, 174459:0.8011
2025-12-23 01:05:03 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 312184:1.0000, 312185:0.9893, 40085:0.9401, 312186:0.9002, 312187:0.8828, 6619:0.8777, 6618:0.8539, 7736:0.8311, 19014:0.7991, 87835:0.7912
2025-12-23 01:05:03 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 469312:1.0000, 256741:0.8963, 496471:0.8910, 524288:0.8799, 447727:0.8325, 447728:0.7967, 391983:0.7655, 384074:0.7622, 469313:0.7389, 174459:0.7045
2025-12-23 01:05:03 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-23 01:05:03 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-23 01:05:03 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 01:05:10 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='s√¥ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 01:05:10 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-23 01:05:10 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-23 01:05:10 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-23 01:05:10 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-23 01:05:10 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'river'
2025-12-23 01:05:10 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-23 01:05:10 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:05:10 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: river
2025-12-23 01:05:10 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:05:10 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: river
2025-12-23 01:05:10 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:05:10 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: river
2025-12-23 01:05:10 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-23 01:05:10 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-23 01:05:10 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-23 01:05:10 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-23 01:05:10 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-23 01:05:10 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-23 01:05:10 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 01:05:12 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='s√¥ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 01:05:12 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-23 01:05:12 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-23 01:05:12 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-23 01:05:12 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-23 01:05:12 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'river'
2025-12-23 01:05:12 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-23 01:05:15 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 647:1.0000, 529140:0.9460, 356123:0.8423, 356127:0.7780, 581944:0.7694, 537346:0.7518, 537347:0.7372, 356122:0.7333, 581943:0.7038, 452901:0.6916
2025-12-23 01:05:15 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 555451:1.0000, 537338:0.9548, 548721:0.9467, 61812:0.9170, 548920:0.9061, 44767:0.8970, 538953:0.8893, 191846:0.8797, 565716:0.8681, 555450:0.8677
2025-12-23 01:05:15 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 538951:1.0000, 538980:0.8688, 515256:0.8546, 538952:0.8066, 529140:0.7967, 555451:0.7779, 452898:0.7648, 225469:0.7264, 538995:0.6962, 655529:0.6898
2025-12-23 01:05:15 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 555451:1.0000, 538951:0.9438, 515256:0.7174, 555450:0.6917, 538953:0.6843, 538952:0.6517, 537338:0.5491, 515253:0.4819, 44767:0.4687, 548721:0.4592
2025-12-23 01:05:15 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-23 01:05:15 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-23 01:05:15 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 01:05:47 - root - INFO - [IMAGE_SEARCH] Uploaded image: pasted-image-1766451904352.png
2025-12-23 01:05:47 - root - INFO - [IMAGE_SEARCH] Calling model server: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image
2025-12-23 01:05:48 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 01:05:48 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 01:05:48 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1294.02ms
2025-12-23 01:06:48 - root - INFO - [IMAGE_SEARCH] Uploaded image: pasted-image-1766452008133.png
2025-12-23 01:06:48 - root - INFO - [IMAGE_SEARCH] Calling model server: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image
2025-12-23 01:06:50 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 01:06:50 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 01:06:50 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1874.86ms
2025-12-23 01:08:51 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 01:08:51 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='s√¥ng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:08:51 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:08:51 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 's√¥ng'
2025-12-23 01:08:51 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-23 01:08:51 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'river'
2025-12-23 01:08:52 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:08:52 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='river', Q1='river', Q2='river'
2025-12-23 01:08:52 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 01:08:52 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 01:08:52 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:08:52 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: river
2025-12-23 01:08:52 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:08:52 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: river
2025-12-23 01:08:52 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:08:52 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: river
2025-12-23 01:08:52 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:08:52 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: river
2025-12-23 01:08:52 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:08:52 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: river
2025-12-23 01:08:53 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:08:53 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: river
2025-12-23 01:08:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-23 01:08:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2003.60ms
2025-12-23 01:08:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 01:08:53 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-23 01:08:53 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-23 01:14:47 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='s√¥ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 01:14:47 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-23 01:14:47 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-23 01:14:47 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-23 01:14:47 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-23 01:14:47 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'river'
2025-12-23 01:14:47 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-23 01:14:49 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 647:1.0000, 529140:0.9460, 356123:0.8423, 356127:0.7780, 581944:0.7694, 537346:0.7518, 537347:0.7372, 356122:0.7333, 581943:0.7038, 452901:0.6916
2025-12-23 01:14:49 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 555451:1.0000, 537338:0.9548, 548721:0.9467, 61812:0.9170, 548920:0.9061, 44767:0.8970, 538953:0.8893, 191846:0.8797, 565716:0.8681, 555450:0.8677
2025-12-23 01:14:49 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 538951:1.0000, 538980:0.8688, 515256:0.8546, 538952:0.8066, 529140:0.7967, 555451:0.7779, 452898:0.7648, 225469:0.7264, 538995:0.6962, 655529:0.6898
2025-12-23 01:14:49 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 555451:1.0000, 538951:0.9438, 515256:0.7174, 555450:0.6917, 538953:0.6843, 538952:0.6517, 537338:0.5491, 515253:0.4819, 44767:0.4687, 548721:0.4592
2025-12-23 01:14:49 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-23 01:14:49 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-23 01:14:49 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 01:18:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 01:18:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='l≈© l·ª•t', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:18:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:18:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'l≈© l·ª•t'
2025-12-23 01:18:23 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'l≈© l·ª•t' ‚Üí 'flood'
2025-12-23 01:18:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'flood'
2025-12-23 01:18:24 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:18:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='flood', Q1='flood', Q2='flood'
2025-12-23 01:18:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 01:18:24 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 01:18:24 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:18:24 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: flood
2025-12-23 01:18:24 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:18:24 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: flood
2025-12-23 01:18:24 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:18:24 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: flood
2025-12-23 01:18:24 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:18:24 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: flood
2025-12-23 01:18:25 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:18:25 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: flood
2025-12-23 01:18:25 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:18:25 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: flood
2025-12-23 01:18:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 0
2025-12-23 01:18:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2939.44ms
2025-12-23 01:18:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 01:18:25 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-23 01:18:25 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-23 01:18:31 - root - INFO - [IMAGE_SEARCH] Uploaded image: pasted-image-1766452667808.png
2025-12-23 01:18:31 - root - INFO - [IMAGE_SEARCH] Calling model server: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image
2025-12-23 01:18:32 - root - INFO - [IMAGE_SEARCH] Uploaded image: pasted-image-1766452712311.png
2025-12-23 01:18:32 - root - INFO - [IMAGE_SEARCH] Calling model server: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image
2025-12-23 01:18:33 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 01:18:33 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 01:18:33 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1658.28ms
2025-12-23 01:18:34 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 01:18:34 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 01:18:34 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1632.88ms
2025-12-23 01:18:35 - root - INFO - [IMAGE_SEARCH] Uploaded image: pasted-image-1766452714141.png
2025-12-23 01:18:35 - root - INFO - [IMAGE_SEARCH] Calling model server: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image
2025-12-23 01:18:37 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 01:18:37 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 01:18:37 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1545.58ms
2025-12-23 01:21:47 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='l≈© l·ª•t', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 01:21:47 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-23 01:21:47 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-23 01:21:47 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-23 01:21:48 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'l≈© l·ª•t' ‚Üí 'flood'
2025-12-23 01:21:48 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'flood'
2025-12-23 01:21:48 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-23 01:21:50 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 294424:1.0000, 672045:0.9745, 408053:0.8432, 79499:0.7860, 11333:0.7810, 331088:0.7461, 622704:0.7230, 145416:0.7225, 25850:0.6941, 605198:0.6609
2025-12-23 01:21:50 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 494661:1.0000, 494682:0.9356, 494683:0.9249, 494681:0.9201, 494689:0.9072, 14109:0.8298, 392741:0.8154, 494686:0.8127, 409144:0.8000, 494687:0.7024
2025-12-23 01:21:50 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 530766:1.0000, 530767:0.8570, 530769:0.7525, 530768:0.7292, 607603:0.7080, 25851:0.5707, 231189:0.5701, 586372:0.5683, 50157:0.5666, 232325:0.5414
2025-12-23 01:21:50 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 494661:1.0000, 494682:0.9824, 494689:0.9468, 494681:0.8644, 494683:0.8591, 232338:0.7813, 14109:0.7196, 232336:0.7112, 494686:0.6945, 530766:0.6706
2025-12-23 01:21:50 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-23 01:21:50 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-23 01:21:50 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 01:27:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 01:27:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='s√¥ng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:27:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:27:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 's√¥ng'
2025-12-23 01:27:27 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-23 01:27:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'river'
2025-12-23 01:27:27 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:27:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='river', Q1='river', Q2='river'
2025-12-23 01:27:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 01:27:27 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 01:27:27 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:27:27 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: river
2025-12-23 01:27:27 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:27:27 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: river
2025-12-23 01:27:27 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:27:27 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: river
2025-12-23 01:27:27 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:27:27 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: river
2025-12-23 01:27:28 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:27:28 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: river
2025-12-23 01:27:28 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:27:28 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: river
2025-12-23 01:27:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 0
2025-12-23 01:27:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2173.82ms
2025-12-23 01:27:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 01:27:29 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-23 01:27:29 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-23 01:28:25 - root - INFO - [IMAGE_SEARCH] Uploaded image: pasted-image-1766453302054.png
2025-12-23 01:28:25 - root - INFO - [IMAGE_SEARCH] Calling model server: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image
2025-12-23 01:28:26 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 01:28:26 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 01:28:27 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1539.67ms
2025-12-23 01:30:26 - root - INFO - [IMAGE_SEARCH] Uploaded image: pasted-image-1766453382580.png
2025-12-23 01:30:26 - root - INFO - [IMAGE_SEARCH] Calling model server: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image
2025-12-23 01:30:28 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 01:30:28 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 01:30:28 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1502.25ms
2025-12-23 01:32:39 - root - INFO - [IMAGE_SEARCH] Uploaded image: pasted-image-1766453558014.png
2025-12-23 01:32:39 - root - INFO - [IMAGE_SEARCH] Calling model server: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image
2025-12-23 01:32:40 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 01:32:40 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 01:32:40 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1791.05ms
2025-12-23 01:33:51 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 01:33:51 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='rwngf', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:33:51 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:33:51 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'rwngf'
2025-12-23 01:33:51 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:33:51 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='rwngf', Q1='rwngf', Q2='rwngf'
2025-12-23 01:33:51 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 01:33:51 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 01:33:51 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:33:51 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: rwngf
2025-12-23 01:33:52 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:33:52 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: rwngf
2025-12-23 01:33:53 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:33:53 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: rwngf
2025-12-23 01:33:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 01:33:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2949.28ms
2025-12-23 01:33:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 01:33:54 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-23 01:33:54 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-23 01:33:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 01:33:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='r·ª´ng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:33:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:33:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'r·ª´ng'
2025-12-23 01:33:56 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-23 01:33:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'forest'
2025-12-23 01:33:57 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:33:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='forest', Q1='forest', Q2='forest'
2025-12-23 01:33:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 01:33:57 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 01:33:57 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:33:57 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:33:57 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest
2025-12-23 01:33:57 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest
2025-12-23 01:33:57 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:33:57 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-23 01:33:57 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:33:57 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-23 01:33:58 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:33:58 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-23 01:33:58 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:33:58 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-23 01:33:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 0
2025-12-23 01:33:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2991.92ms
2025-12-23 01:33:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 01:33:59 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-23 01:33:59 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-23 01:34:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 01:34:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='2 ng∆∞·ªùi ƒë√†n √¥ng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:34:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:34:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: '2 ng∆∞·ªùi ƒë√†n √¥ng'
2025-12-23 01:34:18 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: '2 ng∆∞·ªùi ƒë√†n √¥ng' ‚Üí '2 men'
2025-12-23 01:34:18 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: '2 men'
2025-12-23 01:34:19 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:34:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='2 men', Q1='2 men', Q2='2 men'
2025-12-23 01:34:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 01:34:19 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 01:34:19 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:34:19 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: 2 men
2025-12-23 01:34:20 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:34:20 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: 2 men
2025-12-23 01:34:20 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:34:20 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: 2 men
2025-12-23 01:34:21 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 01:34:21 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3920.45ms
2025-12-23 01:34:21 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 01:34:21 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-23 01:34:21 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-23 01:35:11 - root - INFO - [IMAGE_SEARCH] Uploaded image: pasted-image-1766453667569.png
2025-12-23 01:35:11 - root - INFO - [IMAGE_SEARCH] Calling model server: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image
2025-12-23 01:35:12 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 01:35:13 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 01:35:13 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1899.94ms
2025-12-23 01:35:15 - root - INFO - [IMAGE_SEARCH] Uploaded image: pasted-image-1766453714685.png
2025-12-23 01:35:15 - root - INFO - [IMAGE_SEARCH] Calling model server: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image
2025-12-23 01:35:16 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 01:35:16 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 01:35:17 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1791.26ms
2025-12-23 01:35:24 - root - INFO - [IMAGE_SEARCH] Uploaded image: pasted-image-1766453717217.png
2025-12-23 01:35:24 - root - INFO - [IMAGE_SEARCH] Calling model server: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image
2025-12-23 01:35:26 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 01:35:26 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 01:35:26 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1635.72ms
2025-12-23 01:35:41 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='ph√°t hi·ªán v√† ph√≤ng ng·ª´a t·ªôi ph·∫°m', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 01:35:41 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-23 01:35:41 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-23 01:35:41 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-23 01:35:41 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'ph√°t hi·ªán v√† ph√≤ng ng·ª´a t·ªôi ph·∫°m' ‚Üí 'detect and prevent crime'
2025-12-23 01:35:41 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'detect and prevent crime'
2025-12-23 01:35:41 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-23 01:35:42 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:35:42 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: detect and prevent crime
2025-12-23 01:35:42 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:35:42 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: detect and prevent crime
2025-12-23 01:35:42 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:35:42 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: detect and prevent crime
2025-12-23 01:35:42 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-23 01:35:42 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-23 01:35:42 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-23 01:35:42 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-23 01:35:42 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-23 01:35:42 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-23 01:35:42 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 01:37:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 01:37:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, objects=[]
2025-12-23 01:37:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:37:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: ''
2025-12-23 01:37:26 - app.services.gemini.query_augmentation - WARNING - [QUERY AUG] Empty query, returning original
2025-12-23 01:37:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='', Q1='', Q2=''
2025-12-23 01:37:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 01:37:26 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 01:37:26 - root - INFO - [IMAGE_SEARCH] Uploaded image: pasted-image-1766453841493.png
2025-12-23 01:37:26 - root - INFO - [IMAGE_SEARCH] Calling model server: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image
2025-12-23 01:37:26 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.230s]
2025-12-23 01:37:26 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.238s]
2025-12-23 01:37:26 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.237s]
2025-12-23 01:37:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 01:37:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 257.82ms
2025-12-23 01:37:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 01:37:26 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-23 01:37:26 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-23 01:37:28 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 01:37:28 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 01:37:28 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1754.47ms
2025-12-23 01:40:39 - root - INFO - [IMAGE_SEARCH] Uploaded image: pasted-image-1766454035630.png
2025-12-23 01:40:39 - root - INFO - [IMAGE_SEARCH] Calling model server: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image
2025-12-23 01:40:41 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 01:40:41 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 01:40:41 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1925.65ms
2025-12-23 01:43:28 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 01:43:28 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='M·ªôt c·ªôt kh√≥i ƒëen ·ªü gi·ªØa tr·ªùi H√† N·ªôi ƒë∆∞·ª£c b·ªëc l√™n sau h√†ng c√¢y xanh', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:43:28 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:43:28 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'M·ªôt c·ªôt kh√≥i ƒëen ·ªü gi·ªØa tr·ªùi H√† N·ªôi ƒë∆∞·ª£c b·ªëc l√™n sau h√†ng c√¢y xanh'
2025-12-23 01:43:28 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'M·ªôt c·ªôt kh√≥i ƒëen ·ªü gi·ªØa tr·ªùi H√† N·ªôi ƒë∆∞·ª£c b·ªëc l√™n sau h√†ng c√¢y xanh' ‚Üí 'A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees'
2025-12-23 01:43:28 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees'
2025-12-23 01:43:29 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:43:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees', Q1='A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees', Q2='A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees'
2025-12-23 01:43:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 01:43:29 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 01:43:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 01:43:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='M·ªôt c·ªôt kh√≥i ƒëen ·ªü gi·ªØa tr·ªùi H√† N·ªôi ƒë∆∞·ª£c b·ªëc l√™n sau h√†ng c√¢y xanh

', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:43:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:43:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'M·ªôt c·ªôt kh√≥i ƒëen ·ªü gi·ªØa tr·ªùi H√† N·ªôi ƒë∆∞·ª£c b·ªëc l√™n sau h√†ng c√¢y xanh

'
2025-12-23 01:43:29 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:43:29 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:43:30 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'M·ªôt c·ªôt kh√≥i ƒëen ·ªü gi·ªØa tr·ªùi H√† N·ªôi ƒë∆∞·ª£c b·ªëc l√™n sau h√†ng c√¢y xanh

' ‚Üí 'A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees'
2025-12-23 01:43:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees'
2025-12-23 01:43:30 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:43:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees', Q1='A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees', Q2='A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees'
2025-12-23 01:43:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 01:43:30 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 01:43:30 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:43:30 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:43:30 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:43:30 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:43:30 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:43:30 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:43:30 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:43:30 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:43:30 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:43:30 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:43:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 01:43:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='M·ªôt c·ªôt kh√≥i ƒëen ·ªü gi·ªØa tr·ªùi H√† N·ªôi ƒë∆∞·ª£c b·ªëc l√™n sau h√†ng c√¢y xanh', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:43:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:43:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'M·ªôt c·ªôt kh√≥i ƒëen ·ªü gi·ªØa tr·ªùi H√† N·ªôi ƒë∆∞·ª£c b·ªëc l√™n sau h√†ng c√¢y xanh'
2025-12-23 01:43:31 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:43:31 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:43:31 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:43:31 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:43:31 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:43:31 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:43:31 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'M·ªôt c·ªôt kh√≥i ƒëen ·ªü gi·ªØa tr·ªùi H√† N·ªôi ƒë∆∞·ª£c b·ªëc l√™n sau h√†ng c√¢y xanh' ‚Üí 'A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees'
2025-12-23 01:43:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees'
2025-12-23 01:43:32 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:43:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees', Q1='A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees', Q2='A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees'
2025-12-23 01:43:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 01:43:32 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 01:43:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 01:43:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 01:43:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 4212.38ms
2025-12-23 01:43:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 01:43:32 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-23 01:43:32 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-23 01:43:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2919.35ms
2025-12-23 01:43:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 01:43:32 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-23 01:43:32 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-23 01:43:32 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:43:32 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:43:33 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:43:33 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:43:33 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:43:33 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:43:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 01:43:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3159.12ms
2025-12-23 01:43:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 01:43:34 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-23 01:43:34 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-23 01:44:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 01:44:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='M·ªôt c·ªôt kh√≥i ƒëen ·ªü gi·ªØa tr·ªùi H√† N·ªôi ƒë∆∞·ª£c b·ªëc l√™n sau h√†ng c√¢y xanh

', toggles={'multimodal': False, 'ic': False, 'asr': True, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:44:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:44:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'M·ªôt c·ªôt kh√≥i ƒëen ·ªü gi·ªØa tr·ªùi H√† N·ªôi ƒë∆∞·ª£c b·ªëc l√™n sau h√†ng c√¢y xanh

'
2025-12-23 01:44:04 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:44:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='M·ªôt c·ªôt kh√≥i ƒëen ·ªü gi·ªØa tr·ªùi H√† N·ªôi ƒë∆∞·ª£c b·ªëc l√™n sau h√†ng c√¢y xanh

', Q1='M·ªôt c·ªôt kh√≥i ƒëen ·ªü gi·ªØa tr·ªùi H√† N·ªôi ƒë∆∞·ª£c b·ªëc l√™n sau h√†ng c√¢y xanh

', Q2='M·ªôt c·ªôt kh√≥i ƒëen ·ªü gi·ªØa tr·ªùi H√† N·ªôi ƒë∆∞·ª£c b·ªëc l√™n sau h√†ng c√¢y xanh

'
2025-12-23 01:44:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 01:44:04 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 01:44:04 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.149s]
2025-12-23 01:44:04 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.151s]
2025-12-23 01:44:04 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.151s]
2025-12-23 01:44:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 01:44:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 1331.75ms
2025-12-23 01:44:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 01:44:05 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-23 01:44:05 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-23 01:44:13 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 01:44:13 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='M·ªôt c·ªôt kh√≥i ƒëen ·ªü gi·ªØa tr·ªùi H√† N·ªôi ƒë∆∞·ª£c b·ªëc l√™n sau h√†ng c√¢y xanh

', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:44:13 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:44:13 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'M·ªôt c·ªôt kh√≥i ƒëen ·ªü gi·ªØa tr·ªùi H√† N·ªôi ƒë∆∞·ª£c b·ªëc l√™n sau h√†ng c√¢y xanh

'
2025-12-23 01:44:14 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'M·ªôt c·ªôt kh√≥i ƒëen ·ªü gi·ªØa tr·ªùi H√† N·ªôi ƒë∆∞·ª£c b·ªëc l√™n sau h√†ng c√¢y xanh

' ‚Üí 'A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees'
2025-12-23 01:44:14 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees'
2025-12-23 01:44:14 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:44:14 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees', Q1='A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees', Q2='A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees'
2025-12-23 01:44:14 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 01:44:14 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 01:44:14 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:44:14 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:44:14 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:44:14 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:44:14 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:44:14 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:44:14 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:44:14 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:44:15 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:44:15 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:44:15 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:44:15 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:44:15 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-23 01:44:15 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2608.95ms
2025-12-23 01:44:15 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 01:44:15 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-23 01:44:15 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-23 01:44:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 01:44:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='M·ªôt c·ªôt kh√≥i ƒëen ·ªü gi·ªØa tr·ªùi H√† N·ªôi ƒë∆∞·ª£c b·ªëc l√™n sau h√†ng c√¢y xanh

', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:44:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='C·∫£nh ti·∫øp theo quay ng√¥i nh√† ƒëang b·ªã ch√°y c√≥ th·ªÉ th·∫•y b√™n c·∫°nh ƒë√≥ c√≥ m·ªôt qu√°n c√≥ 3 ng√¥i sao', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:44:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'M·ªôt c·ªôt kh√≥i ƒëen ·ªü gi·ªØa tr·ªùi H√† N·ªôi ƒë∆∞·ª£c b·ªëc l√™n sau h√†ng c√¢y xanh

'
2025-12-23 01:44:40 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'M·ªôt c·ªôt kh√≥i ƒëen ·ªü gi·ªØa tr·ªùi H√† N·ªôi ƒë∆∞·ª£c b·ªëc l√™n sau h√†ng c√¢y xanh

' ‚Üí 'A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees'
2025-12-23 01:44:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees'
2025-12-23 01:44:40 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:44:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees', Q1='A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees', Q2='A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees'
2025-12-23 01:44:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'C·∫£nh ti·∫øp theo quay ng√¥i nh√† ƒëang b·ªã ch√°y c√≥ th·ªÉ th·∫•y b√™n c·∫°nh ƒë√≥ c√≥ m·ªôt qu√°n c√≥ 3 ng√¥i sao'
2025-12-23 01:44:42 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh ti·∫øp theo quay ng√¥i nh√† ƒëang b·ªã ch√°y c√≥ th·ªÉ th·∫•y b√™n c·∫°nh ƒë√≥ c√≥ m·ªôt qu√°n c√≥ 3 ng√¥i sao' ‚Üí 'The next scene shows the house on fire and you can see that next to it there is a shop with 3 stars'
2025-12-23 01:44:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'The next scene shows the house on fire and you can see that next to it there is a shop with 3 stars'
2025-12-23 01:44:42 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:44:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='The next scene shows the house on fire and you can see that next to it there is a shop with 3 stars', Q1='The next scene shows the house on fire and you can see that next to it there is a shop with 3 stars', Q2='The next scene shows the house on fire and you can see that next to it there is a shop with 3 stars'
2025-12-23 01:44:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 01:44:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='M·ªôt c·ªôt kh√≥i ƒëen ·ªü gi·ªØa tr·ªùi H√† N·ªôi ƒë∆∞·ª£c b·ªëc l√™n sau h√†ng c√¢y xanh', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:44:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='C·∫£nh ti·∫øp theo quay ng√¥i nh√† ƒëang b·ªã ch√°y c√≥ th·ªÉ th·∫•y b√™n c·∫°nh ƒë√≥ c√≥ m·ªôt qu√°n c√≥ 3 ng√¥i sao', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:44:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'M·ªôt c·ªôt kh√≥i ƒëen ·ªü gi·ªØa tr·ªùi H√† N·ªôi ƒë∆∞·ª£c b·ªëc l√™n sau h√†ng c√¢y xanh'
2025-12-23 01:44:42 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:44:42 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The next scene shows the house on fire and you can see that next to it there is a shop with 3 stars
2025-12-23 01:44:42 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:44:42 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:44:42 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:44:42 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The next scene shows the house on fire and you can see that next to it there is a shop with 3 stars
2025-12-23 01:44:42 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:44:42 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:44:43 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'M·ªôt c·ªôt kh√≥i ƒëen ·ªü gi·ªØa tr·ªùi H√† N·ªôi ƒë∆∞·ª£c b·ªëc l√™n sau h√†ng c√¢y xanh' ‚Üí 'A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees'
2025-12-23 01:44:43 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees'
2025-12-23 01:44:43 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:44:43 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:44:43 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:44:43 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The next scene shows the house on fire and you can see that next to it there is a shop with 3 stars
2025-12-23 01:44:43 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:44:43 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:44:43 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:44:43 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees', Q1='A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees', Q2='A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees'
2025-12-23 01:44:43 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'C·∫£nh ti·∫øp theo quay ng√¥i nh√† ƒëang b·ªã ch√°y c√≥ th·ªÉ th·∫•y b√™n c·∫°nh ƒë√≥ c√≥ m·ªôt qu√°n c√≥ 3 ng√¥i sao'
2025-12-23 01:44:43 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:44:43 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The next scene shows the house on fire and you can see that next to it there is a shop with 3 stars
2025-12-23 01:44:43 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:44:43 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:44:44 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh ti·∫øp theo quay ng√¥i nh√† ƒëang b·ªã ch√°y c√≥ th·ªÉ th·∫•y b√™n c·∫°nh ƒë√≥ c√≥ m·ªôt qu√°n c√≥ 3 ng√¥i sao' ‚Üí 'The next scene shows the house on fire and you can see that next to it there is a shop with 3 stars'
2025-12-23 01:44:44 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'The next scene shows the house on fire and you can see that next to it there is a shop with 3 stars'
2025-12-23 01:44:44 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:44:44 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='The next scene shows the house on fire and you can see that next to it there is a shop with 3 stars', Q1='The next scene shows the house on fire and you can see that next to it there is a shop with 3 stars', Q2='The next scene shows the house on fire and you can see that next to it there is a shop with 3 stars'
2025-12-23 01:44:44 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 01:44:44 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 01:44:44 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 5033.47ms
2025-12-23 01:44:44 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 01:44:44 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 400 unique ids from 2 stages
2025-12-23 01:44:44 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 400 unique ids
2025-12-23 01:44:44 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 01:44:44 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='M·ªôt c·ªôt kh√≥i ƒëen ·ªü gi·ªØa tr·ªùi H√† N·ªôi ƒë∆∞·ª£c b·ªëc l√™n sau h√†ng c√¢y xanh', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:44:44 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='g√¥i nh√† ƒëang b·ªã ch√°y c√≥ th·ªÉ th·∫•y b√™n c·∫°nh ƒë√≥ c√≥ m·ªôt qu√°n c√≥ 3 ng√¥i sao', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:44:44 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'M·ªôt c·ªôt kh√≥i ƒëen ·ªü gi·ªØa tr·ªùi H√† N·ªôi ƒë∆∞·ª£c b·ªëc l√™n sau h√†ng c√¢y xanh'
2025-12-23 01:44:44 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:44:44 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:44:44 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:44:44 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The next scene shows the house on fire and you can see that next to it there is a shop with 3 stars
2025-12-23 01:44:44 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:44:44 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The next scene shows the house on fire and you can see that next to it there is a shop with 3 stars
2025-12-23 01:44:44 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:44:44 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The next scene shows the house on fire and you can see that next to it there is a shop with 3 stars
2025-12-23 01:44:45 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:44:45 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The next scene shows the house on fire and you can see that next to it there is a shop with 3 stars
2025-12-23 01:44:45 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:44:45 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:44:45 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'M·ªôt c·ªôt kh√≥i ƒëen ·ªü gi·ªØa tr·ªùi H√† N·ªôi ƒë∆∞·ª£c b·ªëc l√™n sau h√†ng c√¢y xanh' ‚Üí 'A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees'
2025-12-23 01:44:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees'
2025-12-23 01:44:45 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:44:45 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:44:45 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:44:45 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The next scene shows the house on fire and you can see that next to it there is a shop with 3 stars
2025-12-23 01:44:45 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:44:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees', Q1='A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees', Q2='A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees'
2025-12-23 01:44:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'g√¥i nh√† ƒëang b·ªã ch√°y c√≥ th·ªÉ th·∫•y b√™n c·∫°nh ƒë√≥ c√≥ m·ªôt qu√°n c√≥ 3 ng√¥i sao'
2025-12-23 01:44:45 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:44:45 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:44:46 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'g√¥i nh√† ƒëang b·ªã ch√°y c√≥ th·ªÉ th·∫•y b√™n c·∫°nh ƒë√≥ c√≥ m·ªôt qu√°n c√≥ 3 ng√¥i sao' ‚Üí 'The house is on fire and you can see next to it there is a shop with 3 stars'
2025-12-23 01:44:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'The house is on fire and you can see next to it there is a shop with 3 stars'
2025-12-23 01:44:46 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:44:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='The house is on fire and you can see next to it there is a shop with 3 stars', Q1='The house is on fire and you can see next to it there is a shop with 3 stars', Q2='The house is on fire and you can see next to it there is a shop with 3 stars'
2025-12-23 01:44:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 01:44:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 01:44:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 4648.61ms
2025-12-23 01:44:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 01:44:46 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 400 unique ids from 2 stages
2025-12-23 01:44:46 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 400 unique ids
2025-12-23 01:44:47 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:44:47 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:44:47 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:44:47 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The house is on fire and you can see next to it there is a shop with 3 stars
2025-12-23 01:44:47 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:44:47 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The house is on fire and you can see next to it there is a shop with 3 stars
2025-12-23 01:44:47 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:44:47 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The house is on fire and you can see next to it there is a shop with 3 stars
2025-12-23 01:44:47 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:44:47 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The house is on fire and you can see next to it there is a shop with 3 stars
2025-12-23 01:44:47 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:44:47 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:44:47 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:44:47 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The house is on fire and you can see next to it there is a shop with 3 stars
2025-12-23 01:44:47 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:44:47 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The house is on fire and you can see next to it there is a shop with 3 stars
2025-12-23 01:44:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 01:44:48 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:44:48 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:44:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 01:44:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3858.17ms
2025-12-23 01:44:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 01:44:48 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 400 unique ids from 2 stages
2025-12-23 01:44:48 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 400 unique ids
2025-12-23 01:44:49 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 01:44:49 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='M·ªôt c·ªôt kh√≥i ƒëen ·ªü gi·ªØa tr·ªùi H√† N·ªôi ƒë∆∞·ª£c b·ªëc l√™n sau h√†ng c√¢y xanh', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:44:49 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='g√¥i nh√† ƒëang b·ªã ch√°y c√≥ th·ªÉ th·∫•y b√™n c·∫°nh ƒë√≥ c√≥ m·ªôt qu√°n c√≥ 3 ng√¥i sao', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:44:49 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'M·ªôt c·ªôt kh√≥i ƒëen ·ªü gi·ªØa tr·ªùi H√† N·ªôi ƒë∆∞·ª£c b·ªëc l√™n sau h√†ng c√¢y xanh'
2025-12-23 01:44:50 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'M·ªôt c·ªôt kh√≥i ƒëen ·ªü gi·ªØa tr·ªùi H√† N·ªôi ƒë∆∞·ª£c b·ªëc l√™n sau h√†ng c√¢y xanh' ‚Üí 'A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees'
2025-12-23 01:44:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees'
2025-12-23 01:44:50 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:44:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees', Q1='A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees', Q2='A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees'
2025-12-23 01:44:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'g√¥i nh√† ƒëang b·ªã ch√°y c√≥ th·ªÉ th·∫•y b√™n c·∫°nh ƒë√≥ c√≥ m·ªôt qu√°n c√≥ 3 ng√¥i sao'
2025-12-23 01:44:51 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'g√¥i nh√† ƒëang b·ªã ch√°y c√≥ th·ªÉ th·∫•y b√™n c·∫°nh ƒë√≥ c√≥ m·ªôt qu√°n c√≥ 3 ng√¥i sao' ‚Üí 'The house is on fire and you can see next to it there is a shop with 3 stars'
2025-12-23 01:44:51 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'The house is on fire and you can see next to it there is a shop with 3 stars'
2025-12-23 01:44:51 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:44:51 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='The house is on fire and you can see next to it there is a shop with 3 stars', Q1='The house is on fire and you can see next to it there is a shop with 3 stars', Q2='The house is on fire and you can see next to it there is a shop with 3 stars'
2025-12-23 01:44:51 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:44:51 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:44:51 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:44:51 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:44:51 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The house is on fire and you can see next to it there is a shop with 3 stars
2025-12-23 01:44:51 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The house is on fire and you can see next to it there is a shop with 3 stars
2025-12-23 01:44:51 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:44:51 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The house is on fire and you can see next to it there is a shop with 3 stars
2025-12-23 01:44:52 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:44:52 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:44:52 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:44:52 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The house is on fire and you can see next to it there is a shop with 3 stars
2025-12-23 01:44:52 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:44:52 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:44:52 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:44:52 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The house is on fire and you can see next to it there is a shop with 3 stars
2025-12-23 01:44:52 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:44:52 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:44:52 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 01:44:52 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 01:44:52 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3658.10ms
2025-12-23 01:44:52 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-23 01:44:52 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 2 stages
2025-12-23 01:44:52 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 62 videos with results
2025-12-23 01:44:52 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 73 videos with results
2025-12-23 01:44:52 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 12 common videos across all stages
2025-12-23 01:44:52 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 20 valid tuples
2025-12-23 01:44:52 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 20 valid tuples
2025-12-23 01:45:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 01:45:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='M·ªôt c·ªôt kh√≥i ƒëen ·ªü gi·ªØa tr·ªùi H√† N·ªôi ƒë∆∞·ª£c b·ªëc l√™n sau h√†ng c√¢y xanh', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:45:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:45:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'M·ªôt c·ªôt kh√≥i ƒëen ·ªü gi·ªØa tr·ªùi H√† N·ªôi ƒë∆∞·ª£c b·ªëc l√™n sau h√†ng c√¢y xanh'
2025-12-23 01:45:24 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'M·ªôt c·ªôt kh√≥i ƒëen ·ªü gi·ªØa tr·ªùi H√† N·ªôi ƒë∆∞·ª£c b·ªëc l√™n sau h√†ng c√¢y xanh' ‚Üí 'A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees'
2025-12-23 01:45:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees'
2025-12-23 01:45:24 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:45:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees', Q1='A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees', Q2='A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees'
2025-12-23 01:45:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 01:45:24 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 01:45:24 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:45:24 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:45:25 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:45:25 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:45:25 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:45:25 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:45:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 01:45:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3063.33ms
2025-12-23 01:45:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 01:45:26 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-23 01:45:26 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-23 01:45:37 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframe/L22/L22_V006/28355.webp
2025-12-23 01:45:37 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframe/L22/L22_V006/28355.webp -> /app/app/data/keyframe/L22/L22_V006/28355.webp
2025-12-23 01:45:37 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframe/L22/L22_V006/28355.webp
2025-12-23 01:45:37 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframe/L22/L22_V006/28355.webp -> /app/app/data/keyframe/L22/L22_V006/28355.webp
2025-12-23 01:45:38 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 01:45:38 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 01:45:38 - root - INFO - [IMAGE_SEARCH] Result #0: ID=651080, Path=/keyframe/L22/L22_V006/28355.webp, Score=0.9968984127044678
2025-12-23 01:45:38 - root - INFO - [IMAGE_SEARCH] Result #1: ID=651081, Path=/keyframe/L22/L22_V006/28395.webp, Score=0.9838723540306091
2025-12-23 01:45:38 - root - INFO - [IMAGE_SEARCH] Result #2: ID=651082, Path=/keyframe/L22/L22_V006/28435.webp, Score=0.9773803353309631
2025-12-23 01:45:38 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1131.59ms
2025-12-23 01:45:38 - root - INFO - [IMAGE_SEARCH] First result sample: {'id': 651080, 'keyframe_path': '/keyframe/L22/L22_V006/28355.webp', 'score': 0.9968984127044678, 'video': '', 'frame_idx': None}
2025-12-23 01:45:39 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 01:45:39 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 01:45:39 - root - INFO - [IMAGE_SEARCH] Result #0: ID=651080, Path=/keyframe/L22/L22_V006/28355.webp, Score=0.9968984127044678
2025-12-23 01:45:39 - root - INFO - [IMAGE_SEARCH] Result #1: ID=651081, Path=/keyframe/L22/L22_V006/28395.webp, Score=0.9838723540306091
2025-12-23 01:45:39 - root - INFO - [IMAGE_SEARCH] Result #2: ID=651082, Path=/keyframe/L22/L22_V006/28435.webp, Score=0.9773803353309631
2025-12-23 01:45:39 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1433.63ms
2025-12-23 01:45:39 - root - INFO - [IMAGE_SEARCH] First result sample: {'id': 651080, 'keyframe_path': '/keyframe/L22/L22_V006/28355.webp', 'score': 0.9968984127044678, 'video': '', 'frame_idx': None}
2025-12-23 01:45:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 01:45:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='M·ªôt c·ªôt kh√≥i ƒëen ·ªü gi·ªØa tr·ªùi H√† N·ªôi ƒë∆∞·ª£c b·ªëc l√™n sau h√†ng c√¢y xanh', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:45:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='Cu·ªëi c√πng l√† c·∫£nh ƒë√°m ƒë√¥ng t·ª• t·∫≠p, c√≥ th·ªÉ th·∫•y 2 chi·∫øc xe c·ª©u h·ªèa v√† c√°c anh t·ªï d√¢n ph·ªë', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:45:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'M·ªôt c·ªôt kh√≥i ƒëen ·ªü gi·ªØa tr·ªùi H√† N·ªôi ƒë∆∞·ª£c b·ªëc l√™n sau h√†ng c√¢y xanh'
2025-12-23 01:45:59 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'M·ªôt c·ªôt kh√≥i ƒëen ·ªü gi·ªØa tr·ªùi H√† N·ªôi ƒë∆∞·ª£c b·ªëc l√™n sau h√†ng c√¢y xanh' ‚Üí 'A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees'
2025-12-23 01:45:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees'
2025-12-23 01:45:59 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:45:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees', Q1='A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees', Q2='A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees'
2025-12-23 01:45:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'Cu·ªëi c√πng l√† c·∫£nh ƒë√°m ƒë√¥ng t·ª• t·∫≠p, c√≥ th·ªÉ th·∫•y 2 chi·∫øc xe c·ª©u h·ªèa v√† c√°c anh t·ªï d√¢n ph·ªë'
2025-12-23 01:46:01 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'Cu·ªëi c√πng l√† c·∫£nh ƒë√°m ƒë√¥ng t·ª• t·∫≠p, c√≥ th·ªÉ th·∫•y 2 chi·∫øc xe c·ª©u h·ªèa v√† c√°c anh t·ªï d√¢n ph·ªë' ‚Üí 'Finally, there is a scene of a crowd gathering, two fire trucks and neighborhood groups can be seen'
2025-12-23 01:46:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'Finally, there is a scene of a crowd gathering, two fire trucks and neighborhood groups can be seen'
2025-12-23 01:46:01 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:46:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='Finally, there is a scene of a crowd gathering, two fire trucks and neighborhood groups can be seen', Q1='Finally, there is a scene of a crowd gathering, two fire trucks and neighborhood groups can be seen', Q2='Finally, there is a scene of a crowd gathering, two fire trucks and neighborhood groups can be seen'
2025-12-23 01:46:01 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:46:01 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Finally, there is a scene of a crowd gathering, two fire trucks and neighborhood groups can be seen
2025-12-23 01:46:01 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:46:01 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:46:01 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:46:01 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:46:01 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:46:01 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Finally, there is a scene of a crowd gathering, two fire trucks and neighborhood groups can be seen
2025-12-23 01:46:01 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:46:01 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:46:01 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:46:01 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Finally, there is a scene of a crowd gathering, two fire trucks and neighborhood groups can be seen
2025-12-23 01:46:02 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:46:02 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Finally, there is a scene of a crowd gathering, two fire trucks and neighborhood groups can be seen
2025-12-23 01:46:02 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:46:02 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:46:03 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:46:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:46:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 01:46:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 0, Q2: 200
2025-12-23 01:46:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 5517.91ms
2025-12-23 01:46:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 01:46:04 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 400 unique ids from 2 stages
2025-12-23 01:46:04 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 400 unique ids
2025-12-23 01:46:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 01:46:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='M·ªôt c·ªôt kh√≥i ƒëen ·ªü gi·ªØa tr·ªùi H√† N·ªôi ƒë∆∞·ª£c b·ªëc l√™n sau h√†ng c√¢y xanh', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:46:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='C·∫£nh ti·∫øp theo quay ng√¥i nh√† ƒëang b·ªã ch√°y c√≥ th·ªÉ th·∫•y b√™n c·∫°nh ƒë√≥ c√≥ m·ªôt qu√°n c√≥ 3 ng√¥i sao', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:46:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'M·ªôt c·ªôt kh√≥i ƒëen ·ªü gi·ªØa tr·ªùi H√† N·ªôi ƒë∆∞·ª£c b·ªëc l√™n sau h√†ng c√¢y xanh'
2025-12-23 01:46:34 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'M·ªôt c·ªôt kh√≥i ƒëen ·ªü gi·ªØa tr·ªùi H√† N·ªôi ƒë∆∞·ª£c b·ªëc l√™n sau h√†ng c√¢y xanh' ‚Üí 'A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees'
2025-12-23 01:46:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees'
2025-12-23 01:46:34 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:46:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees', Q1='A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees', Q2='A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees'
2025-12-23 01:46:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'C·∫£nh ti·∫øp theo quay ng√¥i nh√† ƒëang b·ªã ch√°y c√≥ th·ªÉ th·∫•y b√™n c·∫°nh ƒë√≥ c√≥ m·ªôt qu√°n c√≥ 3 ng√¥i sao'
2025-12-23 01:46:34 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh ti·∫øp theo quay ng√¥i nh√† ƒëang b·ªã ch√°y c√≥ th·ªÉ th·∫•y b√™n c·∫°nh ƒë√≥ c√≥ m·ªôt qu√°n c√≥ 3 ng√¥i sao' ‚Üí 'The next scene shows the house on fire and you can see that next to it there is a shop with 3 stars'
2025-12-23 01:46:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'The next scene shows the house on fire and you can see that next to it there is a shop with 3 stars'
2025-12-23 01:46:34 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:46:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='The next scene shows the house on fire and you can see that next to it there is a shop with 3 stars', Q1='The next scene shows the house on fire and you can see that next to it there is a shop with 3 stars', Q2='The next scene shows the house on fire and you can see that next to it there is a shop with 3 stars'
2025-12-23 01:46:35 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:46:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:46:35 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:46:35 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:46:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The next scene shows the house on fire and you can see that next to it there is a shop with 3 stars
2025-12-23 01:46:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:46:35 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:46:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:46:35 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:46:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:46:35 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:46:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:46:35 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:46:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:46:35 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:46:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The next scene shows the house on fire and you can see that next to it there is a shop with 3 stars
2025-12-23 01:46:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 01:46:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='ƒë√°m ƒë√¥ng t·ª• t·∫≠p, c√≥ th·ªÉ th·∫•y 2 chi·∫øc xe c·ª©u h·ªèa v√† c√°c anh t·ªï d√¢n ph·ªë', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:46:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:46:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'ƒë√°m ƒë√¥ng t·ª• t·∫≠p, c√≥ th·ªÉ th·∫•y 2 chi·∫øc xe c·ª©u h·ªèa v√† c√°c anh t·ªï d√¢n ph·ªë'
2025-12-23 01:46:36 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:46:36 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The next scene shows the house on fire and you can see that next to it there is a shop with 3 stars
2025-12-23 01:46:37 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'ƒë√°m ƒë√¥ng t·ª• t·∫≠p, c√≥ th·ªÉ th·∫•y 2 chi·∫øc xe c·ª©u h·ªèa v√† c√°c anh t·ªï d√¢n ph·ªë' ‚Üí 'A crowd gathered, two fire trucks and neighborhood groups could be seen'
2025-12-23 01:46:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'A crowd gathered, two fire trucks and neighborhood groups could be seen'
2025-12-23 01:46:38 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:46:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='A crowd gathered, two fire trucks and neighborhood groups could be seen', Q1='A crowd gathered, two fire trucks and neighborhood groups could be seen', Q2='A crowd gathered, two fire trucks and neighborhood groups could be seen'
2025-12-23 01:46:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 01:46:38 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 01:46:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-23 01:46:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 01:46:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 4156.16ms
2025-12-23 01:46:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 01:46:38 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 400 unique ids from 2 stages
2025-12-23 01:46:38 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 400 unique ids
2025-12-23 01:46:38 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:46:38 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A crowd gathered, two fire trucks and neighborhood groups could be seen
2025-12-23 01:46:38 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:46:38 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A crowd gathered, two fire trucks and neighborhood groups could be seen
2025-12-23 01:46:38 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:46:38 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A crowd gathered, two fire trucks and neighborhood groups could be seen
2025-12-23 01:46:38 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:46:38 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A crowd gathered, two fire trucks and neighborhood groups could be seen
2025-12-23 01:46:38 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:46:38 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A crowd gathered, two fire trucks and neighborhood groups could be seen
2025-12-23 01:46:39 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:46:39 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A crowd gathered, two fire trucks and neighborhood groups could be seen
2025-12-23 01:46:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 0
2025-12-23 01:46:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3690.61ms
2025-12-23 01:46:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-23 01:46:39 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 2 stages
2025-12-23 01:46:39 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 65 videos with results
2025-12-23 01:46:39 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 0 videos with results
2025-12-23 01:46:39 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] No common videos across all stages
2025-12-23 01:46:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 0 valid tuples
2025-12-23 01:46:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 01:46:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='M·ªôt c·ªôt kh√≥i ƒëen ·ªü gi·ªØa tr·ªùi H√† N·ªôi ƒë∆∞·ª£c b·ªëc l√™n sau h√†ng c√¢y xanh

', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:46:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='C·∫£nh ti·∫øp theo quay ng√¥i nh√† ƒëang b·ªã ch√°y c√≥ th·ªÉ th·∫•y b√™n c·∫°nh ƒë√≥ c√≥ m·ªôt qu√°n c√≥ 3 ng√¥i sao', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:46:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'M·ªôt c·ªôt kh√≥i ƒëen ·ªü gi·ªØa tr·ªùi H√† N·ªôi ƒë∆∞·ª£c b·ªëc l√™n sau h√†ng c√¢y xanh

'
2025-12-23 01:46:41 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'M·ªôt c·ªôt kh√≥i ƒëen ·ªü gi·ªØa tr·ªùi H√† N·ªôi ƒë∆∞·ª£c b·ªëc l√™n sau h√†ng c√¢y xanh

' ‚Üí 'A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees'
2025-12-23 01:46:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees'
2025-12-23 01:46:42 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:46:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees', Q1='A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees', Q2='A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees'
2025-12-23 01:46:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'C·∫£nh ti·∫øp theo quay ng√¥i nh√† ƒëang b·ªã ch√°y c√≥ th·ªÉ th·∫•y b√™n c·∫°nh ƒë√≥ c√≥ m·ªôt qu√°n c√≥ 3 ng√¥i sao'
2025-12-23 01:46:42 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh ti·∫øp theo quay ng√¥i nh√† ƒëang b·ªã ch√°y c√≥ th·ªÉ th·∫•y b√™n c·∫°nh ƒë√≥ c√≥ m·ªôt qu√°n c√≥ 3 ng√¥i sao' ‚Üí 'The next scene shows the house on fire and you can see that next to it there is a shop with 3 stars'
2025-12-23 01:46:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'The next scene shows the house on fire and you can see that next to it there is a shop with 3 stars'
2025-12-23 01:46:42 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:46:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='The next scene shows the house on fire and you can see that next to it there is a shop with 3 stars', Q1='The next scene shows the house on fire and you can see that next to it there is a shop with 3 stars', Q2='The next scene shows the house on fire and you can see that next to it there is a shop with 3 stars'
2025-12-23 01:46:42 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:46:42 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:46:42 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:46:42 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:46:42 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The next scene shows the house on fire and you can see that next to it there is a shop with 3 stars
2025-12-23 01:46:42 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The next scene shows the house on fire and you can see that next to it there is a shop with 3 stars
2025-12-23 01:46:43 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:46:43 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The next scene shows the house on fire and you can see that next to it there is a shop with 3 stars
2025-12-23 01:46:43 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:46:43 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:46:43 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:46:43 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:46:43 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:46:43 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:46:43 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:46:43 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:46:44 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:46:44 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The next scene shows the house on fire and you can see that next to it there is a shop with 3 stars
2025-12-23 01:46:44 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 01:46:44 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 01:46:44 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2810.35ms
2025-12-23 01:46:44 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-23 01:46:44 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 2 stages
2025-12-23 01:46:44 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 59 videos with results
2025-12-23 01:46:44 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 78 videos with results
2025-12-23 01:46:44 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 11 common videos across all stages
2025-12-23 01:46:44 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 43 valid tuples
2025-12-23 01:46:44 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 43 valid tuples
2025-12-23 01:46:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 01:46:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='M·ªôt c·ªôt kh√≥i ƒëen ·ªü gi·ªØa tr·ªùi H√† N·ªôi ƒë∆∞·ª£c b·ªëc l√™n sau h√†ng c√¢y xanh

', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:46:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='C·∫£nh ti·∫øp theo quay ng√¥i nh√† ƒëang b·ªã ch√°y c√≥ th·ªÉ th·∫•y b√™n c·∫°nh ƒë√≥ c√≥ m·ªôt qu√°n c√≥ 3 ng√¥i sao', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:46:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'M·ªôt c·ªôt kh√≥i ƒëen ·ªü gi·ªØa tr·ªùi H√† N·ªôi ƒë∆∞·ª£c b·ªëc l√™n sau h√†ng c√¢y xanh

'
2025-12-23 01:46:57 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'M·ªôt c·ªôt kh√≥i ƒëen ·ªü gi·ªØa tr·ªùi H√† N·ªôi ƒë∆∞·ª£c b·ªëc l√™n sau h√†ng c√¢y xanh

' ‚Üí 'A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees'
2025-12-23 01:46:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees'
2025-12-23 01:46:57 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:46:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees', Q1='A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees', Q2='A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees'
2025-12-23 01:46:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'C·∫£nh ti·∫øp theo quay ng√¥i nh√† ƒëang b·ªã ch√°y c√≥ th·ªÉ th·∫•y b√™n c·∫°nh ƒë√≥ c√≥ m·ªôt qu√°n c√≥ 3 ng√¥i sao'
2025-12-23 01:46:58 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh ti·∫øp theo quay ng√¥i nh√† ƒëang b·ªã ch√°y c√≥ th·ªÉ th·∫•y b√™n c·∫°nh ƒë√≥ c√≥ m·ªôt qu√°n c√≥ 3 ng√¥i sao' ‚Üí 'The next scene shows the house on fire and you can see that next to it there is a shop with 3 stars'
2025-12-23 01:46:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'The next scene shows the house on fire and you can see that next to it there is a shop with 3 stars'
2025-12-23 01:46:58 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:46:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='The next scene shows the house on fire and you can see that next to it there is a shop with 3 stars', Q1='The next scene shows the house on fire and you can see that next to it there is a shop with 3 stars', Q2='The next scene shows the house on fire and you can see that next to it there is a shop with 3 stars'
2025-12-23 01:46:58 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:46:58 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:46:58 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:46:58 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The next scene shows the house on fire and you can see that next to it there is a shop with 3 stars
2025-12-23 01:46:58 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:46:58 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The next scene shows the house on fire and you can see that next to it there is a shop with 3 stars
2025-12-23 01:46:58 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:46:58 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The next scene shows the house on fire and you can see that next to it there is a shop with 3 stars
2025-12-23 01:46:59 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:46:59 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The next scene shows the house on fire and you can see that next to it there is a shop with 3 stars
2025-12-23 01:46:59 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:46:59 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:46:59 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:46:59 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:46:59 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:46:59 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The next scene shows the house on fire and you can see that next to it there is a shop with 3 stars
2025-12-23 01:46:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 01:46:59 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:46:59 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:46:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 01:46:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2752.30ms
2025-12-23 01:46:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 01:46:59 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 400 unique ids from 2 stages
2025-12-23 01:46:59 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 400 unique ids
2025-12-23 01:47:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 01:47:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='M·ªôt c·ªôt kh√≥i ƒëen ·ªü gi·ªØa tr·ªùi H√† N·ªôi ƒë∆∞·ª£c b·ªëc l√™n sau h√†ng c√¢y xanh', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:47:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='C·∫£nh ti·∫øp theo quay ng√¥i nh√† ƒëang b·ªã ch√°y c√≥ th·ªÉ th·∫•y b√™n c·∫°nh ƒë√≥ c√≥ m·ªôt qu√°n c√≥ 3 ng√¥i sao', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:47:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'M·ªôt c·ªôt kh√≥i ƒëen ·ªü gi·ªØa tr·ªùi H√† N·ªôi ƒë∆∞·ª£c b·ªëc l√™n sau h√†ng c√¢y xanh'
2025-12-23 01:47:00 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'M·ªôt c·ªôt kh√≥i ƒëen ·ªü gi·ªØa tr·ªùi H√† N·ªôi ƒë∆∞·ª£c b·ªëc l√™n sau h√†ng c√¢y xanh' ‚Üí 'A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees'
2025-12-23 01:47:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees'
2025-12-23 01:47:01 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:47:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees', Q1='A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees', Q2='A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees'
2025-12-23 01:47:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'C·∫£nh ti·∫øp theo quay ng√¥i nh√† ƒëang b·ªã ch√°y c√≥ th·ªÉ th·∫•y b√™n c·∫°nh ƒë√≥ c√≥ m·ªôt qu√°n c√≥ 3 ng√¥i sao'
2025-12-23 01:47:01 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh ti·∫øp theo quay ng√¥i nh√† ƒëang b·ªã ch√°y c√≥ th·ªÉ th·∫•y b√™n c·∫°nh ƒë√≥ c√≥ m·ªôt qu√°n c√≥ 3 ng√¥i sao' ‚Üí 'The next scene shows the house on fire and you can see that next to it there is a shop with 3 stars'
2025-12-23 01:47:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'The next scene shows the house on fire and you can see that next to it there is a shop with 3 stars'
2025-12-23 01:47:01 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:47:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='The next scene shows the house on fire and you can see that next to it there is a shop with 3 stars', Q1='The next scene shows the house on fire and you can see that next to it there is a shop with 3 stars', Q2='The next scene shows the house on fire and you can see that next to it there is a shop with 3 stars'
2025-12-23 01:47:03 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:47:03 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:47:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:47:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:47:03 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:47:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The next scene shows the house on fire and you can see that next to it there is a shop with 3 stars
2025-12-23 01:47:03 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:47:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The next scene shows the house on fire and you can see that next to it there is a shop with 3 stars
2025-12-23 01:47:03 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:47:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:47:03 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:47:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:47:03 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:47:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The next scene shows the house on fire and you can see that next to it there is a shop with 3 stars
2025-12-23 01:47:03 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:47:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A column of black smoke rose in the middle of Hanoi's sky behind a row of green trees
2025-12-23 01:47:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 0, Q2: 200
2025-12-23 01:47:04 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:47:04 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The next scene shows the house on fire and you can see that next to it there is a shop with 3 stars
2025-12-23 01:47:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 01:47:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3392.51ms
2025-12-23 01:47:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-23 01:47:04 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 2 stages
2025-12-23 01:47:04 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 59 videos with results
2025-12-23 01:47:04 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 81 videos with results
2025-12-23 01:47:04 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 12 common videos across all stages
2025-12-23 01:47:04 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 54 valid tuples
2025-12-23 01:47:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 54 valid tuples
2025-12-23 01:48:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 01:48:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='ƒë√°m ƒë√¥ng t·ª• t·∫≠p, c√≥ th·ªÉ th·∫•y 2 chi·∫øc xe c·ª©u h·ªèa v√† c√°c anh t·ªï d√¢n ph·ªë'', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:48:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:48:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'ƒë√°m ƒë√¥ng t·ª• t·∫≠p, c√≥ th·ªÉ th·∫•y 2 chi·∫øc xe c·ª©u h·ªèa v√† c√°c anh t·ªï d√¢n ph·ªë''
2025-12-23 01:48:39 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'ƒë√°m ƒë√¥ng t·ª• t·∫≠p, c√≥ th·ªÉ th·∫•y 2 chi·∫øc xe c·ª©u h·ªèa v√† c√°c anh t·ªï d√¢n ph·ªë'' ‚Üí 'The crowd gathered, two fire trucks and neighborhood groups could be seen.'
2025-12-23 01:48:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'The crowd gathered, two fire trucks and neighborhood groups could be seen.'
2025-12-23 01:48:39 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:48:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='The crowd gathered, two fire trucks and neighborhood groups could be seen.', Q1='The crowd gathered, two fire trucks and neighborhood groups could be seen.', Q2='The crowd gathered, two fire trucks and neighborhood groups could be seen.'
2025-12-23 01:48:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 01:48:39 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 01:48:39 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:48:39 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The crowd gathered, two fire trucks and neighborhood groups could be seen.
2025-12-23 01:48:40 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:48:40 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The crowd gathered, two fire trucks and neighborhood groups could be seen.
2025-12-23 01:48:40 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:48:40 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The crowd gathered, two fire trucks and neighborhood groups could be seen.
2025-12-23 01:48:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 01:48:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 4277.01ms
2025-12-23 01:48:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-23 01:48:41 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 2 stages
2025-12-23 01:48:41 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 74 videos with results
2025-12-23 01:48:41 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 0 videos with results
2025-12-23 01:48:41 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] No common videos across all stages
2025-12-23 01:48:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 0 valid tuples
2025-12-23 01:49:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 01:49:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='C·∫£nh m·ªü ƒë·∫ßu l√† 3 ng∆∞·ªùi ƒë√†n √¥ng l·ªõn tu·ªïi ƒë·ªÅu m·∫∑c √°o xanh n∆∞·ªõc bi·ªÉn. C√≥ m·ªôt √¥ng ƒëeo k√≠nh m·∫∑c √°o nike', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:49:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:49:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'C·∫£nh m·ªü ƒë·∫ßu l√† 3 ng∆∞·ªùi ƒë√†n √¥ng l·ªõn tu·ªïi ƒë·ªÅu m·∫∑c √°o xanh n∆∞·ªõc bi·ªÉn. C√≥ m·ªôt √¥ng ƒëeo k√≠nh m·∫∑c √°o nike'
2025-12-23 01:49:54 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh m·ªü ƒë·∫ßu l√† 3 ng∆∞·ªùi ƒë√†n √¥ng l·ªõn tu·ªïi ƒë·ªÅu m·∫∑c √°o xanh n∆∞·ªõc bi·ªÉn. C√≥ m·ªôt √¥ng ƒëeo k√≠nh m·∫∑c √°o nike' ‚Üí 'The opening scene is of three older men all wearing navy blue shirts. There was a man wearing glasses and wearing a Nike shirt'
2025-12-23 01:49:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'The opening scene is of three older men all wearing navy blue shirts. There was a man wearing glasses and wearing a Nike shirt'
2025-12-23 01:49:54 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:49:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='The opening scene is of three older men all wearing navy blue shirts. There was a man wearing glasses and wearing a Nike shirt', Q1='The opening scene is of three older men all wearing navy blue shirts. There was a man wearing glasses and wearing a Nike shirt', Q2='The opening scene is of three older men all wearing navy blue shirts. There was a man wearing glasses and wearing a Nike shirt'
2025-12-23 01:49:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 01:49:54 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 01:49:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 01:49:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='C·∫£nh m·ªü ƒë·∫ßu l√† 3 ng∆∞·ªùi ƒë√†n √¥ng l·ªõn tu·ªïi ƒë·ªÅu m·∫∑c √°o xanh n∆∞·ªõc bi·ªÉn. C√≥ m·ªôt √¥ng ƒëeo k√≠nh m·∫∑c √°o nike

', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:49:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:49:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'C·∫£nh m·ªü ƒë·∫ßu l√† 3 ng∆∞·ªùi ƒë√†n √¥ng l·ªõn tu·ªïi ƒë·ªÅu m·∫∑c √°o xanh n∆∞·ªõc bi·ªÉn. C√≥ m·ªôt √¥ng ƒëeo k√≠nh m·∫∑c √°o nike

'
2025-12-23 01:49:55 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:49:55 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:49:55 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The opening scene is of three older men all wearing navy blue shirts. There was a man wearing glasses and wearing a Nike shirt
2025-12-23 01:49:55 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The opening scene is of three older men all wearing navy blue shirts. There was a man wearing glasses and wearing a Nike shirt
2025-12-23 01:49:55 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh m·ªü ƒë·∫ßu l√† 3 ng∆∞·ªùi ƒë√†n √¥ng l·ªõn tu·ªïi ƒë·ªÅu m·∫∑c √°o xanh n∆∞·ªõc bi·ªÉn. C√≥ m·ªôt √¥ng ƒëeo k√≠nh m·∫∑c √°o nike

' ‚Üí 'The opening scene is of three older men all wearing navy blue shirts. There was a man wearing glasses and wearing a Nike shirt'
2025-12-23 01:49:55 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'The opening scene is of three older men all wearing navy blue shirts. There was a man wearing glasses and wearing a Nike shirt'
2025-12-23 01:49:55 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:49:55 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The opening scene is of three older men all wearing navy blue shirts. There was a man wearing glasses and wearing a Nike shirt
2025-12-23 01:49:55 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:49:55 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The opening scene is of three older men all wearing navy blue shirts. There was a man wearing glasses and wearing a Nike shirt
2025-12-23 01:49:55 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:49:55 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='The opening scene is of three older men all wearing navy blue shirts. There was a man wearing glasses and wearing a Nike shirt', Q1='The opening scene is of three older men all wearing navy blue shirts. There was a man wearing glasses and wearing a Nike shirt', Q2='The opening scene is of three older men all wearing navy blue shirts. There was a man wearing glasses and wearing a Nike shirt'
2025-12-23 01:49:55 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 01:49:55 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 01:49:55 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 01:49:55 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='3 ng∆∞·ªùi ƒë√†n √¥ng l·ªõn tu·ªïi ƒë·ªÅu m·∫∑c √°o xanh n∆∞·ªõc bi·ªÉn. C√≥ m·ªôt √¥ng ƒëeo k√≠nh m·∫∑c √°o nike', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:49:55 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:49:55 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: '3 ng∆∞·ªùi ƒë√†n √¥ng l·ªõn tu·ªïi ƒë·ªÅu m·∫∑c √°o xanh n∆∞·ªõc bi·ªÉn. C√≥ m·ªôt √¥ng ƒëeo k√≠nh m·∫∑c √°o nike'
2025-12-23 01:49:55 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:49:55 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The opening scene is of three older men all wearing navy blue shirts. There was a man wearing glasses and wearing a Nike shirt
2025-12-23 01:49:55 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:49:55 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The opening scene is of three older men all wearing navy blue shirts. There was a man wearing glasses and wearing a Nike shirt
2025-12-23 01:49:56 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:49:56 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:49:56 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The opening scene is of three older men all wearing navy blue shirts. There was a man wearing glasses and wearing a Nike shirt
2025-12-23 01:49:56 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The opening scene is of three older men all wearing navy blue shirts. There was a man wearing glasses and wearing a Nike shirt
2025-12-23 01:49:56 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:49:56 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The opening scene is of three older men all wearing navy blue shirts. There was a man wearing glasses and wearing a Nike shirt
2025-12-23 01:49:56 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: '3 ng∆∞·ªùi ƒë√†n √¥ng l·ªõn tu·ªïi ƒë·ªÅu m·∫∑c √°o xanh n∆∞·ªõc bi·ªÉn. C√≥ m·ªôt √¥ng ƒëeo k√≠nh m·∫∑c √°o nike' ‚Üí 'The three older men were all wearing navy blue shirts. There was a man wearing glasses and wearing a Nike shirt'
2025-12-23 01:49:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'The three older men were all wearing navy blue shirts. There was a man wearing glasses and wearing a Nike shirt'
2025-12-23 01:49:57 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:49:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='The three older men were all wearing navy blue shirts. There was a man wearing glasses and wearing a Nike shirt', Q1='The three older men were all wearing navy blue shirts. There was a man wearing glasses and wearing a Nike shirt', Q2='The three older men were all wearing navy blue shirts. There was a man wearing glasses and wearing a Nike shirt'
2025-12-23 01:49:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 01:49:57 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 01:49:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 0
2025-12-23 01:49:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2786.89ms
2025-12-23 01:49:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 01:49:57 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-23 01:49:57 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-23 01:49:57 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:49:57 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The three older men were all wearing navy blue shirts. There was a man wearing glasses and wearing a Nike shirt
2025-12-23 01:49:57 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:49:57 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The three older men were all wearing navy blue shirts. There was a man wearing glasses and wearing a Nike shirt
2025-12-23 01:49:57 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:49:57 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The three older men were all wearing navy blue shirts. There was a man wearing glasses and wearing a Nike shirt
2025-12-23 01:49:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 01:49:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2537.72ms
2025-12-23 01:49:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 01:49:57 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-23 01:49:57 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-23 01:49:57 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:49:57 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The three older men were all wearing navy blue shirts. There was a man wearing glasses and wearing a Nike shirt
2025-12-23 01:49:58 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:49:58 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The three older men were all wearing navy blue shirts. There was a man wearing glasses and wearing a Nike shirt
2025-12-23 01:49:58 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:49:58 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The three older men were all wearing navy blue shirts. There was a man wearing glasses and wearing a Nike shirt
2025-12-23 01:49:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 0
2025-12-23 01:49:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3562.56ms
2025-12-23 01:49:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-23 01:49:59 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 2 stages
2025-12-23 01:49:59 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 92 videos with results
2025-12-23 01:49:59 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 0 videos with results
2025-12-23 01:49:59 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] No common videos across all stages
2025-12-23 01:49:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 0 valid tuples
2025-12-23 01:50:44 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframe/L15/L15_V007/13547.webp
2025-12-23 01:50:44 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframe/L15/L15_V007/13547.webp -> /app/app/data/keyframe/L15/L15_V007/13547.webp
2025-12-23 01:50:44 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframe/L15/L15_V007/13547.webp
2025-12-23 01:50:44 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframe/L15/L15_V007/13547.webp -> /app/app/data/keyframe/L15/L15_V007/13547.webp
2025-12-23 01:50:45 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 01:50:45 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 01:50:46 - root - INFO - [IMAGE_SEARCH] Result #0: ID=433201, Path=/keyframe/L15/L15_V007/13547.webp, Score=0.9950414896011353
2025-12-23 01:50:46 - root - INFO - [IMAGE_SEARCH] Result #1: ID=433207, Path=/keyframe/L15/L15_V007/13787.webp, Score=0.9903767108917236
2025-12-23 01:50:46 - root - INFO - [IMAGE_SEARCH] Result #2: ID=433202, Path=/keyframe/L15/L15_V007/13587.webp, Score=0.9855256080627441
2025-12-23 01:50:46 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1151.52ms
2025-12-23 01:50:46 - root - INFO - [IMAGE_SEARCH] First result sample: {'id': 433201, 'keyframe_path': '/keyframe/L15/L15_V007/13547.webp', 'score': 0.9950414896011353, 'video': '', 'frame_idx': None}
2025-12-23 01:50:46 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 01:50:46 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 01:50:46 - root - INFO - [IMAGE_SEARCH] Result #0: ID=433201, Path=/keyframe/L15/L15_V007/13547.webp, Score=0.9950414896011353
2025-12-23 01:50:46 - root - INFO - [IMAGE_SEARCH] Result #1: ID=433207, Path=/keyframe/L15/L15_V007/13787.webp, Score=0.9903767108917236
2025-12-23 01:50:46 - root - INFO - [IMAGE_SEARCH] Result #2: ID=433202, Path=/keyframe/L15/L15_V007/13587.webp, Score=0.9855256080627441
2025-12-23 01:50:46 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1407.61ms
2025-12-23 01:50:46 - root - INFO - [IMAGE_SEARCH] First result sample: {'id': 433201, 'keyframe_path': '/keyframe/L15/L15_V007/13547.webp', 'score': 0.9950414896011353, 'video': '', 'frame_idx': None}
2025-12-23 01:51:56 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframe/L15/L15_V007/13547.webp
2025-12-23 01:51:56 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframe/L15/L15_V007/13547.webp -> /app/app/data/keyframe/L15/L15_V007/13547.webp
2025-12-23 01:51:57 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframe/L15/L15_V007/13547.webp
2025-12-23 01:51:57 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframe/L15/L15_V007/13547.webp -> /app/app/data/keyframe/L15/L15_V007/13547.webp
2025-12-23 01:51:58 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 01:51:58 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 01:51:58 - root - INFO - [IMAGE_SEARCH] Result #0: ID=433201, Path=/keyframe/L15/L15_V007/13547.webp, Score=0.9950414896011353
2025-12-23 01:51:58 - root - INFO - [IMAGE_SEARCH] Result #1: ID=433207, Path=/keyframe/L15/L15_V007/13787.webp, Score=0.9903767108917236
2025-12-23 01:51:58 - root - INFO - [IMAGE_SEARCH] Result #2: ID=433202, Path=/keyframe/L15/L15_V007/13587.webp, Score=0.9855256080627441
2025-12-23 01:51:58 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1170.68ms
2025-12-23 01:51:58 - root - INFO - [IMAGE_SEARCH] First result sample: {'id': 433201, 'keyframe_path': '/keyframe/L15/L15_V007/13547.webp', 'score': 0.9950414896011353, 'video': '', 'frame_idx': None}
2025-12-23 01:51:58 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 01:51:58 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 01:51:58 - root - INFO - [IMAGE_SEARCH] Result #0: ID=433201, Path=/keyframe/L15/L15_V007/13547.webp, Score=0.9950414896011353
2025-12-23 01:51:58 - root - INFO - [IMAGE_SEARCH] Result #1: ID=433207, Path=/keyframe/L15/L15_V007/13787.webp, Score=0.9903767108917236
2025-12-23 01:51:58 - root - INFO - [IMAGE_SEARCH] Result #2: ID=433202, Path=/keyframe/L15/L15_V007/13587.webp, Score=0.9855256080627441
2025-12-23 01:51:58 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1544.42ms
2025-12-23 01:51:58 - root - INFO - [IMAGE_SEARCH] First result sample: {'id': 433201, 'keyframe_path': '/keyframe/L15/L15_V007/13547.webp', 'score': 0.9950414896011353, 'video': '', 'frame_idx': None}
2025-12-23 01:52:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 01:52:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='C·∫£nh m·ªü ƒë·∫ßu l√† 3 ng∆∞·ªùi ƒë√†n √¥ng l·ªõn tu·ªïi ƒë·ªÅu m·∫∑c √°o xanh n∆∞·ªõc bi·ªÉn. C√≥ m·ªôt √¥ng ƒëeo k√≠nh m·∫∑c √°o nike', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:52:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:52:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'C·∫£nh m·ªü ƒë·∫ßu l√† 3 ng∆∞·ªùi ƒë√†n √¥ng l·ªõn tu·ªïi ƒë·ªÅu m·∫∑c √°o xanh n∆∞·ªõc bi·ªÉn. C√≥ m·ªôt √¥ng ƒëeo k√≠nh m·∫∑c √°o nike'
2025-12-23 01:52:03 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh m·ªü ƒë·∫ßu l√† 3 ng∆∞·ªùi ƒë√†n √¥ng l·ªõn tu·ªïi ƒë·ªÅu m·∫∑c √°o xanh n∆∞·ªõc bi·ªÉn. C√≥ m·ªôt √¥ng ƒëeo k√≠nh m·∫∑c √°o nike' ‚Üí 'The opening scene is of three older men all wearing navy blue shirts. There was a man wearing glasses and wearing a Nike shirt'
2025-12-23 01:52:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'The opening scene is of three older men all wearing navy blue shirts. There was a man wearing glasses and wearing a Nike shirt'
2025-12-23 01:52:03 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:52:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='The opening scene is of three older men all wearing navy blue shirts. There was a man wearing glasses and wearing a Nike shirt', Q1='The opening scene is of three older men all wearing navy blue shirts. There was a man wearing glasses and wearing a Nike shirt', Q2='The opening scene is of three older men all wearing navy blue shirts. There was a man wearing glasses and wearing a Nike shirt'
2025-12-23 01:52:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 01:52:03 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 01:52:03 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:52:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The opening scene is of three older men all wearing navy blue shirts. There was a man wearing glasses and wearing a Nike shirt
2025-12-23 01:52:04 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:52:04 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The opening scene is of three older men all wearing navy blue shirts. There was a man wearing glasses and wearing a Nike shirt
2025-12-23 01:52:04 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:52:04 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The opening scene is of three older men all wearing navy blue shirts. There was a man wearing glasses and wearing a Nike shirt
2025-12-23 01:52:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 01:52:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2570.54ms
2025-12-23 01:52:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 01:52:05 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-23 01:52:05 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-23 01:53:08 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframe/L15/L15_V007/13547.webp
2025-12-23 01:53:08 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframe/L15/L15_V007/13547.webp -> /app/app/data/keyframe/L15/L15_V007/13547.webp
2025-12-23 01:53:09 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 01:53:09 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 01:53:09 - root - INFO - [IMAGE_SEARCH] Result #0: ID=433201, Path=/keyframe/L15/L15_V007/13547.webp, Score=0.9950414896011353
2025-12-23 01:53:09 - root - INFO - [IMAGE_SEARCH] Result #1: ID=433207, Path=/keyframe/L15/L15_V007/13787.webp, Score=0.9903767108917236
2025-12-23 01:53:09 - root - INFO - [IMAGE_SEARCH] Result #2: ID=433202, Path=/keyframe/L15/L15_V007/13587.webp, Score=0.9855256080627441
2025-12-23 01:53:09 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1112.67ms
2025-12-23 01:53:09 - root - INFO - [IMAGE_SEARCH] First result sample: {'id': 433201, 'keyframe_path': '/keyframe/L15/L15_V007/13547.webp', 'score': 0.9950414896011353, 'video': '', 'frame_idx': None}
2025-12-23 01:54:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 01:54:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, objects=[]
2025-12-23 01:54:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:54:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: ''
2025-12-23 01:54:38 - app.services.gemini.query_augmentation - WARNING - [QUERY AUG] Empty query, returning original
2025-12-23 01:54:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='', Q1='', Q2=''
2025-12-23 01:54:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 01:54:38 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 01:54:38 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.108s]
2025-12-23 01:54:38 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.110s]
2025-12-23 01:54:38 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.113s]
2025-12-23 01:54:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 01:54:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 150.61ms
2025-12-23 01:54:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 01:54:38 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-23 01:54:38 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-23 01:55:51 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 01:55:51 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='m·ªôt ch·ªã m·∫∑c ƒë·ªì ƒëen ng·ªìi c·∫°nh m·ªôt ch·ªã m·∫∑c √°o xanh bi·ªÉn vi·ªÅn cam

', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:55:51 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:55:51 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'm·ªôt ch·ªã m·∫∑c ƒë·ªì ƒëen ng·ªìi c·∫°nh m·ªôt ch·ªã m·∫∑c √°o xanh bi·ªÉn vi·ªÅn cam

'
2025-12-23 01:55:52 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'm·ªôt ch·ªã m·∫∑c ƒë·ªì ƒëen ng·ªìi c·∫°nh m·ªôt ch·ªã m·∫∑c √°o xanh bi·ªÉn vi·ªÅn cam

' ‚Üí 'A sister dressed in black sat next to a sister wearing a blue shirt with orange trim'
2025-12-23 01:55:52 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'A sister dressed in black sat next to a sister wearing a blue shirt with orange trim'
2025-12-23 01:55:52 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:55:52 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='A sister dressed in black sat next to a sister wearing a blue shirt with orange trim', Q1='A sister dressed in black sat next to a sister wearing a blue shirt with orange trim', Q2='A sister dressed in black sat next to a sister wearing a blue shirt with orange trim'
2025-12-23 01:55:52 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 01:55:52 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 01:55:52 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 01:55:52 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='C·∫£nh m·ªü ƒë·∫ßu c√≥ th·ªÉ th·∫•y m·ªôt ch·ªã m·∫∑c ƒë·ªì ƒëen ng·ªìi c·∫°nh m·ªôt ch·ªã m·∫∑c √°o xanh bi·ªÉn vi·ªÅn cam', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:55:52 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:55:52 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'C·∫£nh m·ªü ƒë·∫ßu c√≥ th·ªÉ th·∫•y m·ªôt ch·ªã m·∫∑c ƒë·ªì ƒëen ng·ªìi c·∫°nh m·ªôt ch·ªã m·∫∑c √°o xanh bi·ªÉn vi·ªÅn cam'
2025-12-23 01:55:53 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:55:53 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:55:53 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A sister dressed in black sat next to a sister wearing a blue shirt with orange trim
2025-12-23 01:55:53 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A sister dressed in black sat next to a sister wearing a blue shirt with orange trim
2025-12-23 01:55:53 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:55:53 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A sister dressed in black sat next to a sister wearing a blue shirt with orange trim
2025-12-23 01:55:53 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:55:53 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A sister dressed in black sat next to a sister wearing a blue shirt with orange trim
2025-12-23 01:55:53 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:55:53 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A sister dressed in black sat next to a sister wearing a blue shirt with orange trim
2025-12-23 01:55:54 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:55:54 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A sister dressed in black sat next to a sister wearing a blue shirt with orange trim
2025-12-23 01:55:54 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh m·ªü ƒë·∫ßu c√≥ th·ªÉ th·∫•y m·ªôt ch·ªã m·∫∑c ƒë·ªì ƒëen ng·ªìi c·∫°nh m·ªôt ch·ªã m·∫∑c √°o xanh bi·ªÉn vi·ªÅn cam' ‚Üí 'In the opening scene, you can see a sister dressed in black sitting next to a sister wearing a blue shirt with orange trim'
2025-12-23 01:55:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'In the opening scene, you can see a sister dressed in black sitting next to a sister wearing a blue shirt with orange trim'
2025-12-23 01:55:54 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:55:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='In the opening scene, you can see a sister dressed in black sitting next to a sister wearing a blue shirt with orange trim', Q1='In the opening scene, you can see a sister dressed in black sitting next to a sister wearing a blue shirt with orange trim', Q2='In the opening scene, you can see a sister dressed in black sitting next to a sister wearing a blue shirt with orange trim'
2025-12-23 01:55:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 01:55:54 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 01:55:54 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:55:54 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: In the opening scene, you can see a sister dressed in black sitting next to a sister wearing a blue shirt with orange trim
2025-12-23 01:55:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-23 01:55:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3189.57ms
2025-12-23 01:55:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-23 01:55:54 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 2 stages
2025-12-23 01:55:54 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 101 videos with results
2025-12-23 01:55:54 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 0 videos with results
2025-12-23 01:55:54 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] No common videos across all stages
2025-12-23 01:55:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 0 valid tuples
2025-12-23 01:55:55 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:55:55 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: In the opening scene, you can see a sister dressed in black sitting next to a sister wearing a blue shirt with orange trim
2025-12-23 01:55:55 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:55:55 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: In the opening scene, you can see a sister dressed in black sitting next to a sister wearing a blue shirt with orange trim
2025-12-23 01:55:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 01:55:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3744.06ms
2025-12-23 01:55:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 01:55:56 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-23 01:55:56 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-23 01:55:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 01:55:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='C·∫£nh m·ªü ƒë·∫ßu c√≥ th·ªÉ th·∫•y m·ªôt ch·ªã m·∫∑c ƒë·ªì ƒëen ng·ªìi c·∫°nh m·ªôt ch·ªã m·∫∑c √°o xanh bi·ªÉn vi·ªÅn cam', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:55:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:55:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'C·∫£nh m·ªü ƒë·∫ßu c√≥ th·ªÉ th·∫•y m·ªôt ch·ªã m·∫∑c ƒë·ªì ƒëen ng·ªìi c·∫°nh m·ªôt ch·ªã m·∫∑c √°o xanh bi·ªÉn vi·ªÅn cam'
2025-12-23 01:55:57 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh m·ªü ƒë·∫ßu c√≥ th·ªÉ th·∫•y m·ªôt ch·ªã m·∫∑c ƒë·ªì ƒëen ng·ªìi c·∫°nh m·ªôt ch·ªã m·∫∑c √°o xanh bi·ªÉn vi·ªÅn cam' ‚Üí 'In the opening scene, you can see a sister dressed in black sitting next to a sister wearing a blue shirt with orange trim'
2025-12-23 01:55:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'In the opening scene, you can see a sister dressed in black sitting next to a sister wearing a blue shirt with orange trim'
2025-12-23 01:55:57 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:55:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='In the opening scene, you can see a sister dressed in black sitting next to a sister wearing a blue shirt with orange trim', Q1='In the opening scene, you can see a sister dressed in black sitting next to a sister wearing a blue shirt with orange trim', Q2='In the opening scene, you can see a sister dressed in black sitting next to a sister wearing a blue shirt with orange trim'
2025-12-23 01:55:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 01:55:57 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 01:55:57 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:55:57 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:55:57 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: In the opening scene, you can see a sister dressed in black sitting next to a sister wearing a blue shirt with orange trim
2025-12-23 01:55:57 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: In the opening scene, you can see a sister dressed in black sitting next to a sister wearing a blue shirt with orange trim
2025-12-23 01:55:58 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:55:58 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: In the opening scene, you can see a sister dressed in black sitting next to a sister wearing a blue shirt with orange trim
2025-12-23 01:55:58 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:55:58 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: In the opening scene, you can see a sister dressed in black sitting next to a sister wearing a blue shirt with orange trim
2025-12-23 01:55:58 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:55:58 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: In the opening scene, you can see a sister dressed in black sitting next to a sister wearing a blue shirt with orange trim
2025-12-23 01:55:58 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:55:58 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: In the opening scene, you can see a sister dressed in black sitting next to a sister wearing a blue shirt with orange trim
2025-12-23 01:55:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-23 01:55:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2585.91ms
2025-12-23 01:55:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 01:55:59 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-23 01:55:59 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-23 01:56:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 01:56:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='m·ªôt ch·ªã m·∫∑c ƒë·ªì ƒëen ng·ªìi c·∫°nh m·ªôt ch·ªã m·∫∑c √°o xanh bi·ªÉn vi·ªÅn cam', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:56:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:56:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'm·ªôt ch·ªã m·∫∑c ƒë·ªì ƒëen ng·ªìi c·∫°nh m·ªôt ch·ªã m·∫∑c √°o xanh bi·ªÉn vi·ªÅn cam'
2025-12-23 01:56:06 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'm·ªôt ch·ªã m·∫∑c ƒë·ªì ƒëen ng·ªìi c·∫°nh m·ªôt ch·ªã m·∫∑c √°o xanh bi·ªÉn vi·ªÅn cam' ‚Üí 'A sister dressed in black sat next to a sister wearing a blue shirt with orange trim'
2025-12-23 01:56:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'A sister dressed in black sat next to a sister wearing a blue shirt with orange trim'
2025-12-23 01:56:06 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:56:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='A sister dressed in black sat next to a sister wearing a blue shirt with orange trim', Q1='A sister dressed in black sat next to a sister wearing a blue shirt with orange trim', Q2='A sister dressed in black sat next to a sister wearing a blue shirt with orange trim'
2025-12-23 01:56:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 01:56:06 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 01:56:06 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:56:06 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A sister dressed in black sat next to a sister wearing a blue shirt with orange trim
2025-12-23 01:56:07 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:56:07 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A sister dressed in black sat next to a sister wearing a blue shirt with orange trim
2025-12-23 01:56:07 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:56:07 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A sister dressed in black sat next to a sister wearing a blue shirt with orange trim
2025-12-23 01:56:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 01:56:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 4201.99ms
2025-12-23 01:56:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-23 01:56:09 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 2 stages
2025-12-23 01:56:09 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 93 videos with results
2025-12-23 01:56:09 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 0 videos with results
2025-12-23 01:56:09 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] No common videos across all stages
2025-12-23 01:56:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 0 valid tuples
2025-12-23 01:56:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 01:56:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='C·∫£nh m·ªü ƒë·∫ßu c√≥ th·ªÉ th·∫•y m·ªôt c√¥ g√°i m·∫∑c ƒë·ªì ƒëen ng·ªìi c·∫°nh m·ªôt ch·ªã m·∫∑c √°o xanh bi·ªÉn vi·ªÅn cam', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:56:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:56:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'C·∫£nh m·ªü ƒë·∫ßu c√≥ th·ªÉ th·∫•y m·ªôt c√¥ g√°i m·∫∑c ƒë·ªì ƒëen ng·ªìi c·∫°nh m·ªôt ch·ªã m·∫∑c √°o xanh bi·ªÉn vi·ªÅn cam'
2025-12-23 01:56:34 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh m·ªü ƒë·∫ßu c√≥ th·ªÉ th·∫•y m·ªôt c√¥ g√°i m·∫∑c ƒë·ªì ƒëen ng·ªìi c·∫°nh m·ªôt ch·ªã m·∫∑c √°o xanh bi·ªÉn vi·ªÅn cam' ‚Üí 'In the opening scene, you can see a girl dressed in black sitting next to a woman wearing a blue shirt with orange trim'
2025-12-23 01:56:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'In the opening scene, you can see a girl dressed in black sitting next to a woman wearing a blue shirt with orange trim'
2025-12-23 01:56:34 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:56:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='In the opening scene, you can see a girl dressed in black sitting next to a woman wearing a blue shirt with orange trim', Q1='In the opening scene, you can see a girl dressed in black sitting next to a woman wearing a blue shirt with orange trim', Q2='In the opening scene, you can see a girl dressed in black sitting next to a woman wearing a blue shirt with orange trim'
2025-12-23 01:56:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 01:56:34 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 01:56:34 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:56:34 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: In the opening scene, you can see a girl dressed in black sitting next to a woman wearing a blue shirt with orange trim
2025-12-23 01:56:34 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:56:34 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: In the opening scene, you can see a girl dressed in black sitting next to a woman wearing a blue shirt with orange trim
2025-12-23 01:56:34 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:56:34 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: In the opening scene, you can see a girl dressed in black sitting next to a woman wearing a blue shirt with orange trim
2025-12-23 01:56:34 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:56:34 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: In the opening scene, you can see a girl dressed in black sitting next to a woman wearing a blue shirt with orange trim
2025-12-23 01:56:35 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:56:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: In the opening scene, you can see a girl dressed in black sitting next to a woman wearing a blue shirt with orange trim
2025-12-23 01:56:35 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:56:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: In the opening scene, you can see a girl dressed in black sitting next to a woman wearing a blue shirt with orange trim
2025-12-23 01:56:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 0
2025-12-23 01:56:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2848.43ms
2025-12-23 01:56:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 01:56:36 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-23 01:56:36 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-23 01:56:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 01:56:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='C·∫£nh m·ªü ƒë·∫ßu c√≥ th·ªÉ th·∫•y m·ªôt c√¥ g√°i m·∫∑c ƒë·ªì ƒëen ng·ªìi c·∫°nh m·ªôt c√¥ g√°i m·∫∑c √°o xanh bi·ªÉn vi·ªÅn cam', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:56:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:56:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'C·∫£nh m·ªü ƒë·∫ßu c√≥ th·ªÉ th·∫•y m·ªôt c√¥ g√°i m·∫∑c ƒë·ªì ƒëen ng·ªìi c·∫°nh m·ªôt c√¥ g√°i m·∫∑c √°o xanh bi·ªÉn vi·ªÅn cam'
2025-12-23 01:56:39 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh m·ªü ƒë·∫ßu c√≥ th·ªÉ th·∫•y m·ªôt c√¥ g√°i m·∫∑c ƒë·ªì ƒëen ng·ªìi c·∫°nh m·ªôt c√¥ g√°i m·∫∑c √°o xanh bi·ªÉn vi·ªÅn cam' ‚Üí 'The opening scene shows a girl dressed in black sitting next to a girl wearing a blue shirt with orange trim'
2025-12-23 01:56:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'The opening scene shows a girl dressed in black sitting next to a girl wearing a blue shirt with orange trim'
2025-12-23 01:56:39 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:56:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='The opening scene shows a girl dressed in black sitting next to a girl wearing a blue shirt with orange trim', Q1='The opening scene shows a girl dressed in black sitting next to a girl wearing a blue shirt with orange trim', Q2='The opening scene shows a girl dressed in black sitting next to a girl wearing a blue shirt with orange trim'
2025-12-23 01:56:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 01:56:39 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 01:56:40 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:56:40 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The opening scene shows a girl dressed in black sitting next to a girl wearing a blue shirt with orange trim
2025-12-23 01:56:40 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:56:40 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The opening scene shows a girl dressed in black sitting next to a girl wearing a blue shirt with orange trim
2025-12-23 01:56:40 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:56:40 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The opening scene shows a girl dressed in black sitting next to a girl wearing a blue shirt with orange trim
2025-12-23 01:56:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 01:56:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3923.65ms
2025-12-23 01:56:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 01:56:41 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-23 01:56:41 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-23 01:56:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 01:56:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='m·ªôt ch·ªã m·∫∑c ƒë·ªì ƒëen ng·ªìi c·∫°nh m·ªôt ch·ªã m·∫∑c √°o xanh bi·ªÉn vi·ªÅn cam', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:56:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='m·ªôt ng∆∞·ªùi c·∫ßm chi·∫øc ƒëi·ªán tho·∫°i l∆∞·ªõt m·ªôt app li√™n quan t·ªõi thu·∫ø v√† c√≥ m·ªôt ng∆∞·ªùi kh√°c h∆∞·ªõng d·∫´n ng∆∞·ªùi n√†y s·ª≠ d·ª•ng app', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:56:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'm·ªôt ch·ªã m·∫∑c ƒë·ªì ƒëen ng·ªìi c·∫°nh m·ªôt ch·ªã m·∫∑c √°o xanh bi·ªÉn vi·ªÅn cam'
2025-12-23 01:56:56 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'm·ªôt ch·ªã m·∫∑c ƒë·ªì ƒëen ng·ªìi c·∫°nh m·ªôt ch·ªã m·∫∑c √°o xanh bi·ªÉn vi·ªÅn cam' ‚Üí 'A sister dressed in black sat next to a sister wearing a blue shirt with orange trim'
2025-12-23 01:56:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'A sister dressed in black sat next to a sister wearing a blue shirt with orange trim'
2025-12-23 01:56:56 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:56:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='A sister dressed in black sat next to a sister wearing a blue shirt with orange trim', Q1='A sister dressed in black sat next to a sister wearing a blue shirt with orange trim', Q2='A sister dressed in black sat next to a sister wearing a blue shirt with orange trim'
2025-12-23 01:56:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'm·ªôt ng∆∞·ªùi c·∫ßm chi·∫øc ƒëi·ªán tho·∫°i l∆∞·ªõt m·ªôt app li√™n quan t·ªõi thu·∫ø v√† c√≥ m·ªôt ng∆∞·ªùi kh√°c h∆∞·ªõng d·∫´n ng∆∞·ªùi n√†y s·ª≠ d·ª•ng app'
2025-12-23 01:56:57 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'm·ªôt ng∆∞·ªùi c·∫ßm chi·∫øc ƒëi·ªán tho·∫°i l∆∞·ªõt m·ªôt app li√™n quan t·ªõi thu·∫ø v√† c√≥ m·ªôt ng∆∞·ªùi kh√°c h∆∞·ªõng d·∫´n ng∆∞·ªùi n√†y s·ª≠ d·ª•ng app' ‚Üí 'One person holds a phone and surfs an app related to taxes, and another person instructs this person to use the app'
2025-12-23 01:56:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'One person holds a phone and surfs an app related to taxes, and another person instructs this person to use the app'
2025-12-23 01:56:58 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:56:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='One person holds a phone and surfs an app related to taxes, and another person instructs this person to use the app', Q1='One person holds a phone and surfs an app related to taxes, and another person instructs this person to use the app', Q2='One person holds a phone and surfs an app related to taxes, and another person instructs this person to use the app'
2025-12-23 01:56:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 01:56:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='C·∫£nh m·ªü ƒë·∫ßu c√≥ th·ªÉ th·∫•y m·ªôt ch·ªã m·∫∑c ƒë·ªì ƒëen ng·ªìi c·∫°nh m·ªôt ch·ªã m·∫∑c √°o xanh bi·ªÉn vi·ªÅn cam', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:56:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='Sau ƒë√≥ c√≥ th·ªÉ th·∫•y m·ªôt ng∆∞·ªùi c·∫ßm chi·∫øc ƒëi·ªán tho·∫°i l∆∞·ªõt m·ªôt app li√™n quan t·ªõi thu·∫ø v√† c√≥ m·ªôt ng∆∞·ªùi kh√°c h∆∞·ªõng d·∫´n ng∆∞·ªùi n√†y s·ª≠ d·ª•ng app', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:56:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'C·∫£nh m·ªü ƒë·∫ßu c√≥ th·ªÉ th·∫•y m·ªôt ch·ªã m·∫∑c ƒë·ªì ƒëen ng·ªìi c·∫°nh m·ªôt ch·ªã m·∫∑c √°o xanh bi·ªÉn vi·ªÅn cam'
2025-12-23 01:56:58 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:56:58 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: One person holds a phone and surfs an app related to taxes, and another person instructs this person to use the app
2025-12-23 01:56:58 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:56:58 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:56:58 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A sister dressed in black sat next to a sister wearing a blue shirt with orange trim
2025-12-23 01:56:58 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A sister dressed in black sat next to a sister wearing a blue shirt with orange trim
2025-12-23 01:56:58 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:56:58 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: One person holds a phone and surfs an app related to taxes, and another person instructs this person to use the app
2025-12-23 01:56:58 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:56:58 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A sister dressed in black sat next to a sister wearing a blue shirt with orange trim
2025-12-23 01:56:58 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:56:58 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: One person holds a phone and surfs an app related to taxes, and another person instructs this person to use the app
2025-12-23 01:56:59 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:56:59 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A sister dressed in black sat next to a sister wearing a blue shirt with orange trim
2025-12-23 01:56:59 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:56:59 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: One person holds a phone and surfs an app related to taxes, and another person instructs this person to use the app
2025-12-23 01:56:59 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh m·ªü ƒë·∫ßu c√≥ th·ªÉ th·∫•y m·ªôt ch·ªã m·∫∑c ƒë·ªì ƒëen ng·ªìi c·∫°nh m·ªôt ch·ªã m·∫∑c √°o xanh bi·ªÉn vi·ªÅn cam' ‚Üí 'In the opening scene, you can see a sister dressed in black sitting next to a sister wearing a blue shirt with orange trim'
2025-12-23 01:56:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'In the opening scene, you can see a sister dressed in black sitting next to a sister wearing a blue shirt with orange trim'
2025-12-23 01:56:59 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:56:59 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A sister dressed in black sat next to a sister wearing a blue shirt with orange trim
2025-12-23 01:56:59 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:56:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='In the opening scene, you can see a sister dressed in black sitting next to a sister wearing a blue shirt with orange trim', Q1='In the opening scene, you can see a sister dressed in black sitting next to a sister wearing a blue shirt with orange trim', Q2='In the opening scene, you can see a sister dressed in black sitting next to a sister wearing a blue shirt with orange trim'
2025-12-23 01:56:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'Sau ƒë√≥ c√≥ th·ªÉ th·∫•y m·ªôt ng∆∞·ªùi c·∫ßm chi·∫øc ƒëi·ªán tho·∫°i l∆∞·ªõt m·ªôt app li√™n quan t·ªõi thu·∫ø v√† c√≥ m·ªôt ng∆∞·ªùi kh√°c h∆∞·ªõng d·∫´n ng∆∞·ªùi n√†y s·ª≠ d·ª•ng app'
2025-12-23 01:57:00 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'Sau ƒë√≥ c√≥ th·ªÉ th·∫•y m·ªôt ng∆∞·ªùi c·∫ßm chi·∫øc ƒëi·ªán tho·∫°i l∆∞·ªõt m·ªôt app li√™n quan t·ªõi thu·∫ø v√† c√≥ m·ªôt ng∆∞·ªùi kh√°c h∆∞·ªõng d·∫´n ng∆∞·ªùi n√†y s·ª≠ d·ª•ng app' ‚Üí 'Then we can see a person holding a phone surfing an app related to taxes and another person instructing this person to use the app.'
2025-12-23 01:57:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'Then we can see a person holding a phone surfing an app related to taxes and another person instructing this person to use the app.'
2025-12-23 01:57:01 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:57:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='Then we can see a person holding a phone surfing an app related to taxes and another person instructing this person to use the app.', Q1='Then we can see a person holding a phone surfing an app related to taxes and another person instructing this person to use the app.', Q2='Then we can see a person holding a phone surfing an app related to taxes and another person instructing this person to use the app.'
2025-12-23 01:57:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 01:57:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='C·∫£nh m·ªü ƒë·∫ßu c√≥ th·ªÉ th·∫•y m·ªôt c√¥ g√°i m·∫∑c ƒë·ªì ƒëen ng·ªìi c·∫°nh m·ªôt c√¥ g√°i m·∫∑c √°o xanh bi·ªÉn vi·ªÅn cam', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:57:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='Sau ƒë√≥ c√≥ th·ªÉ th·∫•y m·ªôt ng∆∞·ªùi c·∫ßm chi·∫øc ƒëi·ªán tho·∫°i l∆∞·ªõt m·ªôt app li√™n quan t·ªõi thu·∫ø v√† c√≥ m·ªôt ng∆∞·ªùi kh√°c h∆∞·ªõng d·∫´n ng∆∞·ªùi n√†y s·ª≠ d·ª•ng app', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:57:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'C·∫£nh m·ªü ƒë·∫ßu c√≥ th·ªÉ th·∫•y m·ªôt c√¥ g√°i m·∫∑c ƒë·ªì ƒëen ng·ªìi c·∫°nh m·ªôt c√¥ g√°i m·∫∑c √°o xanh bi·ªÉn vi·ªÅn cam'
2025-12-23 01:57:01 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:57:01 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: In the opening scene, you can see a sister dressed in black sitting next to a sister wearing a blue shirt with orange trim
2025-12-23 01:57:01 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:57:01 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Then we can see a person holding a phone surfing an app related to taxes and another person instructing this person to use the app.
2025-12-23 01:57:01 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:57:01 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: In the opening scene, you can see a sister dressed in black sitting next to a sister wearing a blue shirt with orange trim
2025-12-23 01:57:01 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:57:01 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: In the opening scene, you can see a sister dressed in black sitting next to a sister wearing a blue shirt with orange trim
2025-12-23 01:57:01 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:57:01 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: In the opening scene, you can see a sister dressed in black sitting next to a sister wearing a blue shirt with orange trim
2025-12-23 01:57:01 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh m·ªü ƒë·∫ßu c√≥ th·ªÉ th·∫•y m·ªôt c√¥ g√°i m·∫∑c ƒë·ªì ƒëen ng·ªìi c·∫°nh m·ªôt c√¥ g√°i m·∫∑c √°o xanh bi·ªÉn vi·ªÅn cam' ‚Üí 'The opening scene shows a girl dressed in black sitting next to a girl wearing a blue shirt with orange trim'
2025-12-23 01:57:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'The opening scene shows a girl dressed in black sitting next to a girl wearing a blue shirt with orange trim'
2025-12-23 01:57:01 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:57:01 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: In the opening scene, you can see a sister dressed in black sitting next to a sister wearing a blue shirt with orange trim
2025-12-23 01:57:01 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:57:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='The opening scene shows a girl dressed in black sitting next to a girl wearing a blue shirt with orange trim', Q1='The opening scene shows a girl dressed in black sitting next to a girl wearing a blue shirt with orange trim', Q2='The opening scene shows a girl dressed in black sitting next to a girl wearing a blue shirt with orange trim'
2025-12-23 01:57:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'Sau ƒë√≥ c√≥ th·ªÉ th·∫•y m·ªôt ng∆∞·ªùi c·∫ßm chi·∫øc ƒëi·ªán tho·∫°i l∆∞·ªõt m·ªôt app li√™n quan t·ªõi thu·∫ø v√† c√≥ m·ªôt ng∆∞·ªùi kh√°c h∆∞·ªõng d·∫´n ng∆∞·ªùi n√†y s·ª≠ d·ª•ng app'
2025-12-23 01:57:01 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:57:01 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Then we can see a person holding a phone surfing an app related to taxes and another person instructing this person to use the app.
2025-12-23 01:57:01 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'Sau ƒë√≥ c√≥ th·ªÉ th·∫•y m·ªôt ng∆∞·ªùi c·∫ßm chi·∫øc ƒëi·ªán tho·∫°i l∆∞·ªõt m·ªôt app li√™n quan t·ªõi thu·∫ø v√† c√≥ m·ªôt ng∆∞·ªùi kh√°c h∆∞·ªõng d·∫´n ng∆∞·ªùi n√†y s·ª≠ d·ª•ng app' ‚Üí 'Then we can see a person holding a phone surfing an app related to taxes and another person instructing this person to use the app.'
2025-12-23 01:57:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'Then we can see a person holding a phone surfing an app related to taxes and another person instructing this person to use the app.'
2025-12-23 01:57:02 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:57:02 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Then we can see a person holding a phone surfing an app related to taxes and another person instructing this person to use the app.
2025-12-23 01:57:02 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:57:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='Then we can see a person holding a phone surfing an app related to taxes and another person instructing this person to use the app.', Q1='Then we can see a person holding a phone surfing an app related to taxes and another person instructing this person to use the app.', Q2='Then we can see a person holding a phone surfing an app related to taxes and another person instructing this person to use the app.'
2025-12-23 01:57:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 01:57:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 0, Q2: 200
2025-12-23 01:57:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 7417.88ms
2025-12-23 01:57:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-23 01:57:02 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 2 stages
2025-12-23 01:57:02 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 103 videos with results
2025-12-23 01:57:02 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 82 videos with results
2025-12-23 01:57:02 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 14 common videos across all stages
2025-12-23 01:57:02 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 6 valid tuples
2025-12-23 01:57:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 6 valid tuples
2025-12-23 01:57:02 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:57:02 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The opening scene shows a girl dressed in black sitting next to a girl wearing a blue shirt with orange trim
2025-12-23 01:57:02 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:57:02 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Then we can see a person holding a phone surfing an app related to taxes and another person instructing this person to use the app.
2025-12-23 01:57:02 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:57:02 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The opening scene shows a girl dressed in black sitting next to a girl wearing a blue shirt with orange trim
2025-12-23 01:57:02 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:57:02 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The opening scene shows a girl dressed in black sitting next to a girl wearing a blue shirt with orange trim
2025-12-23 01:57:02 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:57:02 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The opening scene shows a girl dressed in black sitting next to a girl wearing a blue shirt with orange trim
2025-12-23 01:57:02 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:57:02 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Then we can see a person holding a phone surfing an app related to taxes and another person instructing this person to use the app.
2025-12-23 01:57:02 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:57:02 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The opening scene shows a girl dressed in black sitting next to a girl wearing a blue shirt with orange trim
2025-12-23 01:57:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 01:57:03 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:57:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The opening scene shows a girl dressed in black sitting next to a girl wearing a blue shirt with orange trim
2025-12-23 01:57:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 0
2025-12-23 01:57:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 5010.46ms
2025-12-23 01:57:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 01:57:03 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 400 unique ids from 2 stages
2025-12-23 01:57:03 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 400 unique ids
2025-12-23 01:57:03 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:57:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Then we can see a person holding a phone surfing an app related to taxes and another person instructing this person to use the app.
2025-12-23 01:57:03 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:57:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Then we can see a person holding a phone surfing an app related to taxes and another person instructing this person to use the app.
2025-12-23 01:57:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-23 01:57:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 01:57:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3163.66ms
2025-12-23 01:57:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 01:57:04 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 400 unique ids from 2 stages
2025-12-23 01:57:04 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 400 unique ids
2025-12-23 01:57:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 01:57:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='C·∫£nh m·ªü ƒë·∫ßu c√≥ th·ªÉ th·∫•y m·ªôt ch·ªã m·∫∑c ƒë·ªì ƒëen ng·ªìi c·∫°nh m·ªôt ch·ªã m·∫∑c √°o xanh bi·ªÉn vi·ªÅn cam', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:57:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='Sau ƒë√≥ c√≥ th·ªÉ th·∫•y m·ªôt ng∆∞·ªùi c·∫ßm chi·∫øc ƒëi·ªán tho·∫°i l∆∞·ªõt m·ªôt app li√™n quan t·ªõi thu·∫ø v√† c√≥ m·ªôt ng∆∞·ªùi kh√°c h∆∞·ªõng d·∫´n ng∆∞·ªùi n√†y s·ª≠ d·ª•ng app', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:57:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'C·∫£nh m·ªü ƒë·∫ßu c√≥ th·ªÉ th·∫•y m·ªôt ch·ªã m·∫∑c ƒë·ªì ƒëen ng·ªìi c·∫°nh m·ªôt ch·ªã m·∫∑c √°o xanh bi·ªÉn vi·ªÅn cam'
2025-12-23 01:57:08 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh m·ªü ƒë·∫ßu c√≥ th·ªÉ th·∫•y m·ªôt ch·ªã m·∫∑c ƒë·ªì ƒëen ng·ªìi c·∫°nh m·ªôt ch·ªã m·∫∑c √°o xanh bi·ªÉn vi·ªÅn cam' ‚Üí 'In the opening scene, you can see a sister dressed in black sitting next to a sister wearing a blue shirt with orange trim'
2025-12-23 01:57:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'In the opening scene, you can see a sister dressed in black sitting next to a sister wearing a blue shirt with orange trim'
2025-12-23 01:57:10 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:57:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='In the opening scene, you can see a sister dressed in black sitting next to a sister wearing a blue shirt with orange trim', Q1='In the opening scene, you can see a sister dressed in black sitting next to a sister wearing a blue shirt with orange trim', Q2='In the opening scene, you can see a sister dressed in black sitting next to a sister wearing a blue shirt with orange trim'
2025-12-23 01:57:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'Sau ƒë√≥ c√≥ th·ªÉ th·∫•y m·ªôt ng∆∞·ªùi c·∫ßm chi·∫øc ƒëi·ªán tho·∫°i l∆∞·ªõt m·ªôt app li√™n quan t·ªõi thu·∫ø v√† c√≥ m·ªôt ng∆∞·ªùi kh√°c h∆∞·ªõng d·∫´n ng∆∞·ªùi n√†y s·ª≠ d·ª•ng app'
2025-12-23 01:57:10 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'Sau ƒë√≥ c√≥ th·ªÉ th·∫•y m·ªôt ng∆∞·ªùi c·∫ßm chi·∫øc ƒëi·ªán tho·∫°i l∆∞·ªõt m·ªôt app li√™n quan t·ªõi thu·∫ø v√† c√≥ m·ªôt ng∆∞·ªùi kh√°c h∆∞·ªõng d·∫´n ng∆∞·ªùi n√†y s·ª≠ d·ª•ng app' ‚Üí 'Then we can see a person holding a phone surfing an app related to taxes and another person instructing this person to use the app.'
2025-12-23 01:57:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'Then we can see a person holding a phone surfing an app related to taxes and another person instructing this person to use the app.'
2025-12-23 01:57:11 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:57:11 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='Then we can see a person holding a phone surfing an app related to taxes and another person instructing this person to use the app.', Q1='Then we can see a person holding a phone surfing an app related to taxes and another person instructing this person to use the app.', Q2='Then we can see a person holding a phone surfing an app related to taxes and another person instructing this person to use the app.'
2025-12-23 01:57:11 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:57:11 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: In the opening scene, you can see a sister dressed in black sitting next to a sister wearing a blue shirt with orange trim
2025-12-23 01:57:11 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:57:11 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:57:11 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: In the opening scene, you can see a sister dressed in black sitting next to a sister wearing a blue shirt with orange trim
2025-12-23 01:57:11 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Then we can see a person holding a phone surfing an app related to taxes and another person instructing this person to use the app.
2025-12-23 01:57:11 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:57:11 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: In the opening scene, you can see a sister dressed in black sitting next to a sister wearing a blue shirt with orange trim
2025-12-23 01:57:11 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:57:11 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Then we can see a person holding a phone surfing an app related to taxes and another person instructing this person to use the app.
2025-12-23 01:57:11 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:57:11 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: In the opening scene, you can see a sister dressed in black sitting next to a sister wearing a blue shirt with orange trim
2025-12-23 01:57:12 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:57:12 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Then we can see a person holding a phone surfing an app related to taxes and another person instructing this person to use the app.
2025-12-23 01:57:12 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:57:12 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: In the opening scene, you can see a sister dressed in black sitting next to a sister wearing a blue shirt with orange trim
2025-12-23 01:57:12 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:57:12 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Then we can see a person holding a phone surfing an app related to taxes and another person instructing this person to use the app.
2025-12-23 01:57:12 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 01:57:13 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 0
2025-12-23 01:57:13 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 4695.28ms
2025-12-23 01:57:13 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-23 01:57:13 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 2 stages
2025-12-23 01:57:13 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 104 videos with results
2025-12-23 01:57:13 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 96 videos with results
2025-12-23 01:57:13 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 22 common videos across all stages
2025-12-23 01:57:13 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 33 valid tuples
2025-12-23 01:57:13 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 33 valid tuples
2025-12-23 01:57:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 01:57:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='m·ªôt ch·ªã m·∫∑c ƒë·ªì ƒëen ng·ªìi c·∫°nh m·ªôt ch·ªã m·∫∑c √°o xanh bi·ªÉn vi·ªÅn cam', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:57:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='m·ªôt ng∆∞·ªùi c·∫ßm chi·∫øc ƒëi·ªán tho·∫°i l∆∞·ªõt m·ªôt app v√† c√≥ m·ªôt ng∆∞·ªùi kh√°c h∆∞·ªõng d·∫´n ng∆∞·ªùi n√†y s·ª≠ d·ª•ng app', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:57:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'm·ªôt ch·ªã m·∫∑c ƒë·ªì ƒëen ng·ªìi c·∫°nh m·ªôt ch·ªã m·∫∑c √°o xanh bi·ªÉn vi·ªÅn cam'
2025-12-23 01:57:19 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'm·ªôt ch·ªã m·∫∑c ƒë·ªì ƒëen ng·ªìi c·∫°nh m·ªôt ch·ªã m·∫∑c √°o xanh bi·ªÉn vi·ªÅn cam' ‚Üí 'A sister dressed in black sat next to a sister wearing a blue shirt with orange trim'
2025-12-23 01:57:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'A sister dressed in black sat next to a sister wearing a blue shirt with orange trim'
2025-12-23 01:57:20 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:57:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='A sister dressed in black sat next to a sister wearing a blue shirt with orange trim', Q1='A sister dressed in black sat next to a sister wearing a blue shirt with orange trim', Q2='A sister dressed in black sat next to a sister wearing a blue shirt with orange trim'
2025-12-23 01:57:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'm·ªôt ng∆∞·ªùi c·∫ßm chi·∫øc ƒëi·ªán tho·∫°i l∆∞·ªõt m·ªôt app v√† c√≥ m·ªôt ng∆∞·ªùi kh√°c h∆∞·ªõng d·∫´n ng∆∞·ªùi n√†y s·ª≠ d·ª•ng app'
2025-12-23 01:57:21 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'm·ªôt ng∆∞·ªùi c·∫ßm chi·∫øc ƒëi·ªán tho·∫°i l∆∞·ªõt m·ªôt app v√† c√≥ m·ªôt ng∆∞·ªùi kh√°c h∆∞·ªõng d·∫´n ng∆∞·ªùi n√†y s·ª≠ d·ª•ng app' ‚Üí 'One person holds a phone to surf an app and another person guides this person to use the app'
2025-12-23 01:57:21 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'One person holds a phone to surf an app and another person guides this person to use the app'
2025-12-23 01:57:22 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:57:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='One person holds a phone to surf an app and another person guides this person to use the app', Q1='One person holds a phone to surf an app and another person guides this person to use the app', Q2='One person holds a phone to surf an app and another person guides this person to use the app'
2025-12-23 01:57:23 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:57:23 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A sister dressed in black sat next to a sister wearing a blue shirt with orange trim
2025-12-23 01:57:23 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:57:23 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:57:23 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A sister dressed in black sat next to a sister wearing a blue shirt with orange trim
2025-12-23 01:57:23 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: One person holds a phone to surf an app and another person guides this person to use the app
2025-12-23 01:57:23 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:57:23 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A sister dressed in black sat next to a sister wearing a blue shirt with orange trim
2025-12-23 01:57:23 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:57:23 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: One person holds a phone to surf an app and another person guides this person to use the app
2025-12-23 01:57:23 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:57:23 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A sister dressed in black sat next to a sister wearing a blue shirt with orange trim
2025-12-23 01:57:23 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:57:23 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: One person holds a phone to surf an app and another person guides this person to use the app
2025-12-23 01:57:23 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:57:23 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A sister dressed in black sat next to a sister wearing a blue shirt with orange trim
2025-12-23 01:57:24 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:57:24 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A sister dressed in black sat next to a sister wearing a blue shirt with orange trim
2025-12-23 01:57:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-23 01:57:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 01:57:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 5364.60ms
2025-12-23 01:57:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-23 01:57:25 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 2 stages
2025-12-23 01:57:25 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 100 videos with results
2025-12-23 01:57:25 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 96 videos with results
2025-12-23 01:57:25 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 14 common videos across all stages
2025-12-23 01:57:25 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 11 valid tuples
2025-12-23 01:57:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 11 valid tuples
2025-12-23 01:57:28 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 01:57:28 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='C·∫£nh m·ªü ƒë·∫ßu c√≥ th·ªÉ th·∫•y m·ªôt c√¥ g√°i m·∫∑c ƒë·ªì ƒëen ng·ªìi c·∫°nh m·ªôt c√¥ g√°i m·∫∑c √°o xanh bi·ªÉn vi·ªÅn cam', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:57:28 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='Sau ƒë√≥ c√≥ th·ªÉ th·∫•y m·ªôt ng∆∞·ªùi c·∫ßm chi·∫øc ƒëi·ªán tho·∫°i l∆∞·ªõt m·ªôt app li√™n quan t·ªõi thu·∫ø v√† c√≥ m·ªôt ng∆∞·ªùi kh√°c h∆∞·ªõng d·∫´n ng∆∞·ªùi n√†y s·ª≠ d·ª•ng app', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:57:28 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'C·∫£nh m·ªü ƒë·∫ßu c√≥ th·ªÉ th·∫•y m·ªôt c√¥ g√°i m·∫∑c ƒë·ªì ƒëen ng·ªìi c·∫°nh m·ªôt c√¥ g√°i m·∫∑c √°o xanh bi·ªÉn vi·ªÅn cam'
2025-12-23 01:57:28 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh m·ªü ƒë·∫ßu c√≥ th·ªÉ th·∫•y m·ªôt c√¥ g√°i m·∫∑c ƒë·ªì ƒëen ng·ªìi c·∫°nh m·ªôt c√¥ g√°i m·∫∑c √°o xanh bi·ªÉn vi·ªÅn cam' ‚Üí 'The opening scene shows a girl dressed in black sitting next to a girl wearing a blue shirt with orange trim'
2025-12-23 01:57:28 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'The opening scene shows a girl dressed in black sitting next to a girl wearing a blue shirt with orange trim'
2025-12-23 01:57:29 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:57:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='The opening scene shows a girl dressed in black sitting next to a girl wearing a blue shirt with orange trim', Q1='The opening scene shows a girl dressed in black sitting next to a girl wearing a blue shirt with orange trim', Q2='The opening scene shows a girl dressed in black sitting next to a girl wearing a blue shirt with orange trim'
2025-12-23 01:57:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'Sau ƒë√≥ c√≥ th·ªÉ th·∫•y m·ªôt ng∆∞·ªùi c·∫ßm chi·∫øc ƒëi·ªán tho·∫°i l∆∞·ªõt m·ªôt app li√™n quan t·ªõi thu·∫ø v√† c√≥ m·ªôt ng∆∞·ªùi kh√°c h∆∞·ªõng d·∫´n ng∆∞·ªùi n√†y s·ª≠ d·ª•ng app'
2025-12-23 01:57:29 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'Sau ƒë√≥ c√≥ th·ªÉ th·∫•y m·ªôt ng∆∞·ªùi c·∫ßm chi·∫øc ƒëi·ªán tho·∫°i l∆∞·ªõt m·ªôt app li√™n quan t·ªõi thu·∫ø v√† c√≥ m·ªôt ng∆∞·ªùi kh√°c h∆∞·ªõng d·∫´n ng∆∞·ªùi n√†y s·ª≠ d·ª•ng app' ‚Üí 'Then we can see a person holding a phone surfing an app related to taxes and another person instructing this person to use the app.'
2025-12-23 01:57:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'Then we can see a person holding a phone surfing an app related to taxes and another person instructing this person to use the app.'
2025-12-23 01:57:30 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:57:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='Then we can see a person holding a phone surfing an app related to taxes and another person instructing this person to use the app.', Q1='Then we can see a person holding a phone surfing an app related to taxes and another person instructing this person to use the app.', Q2='Then we can see a person holding a phone surfing an app related to taxes and another person instructing this person to use the app.'
2025-12-23 01:57:31 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:57:31 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The opening scene shows a girl dressed in black sitting next to a girl wearing a blue shirt with orange trim
2025-12-23 01:57:31 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:57:31 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The opening scene shows a girl dressed in black sitting next to a girl wearing a blue shirt with orange trim
2025-12-23 01:57:31 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:57:31 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Then we can see a person holding a phone surfing an app related to taxes and another person instructing this person to use the app.
2025-12-23 01:57:31 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:57:31 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The opening scene shows a girl dressed in black sitting next to a girl wearing a blue shirt with orange trim
2025-12-23 01:57:31 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:57:31 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Then we can see a person holding a phone surfing an app related to taxes and another person instructing this person to use the app.
2025-12-23 01:57:31 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:57:31 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The opening scene shows a girl dressed in black sitting next to a girl wearing a blue shirt with orange trim
2025-12-23 01:57:31 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:57:31 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The opening scene shows a girl dressed in black sitting next to a girl wearing a blue shirt with orange trim
2025-12-23 01:57:31 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:57:31 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The opening scene shows a girl dressed in black sitting next to a girl wearing a blue shirt with orange trim
2025-12-23 01:57:32 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:57:32 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Then we can see a person holding a phone surfing an app related to taxes and another person instructing this person to use the app.
2025-12-23 01:57:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-23 01:57:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 01:57:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 4468.50ms
2025-12-23 01:57:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-23 01:57:32 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 2 stages
2025-12-23 01:57:32 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 107 videos with results
2025-12-23 01:57:32 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 99 videos with results
2025-12-23 01:57:32 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 19 common videos across all stages
2025-12-23 01:57:32 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 15 valid tuples
2025-12-23 01:57:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 15 valid tuples
2025-12-23 01:57:43 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 01:57:43 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='m·ªôt ch·ªã m·∫∑c ƒë·ªì ƒëen ng·ªìi c·∫°nh m·ªôt ch·ªã m·∫∑c √°o xanh bi·ªÉn vi·ªÅn cam', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:57:43 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='m·ªôt ng∆∞·ªùi c·∫ßm chi·∫øc ƒëi·ªán tho·∫°i l∆∞·ªõt m·ªôt app v√† c√≥ m·ªôt ng∆∞·ªùi kh√°c h∆∞·ªõng d·∫´n ng∆∞·ªùi n√†y s·ª≠ d·ª•ng app', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:57:43 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'm·ªôt ch·ªã m·∫∑c ƒë·ªì ƒëen ng·ªìi c·∫°nh m·ªôt ch·ªã m·∫∑c √°o xanh bi·ªÉn vi·ªÅn cam'
2025-12-23 01:57:43 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'm·ªôt ch·ªã m·∫∑c ƒë·ªì ƒëen ng·ªìi c·∫°nh m·ªôt ch·ªã m·∫∑c √°o xanh bi·ªÉn vi·ªÅn cam' ‚Üí 'A sister dressed in black sat next to a sister wearing a blue shirt with orange trim'
2025-12-23 01:57:43 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'A sister dressed in black sat next to a sister wearing a blue shirt with orange trim'
2025-12-23 01:57:44 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:57:44 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='A sister dressed in black sat next to a sister wearing a blue shirt with orange trim', Q1='A sister dressed in black sat next to a sister wearing a blue shirt with orange trim', Q2='A sister dressed in black sat next to a sister wearing a blue shirt with orange trim'
2025-12-23 01:57:44 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'm·ªôt ng∆∞·ªùi c·∫ßm chi·∫øc ƒëi·ªán tho·∫°i l∆∞·ªõt m·ªôt app v√† c√≥ m·ªôt ng∆∞·ªùi kh√°c h∆∞·ªõng d·∫´n ng∆∞·ªùi n√†y s·ª≠ d·ª•ng app'
2025-12-23 01:57:44 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'm·ªôt ng∆∞·ªùi c·∫ßm chi·∫øc ƒëi·ªán tho·∫°i l∆∞·ªõt m·ªôt app v√† c√≥ m·ªôt ng∆∞·ªùi kh√°c h∆∞·ªõng d·∫´n ng∆∞·ªùi n√†y s·ª≠ d·ª•ng app' ‚Üí 'One person holds a phone to surf an app and another person guides this person to use the app'
2025-12-23 01:57:44 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'One person holds a phone to surf an app and another person guides this person to use the app'
2025-12-23 01:57:45 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:57:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='One person holds a phone to surf an app and another person guides this person to use the app', Q1='One person holds a phone to surf an app and another person guides this person to use the app', Q2='One person holds a phone to surf an app and another person guides this person to use the app'
2025-12-23 01:57:45 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:57:45 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: One person holds a phone to surf an app and another person guides this person to use the app
2025-12-23 01:57:45 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:57:45 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:57:45 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A sister dressed in black sat next to a sister wearing a blue shirt with orange trim
2025-12-23 01:57:45 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A sister dressed in black sat next to a sister wearing a blue shirt with orange trim
2025-12-23 01:57:45 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:57:45 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: One person holds a phone to surf an app and another person guides this person to use the app
2025-12-23 01:57:45 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:57:45 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A sister dressed in black sat next to a sister wearing a blue shirt with orange trim
2025-12-23 01:57:45 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:57:45 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: One person holds a phone to surf an app and another person guides this person to use the app
2025-12-23 01:57:45 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-23 01:57:45 - app.routers.search_multistage - ERROR - [MULTISTAGE] Error: IC.json not found: app/data/index/es_data/IC.json
Traceback (most recent call last):
  File "/app/app/routers/search_multistage.py", line 382, in search_multistage
    stage_results = await asyncio.gather(*stage_tasks)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/routers/search_multistage.py", line 273, in _process_single_stage
    (q0_per_method, q0_results), (q1_per_method, q1_results), (q2_per_method, q2_results) = await asyncio.gather(
                                                                                            ^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/routers/search_multistage.py", line 208, in _search_single_query_async
    return await loop.run_in_executor(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/routers/search_multistage.py", line 168, in _search_single_query_sync
    ic_results = get_ic_search().search(query_text, top_k)
                 ^^^^^^^^^^^^^^^
  File "/app/app/services/method/ic_search.py", line 170, in get_ic_search
    _ic_instance = ICSearch()
                   ^^^^^^^^^^
  File "/app/app/services/method/ic_search.py", line 28, in __init__
    raise FileNotFoundError(f"IC.json not found: {ic_path}")
FileNotFoundError: IC.json not found: app/data/index/es_data/IC.json
2025-12-23 01:57:46 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:57:46 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: One person holds a phone to surf an app and another person guides this person to use the app
2025-12-23 01:57:46 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:57:46 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A sister dressed in black sat next to a sister wearing a blue shirt with orange trim
2025-12-23 01:57:46 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-23 01:57:46 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-23 01:57:46 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:57:46 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: One person holds a phone to surf an app and another person guides this person to use the app
2025-12-23 01:57:46 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-23 01:57:47 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-23 01:57:47 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-23 01:57:51 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 01:57:51 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='m·ªôt ch·ªã m·∫∑c ƒë·ªì ƒëen ng·ªìi c·∫°nh m·ªôt ch·ªã m·∫∑c √°o xanh bi·ªÉn vi·ªÅn cam', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:57:51 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='m·ªôt ng∆∞·ªùi c·∫ßm chi·∫øc ƒëi·ªán tho·∫°i l∆∞·ªõt m·ªôt app v√† c√≥ m·ªôt ng∆∞·ªùi kh√°c h∆∞·ªõng d·∫´n ng∆∞·ªùi n√†y s·ª≠ d·ª•ng app', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:57:51 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'm·ªôt ch·ªã m·∫∑c ƒë·ªì ƒëen ng·ªìi c·∫°nh m·ªôt ch·ªã m·∫∑c √°o xanh bi·ªÉn vi·ªÅn cam'
2025-12-23 01:57:51 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'm·ªôt ch·ªã m·∫∑c ƒë·ªì ƒëen ng·ªìi c·∫°nh m·ªôt ch·ªã m·∫∑c √°o xanh bi·ªÉn vi·ªÅn cam' ‚Üí 'A sister dressed in black sat next to a sister wearing a blue shirt with orange trim'
2025-12-23 01:57:51 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'A sister dressed in black sat next to a sister wearing a blue shirt with orange trim'
2025-12-23 01:57:52 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:57:52 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='A sister dressed in black sat next to a sister wearing a blue shirt with orange trim', Q1='A sister dressed in black sat next to a sister wearing a blue shirt with orange trim', Q2='A sister dressed in black sat next to a sister wearing a blue shirt with orange trim'
2025-12-23 01:57:52 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'm·ªôt ng∆∞·ªùi c·∫ßm chi·∫øc ƒëi·ªán tho·∫°i l∆∞·ªõt m·ªôt app v√† c√≥ m·ªôt ng∆∞·ªùi kh√°c h∆∞·ªõng d·∫´n ng∆∞·ªùi n√†y s·ª≠ d·ª•ng app'
2025-12-23 01:57:52 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'm·ªôt ng∆∞·ªùi c·∫ßm chi·∫øc ƒëi·ªán tho·∫°i l∆∞·ªõt m·ªôt app v√† c√≥ m·ªôt ng∆∞·ªùi kh√°c h∆∞·ªõng d·∫´n ng∆∞·ªùi n√†y s·ª≠ d·ª•ng app' ‚Üí 'One person holds a phone to surf an app and another person guides this person to use the app'
2025-12-23 01:57:52 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'One person holds a phone to surf an app and another person guides this person to use the app'
2025-12-23 01:57:53 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:57:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='One person holds a phone to surf an app and another person guides this person to use the app', Q1='One person holds a phone to surf an app and another person guides this person to use the app', Q2='One person holds a phone to surf an app and another person guides this person to use the app'
2025-12-23 01:57:53 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:57:53 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A sister dressed in black sat next to a sister wearing a blue shirt with orange trim
2025-12-23 01:57:53 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:57:53 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: One person holds a phone to surf an app and another person guides this person to use the app
2025-12-23 01:57:54 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:57:54 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: One person holds a phone to surf an app and another person guides this person to use the app
2025-12-23 01:57:54 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:57:54 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A sister dressed in black sat next to a sister wearing a blue shirt with orange trim
2025-12-23 01:57:54 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:57:54 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: One person holds a phone to surf an app and another person guides this person to use the app
2025-12-23 01:57:54 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:57:54 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A sister dressed in black sat next to a sister wearing a blue shirt with orange trim
2025-12-23 01:57:54 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-23 01:57:54 - app.routers.search_multistage - ERROR - [MULTISTAGE] Error: IC.json not found: app/data/index/es_data/IC.json
Traceback (most recent call last):
  File "/app/app/routers/search_multistage.py", line 382, in search_multistage
    stage_results = await asyncio.gather(*stage_tasks)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/routers/search_multistage.py", line 273, in _process_single_stage
    (q0_per_method, q0_results), (q1_per_method, q1_results), (q2_per_method, q2_results) = await asyncio.gather(
                                                                                            ^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/routers/search_multistage.py", line 208, in _search_single_query_async
    return await loop.run_in_executor(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/routers/search_multistage.py", line 168, in _search_single_query_sync
    ic_results = get_ic_search().search(query_text, top_k)
                 ^^^^^^^^^^^^^^^
  File "/app/app/services/method/ic_search.py", line 170, in get_ic_search
    _ic_instance = ICSearch()
                   ^^^^^^^^^^
  File "/app/app/services/method/ic_search.py", line 28, in __init__
    raise FileNotFoundError(f"IC.json not found: {ic_path}")
FileNotFoundError: IC.json not found: app/data/index/es_data/IC.json
2025-12-23 01:57:54 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:57:54 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A sister dressed in black sat next to a sister wearing a blue shirt with orange trim
2025-12-23 01:57:54 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:57:54 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A sister dressed in black sat next to a sister wearing a blue shirt with orange trim
2025-12-23 01:57:55 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:57:55 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: One person holds a phone to surf an app and another person guides this person to use the app
2025-12-23 01:57:55 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 01:57:55 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-23 01:57:56 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-23 01:58:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 3 stages
2025-12-23 01:58:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='C·∫£nh m·ªü ƒë·∫ßu c√≥ th·ªÉ th·∫•y m·ªôt ch·ªã m·∫∑c ƒë·ªì ƒëen ng·ªìi c·∫°nh m·ªôt ch·ªã m·∫∑c √°o xanh bi·ªÉn vi·ªÅn cam', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:58:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='Sau ƒë√≥ c√≥ th·ªÉ th·∫•y m·ªôt ng∆∞·ªùi c·∫ßm chi·∫øc ƒëi·ªán tho·∫°i l∆∞·ªõt m·ªôt app li√™n quan t·ªõi thu·∫ø v√† c√≥ m·ªôt ng∆∞·ªùi kh√°c h∆∞·ªõng d·∫´n ng∆∞·ªùi n√†y s·ª≠ d·ª•ng app', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:58:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='Cu·ªëi c√πng l√† c·∫£nh ph·ªèng v·∫•n m·ªôt Nh√¢n vi√™n t·∫°i trong c√¥ng ty HanoiTax', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:58:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'C·∫£nh m·ªü ƒë·∫ßu c√≥ th·ªÉ th·∫•y m·ªôt ch·ªã m·∫∑c ƒë·ªì ƒëen ng·ªìi c·∫°nh m·ªôt ch·ªã m·∫∑c √°o xanh bi·ªÉn vi·ªÅn cam'
2025-12-23 01:58:01 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh m·ªü ƒë·∫ßu c√≥ th·ªÉ th·∫•y m·ªôt ch·ªã m·∫∑c ƒë·ªì ƒëen ng·ªìi c·∫°nh m·ªôt ch·ªã m·∫∑c √°o xanh bi·ªÉn vi·ªÅn cam' ‚Üí 'In the opening scene, you can see a sister dressed in black sitting next to a sister wearing a blue shirt with orange trim'
2025-12-23 01:58:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'In the opening scene, you can see a sister dressed in black sitting next to a sister wearing a blue shirt with orange trim'
2025-12-23 01:58:02 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:58:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='In the opening scene, you can see a sister dressed in black sitting next to a sister wearing a blue shirt with orange trim', Q1='In the opening scene, you can see a sister dressed in black sitting next to a sister wearing a blue shirt with orange trim', Q2='In the opening scene, you can see a sister dressed in black sitting next to a sister wearing a blue shirt with orange trim'
2025-12-23 01:58:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'Sau ƒë√≥ c√≥ th·ªÉ th·∫•y m·ªôt ng∆∞·ªùi c·∫ßm chi·∫øc ƒëi·ªán tho·∫°i l∆∞·ªõt m·ªôt app li√™n quan t·ªõi thu·∫ø v√† c√≥ m·ªôt ng∆∞·ªùi kh√°c h∆∞·ªõng d·∫´n ng∆∞·ªùi n√†y s·ª≠ d·ª•ng app'
2025-12-23 01:58:02 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'Sau ƒë√≥ c√≥ th·ªÉ th·∫•y m·ªôt ng∆∞·ªùi c·∫ßm chi·∫øc ƒëi·ªán tho·∫°i l∆∞·ªõt m·ªôt app li√™n quan t·ªõi thu·∫ø v√† c√≥ m·ªôt ng∆∞·ªùi kh√°c h∆∞·ªõng d·∫´n ng∆∞·ªùi n√†y s·ª≠ d·ª•ng app' ‚Üí 'Then we can see a person holding a phone surfing an app related to taxes and another person instructing this person to use the app.'
2025-12-23 01:58:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'Then we can see a person holding a phone surfing an app related to taxes and another person instructing this person to use the app.'
2025-12-23 01:58:03 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:58:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='Then we can see a person holding a phone surfing an app related to taxes and another person instructing this person to use the app.', Q1='Then we can see a person holding a phone surfing an app related to taxes and another person instructing this person to use the app.', Q2='Then we can see a person holding a phone surfing an app related to taxes and another person instructing this person to use the app.'
2025-12-23 01:58:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: 'Cu·ªëi c√πng l√† c·∫£nh ph·ªèng v·∫•n m·ªôt Nh√¢n vi√™n t·∫°i trong c√¥ng ty HanoiTax'
2025-12-23 01:58:04 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'Cu·ªëi c√πng l√† c·∫£nh ph·ªèng v·∫•n m·ªôt Nh√¢n vi√™n t·∫°i trong c√¥ng ty HanoiTax' ‚Üí 'Finally, there is an interview scene with an employee at HanoiTax company'
2025-12-23 01:58:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 translated: 'Finally, there is an interview scene with an employee at HanoiTax company'
2025-12-23 01:58:05 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:58:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 queries: Q0='Finally, there is an interview scene with an employee at HanoiTax company', Q1='Finally, there is an interview scene with an employee at HanoiTax company', Q2='Finally, there is an interview scene with an employee at HanoiTax company'
2025-12-23 01:58:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 3 stages
2025-12-23 01:58:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='m·ªôt ch·ªã m·∫∑c ƒë·ªì ƒëen ng·ªìi c·∫°nh m·ªôt ch·ªã m·∫∑c √°o xanh bi·ªÉn vi·ªÅn cam', toggles={'multimodal': True, 'ic': True, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:58:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='m·ªôt ng∆∞·ªùi c·∫ßm chi·∫øc ƒëi·ªán tho·∫°i l∆∞·ªõt m·ªôt app v√† c√≥ m·ªôt ng∆∞·ªùi kh√°c h∆∞·ªõng d·∫´n ng∆∞·ªùi n√†y s·ª≠ d·ª•ng app', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 01:58:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, objects=[]
2025-12-23 01:58:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'm·ªôt ch·ªã m·∫∑c ƒë·ªì ƒëen ng·ªìi c·∫°nh m·ªôt ch·ªã m·∫∑c √°o xanh bi·ªÉn vi·ªÅn cam'
2025-12-23 01:58:05 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'm·ªôt ch·ªã m·∫∑c ƒë·ªì ƒëen ng·ªìi c·∫°nh m·ªôt ch·ªã m·∫∑c √°o xanh bi·ªÉn vi·ªÅn cam' ‚Üí 'A sister dressed in black sat next to a sister wearing a blue shirt with orange trim'
2025-12-23 01:58:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'A sister dressed in black sat next to a sister wearing a blue shirt with orange trim'
2025-12-23 01:58:05 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:58:05 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:58:05 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Then we can see a person holding a phone surfing an app related to taxes and another person instructing this person to use the app.
2025-12-23 01:58:05 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Finally, there is an interview scene with an employee at HanoiTax company
2025-12-23 01:58:05 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:58:05 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: In the opening scene, you can see a sister dressed in black sitting next to a sister wearing a blue shirt with orange trim
2025-12-23 01:58:05 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:58:05 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:58:05 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: In the opening scene, you can see a sister dressed in black sitting next to a sister wearing a blue shirt with orange trim
2025-12-23 01:58:05 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Finally, there is an interview scene with an employee at HanoiTax company
2025-12-23 01:58:05 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:58:05 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:58:05 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Then we can see a person holding a phone surfing an app related to taxes and another person instructing this person to use the app.
2025-12-23 01:58:05 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: In the opening scene, you can see a sister dressed in black sitting next to a sister wearing a blue shirt with orange trim
2025-12-23 01:58:05 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:58:05 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Finally, there is an interview scene with an employee at HanoiTax company
2025-12-23 01:58:05 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:58:05 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Then we can see a person holding a phone surfing an app related to taxes and another person instructing this person to use the app.
2025-12-23 01:58:05 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:58:05 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Finally, there is an interview scene with an employee at HanoiTax company
2025-12-23 01:58:06 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:58:06 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Then we can see a person holding a phone surfing an app related to taxes and another person instructing this person to use the app.
2025-12-23 01:58:06 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:58:06 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Finally, there is an interview scene with an employee at HanoiTax company
2025-12-23 01:58:06 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:58:06 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Then we can see a person holding a phone surfing an app related to taxes and another person instructing this person to use the app.
2025-12-23 01:58:06 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:58:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='A sister dressed in black sat next to a sister wearing a blue shirt with orange trim', Q1='A sister dressed in black sat next to a sister wearing a blue shirt with orange trim', Q2='A sister dressed in black sat next to a sister wearing a blue shirt with orange trim'
2025-12-23 01:58:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'm·ªôt ng∆∞·ªùi c·∫ßm chi·∫øc ƒëi·ªán tho·∫°i l∆∞·ªõt m·ªôt app v√† c√≥ m·ªôt ng∆∞·ªùi kh√°c h∆∞·ªõng d·∫´n ng∆∞·ªùi n√†y s·ª≠ d·ª•ng app'
2025-12-23 01:58:06 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:58:06 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Finally, there is an interview scene with an employee at HanoiTax company
2025-12-23 01:58:06 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'm·ªôt ng∆∞·ªùi c·∫ßm chi·∫øc ƒëi·ªán tho·∫°i l∆∞·ªõt m·ªôt app v√† c√≥ m·ªôt ng∆∞·ªùi kh√°c h∆∞·ªõng d·∫´n ng∆∞·ªùi n√†y s·ª≠ d·ª•ng app' ‚Üí 'One person holds a phone to surf an app and another person guides this person to use the app'
2025-12-23 01:58:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'One person holds a phone to surf an app and another person guides this person to use the app'
2025-12-23 01:58:07 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:58:07 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: In the opening scene, you can see a sister dressed in black sitting next to a sister wearing a blue shirt with orange trim
2025-12-23 01:58:07 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 01:58:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='One person holds a phone to surf an app and another person guides this person to use the app', Q1='One person holds a phone to surf an app and another person guides this person to use the app', Q2='One person holds a phone to surf an app and another person guides this person to use the app'
2025-12-23 01:58:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: ''
2025-12-23 01:58:07 - app.services.gemini.query_augmentation - WARNING - [QUERY AUG] Empty query, returning original
2025-12-23 01:58:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 queries: Q0='', Q1='', Q2=''
2025-12-23 01:58:07 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='c√¥ng ty HanoiTax', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 01:58:07 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-23 01:58:07 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-23 01:58:07 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-23 01:58:07 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'c√¥ng ty HanoiTax'
2025-12-23 01:58:07 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'c√¥ng ty HanoiTax'
2025-12-23 01:58:07 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.017s]
2025-12-23 01:58:07 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.014s]
2025-12-23 01:58:07 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.022s]
2025-12-23 01:58:07 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.059s]
2025-12-23 01:58:07 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 595807:0.9955, 595997:0.9822, 435870:0.9820, 435869:0.9670, 604932:0.9636, 595996:0.9543, 604931:0.9418, 435873:0.9257, 595995:0.8971, 525587:0.8805
2025-12-23 01:58:07 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-23 01:58:07 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-23 01:58:07 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 01:58:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 01:58:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 Q0 results: 0, Q1: 200, Q2: 200
2025-12-23 01:58:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 0, Q2: 200
2025-12-23 01:58:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 3 stages in 6973.75ms
2025-12-23 01:58:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-23 01:58:07 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 3 stages
2025-12-23 01:58:07 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 100 videos with results
2025-12-23 01:58:07 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 87 videos with results
2025-12-23 01:58:07 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 3: 98 videos with results
2025-12-23 01:58:07 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 3 common videos across all stages
2025-12-23 01:58:07 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 0 valid tuples
2025-12-23 01:58:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 0 valid tuples
2025-12-23 01:58:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 Q0 results: 23, Q1: 23, Q2: 23
2025-12-23 01:58:07 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:58:07 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: One person holds a phone to surf an app and another person guides this person to use the app
2025-12-23 01:58:07 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:58:07 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 01:58:07 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: One person holds a phone to surf an app and another person guides this person to use the app
2025-12-23 01:58:07 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A sister dressed in black sat next to a sister wearing a blue shirt with orange trim
2025-12-23 01:58:08 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:58:08 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: One person holds a phone to surf an app and another person guides this person to use the app
2025-12-23 01:58:08 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:58:08 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A sister dressed in black sat next to a sister wearing a blue shirt with orange trim
2025-12-23 01:58:08 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 01:58:08 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A sister dressed in black sat next to a sister wearing a blue shirt with orange trim
2025-12-23 01:58:08 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:58:08 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: One person holds a phone to surf an app and another person guides this person to use the app
2025-12-23 01:58:08 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:58:08 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A sister dressed in black sat next to a sister wearing a blue shirt with orange trim
2025-12-23 01:58:08 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-23 01:58:08 - app.routers.search_multistage - ERROR - [MULTISTAGE] Error: IC.json not found: app/data/index/es_data/IC.json
Traceback (most recent call last):
  File "/app/app/routers/search_multistage.py", line 382, in search_multistage
    stage_results = await asyncio.gather(*stage_tasks)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/routers/search_multistage.py", line 273, in _process_single_stage
    (q0_per_method, q0_results), (q1_per_method, q1_results), (q2_per_method, q2_results) = await asyncio.gather(
                                                                                            ^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/routers/search_multistage.py", line 208, in _search_single_query_async
    return await loop.run_in_executor(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/concurrent/futures/thread.py", line 58, in run
    result = self.fn(*self.args, **self.kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/app/app/routers/search_multistage.py", line 168, in _search_single_query_sync
    ic_results = get_ic_search().search(query_text, top_k)
                 ^^^^^^^^^^^^^^^
  File "/app/app/services/method/ic_search.py", line 170, in get_ic_search
    _ic_instance = ICSearch()
                   ^^^^^^^^^^
  File "/app/app/services/method/ic_search.py", line 28, in __init__
    raise FileNotFoundError(f"IC.json not found: {ic_path}")
FileNotFoundError: IC.json not found: app/data/index/es_data/IC.json
2025-12-23 01:58:09 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 01:58:09 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-23 01:58:09 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: One person holds a phone to surf an app and another person guides this person to use the app
2025-12-23 01:58:09 - app.services.vector_db.qdrant_client - INFO - ‚úÖ Connected to Qdrant via gRPC at qdrant:6334
2025-12-23 01:58:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 01:58:22 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='HanoiTax', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 01:58:22 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-23 01:58:22 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-23 01:58:22 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-23 01:58:22 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'HanoiTax'
2025-12-23 01:58:22 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'HanoiTax'
2025-12-23 01:58:22 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.011s]
2025-12-23 01:58:22 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 595807:0.9044, 595997:0.8519, 595996:0.8022, 595995:0.7478, 595994:0.7337, 595993:0.6909, 595992:0.6479, 595991:0.6196, 595990:0.5647, 595989:0.5383
2025-12-23 01:58:22 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-23 01:58:22 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-23 01:58:22 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 02:00:38 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframe/L20/L20_V012/6159.webp
2025-12-23 02:00:38 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframe/L20/L20_V012/6159.webp -> /app/app/data/keyframe/L20/L20_V012/6159.webp
2025-12-23 02:00:38 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframe/L20/L20_V012/6159.webp
2025-12-23 02:00:38 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframe/L20/L20_V012/6159.webp -> /app/app/data/keyframe/L20/L20_V012/6159.webp
2025-12-23 02:00:39 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 02:00:39 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 02:00:39 - root - INFO - [IMAGE_SEARCH] Result #0: ID=595981, Path=/keyframe/L20/L20_V012/6159.webp, Score=0.9967174530029297
2025-12-23 02:00:39 - root - INFO - [IMAGE_SEARCH] Result #1: ID=595982, Path=/keyframe/L20/L20_V012/6199.webp, Score=0.969946563243866
2025-12-23 02:00:39 - root - INFO - [IMAGE_SEARCH] Result #2: ID=595806, Path=/keyframe/L20/L20_V012/593.webp, Score=0.9624172449111938
2025-12-23 02:00:39 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1150.33ms
2025-12-23 02:00:39 - root - INFO - [IMAGE_SEARCH] First result sample: {'id': 595981, 'keyframe_path': '/keyframe/L20/L20_V012/6159.webp', 'score': 0.9967174530029297, 'video': '', 'frame_idx': None}
2025-12-23 02:00:39 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 02:00:40 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 02:00:40 - root - INFO - [IMAGE_SEARCH] Result #0: ID=595981, Path=/keyframe/L20/L20_V012/6159.webp, Score=0.9967174530029297
2025-12-23 02:00:40 - root - INFO - [IMAGE_SEARCH] Result #1: ID=595982, Path=/keyframe/L20/L20_V012/6199.webp, Score=0.969946563243866
2025-12-23 02:00:40 - root - INFO - [IMAGE_SEARCH] Result #2: ID=595806, Path=/keyframe/L20/L20_V012/593.webp, Score=0.9624172449111938
2025-12-23 02:00:40 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1434.43ms
2025-12-23 02:00:40 - root - INFO - [IMAGE_SEARCH] First result sample: {'id': 595981, 'keyframe_path': '/keyframe/L20/L20_V012/6159.webp', 'score': 0.9967174530029297, 'video': '', 'frame_idx': None}
2025-12-23 02:02:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 02:02:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='r·ª´ng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:02:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:02:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'r·ª´ng'
2025-12-23 02:02:04 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'r·ª´ng' ‚Üí 'forest'
2025-12-23 02:02:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'forest'
2025-12-23 02:02:05 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:02:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='forest', Q1='forest', Q2='forest'
2025-12-23 02:02:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 02:02:05 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 02:02:05 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:02:05 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: forest
2025-12-23 02:02:06 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:02:06 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: forest
2025-12-23 02:02:07 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:02:07 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: forest
2025-12-23 02:02:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:02:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3496.43ms
2025-12-23 02:02:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-23 02:02:08 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 2 stages
2025-12-23 02:02:08 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 65 videos with results
2025-12-23 02:02:08 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 0 videos with results
2025-12-23 02:02:08 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] No common videos across all stages
2025-12-23 02:02:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 0 valid tuples
2025-12-23 02:02:14 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 02:02:14 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='C·∫£nh m·ªü ƒë·∫ßu l√† c√°c y t√° v√† b√°c sƒ© ƒëang v·ªôi v√†ng ƒë·∫©y ng∆∞·ªùi v√†o c·∫•p c·ª©u', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:02:14 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:02:14 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'C·∫£nh m·ªü ƒë·∫ßu l√† c√°c y t√° v√† b√°c sƒ© ƒëang v·ªôi v√†ng ƒë·∫©y ng∆∞·ªùi v√†o c·∫•p c·ª©u'
2025-12-23 02:02:14 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh m·ªü ƒë·∫ßu l√† c√°c y t√° v√† b√°c sƒ© ƒëang v·ªôi v√†ng ƒë·∫©y ng∆∞·ªùi v√†o c·∫•p c·ª©u' ‚Üí 'The opening scene is of nurses and doctors rushing to rush people into the emergency room'
2025-12-23 02:02:14 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'The opening scene is of nurses and doctors rushing to rush people into the emergency room'
2025-12-23 02:02:15 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:02:15 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='The opening scene is of nurses and doctors rushing to rush people into the emergency room', Q1='The opening scene is of nurses and doctors rushing to rush people into the emergency room', Q2='The opening scene is of nurses and doctors rushing to rush people into the emergency room'
2025-12-23 02:02:15 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 02:02:15 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 02:02:15 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 02:02:15 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='C·∫£nh m·ªü ƒë·∫ßu l√† c√°c y t√° v√† b√°c sƒ© ƒëang v·ªôi v√†ng ƒë·∫©y ng∆∞·ªùi v√†o c·∫•p c·ª©u', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:02:15 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:02:15 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'C·∫£nh m·ªü ƒë·∫ßu l√† c√°c y t√° v√† b√°c sƒ© ƒëang v·ªôi v√†ng ƒë·∫©y ng∆∞·ªùi v√†o c·∫•p c·ª©u'
2025-12-23 02:02:16 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:02:16 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The opening scene is of nurses and doctors rushing to rush people into the emergency room
2025-12-23 02:02:16 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:02:16 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The opening scene is of nurses and doctors rushing to rush people into the emergency room
2025-12-23 02:02:16 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:02:16 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The opening scene is of nurses and doctors rushing to rush people into the emergency room
2025-12-23 02:02:16 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh m·ªü ƒë·∫ßu l√† c√°c y t√° v√† b√°c sƒ© ƒëang v·ªôi v√†ng ƒë·∫©y ng∆∞·ªùi v√†o c·∫•p c·ª©u' ‚Üí 'The opening scene is of nurses and doctors rushing to rush people into the emergency room'
2025-12-23 02:02:16 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'The opening scene is of nurses and doctors rushing to rush people into the emergency room'
2025-12-23 02:02:16 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:02:16 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The opening scene is of nurses and doctors rushing to rush people into the emergency room
2025-12-23 02:02:16 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:02:16 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The opening scene is of nurses and doctors rushing to rush people into the emergency room
2025-12-23 02:02:17 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:02:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='The opening scene is of nurses and doctors rushing to rush people into the emergency room', Q1='The opening scene is of nurses and doctors rushing to rush people into the emergency room', Q2='The opening scene is of nurses and doctors rushing to rush people into the emergency room'
2025-12-23 02:02:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 02:02:17 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 02:02:17 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:02:17 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The opening scene is of nurses and doctors rushing to rush people into the emergency room
2025-12-23 02:02:17 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:02:17 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The opening scene is of nurses and doctors rushing to rush people into the emergency room
2025-12-23 02:02:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 02:02:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='c√°c y t√° v√† b√°c sƒ© ƒëang v·ªôi v√†ng ƒë·∫©y ng∆∞·ªùi v√†o c·∫•p c·ª©u', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:02:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:02:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'c√°c y t√° v√† b√°c sƒ© ƒëang v·ªôi v√†ng ƒë·∫©y ng∆∞·ªùi v√†o c·∫•p c·ª©u'
2025-12-23 02:02:17 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:02:17 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The opening scene is of nurses and doctors rushing to rush people into the emergency room
2025-12-23 02:02:18 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:02:18 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The opening scene is of nurses and doctors rushing to rush people into the emergency room
2025-12-23 02:02:18 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c√°c y t√° v√† b√°c sƒ© ƒëang v·ªôi v√†ng ƒë·∫©y ng∆∞·ªùi v√†o c·∫•p c·ª©u' ‚Üí 'Nurses and doctors are rushing to push people into the emergency room'
2025-12-23 02:02:18 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'Nurses and doctors are rushing to push people into the emergency room'
2025-12-23 02:02:19 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:02:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='Nurses and doctors are rushing to push people into the emergency room', Q1='Nurses and doctors are rushing to push people into the emergency room', Q2='Nurses and doctors are rushing to push people into the emergency room'
2025-12-23 02:02:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 02:02:19 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 02:02:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 0
2025-12-23 02:02:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 4477.52ms
2025-12-23 02:02:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 02:02:19 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-23 02:02:19 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-23 02:02:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:02:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3247.77ms
2025-12-23 02:02:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 02:02:19 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-23 02:02:19 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-23 02:02:19 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:02:19 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Nurses and doctors are rushing to push people into the emergency room
2025-12-23 02:02:19 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:02:19 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Nurses and doctors are rushing to push people into the emergency room
2025-12-23 02:02:19 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:02:19 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Nurses and doctors are rushing to push people into the emergency room
2025-12-23 02:02:19 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:02:19 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Nurses and doctors are rushing to push people into the emergency room
2025-12-23 02:02:19 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:02:19 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Nurses and doctors are rushing to push people into the emergency room
2025-12-23 02:02:20 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:02:20 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Nurses and doctors are rushing to push people into the emergency room
2025-12-23 02:02:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 0
2025-12-23 02:02:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3260.16ms
2025-12-23 02:02:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-23 02:02:20 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 2 stages
2025-12-23 02:02:20 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 70 videos with results
2025-12-23 02:02:20 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 0 videos with results
2025-12-23 02:02:20 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] No common videos across all stages
2025-12-23 02:02:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 0 valid tuples
2025-12-23 02:02:25 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframe/L15/L15_V018/13799.webp
2025-12-23 02:02:25 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframe/L15/L15_V018/13799.webp -> /app/app/data/keyframe/L15/L15_V018/13799.webp
2025-12-23 02:02:25 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframe/L15/L15_V018/13799.webp
2025-12-23 02:02:25 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframe/L15/L15_V018/13799.webp -> /app/app/data/keyframe/L15/L15_V018/13799.webp
2025-12-23 02:02:26 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 02:02:26 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 02:02:26 - root - INFO - [IMAGE_SEARCH] Result #0: ID=444263, Path=/keyframe/L15/L15_V018/13799.webp, Score=0.9960048198699951
2025-12-23 02:02:26 - root - INFO - [IMAGE_SEARCH] Result #1: ID=444312, Path=/keyframe/L15/L15_V018/15457.webp, Score=0.9600403308868408
2025-12-23 02:02:26 - root - INFO - [IMAGE_SEARCH] Result #2: ID=444317, Path=/keyframe/L15/L15_V018/15657.webp, Score=0.9597482681274414
2025-12-23 02:02:26 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1123.07ms
2025-12-23 02:02:26 - root - INFO - [IMAGE_SEARCH] First result sample: {'id': 444263, 'keyframe_path': '/keyframe/L15/L15_V018/13799.webp', 'score': 0.9960048198699951, 'video': '', 'frame_idx': None}
2025-12-23 02:02:26 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 02:02:26 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 02:02:26 - root - INFO - [IMAGE_SEARCH] Result #0: ID=444263, Path=/keyframe/L15/L15_V018/13799.webp, Score=0.9960048198699951
2025-12-23 02:02:26 - root - INFO - [IMAGE_SEARCH] Result #1: ID=444312, Path=/keyframe/L15/L15_V018/15457.webp, Score=0.9600403308868408
2025-12-23 02:02:26 - root - INFO - [IMAGE_SEARCH] Result #2: ID=444317, Path=/keyframe/L15/L15_V018/15657.webp, Score=0.9597482681274414
2025-12-23 02:02:26 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1334.32ms
2025-12-23 02:02:26 - root - INFO - [IMAGE_SEARCH] First result sample: {'id': 444263, 'keyframe_path': '/keyframe/L15/L15_V018/13799.webp', 'score': 0.9960048198699951, 'video': '', 'frame_idx': None}
2025-12-23 02:03:15 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 02:03:15 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='c√°c y t√° v√† b√°c sƒ© ƒëang v·ªôi v√†ng ƒë·∫©y ng∆∞·ªùi v√†o c·∫•p c·ª©u', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:03:15 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='v·ª• vi·ªác di·ªÖn ra t·∫°i h·∫ßm l√≤ c√≥ nhi·ªÅu ng∆∞·ªùi ƒë·ª©ng v√¢y quanh m·ªôt t·ªù gi·∫•y l·ªõn c√≤n c√≥ m·ªôt chi·∫øn sƒ© c√¥ng an', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:03:15 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'c√°c y t√° v√† b√°c sƒ© ƒëang v·ªôi v√†ng ƒë·∫©y ng∆∞·ªùi v√†o c·∫•p c·ª©u'
2025-12-23 02:03:16 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c√°c y t√° v√† b√°c sƒ© ƒëang v·ªôi v√†ng ƒë·∫©y ng∆∞·ªùi v√†o c·∫•p c·ª©u' ‚Üí 'Nurses and doctors are rushing to push people into the emergency room'
2025-12-23 02:03:16 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'Nurses and doctors are rushing to push people into the emergency room'
2025-12-23 02:03:17 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:03:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='Nurses and doctors are rushing to push people into the emergency room', Q1='Nurses and doctors are rushing to push people into the emergency room', Q2='Nurses and doctors are rushing to push people into the emergency room'
2025-12-23 02:03:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'v·ª• vi·ªác di·ªÖn ra t·∫°i h·∫ßm l√≤ c√≥ nhi·ªÅu ng∆∞·ªùi ƒë·ª©ng v√¢y quanh m·ªôt t·ªù gi·∫•y l·ªõn c√≤n c√≥ m·ªôt chi·∫øn sƒ© c√¥ng an'
2025-12-23 02:03:19 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'v·ª• vi·ªác di·ªÖn ra t·∫°i h·∫ßm l√≤ c√≥ nhi·ªÅu ng∆∞·ªùi ƒë·ª©ng v√¢y quanh m·ªôt t·ªù gi·∫•y l·ªõn c√≤n c√≥ m·ªôt chi·∫øn sƒ© c√¥ng an' ‚Üí 'The incident took place in a mine with many people standing around a large piece of paper, and there was also a police officer'
2025-12-23 02:03:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'The incident took place in a mine with many people standing around a large piece of paper, and there was also a police officer'
2025-12-23 02:03:20 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:03:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='The incident took place in a mine with many people standing around a large piece of paper, and there was also a police officer', Q1='The incident took place in a mine with many people standing around a large piece of paper, and there was also a police officer', Q2='The incident took place in a mine with many people standing around a large piece of paper, and there was also a police officer'
2025-12-23 02:03:20 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:03:20 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The incident took place in a mine with many people standing around a large piece of paper, and there was also a police officer
2025-12-23 02:03:20 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:03:20 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:03:20 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Nurses and doctors are rushing to push people into the emergency room
2025-12-23 02:03:20 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The incident took place in a mine with many people standing around a large piece of paper, and there was also a police officer
2025-12-23 02:03:20 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:03:20 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Nurses and doctors are rushing to push people into the emergency room
2025-12-23 02:03:20 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:03:20 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Nurses and doctors are rushing to push people into the emergency room
2025-12-23 02:03:21 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:03:21 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Nurses and doctors are rushing to push people into the emergency room
2025-12-23 02:03:21 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:03:21 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The incident took place in a mine with many people standing around a large piece of paper, and there was also a police officer
2025-12-23 02:03:21 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:03:21 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The incident took place in a mine with many people standing around a large piece of paper, and there was also a police officer
2025-12-23 02:03:21 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:03:21 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Nurses and doctors are rushing to push people into the emergency room
2025-12-23 02:03:21 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:03:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:03:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 7094.06ms
2025-12-23 02:03:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-23 02:03:22 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 2 stages
2025-12-23 02:03:22 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 66 videos with results
2025-12-23 02:03:22 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 91 videos with results
2025-12-23 02:03:22 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 12 common videos across all stages
2025-12-23 02:03:22 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 2 valid tuples
2025-12-23 02:03:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 2 valid tuples
2025-12-23 02:06:29 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='c√°c y t√° v√† b√°c sƒ© ƒëang v·ªôi v√†ng ƒë·∫©y ng∆∞·ªùi v√†o c·∫•p c·ª©u', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 02:06:29 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-23 02:06:29 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-23 02:06:29 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-23 02:06:29 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c√°c y t√° v√† b√°c sƒ© ƒëang v·ªôi v√†ng ƒë·∫©y ng∆∞·ªùi v√†o c·∫•p c·ª©u' ‚Üí 'Nurses and doctors are rushing to push people into the emergency room'
2025-12-23 02:06:29 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'Nurses and doctors are rushing to push people into the emergency room'
2025-12-23 02:06:29 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-23 02:06:31 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 517819:1.0000, 126304:0.9999, 403113:0.9515, 126309:0.9288, 517815:0.9253, 78933:0.9243, 126306:0.9055, 78941:0.8783, 126305:0.8601, 403114:0.8089
2025-12-23 02:06:31 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 444314:1.0000, 444312:0.9823, 444316:0.9614, 444263:0.9587, 444292:0.9471, 444317:0.9087, 444310:0.9056, 444293:0.8873, 444291:0.8838, 444318:0.8772
2025-12-23 02:06:31 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 126306:1.0000, 126304:0.8647, 78941:0.8415, 78925:0.7649, 101405:0.7089, 444263:0.6950, 6104:0.6484, 126305:0.6387, 6105:0.6134, 663711:0.6020
2025-12-23 02:06:31 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 444263:1.0000, 126306:0.9453, 101405:0.6991, 444314:0.6879, 444317:0.6867, 444292:0.6592, 126304:0.6459, 444312:0.6307, 444316:0.5934, 444291:0.5757
2025-12-23 02:06:31 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-23 02:06:31 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-23 02:06:31 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 02:08:55 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframe/L15/L15_V018/13799.webp
2025-12-23 02:08:55 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframe/L15/L15_V018/13799.webp -> /app/app/data/keyframe/L15/L15_V018/13799.webp
2025-12-23 02:08:56 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='c·∫£nh quay m·ªôt ƒë∆∞·ªùng ph·ªë. d·ªçc theo c√°c ng√¥i nh√† c√≥ s·ª£i d√¢y ph√¢n c√°ch. c√≥ th·ªÉ th·∫•y m·ªôt ti·ªám c·ª≠a h√†ng ƒë·ªì c≈©\n\n', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 02:08:56 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-23 02:08:56 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-23 02:08:56 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-23 02:08:57 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c·∫£nh quay m·ªôt ƒë∆∞·ªùng ph·ªë. d·ªçc theo c√°c ng√¥i nh√† c√≥ s·ª£i d√¢y ph√¢n c√°ch. c√≥ th·ªÉ th·∫•y m·ªôt ti·ªám c·ª≠a h√†ng ƒë·ªì c≈©' ‚Üí 'shot of a street. Along the houses there is a separating rope. You can see a second-hand shop'
2025-12-23 02:08:57 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'shot of a street. Along the houses there is a separating rope. You can see a second-hand shop'
2025-12-23 02:08:57 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-23 02:08:58 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:08:58 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: shot of a street. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:08:58 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:08:58 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: shot of a street. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:08:58 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:08:58 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: shot of a street. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:08:58 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-23 02:08:58 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-23 02:08:58 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-23 02:08:58 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-23 02:08:58 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-23 02:08:58 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-23 02:08:58 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 02:08:58 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 02:08:58 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 02:08:58 - root - INFO - [IMAGE_SEARCH] Result #0: ID=444263, Path=/keyframe/L15/L15_V018/13799.webp, Score=0.9960048198699951
2025-12-23 02:08:58 - root - INFO - [IMAGE_SEARCH] Result #1: ID=444312, Path=/keyframe/L15/L15_V018/15457.webp, Score=0.9600403308868408
2025-12-23 02:08:58 - root - INFO - [IMAGE_SEARCH] Result #2: ID=444317, Path=/keyframe/L15/L15_V018/15657.webp, Score=0.9597482681274414
2025-12-23 02:08:58 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 2923.02ms
2025-12-23 02:08:58 - root - INFO - [IMAGE_SEARCH] First result sample: {'id': 444263, 'keyframe_path': '/keyframe/L15/L15_V018/13799.webp', 'score': 0.9960048198699951, 'video': '', 'frame_idx': None}
2025-12-23 02:08:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 02:08:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='M·ªü ƒë·∫ßu c√≥ th·ªÉ th·∫•y c·∫£nh quay m·ªôt ƒë∆∞·ªùng ph·ªë. d·ªçc theo c√°c ng√¥i nh√† c√≥ s·ª£i d√¢y ph√¢n c√°ch. c√≥ th·ªÉ th·∫•y m·ªôt ti·ªám c·ª≠a h√†ng ƒë·ªì c≈©

', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:08:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:08:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'M·ªü ƒë·∫ßu c√≥ th·ªÉ th·∫•y c·∫£nh quay m·ªôt ƒë∆∞·ªùng ph·ªë. d·ªçc theo c√°c ng√¥i nh√† c√≥ s·ª£i d√¢y ph√¢n c√°ch. c√≥ th·ªÉ th·∫•y m·ªôt ti·ªám c·ª≠a h√†ng ƒë·ªì c≈©

'
2025-12-23 02:09:01 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'M·ªü ƒë·∫ßu c√≥ th·ªÉ th·∫•y c·∫£nh quay m·ªôt ƒë∆∞·ªùng ph·ªë. d·ªçc theo c√°c ng√¥i nh√† c√≥ s·ª£i d√¢y ph√¢n c√°ch. c√≥ th·ªÉ th·∫•y m·ªôt ti·ªám c·ª≠a h√†ng ƒë·ªì c≈©

' ‚Üí 'In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop'
2025-12-23 02:09:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop'
2025-12-23 02:09:01 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:09:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop', Q1='In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop', Q2='In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop'
2025-12-23 02:09:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 02:09:01 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 02:09:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 02:09:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='M·ªü ƒë·∫ßu c√≥ th·ªÉ th·∫•y c·∫£nh quay m·ªôt ƒë∆∞·ªùng ph·ªë. d·ªçc theo c√°c ng√¥i nh√† c√≥ s·ª£i d√¢y ph√¢n c√°ch. c√≥ th·ªÉ th·∫•y m·ªôt ti·ªám c·ª≠a h√†ng ƒë·ªì c≈©', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:09:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:09:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'M·ªü ƒë·∫ßu c√≥ th·ªÉ th·∫•y c·∫£nh quay m·ªôt ƒë∆∞·ªùng ph·ªë. d·ªçc theo c√°c ng√¥i nh√† c√≥ s·ª£i d√¢y ph√¢n c√°ch. c√≥ th·ªÉ th·∫•y m·ªôt ti·ªám c·ª≠a h√†ng ƒë·ªì c≈©'
2025-12-23 02:09:01 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:09:01 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:09:02 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'M·ªü ƒë·∫ßu c√≥ th·ªÉ th·∫•y c·∫£nh quay m·ªôt ƒë∆∞·ªùng ph·ªë. d·ªçc theo c√°c ng√¥i nh√† c√≥ s·ª£i d√¢y ph√¢n c√°ch. c√≥ th·ªÉ th·∫•y m·ªôt ti·ªám c·ª≠a h√†ng ƒë·ªì c≈©' ‚Üí 'In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop'
2025-12-23 02:09:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop'
2025-12-23 02:09:02 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:09:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop', Q1='In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop', Q2='In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop'
2025-12-23 02:09:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 02:09:02 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 02:09:02 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='c·∫£nh quay m·ªôt ƒë∆∞·ªùng ph·ªë. d·ªçc theo c√°c ng√¥i nh√† c√≥ s·ª£i d√¢y ph√¢n c√°ch. c√≥ th·ªÉ th·∫•y m·ªôt ti·ªám c·ª≠a h√†ng ƒë·ªì c≈©', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 02:09:02 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-23 02:09:02 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-23 02:09:02 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-23 02:09:02 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:09:02 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:09:03 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c·∫£nh quay m·ªôt ƒë∆∞·ªùng ph·ªë. d·ªçc theo c√°c ng√¥i nh√† c√≥ s·ª£i d√¢y ph√¢n c√°ch. c√≥ th·ªÉ th·∫•y m·ªôt ti·ªám c·ª≠a h√†ng ƒë·ªì c≈©' ‚Üí 'shot of a street. Along the houses there is a separating rope. You can see a second-hand shop'
2025-12-23 02:09:03 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'shot of a street. Along the houses there is a separating rope. You can see a second-hand shop'
2025-12-23 02:09:03 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-23 02:09:03 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:09:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: shot of a street. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:09:03 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:09:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: shot of a street. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:09:03 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:09:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:09:03 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:09:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: shot of a street. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:09:03 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-23 02:09:03 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-23 02:09:03 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-23 02:09:03 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-23 02:09:03 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-23 02:09:03 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-23 02:09:03 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 02:09:03 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:09:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:09:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:09:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 4199.89ms
2025-12-23 02:09:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 02:09:04 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-23 02:09:04 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-23 02:09:04 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:09:04 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:09:04 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:09:04 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:09:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 02:09:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='c·∫£nh quay m·ªôt ƒë∆∞·ªùng ph·ªë. d·ªçc theo c√°c ng√¥i nh√† c√≥ s·ª£i d√¢y ph√¢n c√°ch. c√≥ th·ªÉ th·∫•y m·ªôt ti·ªám c·ª≠a h√†ng ƒë·ªì c≈©', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:09:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:09:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'c·∫£nh quay m·ªôt ƒë∆∞·ªùng ph·ªë. d·ªçc theo c√°c ng√¥i nh√† c√≥ s·ª£i d√¢y ph√¢n c√°ch. c√≥ th·ªÉ th·∫•y m·ªôt ti·ªám c·ª≠a h√†ng ƒë·ªì c≈©'
2025-12-23 02:09:06 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c·∫£nh quay m·ªôt ƒë∆∞·ªùng ph·ªë. d·ªçc theo c√°c ng√¥i nh√† c√≥ s·ª£i d√¢y ph√¢n c√°ch. c√≥ th·ªÉ th·∫•y m·ªôt ti·ªám c·ª≠a h√†ng ƒë·ªì c≈©' ‚Üí 'shot of a street. Along the houses there is a separating rope. You can see a second-hand shop'
2025-12-23 02:09:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'shot of a street. Along the houses there is a separating rope. You can see a second-hand shop'
2025-12-23 02:09:06 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:09:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='shot of a street. Along the houses there is a separating rope. You can see a second-hand shop', Q1='shot of a street. Along the houses there is a separating rope. You can see a second-hand shop', Q2='shot of a street. Along the houses there is a separating rope. You can see a second-hand shop'
2025-12-23 02:09:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 02:09:06 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 02:09:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:09:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 5363.20ms
2025-12-23 02:09:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 02:09:06 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-23 02:09:06 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-23 02:09:06 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:09:06 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: shot of a street. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:09:06 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:09:06 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: shot of a street. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:09:06 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:09:06 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: shot of a street. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:09:07 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:09:07 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: shot of a street. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:09:07 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:09:07 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: shot of a street. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:09:07 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:09:07 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: shot of a street. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:09:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-23 02:09:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2740.75ms
2025-12-23 02:09:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 02:09:08 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-23 02:09:08 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-23 02:09:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 02:09:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='c·∫£nh quay m·ªôt ƒë∆∞·ªùng ph·ªë. d·ªçc theo c√°c ng√¥i nh√† c√≥ s·ª£i d√¢y ph√¢n c√°ch. c√≥ th·ªÉ th·∫•y m·ªôt ti·ªám c·ª≠a h√†ng ƒë·ªì c≈©', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:09:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='m·ªôt t·ªù gi·∫•y tr·∫Øng in ch·ªØ ƒëen ƒë∆∞·ª£c treo tr√™n d√¢y ph√¢n c√°ch ƒë·ªÉ c·∫£nh b√°o ƒë·ªãa ƒëi·ªÉm nguy hi·ªÉm', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:09:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'c·∫£nh quay m·ªôt ƒë∆∞·ªùng ph·ªë. d·ªçc theo c√°c ng√¥i nh√† c√≥ s·ª£i d√¢y ph√¢n c√°ch. c√≥ th·ªÉ th·∫•y m·ªôt ti·ªám c·ª≠a h√†ng ƒë·ªì c≈©'
2025-12-23 02:09:55 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c·∫£nh quay m·ªôt ƒë∆∞·ªùng ph·ªë. d·ªçc theo c√°c ng√¥i nh√† c√≥ s·ª£i d√¢y ph√¢n c√°ch. c√≥ th·ªÉ th·∫•y m·ªôt ti·ªám c·ª≠a h√†ng ƒë·ªì c≈©' ‚Üí 'shot of a street. Along the houses there is a separating rope. You can see a second-hand shop'
2025-12-23 02:09:55 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'shot of a street. Along the houses there is a separating rope. You can see a second-hand shop'
2025-12-23 02:09:55 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:09:55 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='shot of a street. Along the houses there is a separating rope. You can see a second-hand shop', Q1='shot of a street. Along the houses there is a separating rope. You can see a second-hand shop', Q2='shot of a street. Along the houses there is a separating rope. You can see a second-hand shop'
2025-12-23 02:09:55 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'm·ªôt t·ªù gi·∫•y tr·∫Øng in ch·ªØ ƒëen ƒë∆∞·ª£c treo tr√™n d√¢y ph√¢n c√°ch ƒë·ªÉ c·∫£nh b√°o ƒë·ªãa ƒëi·ªÉm nguy hi·ªÉm'
2025-12-23 02:09:57 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'm·ªôt t·ªù gi·∫•y tr·∫Øng in ch·ªØ ƒëen ƒë∆∞·ª£c treo tr√™n d√¢y ph√¢n c√°ch ƒë·ªÉ c·∫£nh b√°o ƒë·ªãa ƒëi·ªÉm nguy hi·ªÉm' ‚Üí 'A white piece of paper with black letters is hung on the dividing line to warn of dangerous locations'
2025-12-23 02:09:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'A white piece of paper with black letters is hung on the dividing line to warn of dangerous locations'
2025-12-23 02:09:57 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:09:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='A white piece of paper with black letters is hung on the dividing line to warn of dangerous locations', Q1='A white piece of paper with black letters is hung on the dividing line to warn of dangerous locations', Q2='A white piece of paper with black letters is hung on the dividing line to warn of dangerous locations'
2025-12-23 02:09:57 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:09:57 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: shot of a street. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:09:57 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:09:57 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:09:57 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A white piece of paper with black letters is hung on the dividing line to warn of dangerous locations
2025-12-23 02:09:57 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A white piece of paper with black letters is hung on the dividing line to warn of dangerous locations
2025-12-23 02:09:57 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:09:57 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A white piece of paper with black letters is hung on the dividing line to warn of dangerous locations
2025-12-23 02:09:58 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:09:58 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: shot of a street. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:09:58 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:09:58 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: shot of a street. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:09:59 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:09:59 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: shot of a street. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:09:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:09:59 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:09:59 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A white piece of paper with black letters is hung on the dividing line to warn of dangerous locations
2025-12-23 02:09:59 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:09:59 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A white piece of paper with black letters is hung on the dividing line to warn of dangerous locations
2025-12-23 02:09:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:09:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 4993.86ms
2025-12-23 02:09:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 02:09:59 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 399 unique ids from 2 stages
2025-12-23 02:09:59 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 399 unique ids
2025-12-23 02:10:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 02:10:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='M·ªü ƒë·∫ßu c√≥ th·ªÉ th·∫•y c·∫£nh quay m·ªôt ƒë∆∞·ªùng ph·ªë. d·ªçc theo c√°c ng√¥i nh√† c√≥ s·ª£i d√¢y ph√¢n c√°ch. c√≥ th·ªÉ th·∫•y m·ªôt ti·ªám c·ª≠a h√†ng ƒë·ªì c≈©

', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:10:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='Ti·∫øp theo l√† m·ªôt t·ªù gi·∫•y tr·∫Øng in ch·ªØ ƒëen ƒë∆∞·ª£c treo tr√™n d√¢y ph√¢n c√°ch ƒë·ªÉ c·∫£nh b√°o ƒë·ªãa ƒëi·ªÉm nguy hi·ªÉm', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:10:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'M·ªü ƒë·∫ßu c√≥ th·ªÉ th·∫•y c·∫£nh quay m·ªôt ƒë∆∞·ªùng ph·ªë. d·ªçc theo c√°c ng√¥i nh√† c√≥ s·ª£i d√¢y ph√¢n c√°ch. c√≥ th·ªÉ th·∫•y m·ªôt ti·ªám c·ª≠a h√†ng ƒë·ªì c≈©

'
2025-12-23 02:10:01 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'M·ªü ƒë·∫ßu c√≥ th·ªÉ th·∫•y c·∫£nh quay m·ªôt ƒë∆∞·ªùng ph·ªë. d·ªçc theo c√°c ng√¥i nh√† c√≥ s·ª£i d√¢y ph√¢n c√°ch. c√≥ th·ªÉ th·∫•y m·ªôt ti·ªám c·ª≠a h√†ng ƒë·ªì c≈©

' ‚Üí 'In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop'
2025-12-23 02:10:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop'
2025-12-23 02:10:01 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:10:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop', Q1='In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop', Q2='In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop'
2025-12-23 02:10:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'Ti·∫øp theo l√† m·ªôt t·ªù gi·∫•y tr·∫Øng in ch·ªØ ƒëen ƒë∆∞·ª£c treo tr√™n d√¢y ph√¢n c√°ch ƒë·ªÉ c·∫£nh b√°o ƒë·ªãa ƒëi·ªÉm nguy hi·ªÉm'
2025-12-23 02:10:03 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'Ti·∫øp theo l√† m·ªôt t·ªù gi·∫•y tr·∫Øng in ch·ªØ ƒëen ƒë∆∞·ª£c treo tr√™n d√¢y ph√¢n c√°ch ƒë·ªÉ c·∫£nh b√°o ƒë·ªãa ƒëi·ªÉm nguy hi·ªÉm' ‚Üí 'Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations'
2025-12-23 02:10:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations'
2025-12-23 02:10:03 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:10:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations', Q1='Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations', Q2='Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations'
2025-12-23 02:10:03 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:10:03 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:10:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations
2025-12-23 02:10:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:10:03 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:10:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations
2025-12-23 02:10:03 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:10:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:10:04 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:10:04 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:10:04 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:10:04 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:10:04 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:10:04 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations
2025-12-23 02:10:04 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:10:04 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations
2025-12-23 02:10:04 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:10:04 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:10:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:10:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:10:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 4848.30ms
2025-12-23 02:10:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 02:10:05 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 399 unique ids from 2 stages
2025-12-23 02:10:05 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 399 unique ids
2025-12-23 02:10:11 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 02:10:11 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='M·ªü ƒë·∫ßu c√≥ th·ªÉ th·∫•y c·∫£nh quay m·ªôt ƒë∆∞·ªùng ph·ªë. d·ªçc theo c√°c ng√¥i nh√† c√≥ s·ª£i d√¢y ph√¢n c√°ch. c√≥ th·ªÉ th·∫•y m·ªôt ti·ªám c·ª≠a h√†ng ƒë·ªì c≈©', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:10:11 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='Ti·∫øp theo l√† m·ªôt t·ªù gi·∫•y tr·∫Øng in ch·ªØ ƒëen ƒë∆∞·ª£c treo tr√™n d√¢y ph√¢n c√°ch ƒë·ªÉ c·∫£nh b√°o ƒë·ªãa ƒëi·ªÉm nguy hi·ªÉm', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:10:11 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'M·ªü ƒë·∫ßu c√≥ th·ªÉ th·∫•y c·∫£nh quay m·ªôt ƒë∆∞·ªùng ph·ªë. d·ªçc theo c√°c ng√¥i nh√† c√≥ s·ª£i d√¢y ph√¢n c√°ch. c√≥ th·ªÉ th·∫•y m·ªôt ti·ªám c·ª≠a h√†ng ƒë·ªì c≈©'
2025-12-23 02:10:12 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'M·ªü ƒë·∫ßu c√≥ th·ªÉ th·∫•y c·∫£nh quay m·ªôt ƒë∆∞·ªùng ph·ªë. d·ªçc theo c√°c ng√¥i nh√† c√≥ s·ª£i d√¢y ph√¢n c√°ch. c√≥ th·ªÉ th·∫•y m·ªôt ti·ªám c·ª≠a h√†ng ƒë·ªì c≈©' ‚Üí 'In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop'
2025-12-23 02:10:12 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop'
2025-12-23 02:10:12 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:10:12 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop', Q1='In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop', Q2='In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop'
2025-12-23 02:10:12 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'Ti·∫øp theo l√† m·ªôt t·ªù gi·∫•y tr·∫Øng in ch·ªØ ƒëen ƒë∆∞·ª£c treo tr√™n d√¢y ph√¢n c√°ch ƒë·ªÉ c·∫£nh b√°o ƒë·ªãa ƒëi·ªÉm nguy hi·ªÉm'
2025-12-23 02:10:13 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'Ti·∫øp theo l√† m·ªôt t·ªù gi·∫•y tr·∫Øng in ch·ªØ ƒëen ƒë∆∞·ª£c treo tr√™n d√¢y ph√¢n c√°ch ƒë·ªÉ c·∫£nh b√°o ƒë·ªãa ƒëi·ªÉm nguy hi·ªÉm' ‚Üí 'Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations'
2025-12-23 02:10:13 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations'
2025-12-23 02:10:13 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:10:13 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations', Q1='Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations', Q2='Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations'
2025-12-23 02:10:14 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:10:14 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:10:14 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations
2025-12-23 02:10:14 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:10:14 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:10:14 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations
2025-12-23 02:10:14 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:10:14 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:10:14 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:10:14 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:10:15 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:10:15 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations
2025-12-23 02:10:15 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:10:15 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations
2025-12-23 02:10:15 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:10:15 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:10:15 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:10:15 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:10:15 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:10:15 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:10:15 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 4017.03ms
2025-12-23 02:10:15 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 02:10:15 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 399 unique ids from 2 stages
2025-12-23 02:10:15 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 399 unique ids
2025-12-23 02:10:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 02:10:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='c·∫£nh quay m·ªôt ƒë∆∞·ªùng ph·ªë. d·ªçc theo c√°c ng√¥i nh√† c√≥ s·ª£i d√¢y ph√¢n c√°ch. c√≥ th·ªÉ th·∫•y m·ªôt ti·ªám c·ª≠a h√†ng ƒë·ªì c≈©', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:10:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='m·ªôt t·ªù gi·∫•y tr·∫Øng in ch·ªØ ƒëen ƒë∆∞·ª£c treo tr√™n d√¢y ph√¢n c√°ch ƒë·ªÉ c·∫£nh b√°o ƒë·ªãa ƒëi·ªÉm nguy hi·ªÉm', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:10:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'c·∫£nh quay m·ªôt ƒë∆∞·ªùng ph·ªë. d·ªçc theo c√°c ng√¥i nh√† c√≥ s·ª£i d√¢y ph√¢n c√°ch. c√≥ th·ªÉ th·∫•y m·ªôt ti·ªám c·ª≠a h√†ng ƒë·ªì c≈©'
2025-12-23 02:10:30 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c·∫£nh quay m·ªôt ƒë∆∞·ªùng ph·ªë. d·ªçc theo c√°c ng√¥i nh√† c√≥ s·ª£i d√¢y ph√¢n c√°ch. c√≥ th·ªÉ th·∫•y m·ªôt ti·ªám c·ª≠a h√†ng ƒë·ªì c≈©' ‚Üí 'shot of a street. Along the houses there is a separating rope. You can see a second-hand shop'
2025-12-23 02:10:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'shot of a street. Along the houses there is a separating rope. You can see a second-hand shop'
2025-12-23 02:10:30 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:10:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='shot of a street. Along the houses there is a separating rope. You can see a second-hand shop', Q1='shot of a street. Along the houses there is a separating rope. You can see a second-hand shop', Q2='shot of a street. Along the houses there is a separating rope. You can see a second-hand shop'
2025-12-23 02:10:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'm·ªôt t·ªù gi·∫•y tr·∫Øng in ch·ªØ ƒëen ƒë∆∞·ª£c treo tr√™n d√¢y ph√¢n c√°ch ƒë·ªÉ c·∫£nh b√°o ƒë·ªãa ƒëi·ªÉm nguy hi·ªÉm'
2025-12-23 02:10:31 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'm·ªôt t·ªù gi·∫•y tr·∫Øng in ch·ªØ ƒëen ƒë∆∞·ª£c treo tr√™n d√¢y ph√¢n c√°ch ƒë·ªÉ c·∫£nh b√°o ƒë·ªãa ƒëi·ªÉm nguy hi·ªÉm' ‚Üí 'A white piece of paper with black letters is hung on the dividing line to warn of dangerous locations'
2025-12-23 02:10:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'A white piece of paper with black letters is hung on the dividing line to warn of dangerous locations'
2025-12-23 02:10:31 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:10:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='A white piece of paper with black letters is hung on the dividing line to warn of dangerous locations', Q1='A white piece of paper with black letters is hung on the dividing line to warn of dangerous locations', Q2='A white piece of paper with black letters is hung on the dividing line to warn of dangerous locations'
2025-12-23 02:10:31 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:10:31 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: shot of a street. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:10:32 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:10:32 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A white piece of paper with black letters is hung on the dividing line to warn of dangerous locations
2025-12-23 02:10:32 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:10:32 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A white piece of paper with black letters is hung on the dividing line to warn of dangerous locations
2025-12-23 02:10:32 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:10:32 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A white piece of paper with black letters is hung on the dividing line to warn of dangerous locations
2025-12-23 02:10:32 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:10:32 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: shot of a street. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:10:32 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:10:32 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A white piece of paper with black letters is hung on the dividing line to warn of dangerous locations
2025-12-23 02:10:32 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:10:32 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: shot of a street. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:10:32 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:10:32 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: shot of a street. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:10:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:10:33 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:10:33 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: shot of a street. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:10:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:10:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3613.70ms
2025-12-23 02:10:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-23 02:10:33 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 2 stages
2025-12-23 02:10:33 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 81 videos with results
2025-12-23 02:10:33 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 89 videos with results
2025-12-23 02:10:33 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 12 common videos across all stages
2025-12-23 02:10:33 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 13 valid tuples
2025-12-23 02:10:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 13 valid tuples
2025-12-23 02:10:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 02:10:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='M·ªü ƒë·∫ßu c√≥ th·ªÉ th·∫•y c·∫£nh quay m·ªôt ƒë∆∞·ªùng ph·ªë. d·ªçc theo c√°c ng√¥i nh√† c√≥ s·ª£i d√¢y ph√¢n c√°ch. c√≥ th·ªÉ th·∫•y m·ªôt ti·ªám c·ª≠a h√†ng ƒë·ªì c≈©', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:10:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='Ti·∫øp theo l√† m·ªôt t·ªù gi·∫•y tr·∫Øng in ch·ªØ ƒëen ƒë∆∞·ª£c treo tr√™n d√¢y ph√¢n c√°ch ƒë·ªÉ c·∫£nh b√°o ƒë·ªãa ƒëi·ªÉm nguy hi·ªÉm', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:10:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'M·ªü ƒë·∫ßu c√≥ th·ªÉ th·∫•y c·∫£nh quay m·ªôt ƒë∆∞·ªùng ph·ªë. d·ªçc theo c√°c ng√¥i nh√† c√≥ s·ª£i d√¢y ph√¢n c√°ch. c√≥ th·ªÉ th·∫•y m·ªôt ti·ªám c·ª≠a h√†ng ƒë·ªì c≈©'
2025-12-23 02:10:36 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'M·ªü ƒë·∫ßu c√≥ th·ªÉ th·∫•y c·∫£nh quay m·ªôt ƒë∆∞·ªùng ph·ªë. d·ªçc theo c√°c ng√¥i nh√† c√≥ s·ª£i d√¢y ph√¢n c√°ch. c√≥ th·ªÉ th·∫•y m·ªôt ti·ªám c·ª≠a h√†ng ƒë·ªì c≈©' ‚Üí 'In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop'
2025-12-23 02:10:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop'
2025-12-23 02:10:36 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:10:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop', Q1='In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop', Q2='In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop'
2025-12-23 02:10:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'Ti·∫øp theo l√† m·ªôt t·ªù gi·∫•y tr·∫Øng in ch·ªØ ƒëen ƒë∆∞·ª£c treo tr√™n d√¢y ph√¢n c√°ch ƒë·ªÉ c·∫£nh b√°o ƒë·ªãa ƒëi·ªÉm nguy hi·ªÉm'
2025-12-23 02:10:37 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'Ti·∫øp theo l√† m·ªôt t·ªù gi·∫•y tr·∫Øng in ch·ªØ ƒëen ƒë∆∞·ª£c treo tr√™n d√¢y ph√¢n c√°ch ƒë·ªÉ c·∫£nh b√°o ƒë·ªãa ƒëi·ªÉm nguy hi·ªÉm' ‚Üí 'Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations'
2025-12-23 02:10:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations'
2025-12-23 02:10:37 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:10:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations', Q1='Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations', Q2='Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations'
2025-12-23 02:10:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 02:10:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='M·ªü ƒë·∫ßu c√≥ th·ªÉ th·∫•y c·∫£nh quay m·ªôt ƒë∆∞·ªùng ph·ªë. d·ªçc theo c√°c ng√¥i nh√† c√≥ s·ª£i d√¢y ph√¢n c√°ch. c√≥ th·ªÉ th·∫•y m·ªôt ti·ªám c·ª≠a h√†ng ƒë·ªì c≈©

', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:10:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='Ti·∫øp theo l√† m·ªôt t·ªù gi·∫•y tr·∫Øng in ch·ªØ ƒëen ƒë∆∞·ª£c treo tr√™n d√¢y ph√¢n c√°ch ƒë·ªÉ c·∫£nh b√°o ƒë·ªãa ƒëi·ªÉm nguy hi·ªÉm', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:10:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'M·ªü ƒë·∫ßu c√≥ th·ªÉ th·∫•y c·∫£nh quay m·ªôt ƒë∆∞·ªùng ph·ªë. d·ªçc theo c√°c ng√¥i nh√† c√≥ s·ª£i d√¢y ph√¢n c√°ch. c√≥ th·ªÉ th·∫•y m·ªôt ti·ªám c·ª≠a h√†ng ƒë·ªì c≈©

'
2025-12-23 02:10:37 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:10:37 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:10:37 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations
2025-12-23 02:10:37 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:10:37 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:10:37 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations
2025-12-23 02:10:37 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:10:37 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:10:38 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'M·ªü ƒë·∫ßu c√≥ th·ªÉ th·∫•y c·∫£nh quay m·ªôt ƒë∆∞·ªùng ph·ªë. d·ªçc theo c√°c ng√¥i nh√† c√≥ s·ª£i d√¢y ph√¢n c√°ch. c√≥ th·ªÉ th·∫•y m·ªôt ti·ªám c·ª≠a h√†ng ƒë·ªì c≈©

' ‚Üí 'In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop'
2025-12-23 02:10:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop'
2025-12-23 02:10:38 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:10:38 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations
2025-12-23 02:10:38 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:10:38 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:10:38 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:10:38 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations
2025-12-23 02:10:38 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:10:38 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations
2025-12-23 02:10:38 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:10:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop', Q1='In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop', Q2='In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop'
2025-12-23 02:10:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'Ti·∫øp theo l√† m·ªôt t·ªù gi·∫•y tr·∫Øng in ch·ªØ ƒëen ƒë∆∞·ª£c treo tr√™n d√¢y ph√¢n c√°ch ƒë·ªÉ c·∫£nh b√°o ƒë·ªãa ƒëi·ªÉm nguy hi·ªÉm'
2025-12-23 02:10:38 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:10:38 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:10:39 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'Ti·∫øp theo l√† m·ªôt t·ªù gi·∫•y tr·∫Øng in ch·ªØ ƒëen ƒë∆∞·ª£c treo tr√™n d√¢y ph√¢n c√°ch ƒë·ªÉ c·∫£nh b√°o ƒë·ªãa ƒëi·ªÉm nguy hi·ªÉm' ‚Üí 'Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations'
2025-12-23 02:10:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations'
2025-12-23 02:10:39 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:10:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations', Q1='Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations', Q2='Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations'
2025-12-23 02:10:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:10:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:10:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 4417.83ms
2025-12-23 02:10:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-23 02:10:39 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 2 stages
2025-12-23 02:10:39 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 80 videos with results
2025-12-23 02:10:39 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 88 videos with results
2025-12-23 02:10:39 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 13 common videos across all stages
2025-12-23 02:10:39 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 15 valid tuples
2025-12-23 02:10:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 15 valid tuples
2025-12-23 02:10:39 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:10:39 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:10:39 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:10:39 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:10:39 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations
2025-12-23 02:10:39 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations
2025-12-23 02:10:39 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:10:39 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations
2025-12-23 02:10:40 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:10:40 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:10:40 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:10:40 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations
2025-12-23 02:10:40 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:10:40 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:10:40 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:10:40 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:10:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:10:41 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:10:41 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:10:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:10:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3712.52ms
2025-12-23 02:10:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-23 02:10:41 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 2 stages
2025-12-23 02:10:41 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 80 videos with results
2025-12-23 02:10:41 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 90 videos with results
2025-12-23 02:10:41 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 12 common videos across all stages
2025-12-23 02:10:41 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 7 valid tuples
2025-12-23 02:10:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 7 valid tuples
2025-12-23 02:11:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 3 stages
2025-12-23 02:11:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='M·ªü ƒë·∫ßu c√≥ th·ªÉ th·∫•y c·∫£nh quay m·ªôt ƒë∆∞·ªùng ph·ªë. d·ªçc theo c√°c ng√¥i nh√† c√≥ s·ª£i d√¢y ph√¢n c√°ch. c√≥ th·ªÉ th·∫•y m·ªôt ti·ªám c·ª≠a h√†ng ƒë·ªì c≈©

', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:11:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='Ti·∫øp theo l√† m·ªôt t·ªù gi·∫•y tr·∫Øng in ch·ªØ ƒëen ƒë∆∞·ª£c treo tr√™n d√¢y ph√¢n c√°ch ƒë·ªÉ c·∫£nh b√°o ƒë·ªãa ƒëi·ªÉm nguy hi·ªÉm', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:11:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='C·∫£nh trong m·ªôt ng√¥i nh√† ƒë·ªï n√°t qu√° n·ª≠a s√†n nh√† b·ªã ng·∫≠p b·ªüi n∆∞·ªõc, C√≤n c√≥ th·ªÉ th·∫•y c√≥ v√†i b·ªô ƒë·ªì ƒë∆∞·ª£c treo

', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:11:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'M·ªü ƒë·∫ßu c√≥ th·ªÉ th·∫•y c·∫£nh quay m·ªôt ƒë∆∞·ªùng ph·ªë. d·ªçc theo c√°c ng√¥i nh√† c√≥ s·ª£i d√¢y ph√¢n c√°ch. c√≥ th·ªÉ th·∫•y m·ªôt ti·ªám c·ª≠a h√†ng ƒë·ªì c≈©

'
2025-12-23 02:11:04 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'M·ªü ƒë·∫ßu c√≥ th·ªÉ th·∫•y c·∫£nh quay m·ªôt ƒë∆∞·ªùng ph·ªë. d·ªçc theo c√°c ng√¥i nh√† c√≥ s·ª£i d√¢y ph√¢n c√°ch. c√≥ th·ªÉ th·∫•y m·ªôt ti·ªám c·ª≠a h√†ng ƒë·ªì c≈©

' ‚Üí 'In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop'
2025-12-23 02:11:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop'
2025-12-23 02:11:04 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:11:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop', Q1='In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop', Q2='In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop'
2025-12-23 02:11:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'Ti·∫øp theo l√† m·ªôt t·ªù gi·∫•y tr·∫Øng in ch·ªØ ƒëen ƒë∆∞·ª£c treo tr√™n d√¢y ph√¢n c√°ch ƒë·ªÉ c·∫£nh b√°o ƒë·ªãa ƒëi·ªÉm nguy hi·ªÉm'
2025-12-23 02:11:05 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'Ti·∫øp theo l√† m·ªôt t·ªù gi·∫•y tr·∫Øng in ch·ªØ ƒëen ƒë∆∞·ª£c treo tr√™n d√¢y ph√¢n c√°ch ƒë·ªÉ c·∫£nh b√°o ƒë·ªãa ƒëi·ªÉm nguy hi·ªÉm' ‚Üí 'Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations'
2025-12-23 02:11:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations'
2025-12-23 02:11:05 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:11:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations', Q1='Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations', Q2='Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations'
2025-12-23 02:11:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: 'C·∫£nh trong m·ªôt ng√¥i nh√† ƒë·ªï n√°t qu√° n·ª≠a s√†n nh√† b·ªã ng·∫≠p b·ªüi n∆∞·ªõc, C√≤n c√≥ th·ªÉ th·∫•y c√≥ v√†i b·ªô ƒë·ªì ƒë∆∞·ª£c treo

'
2025-12-23 02:11:06 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh trong m·ªôt ng√¥i nh√† ƒë·ªï n√°t qu√° n·ª≠a s√†n nh√† b·ªã ng·∫≠p b·ªüi n∆∞·ªõc, C√≤n c√≥ th·ªÉ th·∫•y c√≥ v√†i b·ªô ƒë·ªì ƒë∆∞·ª£c treo

' ‚Üí 'Scene in a ruined house, half of the floor was flooded with water, and a few clothes could be seen hanging'
2025-12-23 02:11:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 translated: 'Scene in a ruined house, half of the floor was flooded with water, and a few clothes could be seen hanging'
2025-12-23 02:11:07 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:11:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 queries: Q0='Scene in a ruined house, half of the floor was flooded with water, and a few clothes could be seen hanging', Q1='Scene in a ruined house, half of the floor was flooded with water, and a few clothes could be seen hanging', Q2='Scene in a ruined house, half of the floor was flooded with water, and a few clothes could be seen hanging'
2025-12-23 02:11:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 3 stages
2025-12-23 02:11:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='c·∫£nh quay m·ªôt ƒë∆∞·ªùng ph·ªë. d·ªçc theo c√°c ng√¥i nh√† c√≥ s·ª£i d√¢y ph√¢n c√°ch. c√≥ th·ªÉ th·∫•y m·ªôt ti·ªám c·ª≠a h√†ng ƒë·ªì c≈©', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:11:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='m·ªôt t·ªù gi·∫•y tr·∫Øng in ch·ªØ ƒëen ƒë∆∞·ª£c treo tr√™n d√¢y ph√¢n c√°ch ƒë·ªÉ c·∫£nh b√°o ƒë·ªãa ƒëi·ªÉm nguy hi·ªÉm', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:11:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='m·ªôt ng√¥i nh√† ƒë·ªï n√°t qu√° n·ª≠a s√†n nh√† b·ªã ng·∫≠p b·ªüi n∆∞·ªõc, C√≤n c√≥ th·ªÉ th·∫•y c√≥ v√†i b·ªô ƒë·ªì ƒë∆∞·ª£c treo', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:11:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'c·∫£nh quay m·ªôt ƒë∆∞·ªùng ph·ªë. d·ªçc theo c√°c ng√¥i nh√† c√≥ s·ª£i d√¢y ph√¢n c√°ch. c√≥ th·ªÉ th·∫•y m·ªôt ti·ªám c·ª≠a h√†ng ƒë·ªì c≈©'
2025-12-23 02:11:07 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:11:07 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:11:07 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations
2025-12-23 02:11:07 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:11:07 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:11:07 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:11:07 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Scene in a ruined house, half of the floor was flooded with water, and a few clothes could be seen hanging
2025-12-23 02:11:07 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations
2025-12-23 02:11:07 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:11:07 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:11:07 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:11:07 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations
2025-12-23 02:11:07 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:11:07 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations
2025-12-23 02:11:07 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c·∫£nh quay m·ªôt ƒë∆∞·ªùng ph·ªë. d·ªçc theo c√°c ng√¥i nh√† c√≥ s·ª£i d√¢y ph√¢n c√°ch. c√≥ th·ªÉ th·∫•y m·ªôt ti·ªám c·ª≠a h√†ng ƒë·ªì c≈©' ‚Üí 'shot of a street. Along the houses there is a separating rope. You can see a second-hand shop'
2025-12-23 02:11:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'shot of a street. Along the houses there is a separating rope. You can see a second-hand shop'
2025-12-23 02:11:08 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:11:08 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Scene in a ruined house, half of the floor was flooded with water, and a few clothes could be seen hanging
2025-12-23 02:11:08 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:11:08 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:11:08 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:11:08 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Scene in a ruined house, half of the floor was flooded with water, and a few clothes could be seen hanging
2025-12-23 02:11:08 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:11:08 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:11:08 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:11:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='shot of a street. Along the houses there is a separating rope. You can see a second-hand shop', Q1='shot of a street. Along the houses there is a separating rope. You can see a second-hand shop', Q2='shot of a street. Along the houses there is a separating rope. You can see a second-hand shop'
2025-12-23 02:11:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'm·ªôt t·ªù gi·∫•y tr·∫Øng in ch·ªØ ƒëen ƒë∆∞·ª£c treo tr√™n d√¢y ph√¢n c√°ch ƒë·ªÉ c·∫£nh b√°o ƒë·ªãa ƒëi·ªÉm nguy hi·ªÉm'
2025-12-23 02:11:08 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:11:08 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations
2025-12-23 02:11:08 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'm·ªôt t·ªù gi·∫•y tr·∫Øng in ch·ªØ ƒëen ƒë∆∞·ª£c treo tr√™n d√¢y ph√¢n c√°ch ƒë·ªÉ c·∫£nh b√°o ƒë·ªãa ƒëi·ªÉm nguy hi·ªÉm' ‚Üí 'A white piece of paper with black letters is hung on the dividing line to warn of dangerous locations'
2025-12-23 02:11:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'A white piece of paper with black letters is hung on the dividing line to warn of dangerous locations'
2025-12-23 02:11:09 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:11:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='A white piece of paper with black letters is hung on the dividing line to warn of dangerous locations', Q1='A white piece of paper with black letters is hung on the dividing line to warn of dangerous locations', Q2='A white piece of paper with black letters is hung on the dividing line to warn of dangerous locations'
2025-12-23 02:11:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: 'm·ªôt ng√¥i nh√† ƒë·ªï n√°t qu√° n·ª≠a s√†n nh√† b·ªã ng·∫≠p b·ªüi n∆∞·ªõc, C√≤n c√≥ th·ªÉ th·∫•y c√≥ v√†i b·ªô ƒë·ªì ƒë∆∞·ª£c treo'
2025-12-23 02:11:10 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'm·ªôt ng√¥i nh√† ƒë·ªï n√°t qu√° n·ª≠a s√†n nh√† b·ªã ng·∫≠p b·ªüi n∆∞·ªõc, C√≤n c√≥ th·ªÉ th·∫•y c√≥ v√†i b·ªô ƒë·ªì ƒë∆∞·ª£c treo' ‚Üí 'A dilapidated house with half of the floor flooded by water. You can also see a few clothes hanging'
2025-12-23 02:11:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 translated: 'A dilapidated house with half of the floor flooded by water. You can also see a few clothes hanging'
2025-12-23 02:11:10 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:11:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 queries: Q0='A dilapidated house with half of the floor flooded by water. You can also see a few clothes hanging', Q1='A dilapidated house with half of the floor flooded by water. You can also see a few clothes hanging', Q2='A dilapidated house with half of the floor flooded by water. You can also see a few clothes hanging'
2025-12-23 02:11:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 0, Q1: 200, Q2: 200
2025-12-23 02:11:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:11:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:11:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 3 stages in 7150.14ms
2025-12-23 02:11:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-23 02:11:10 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 3 stages
2025-12-23 02:11:10 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 82 videos with results
2025-12-23 02:11:10 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 87 videos with results
2025-12-23 02:11:10 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 3: 81 videos with results
2025-12-23 02:11:10 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 2 common videos across all stages
2025-12-23 02:11:10 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 0 valid tuples
2025-12-23 02:11:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 0 valid tuples
2025-12-23 02:11:10 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:11:10 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: shot of a street. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:11:10 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:11:10 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: shot of a street. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:11:10 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:11:10 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A dilapidated house with half of the floor flooded by water. You can also see a few clothes hanging
2025-12-23 02:11:10 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:11:10 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A white piece of paper with black letters is hung on the dividing line to warn of dangerous locations
2025-12-23 02:11:10 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:11:10 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A dilapidated house with half of the floor flooded by water. You can also see a few clothes hanging
2025-12-23 02:11:10 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:11:10 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: shot of a street. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:11:10 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:11:10 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A dilapidated house with half of the floor flooded by water. You can also see a few clothes hanging
2025-12-23 02:11:10 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:11:10 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A dilapidated house with half of the floor flooded by water. You can also see a few clothes hanging
2025-12-23 02:11:10 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:11:10 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: shot of a street. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:11:10 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:11:10 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A dilapidated house with half of the floor flooded by water. You can also see a few clothes hanging
2025-12-23 02:11:11 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:11:11 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: shot of a street. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:11:11 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:11:11 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A white piece of paper with black letters is hung on the dividing line to warn of dangerous locations
2025-12-23 02:11:11 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:11:11 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A white piece of paper with black letters is hung on the dividing line to warn of dangerous locations
2025-12-23 02:11:11 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:11:11 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A white piece of paper with black letters is hung on the dividing line to warn of dangerous locations
2025-12-23 02:11:12 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-23 02:11:12 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:11:12 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A white piece of paper with black letters is hung on the dividing line to warn of dangerous locations
2025-12-23 02:11:12 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:11:12 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 Q0 results: 0, Q1: 200, Q2: 200
2025-12-23 02:11:12 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 3 stages in 5618.89ms
2025-12-23 02:11:12 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-23 02:11:12 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 3 stages
2025-12-23 02:11:12 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 85 videos with results
2025-12-23 02:11:12 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 88 videos with results
2025-12-23 02:11:12 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 3: 74 videos with results
2025-12-23 02:11:12 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 1 common videos across all stages
2025-12-23 02:11:12 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 0 valid tuples
2025-12-23 02:11:12 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 0 valid tuples
2025-12-23 02:11:28 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 3 stages
2025-12-23 02:11:28 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='c·∫£nh quay m·ªôt ƒë∆∞·ªùng ph·ªë. d·ªçc theo c√°c ng√¥i nh√† c√≥ s·ª£i d√¢y ph√¢n c√°ch', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:11:28 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='m·ªôt t·ªù gi·∫•y tr·∫Øng in ch·ªØ ƒëen ƒë∆∞·ª£c treo tr√™n d√¢y ph√¢n c√°ch ƒë·ªÉ c·∫£nh b√°o ƒë·ªãa ƒëi·ªÉm nguy hi·ªÉm', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:11:28 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='m·ªôt ng√¥i nh√† ƒë·ªï n√°t qu√° n·ª≠a s√†n nh√† b·ªã ng·∫≠p b·ªüi n∆∞·ªõc', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:11:28 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'c·∫£nh quay m·ªôt ƒë∆∞·ªùng ph·ªë. d·ªçc theo c√°c ng√¥i nh√† c√≥ s·ª£i d√¢y ph√¢n c√°ch'
2025-12-23 02:11:29 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c·∫£nh quay m·ªôt ƒë∆∞·ªùng ph·ªë. d·ªçc theo c√°c ng√¥i nh√† c√≥ s·ª£i d√¢y ph√¢n c√°ch' ‚Üí 'shot of a street. Along the houses there is a separating rope'
2025-12-23 02:11:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'shot of a street. Along the houses there is a separating rope'
2025-12-23 02:11:30 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:11:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='shot of a street. Along the houses there is a separating rope', Q1='shot of a street. Along the houses there is a separating rope', Q2='shot of a street. Along the houses there is a separating rope'
2025-12-23 02:11:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'm·ªôt t·ªù gi·∫•y tr·∫Øng in ch·ªØ ƒëen ƒë∆∞·ª£c treo tr√™n d√¢y ph√¢n c√°ch ƒë·ªÉ c·∫£nh b√°o ƒë·ªãa ƒëi·ªÉm nguy hi·ªÉm'
2025-12-23 02:11:30 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'm·ªôt t·ªù gi·∫•y tr·∫Øng in ch·ªØ ƒëen ƒë∆∞·ª£c treo tr√™n d√¢y ph√¢n c√°ch ƒë·ªÉ c·∫£nh b√°o ƒë·ªãa ƒëi·ªÉm nguy hi·ªÉm' ‚Üí 'A white piece of paper with black letters is hung on the dividing line to warn of dangerous locations'
2025-12-23 02:11:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'A white piece of paper with black letters is hung on the dividing line to warn of dangerous locations'
2025-12-23 02:11:31 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:11:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='A white piece of paper with black letters is hung on the dividing line to warn of dangerous locations', Q1='A white piece of paper with black letters is hung on the dividing line to warn of dangerous locations', Q2='A white piece of paper with black letters is hung on the dividing line to warn of dangerous locations'
2025-12-23 02:11:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: 'm·ªôt ng√¥i nh√† ƒë·ªï n√°t qu√° n·ª≠a s√†n nh√† b·ªã ng·∫≠p b·ªüi n∆∞·ªõc'
2025-12-23 02:11:32 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'm·ªôt ng√¥i nh√† ƒë·ªï n√°t qu√° n·ª≠a s√†n nh√† b·ªã ng·∫≠p b·ªüi n∆∞·ªõc' ‚Üí 'A ruined house with half of the floor flooded by water'
2025-12-23 02:11:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 translated: 'A ruined house with half of the floor flooded by water'
2025-12-23 02:11:32 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:11:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 queries: Q0='A ruined house with half of the floor flooded by water', Q1='A ruined house with half of the floor flooded by water', Q2='A ruined house with half of the floor flooded by water'
2025-12-23 02:11:32 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:11:32 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:11:32 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: shot of a street. Along the houses there is a separating rope
2025-12-23 02:11:32 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A white piece of paper with black letters is hung on the dividing line to warn of dangerous locations
2025-12-23 02:11:32 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:11:32 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A white piece of paper with black letters is hung on the dividing line to warn of dangerous locations
2025-12-23 02:11:32 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:11:32 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A ruined house with half of the floor flooded by water
2025-12-23 02:11:32 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:11:32 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A white piece of paper with black letters is hung on the dividing line to warn of dangerous locations
2025-12-23 02:11:32 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:11:32 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A ruined house with half of the floor flooded by water
2025-12-23 02:11:32 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:11:32 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A ruined house with half of the floor flooded by water
2025-12-23 02:11:33 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:11:33 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: shot of a street. Along the houses there is a separating rope
2025-12-23 02:11:33 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:11:33 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A ruined house with half of the floor flooded by water
2025-12-23 02:11:33 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:11:33 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: shot of a street. Along the houses there is a separating rope
2025-12-23 02:11:33 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:11:33 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A ruined house with half of the floor flooded by water
2025-12-23 02:11:34 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:11:34 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A white piece of paper with black letters is hung on the dividing line to warn of dangerous locations
2025-12-23 02:11:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:11:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:11:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 Q0 results: 200, Q1: 0, Q2: 200
2025-12-23 02:11:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 3 stages in 5970.15ms
2025-12-23 02:11:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-23 02:11:34 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 3 stages
2025-12-23 02:11:34 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 85 videos with results
2025-12-23 02:11:34 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 86 videos with results
2025-12-23 02:11:34 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 3: 77 videos with results
2025-12-23 02:11:34 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 3 common videos across all stages
2025-12-23 02:11:34 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 0 valid tuples
2025-12-23 02:11:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 0 valid tuples
2025-12-23 02:11:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 3 stages
2025-12-23 02:11:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='c·∫£nh quay m·ªôt ƒë∆∞·ªùng ph·ªë. d·ªçc theo c√°c ng√¥i nh√† c√≥ s·ª£i d√¢y ph√¢n c√°ch', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:11:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='m·ªôt t·ªù gi·∫•y tr·∫Øng in ch·ªØ ƒëen ƒë∆∞·ª£c treo tr√™n d√¢y ph√¢n c√°ch ƒë·ªÉ c·∫£nh b√°o ƒë·ªãa ƒëi·ªÉm nguy hi·ªÉm', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:11:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='m·ªôt ng√¥i nh√† ƒë·ªï n√°t qu√° n·ª≠a s√†n nh√† b·ªã ng·∫≠p b·ªüi n∆∞·ªõc', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:11:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'c·∫£nh quay m·ªôt ƒë∆∞·ªùng ph·ªë. d·ªçc theo c√°c ng√¥i nh√† c√≥ s·ª£i d√¢y ph√¢n c√°ch'
2025-12-23 02:11:36 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c·∫£nh quay m·ªôt ƒë∆∞·ªùng ph·ªë. d·ªçc theo c√°c ng√¥i nh√† c√≥ s·ª£i d√¢y ph√¢n c√°ch' ‚Üí 'shot of a street. Along the houses there is a separating rope'
2025-12-23 02:11:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'shot of a street. Along the houses there is a separating rope'
2025-12-23 02:11:37 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:11:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='shot of a street. Along the houses there is a separating rope', Q1='shot of a street. Along the houses there is a separating rope', Q2='shot of a street. Along the houses there is a separating rope'
2025-12-23 02:11:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'm·ªôt t·ªù gi·∫•y tr·∫Øng in ch·ªØ ƒëen ƒë∆∞·ª£c treo tr√™n d√¢y ph√¢n c√°ch ƒë·ªÉ c·∫£nh b√°o ƒë·ªãa ƒëi·ªÉm nguy hi·ªÉm'
2025-12-23 02:11:38 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'm·ªôt t·ªù gi·∫•y tr·∫Øng in ch·ªØ ƒëen ƒë∆∞·ª£c treo tr√™n d√¢y ph√¢n c√°ch ƒë·ªÉ c·∫£nh b√°o ƒë·ªãa ƒëi·ªÉm nguy hi·ªÉm' ‚Üí 'A white piece of paper with black letters is hung on the dividing line to warn of dangerous locations'
2025-12-23 02:11:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'A white piece of paper with black letters is hung on the dividing line to warn of dangerous locations'
2025-12-23 02:11:38 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:11:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='A white piece of paper with black letters is hung on the dividing line to warn of dangerous locations', Q1='A white piece of paper with black letters is hung on the dividing line to warn of dangerous locations', Q2='A white piece of paper with black letters is hung on the dividing line to warn of dangerous locations'
2025-12-23 02:11:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: 'm·ªôt ng√¥i nh√† ƒë·ªï n√°t qu√° n·ª≠a s√†n nh√† b·ªã ng·∫≠p b·ªüi n∆∞·ªõc'
2025-12-23 02:11:39 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'm·ªôt ng√¥i nh√† ƒë·ªï n√°t qu√° n·ª≠a s√†n nh√† b·ªã ng·∫≠p b·ªüi n∆∞·ªõc' ‚Üí 'A ruined house with half of the floor flooded by water'
2025-12-23 02:11:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 translated: 'A ruined house with half of the floor flooded by water'
2025-12-23 02:11:39 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:11:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 queries: Q0='A ruined house with half of the floor flooded by water', Q1='A ruined house with half of the floor flooded by water', Q2='A ruined house with half of the floor flooded by water'
2025-12-23 02:11:39 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:11:39 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: shot of a street. Along the houses there is a separating rope
2025-12-23 02:11:39 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:11:39 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A white piece of paper with black letters is hung on the dividing line to warn of dangerous locations
2025-12-23 02:11:39 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:11:39 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:11:39 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A ruined house with half of the floor flooded by water
2025-12-23 02:11:39 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:11:39 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: shot of a street. Along the houses there is a separating rope
2025-12-23 02:11:39 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A ruined house with half of the floor flooded by water
2025-12-23 02:11:39 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:11:39 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: shot of a street. Along the houses there is a separating rope
2025-12-23 02:11:39 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:11:39 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A ruined house with half of the floor flooded by water
2025-12-23 02:11:39 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:11:39 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A ruined house with half of the floor flooded by water
2025-12-23 02:11:39 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:11:39 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: shot of a street. Along the houses there is a separating rope
2025-12-23 02:11:39 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:11:39 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A ruined house with half of the floor flooded by water
2025-12-23 02:11:40 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:11:40 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:11:40 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A ruined house with half of the floor flooded by water
2025-12-23 02:11:40 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A white piece of paper with black letters is hung on the dividing line to warn of dangerous locations
2025-12-23 02:11:40 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:11:40 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: shot of a street. Along the houses there is a separating rope
2025-12-23 02:11:40 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:11:40 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A white piece of paper with black letters is hung on the dividing line to warn of dangerous locations
2025-12-23 02:11:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 Q0 results: 200, Q1: 200, Q2: 0
2025-12-23 02:11:41 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:11:41 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A white piece of paper with black letters is hung on the dividing line to warn of dangerous locations
2025-12-23 02:11:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:11:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-23 02:11:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 3 stages in 5217.80ms
2025-12-23 02:11:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 02:11:41 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 597 unique ids from 3 stages
2025-12-23 02:11:41 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 597 unique ids
2025-12-23 02:11:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 3 stages
2025-12-23 02:11:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='M·ªü ƒë·∫ßu c√≥ th·ªÉ th·∫•y c·∫£nh quay m·ªôt ƒë∆∞·ªùng ph·ªë. d·ªçc theo c√°c ng√¥i nh√† c√≥ s·ª£i d√¢y ph√¢n c√°ch. c√≥ th·ªÉ th·∫•y m·ªôt ti·ªám c·ª≠a h√†ng ƒë·ªì c≈©', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:11:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='Ti·∫øp theo l√† m·ªôt t·ªù gi·∫•y tr·∫Øng in ch·ªØ ƒëen ƒë∆∞·ª£c treo tr√™n d√¢y ph√¢n c√°ch ƒë·ªÉ c·∫£nh b√°o ƒë·ªãa ƒëi·ªÉm nguy hi·ªÉm', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:11:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='C·∫£nh trong m·ªôt ng√¥i nh√† ƒë·ªï n√°t qu√° n·ª≠a s√†n nh√† b·ªã ng·∫≠p b·ªüi n∆∞·ªõc, C√≤n c√≥ th·ªÉ th·∫•y c√≥ v√†i b·ªô ƒë·ªì ƒë∆∞·ª£c treo

', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:11:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'M·ªü ƒë·∫ßu c√≥ th·ªÉ th·∫•y c·∫£nh quay m·ªôt ƒë∆∞·ªùng ph·ªë. d·ªçc theo c√°c ng√¥i nh√† c√≥ s·ª£i d√¢y ph√¢n c√°ch. c√≥ th·ªÉ th·∫•y m·ªôt ti·ªám c·ª≠a h√†ng ƒë·ªì c≈©'
2025-12-23 02:11:45 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'M·ªü ƒë·∫ßu c√≥ th·ªÉ th·∫•y c·∫£nh quay m·ªôt ƒë∆∞·ªùng ph·ªë. d·ªçc theo c√°c ng√¥i nh√† c√≥ s·ª£i d√¢y ph√¢n c√°ch. c√≥ th·ªÉ th·∫•y m·ªôt ti·ªám c·ª≠a h√†ng ƒë·ªì c≈©' ‚Üí 'In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop'
2025-12-23 02:11:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop'
2025-12-23 02:11:46 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:11:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop', Q1='In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop', Q2='In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop'
2025-12-23 02:11:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'Ti·∫øp theo l√† m·ªôt t·ªù gi·∫•y tr·∫Øng in ch·ªØ ƒëen ƒë∆∞·ª£c treo tr√™n d√¢y ph√¢n c√°ch ƒë·ªÉ c·∫£nh b√°o ƒë·ªãa ƒëi·ªÉm nguy hi·ªÉm'
2025-12-23 02:11:47 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'Ti·∫øp theo l√† m·ªôt t·ªù gi·∫•y tr·∫Øng in ch·ªØ ƒëen ƒë∆∞·ª£c treo tr√™n d√¢y ph√¢n c√°ch ƒë·ªÉ c·∫£nh b√°o ƒë·ªãa ƒëi·ªÉm nguy hi·ªÉm' ‚Üí 'Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations'
2025-12-23 02:11:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations'
2025-12-23 02:11:47 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:11:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations', Q1='Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations', Q2='Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations'
2025-12-23 02:11:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: 'C·∫£nh trong m·ªôt ng√¥i nh√† ƒë·ªï n√°t qu√° n·ª≠a s√†n nh√† b·ªã ng·∫≠p b·ªüi n∆∞·ªõc, C√≤n c√≥ th·ªÉ th·∫•y c√≥ v√†i b·ªô ƒë·ªì ƒë∆∞·ª£c treo

'
2025-12-23 02:11:48 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh trong m·ªôt ng√¥i nh√† ƒë·ªï n√°t qu√° n·ª≠a s√†n nh√† b·ªã ng·∫≠p b·ªüi n∆∞·ªõc, C√≤n c√≥ th·ªÉ th·∫•y c√≥ v√†i b·ªô ƒë·ªì ƒë∆∞·ª£c treo

' ‚Üí 'Scene in a ruined house, half of the floor was flooded with water, and a few clothes could be seen hanging'
2025-12-23 02:11:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 translated: 'Scene in a ruined house, half of the floor was flooded with water, and a few clothes could be seen hanging'
2025-12-23 02:11:48 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:11:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 queries: Q0='Scene in a ruined house, half of the floor was flooded with water, and a few clothes could be seen hanging', Q1='Scene in a ruined house, half of the floor was flooded with water, and a few clothes could be seen hanging', Q2='Scene in a ruined house, half of the floor was flooded with water, and a few clothes could be seen hanging'
2025-12-23 02:11:48 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:11:48 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations
2025-12-23 02:11:48 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:11:48 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:11:48 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:11:48 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations
2025-12-23 02:11:48 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:11:48 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Scene in a ruined house, half of the floor was flooded with water, and a few clothes could be seen hanging
2025-12-23 02:11:48 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:11:48 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:11:48 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:11:48 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Scene in a ruined house, half of the floor was flooded with water, and a few clothes could be seen hanging
2025-12-23 02:11:48 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:11:48 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Scene in a ruined house, half of the floor was flooded with water, and a few clothes could be seen hanging
2025-12-23 02:11:49 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:11:49 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:11:49 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:11:49 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Scene in a ruined house, half of the floor was flooded with water, and a few clothes could be seen hanging
2025-12-23 02:11:49 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:11:49 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations
2025-12-23 02:11:49 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:11:49 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Scene in a ruined house, half of the floor was flooded with water, and a few clothes could be seen hanging
2025-12-23 02:11:49 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:11:49 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations
2025-12-23 02:11:49 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:11:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:11:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 Q0 results: 200, Q1: 0, Q2: 200
2025-12-23 02:11:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 3 stages in 5329.08ms
2025-12-23 02:11:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-23 02:11:50 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 3 stages
2025-12-23 02:11:50 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 82 videos with results
2025-12-23 02:11:50 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 89 videos with results
2025-12-23 02:11:50 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 3: 83 videos with results
2025-12-23 02:11:50 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 5 common videos across all stages
2025-12-23 02:11:50 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 0 valid tuples
2025-12-23 02:11:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 0 valid tuples
2025-12-23 02:13:43 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframe/L15/L15_V018/13799.webp
2025-12-23 02:13:43 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframe/L15/L15_V018/13799.webp -> /app/app/data/keyframe/L15/L15_V018/13799.webp
2025-12-23 02:13:44 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 02:13:44 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 02:13:44 - root - INFO - [IMAGE_SEARCH] Result #0: ID=444263, Path=/keyframe/L15/L15_V018/13799.webp, Score=0.9960048198699951
2025-12-23 02:13:44 - root - INFO - [IMAGE_SEARCH] Result #1: ID=444312, Path=/keyframe/L15/L15_V018/15457.webp, Score=0.9600403308868408
2025-12-23 02:13:44 - root - INFO - [IMAGE_SEARCH] Result #2: ID=444317, Path=/keyframe/L15/L15_V018/15657.webp, Score=0.9597482681274414
2025-12-23 02:13:44 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1140.85ms
2025-12-23 02:13:44 - root - INFO - [IMAGE_SEARCH] First result sample: {'id': 444263, 'keyframe_path': '/keyframe/L15/L15_V018/13799.webp', 'score': 0.9960048198699951, 'video': '', 'frame_idx': None}
2025-12-23 02:14:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 3 stages
2025-12-23 02:14:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='M·ªü ƒë·∫ßu c√≥ th·ªÉ th·∫•y c·∫£nh quay m·ªôt ƒë∆∞·ªùng ph·ªë. d·ªçc theo c√°c ng√¥i nh√† c√≥ s·ª£i d√¢y ph√¢n c√°ch. c√≥ th·ªÉ th·∫•y m·ªôt ti·ªám c·ª≠a h√†ng ƒë·ªì c≈©', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:14:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='Ti·∫øp theo l√† m·ªôt t·ªù gi·∫•y tr·∫Øng in ch·ªØ ƒëen ƒë∆∞·ª£c treo tr√™n d√¢y ph√¢n c√°ch ƒë·ªÉ c·∫£nh b√°o ƒë·ªãa ƒëi·ªÉm nguy hi·ªÉm', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:14:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='C·∫£nh trong m·ªôt ng√¥i nh√† ƒë·ªï n√°t qu√° n·ª≠a s√†n nh√† b·ªã ng·∫≠p b·ªüi n∆∞·ªõc, C√≤n c√≥ th·ªÉ th·∫•y c√≥ v√†i b·ªô ƒë·ªì ƒë∆∞·ª£c treo

', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:14:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'M·ªü ƒë·∫ßu c√≥ th·ªÉ th·∫•y c·∫£nh quay m·ªôt ƒë∆∞·ªùng ph·ªë. d·ªçc theo c√°c ng√¥i nh√† c√≥ s·ª£i d√¢y ph√¢n c√°ch. c√≥ th·ªÉ th·∫•y m·ªôt ti·ªám c·ª≠a h√†ng ƒë·ªì c≈©'
2025-12-23 02:14:33 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'M·ªü ƒë·∫ßu c√≥ th·ªÉ th·∫•y c·∫£nh quay m·ªôt ƒë∆∞·ªùng ph·ªë. d·ªçc theo c√°c ng√¥i nh√† c√≥ s·ª£i d√¢y ph√¢n c√°ch. c√≥ th·ªÉ th·∫•y m·ªôt ti·ªám c·ª≠a h√†ng ƒë·ªì c≈©' ‚Üí 'In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop'
2025-12-23 02:14:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop'
2025-12-23 02:14:33 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:14:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop', Q1='In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop', Q2='In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop'
2025-12-23 02:14:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'Ti·∫øp theo l√† m·ªôt t·ªù gi·∫•y tr·∫Øng in ch·ªØ ƒëen ƒë∆∞·ª£c treo tr√™n d√¢y ph√¢n c√°ch ƒë·ªÉ c·∫£nh b√°o ƒë·ªãa ƒëi·ªÉm nguy hi·ªÉm'
2025-12-23 02:14:33 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'Ti·∫øp theo l√† m·ªôt t·ªù gi·∫•y tr·∫Øng in ch·ªØ ƒëen ƒë∆∞·ª£c treo tr√™n d√¢y ph√¢n c√°ch ƒë·ªÉ c·∫£nh b√°o ƒë·ªãa ƒëi·ªÉm nguy hi·ªÉm' ‚Üí 'Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations'
2025-12-23 02:14:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations'
2025-12-23 02:14:33 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:14:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations', Q1='Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations', Q2='Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations'
2025-12-23 02:14:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: 'C·∫£nh trong m·ªôt ng√¥i nh√† ƒë·ªï n√°t qu√° n·ª≠a s√†n nh√† b·ªã ng·∫≠p b·ªüi n∆∞·ªõc, C√≤n c√≥ th·ªÉ th·∫•y c√≥ v√†i b·ªô ƒë·ªì ƒë∆∞·ª£c treo

'
2025-12-23 02:14:34 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh trong m·ªôt ng√¥i nh√† ƒë·ªï n√°t qu√° n·ª≠a s√†n nh√† b·ªã ng·∫≠p b·ªüi n∆∞·ªõc, C√≤n c√≥ th·ªÉ th·∫•y c√≥ v√†i b·ªô ƒë·ªì ƒë∆∞·ª£c treo

' ‚Üí 'Scene in a ruined house, half of the floor was flooded with water, and a few clothes could be seen hanging'
2025-12-23 02:14:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 translated: 'Scene in a ruined house, half of the floor was flooded with water, and a few clothes could be seen hanging'
2025-12-23 02:14:34 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:14:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 queries: Q0='Scene in a ruined house, half of the floor was flooded with water, and a few clothes could be seen hanging', Q1='Scene in a ruined house, half of the floor was flooded with water, and a few clothes could be seen hanging', Q2='Scene in a ruined house, half of the floor was flooded with water, and a few clothes could be seen hanging'
2025-12-23 02:14:34 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:14:34 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations
2025-12-23 02:14:34 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:14:34 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:14:34 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:14:34 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Scene in a ruined house, half of the floor was flooded with water, and a few clothes could be seen hanging
2025-12-23 02:14:34 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:14:34 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Scene in a ruined house, half of the floor was flooded with water, and a few clothes could be seen hanging
2025-12-23 02:14:34 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:14:34 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:14:34 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:14:34 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations
2025-12-23 02:14:34 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:14:34 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Scene in a ruined house, half of the floor was flooded with water, and a few clothes could be seen hanging
2025-12-23 02:14:34 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:14:34 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:14:35 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:14:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations
2025-12-23 02:14:35 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:14:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:14:35 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:14:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: In the beginning, a scene of a street can be seen. Along the houses there is a separating rope. You can see a second-hand shop
2025-12-23 02:14:35 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:14:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Scene in a ruined house, half of the floor was flooded with water, and a few clothes could be seen hanging
2025-12-23 02:14:35 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:14:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Scene in a ruined house, half of the floor was flooded with water, and a few clothes could be seen hanging
2025-12-23 02:14:35 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:14:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Scene in a ruined house, half of the floor was flooded with water, and a few clothes could be seen hanging
2025-12-23 02:14:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:14:36 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:14:36 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Next is a white piece of paper with black letters hung on the dividing line to warn of dangerous locations
2025-12-23 02:14:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-23 02:14:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 0, Q2: 200
2025-12-23 02:14:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 3 stages in 3548.19ms
2025-12-23 02:14:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-23 02:14:36 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 3 stages
2025-12-23 02:14:36 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 79 videos with results
2025-12-23 02:14:36 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 88 videos with results
2025-12-23 02:14:36 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 3: 83 videos with results
2025-12-23 02:14:36 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 2 common videos across all stages
2025-12-23 02:14:36 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 0 valid tuples
2025-12-23 02:14:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 0 valid tuples
2025-12-23 02:15:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 3 stages
2025-12-23 02:15:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='M·ªôt n√©t ƒë·∫πp truy·ªÅn th·ªëng c·ªßa Vi·ªát Nam ƒë∆∞·ª£c l√™n xu h∆∞·ªõng. C√≥ th·ªÉ th·∫•y ng√¥i l√†ng n√†y ƒëang ch√†o ƒë√≥n du kh√°ch', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:15:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:15:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:15:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'M·ªôt n√©t ƒë·∫πp truy·ªÅn th·ªëng c·ªßa Vi·ªát Nam ƒë∆∞·ª£c l√™n xu h∆∞·ªõng. C√≥ th·ªÉ th·∫•y ng√¥i l√†ng n√†y ƒëang ch√†o ƒë√≥n du kh√°ch'
2025-12-23 02:15:46 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'M·ªôt n√©t ƒë·∫πp truy·ªÅn th·ªëng c·ªßa Vi·ªát Nam ƒë∆∞·ª£c l√™n xu h∆∞·ªõng. C√≥ th·ªÉ th·∫•y ng√¥i l√†ng n√†y ƒëang ch√†o ƒë√≥n du kh√°ch' ‚Üí 'A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors'
2025-12-23 02:15:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors'
2025-12-23 02:15:46 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:15:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors', Q1='A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors', Q2='A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors'
2025-12-23 02:15:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 02:15:46 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 02:15:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: ''
2025-12-23 02:15:46 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 3 has no enabled methods
2025-12-23 02:15:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 02:15:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='M·ªôt n√©t ƒë·∫πp truy·ªÅn th·ªëng c·ªßa Vi·ªát Nam ƒë∆∞·ª£c l√™n xu h∆∞·ªõng. C√≥ th·ªÉ th·∫•y ng√¥i l√†ng n√†y ƒëang ch√†o ƒë√≥n du kh√°ch', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:15:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:15:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'M·ªôt n√©t ƒë·∫πp truy·ªÅn th·ªëng c·ªßa Vi·ªát Nam ƒë∆∞·ª£c l√™n xu h∆∞·ªõng. C√≥ th·ªÉ th·∫•y ng√¥i l√†ng n√†y ƒëang ch√†o ƒë√≥n du kh√°ch'
2025-12-23 02:15:46 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:15:46 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors
2025-12-23 02:15:47 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'M·ªôt n√©t ƒë·∫πp truy·ªÅn th·ªëng c·ªßa Vi·ªát Nam ƒë∆∞·ª£c l√™n xu h∆∞·ªõng. C√≥ th·ªÉ th·∫•y ng√¥i l√†ng n√†y ƒëang ch√†o ƒë√≥n du kh√°ch' ‚Üí 'A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors'
2025-12-23 02:15:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors'
2025-12-23 02:15:47 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:15:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors', Q1='A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors', Q2='A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors'
2025-12-23 02:15:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 02:15:47 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 02:15:47 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:15:47 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:15:47 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors
2025-12-23 02:15:47 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors
2025-12-23 02:15:47 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:15:47 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors
2025-12-23 02:15:47 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:15:47 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors
2025-12-23 02:15:47 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:15:47 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors
2025-12-23 02:15:48 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:15:48 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors
2025-12-23 02:15:48 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:15:48 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors
2025-12-23 02:15:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 02:15:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='M·ªôt n√©t ƒë·∫πp truy·ªÅn th·ªëng c·ªßa Vi·ªát Nam ƒë∆∞·ª£c l√™n xu h∆∞·ªõng. C√≥ th·ªÉ th·∫•y ng√¥i l√†ng n√†y ƒëang ch√†o ƒë√≥n du kh√°ch', toggles={'multimodal': False, 'ic': False, 'asr': True, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:15:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:15:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'M·ªôt n√©t ƒë·∫πp truy·ªÅn th·ªëng c·ªßa Vi·ªát Nam ƒë∆∞·ª£c l√™n xu h∆∞·ªõng. C√≥ th·ªÉ th·∫•y ng√¥i l√†ng n√†y ƒëang ch√†o ƒë√≥n du kh√°ch'
2025-12-23 02:15:48 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:15:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='M·ªôt n√©t ƒë·∫πp truy·ªÅn th·ªëng c·ªßa Vi·ªát Nam ƒë∆∞·ª£c l√™n xu h∆∞·ªõng. C√≥ th·ªÉ th·∫•y ng√¥i l√†ng n√†y ƒëang ch√†o ƒë√≥n du kh√°ch', Q1='M·ªôt n√©t ƒë·∫πp truy·ªÅn th·ªëng c·ªßa Vi·ªát Nam ƒë∆∞·ª£c l√™n xu h∆∞·ªõng. C√≥ th·ªÉ th·∫•y ng√¥i l√†ng n√†y ƒëang ch√†o ƒë√≥n du kh√°ch', Q2='M·ªôt n√©t ƒë·∫πp truy·ªÅn th·ªëng c·ªßa Vi·ªát Nam ƒë∆∞·ª£c l√™n xu h∆∞·ªõng. C√≥ th·ªÉ th·∫•y ng√¥i l√†ng n√†y ƒëang ch√†o ƒë√≥n du kh√°ch'
2025-12-23 02:15:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 02:15:48 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 02:15:48 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.120s]
2025-12-23 02:15:48 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.127s]
2025-12-23 02:15:48 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.128s]
2025-12-23 02:15:48 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:15:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:15:48 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors
2025-12-23 02:15:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 420.04ms
2025-12-23 02:15:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 02:15:48 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-23 02:15:48 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-23 02:15:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:15:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 3 stages in 2504.99ms
2025-12-23 02:15:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 02:15:48 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 3 stages
2025-12-23 02:15:48 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-23 02:15:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:15:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 1947.10ms
2025-12-23 02:15:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 02:15:48 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-23 02:15:48 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-23 02:15:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 02:15:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='M·ªôt n√©t ƒë·∫πp truy·ªÅn th·ªëng c·ªßa Vi·ªát Nam ƒë∆∞·ª£c l√™n xu h∆∞·ªõng. C√≥ th·ªÉ th·∫•y ng√¥i l√†ng n√†y ƒëang ch√†o ƒë√≥n du kh√°ch', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:15:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:15:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'M·ªôt n√©t ƒë·∫πp truy·ªÅn th·ªëng c·ªßa Vi·ªát Nam ƒë∆∞·ª£c l√™n xu h∆∞·ªõng. C√≥ th·ªÉ th·∫•y ng√¥i l√†ng n√†y ƒëang ch√†o ƒë√≥n du kh√°ch'
2025-12-23 02:15:53 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'M·ªôt n√©t ƒë·∫πp truy·ªÅn th·ªëng c·ªßa Vi·ªát Nam ƒë∆∞·ª£c l√™n xu h∆∞·ªõng. C√≥ th·ªÉ th·∫•y ng√¥i l√†ng n√†y ƒëang ch√†o ƒë√≥n du kh√°ch' ‚Üí 'A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors'
2025-12-23 02:15:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors'
2025-12-23 02:15:53 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:15:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors', Q1='A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors', Q2='A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors'
2025-12-23 02:15:53 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 02:15:53 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 02:15:54 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:15:54 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors
2025-12-23 02:15:54 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:15:54 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors
2025-12-23 02:15:54 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:15:54 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors
2025-12-23 02:15:55 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:15:55 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2526.11ms
2025-12-23 02:15:55 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 02:15:55 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-23 02:15:55 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-23 02:16:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 02:16:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='M·ªôt n√©t ƒë·∫πp truy·ªÅn th·ªëng c·ªßa Vi·ªát Nam ƒë∆∞·ª£c l√™n xu h∆∞·ªõng. C√≥ th·ªÉ th·∫•y ng√¥i l√†ng n√†y ƒëang ch√†o ƒë√≥n du kh√°ch', toggles={'multimodal': False, 'ic': False, 'asr': True, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:16:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:16:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'M·ªôt n√©t ƒë·∫πp truy·ªÅn th·ªëng c·ªßa Vi·ªát Nam ƒë∆∞·ª£c l√™n xu h∆∞·ªõng. C√≥ th·ªÉ th·∫•y ng√¥i l√†ng n√†y ƒëang ch√†o ƒë√≥n du kh√°ch'
2025-12-23 02:16:19 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:16:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='M·ªôt n√©t ƒë·∫πp truy·ªÅn th·ªëng c·ªßa Vi·ªát Nam ƒë∆∞·ª£c l√™n xu h∆∞·ªõng. C√≥ th·ªÉ th·∫•y ng√¥i l√†ng n√†y ƒëang ch√†o ƒë√≥n du kh√°ch', Q1='M·ªôt n√©t ƒë·∫πp truy·ªÅn th·ªëng c·ªßa Vi·ªát Nam ƒë∆∞·ª£c l√™n xu h∆∞·ªõng. C√≥ th·ªÉ th·∫•y ng√¥i l√†ng n√†y ƒëang ch√†o ƒë√≥n du kh√°ch', Q2='M·ªôt n√©t ƒë·∫πp truy·ªÅn th·ªëng c·ªßa Vi·ªát Nam ƒë∆∞·ª£c l√™n xu h∆∞·ªõng. C√≥ th·ªÉ th·∫•y ng√¥i l√†ng n√†y ƒëang ch√†o ƒë√≥n du kh√°ch'
2025-12-23 02:16:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 02:16:19 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 02:16:19 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.124s]
2025-12-23 02:16:19 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.131s]
2025-12-23 02:16:19 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.138s]
2025-12-23 02:16:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:16:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 402.03ms
2025-12-23 02:16:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 02:16:19 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-23 02:16:19 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-23 02:16:44 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 3 stages
2025-12-23 02:16:44 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='M·ªôt n√©t ƒë·∫πp truy·ªÅn th·ªëng c·ªßa Vi·ªát Nam ƒë∆∞·ª£c l√™n xu h∆∞·ªõng. C√≥ th·ªÉ th·∫•y ng√¥i l√†ng n√†y ƒëang ch√†o ƒë√≥n du kh√°ch', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:16:44 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='C·∫£nh quay t·ª´ tr√™n cao xu·ªëng c√≥ th·ªÉ th·∫•y h√¨nh ·∫£nh thu nh·ªè c·ªßa b·∫£n ƒë·ªì VI·ªát Nam v√† l√° c·ªù vi·ªát Nam. N·ªÅn c·ªßa h√¨nh ·∫£nh thu nh·ªè n√†y ch·ªß y·∫øu l√† m√†u ƒë·ªè', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:16:44 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:16:44 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'M·ªôt n√©t ƒë·∫πp truy·ªÅn th·ªëng c·ªßa Vi·ªát Nam ƒë∆∞·ª£c l√™n xu h∆∞·ªõng. C√≥ th·ªÉ th·∫•y ng√¥i l√†ng n√†y ƒëang ch√†o ƒë√≥n du kh√°ch'
2025-12-23 02:16:45 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'M·ªôt n√©t ƒë·∫πp truy·ªÅn th·ªëng c·ªßa Vi·ªát Nam ƒë∆∞·ª£c l√™n xu h∆∞·ªõng. C√≥ th·ªÉ th·∫•y ng√¥i l√†ng n√†y ƒëang ch√†o ƒë√≥n du kh√°ch' ‚Üí 'A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors'
2025-12-23 02:16:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors'
2025-12-23 02:16:45 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:16:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors', Q1='A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors', Q2='A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors'
2025-12-23 02:16:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'C·∫£nh quay t·ª´ tr√™n cao xu·ªëng c√≥ th·ªÉ th·∫•y h√¨nh ·∫£nh thu nh·ªè c·ªßa b·∫£n ƒë·ªì VI·ªát Nam v√† l√° c·ªù vi·ªát Nam. N·ªÅn c·ªßa h√¨nh ·∫£nh thu nh·ªè n√†y ch·ªß y·∫øu l√† m√†u ƒë·ªè'
2025-12-23 02:16:45 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh quay t·ª´ tr√™n cao xu·ªëng c√≥ th·ªÉ th·∫•y h√¨nh ·∫£nh thu nh·ªè c·ªßa b·∫£n ƒë·ªì VI·ªát Nam v√† l√° c·ªù vi·ªát Nam. N·ªÅn c·ªßa h√¨nh ·∫£nh thu nh·ªè n√†y ch·ªß y·∫øu l√† m√†u ƒë·ªè' ‚Üí 'The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red'
2025-12-23 02:16:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red'
2025-12-23 02:16:45 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:16:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red', Q1='The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red', Q2='The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red'
2025-12-23 02:16:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: ''
2025-12-23 02:16:45 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 3 has no enabled methods
2025-12-23 02:16:46 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:16:46 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red
2025-12-23 02:16:46 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:16:46 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:16:46 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors
2025-12-23 02:16:46 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors
2025-12-23 02:16:46 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:16:46 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red
2025-12-23 02:16:46 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:16:46 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors
2025-12-23 02:16:46 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:16:46 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red
2025-12-23 02:16:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 02:16:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='M·ªôt n√©t ƒë·∫πp truy·ªÅn th·ªëng c·ªßa Vi·ªát Nam ƒë∆∞·ª£c l√™n xu h∆∞·ªõng. C√≥ th·ªÉ th·∫•y ng√¥i l√†ng n√†y ƒëang ch√†o ƒë√≥n du kh√°ch', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:16:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='C·∫£nh quay t·ª´ tr√™n cao xu·ªëng c√≥ th·ªÉ th·∫•y h√¨nh ·∫£nh thu nh·ªè c·ªßa b·∫£n ƒë·ªì VI·ªát Nam v√† l√° c·ªù vi·ªát Nam. N·ªÅn c·ªßa h√¨nh ·∫£nh thu nh·ªè n√†y ch·ªß y·∫øu l√† m√†u ƒë·ªè', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:16:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'M·ªôt n√©t ƒë·∫πp truy·ªÅn th·ªëng c·ªßa Vi·ªát Nam ƒë∆∞·ª£c l√™n xu h∆∞·ªõng. C√≥ th·ªÉ th·∫•y ng√¥i l√†ng n√†y ƒëang ch√†o ƒë√≥n du kh√°ch'
2025-12-23 02:16:46 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:16:46 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors
2025-12-23 02:16:47 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'M·ªôt n√©t ƒë·∫πp truy·ªÅn th·ªëng c·ªßa Vi·ªát Nam ƒë∆∞·ª£c l√™n xu h∆∞·ªõng. C√≥ th·ªÉ th·∫•y ng√¥i l√†ng n√†y ƒëang ch√†o ƒë√≥n du kh√°ch' ‚Üí 'A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors'
2025-12-23 02:16:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors'
2025-12-23 02:16:47 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:16:47 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red
2025-12-23 02:16:47 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:16:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors', Q1='A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors', Q2='A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors'
2025-12-23 02:16:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'C·∫£nh quay t·ª´ tr√™n cao xu·ªëng c√≥ th·ªÉ th·∫•y h√¨nh ·∫£nh thu nh·ªè c·ªßa b·∫£n ƒë·ªì VI·ªát Nam v√† l√° c·ªù vi·ªát Nam. N·ªÅn c·ªßa h√¨nh ·∫£nh thu nh·ªè n√†y ch·ªß y·∫øu l√† m√†u ƒë·ªè'
2025-12-23 02:16:47 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh quay t·ª´ tr√™n cao xu·ªëng c√≥ th·ªÉ th·∫•y h√¨nh ·∫£nh thu nh·ªè c·ªßa b·∫£n ƒë·ªì VI·ªát Nam v√† l√° c·ªù vi·ªát Nam. N·ªÅn c·ªßa h√¨nh ·∫£nh thu nh·ªè n√†y ch·ªß y·∫øu l√† m√†u ƒë·ªè' ‚Üí 'The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red'
2025-12-23 02:16:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red'
2025-12-23 02:16:47 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:16:47 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors
2025-12-23 02:16:47 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:16:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red', Q1='The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red', Q2='The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red'
2025-12-23 02:16:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:16:48 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:16:48 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:16:48 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:16:48 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors
2025-12-23 02:16:48 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red
2025-12-23 02:16:48 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors
2025-12-23 02:16:48 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:16:48 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors
2025-12-23 02:16:48 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:16:48 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors
2025-12-23 02:16:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 0, Q2: 200
2025-12-23 02:16:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 3 stages in 3913.60ms
2025-12-23 02:16:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 02:16:48 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 400 unique ids from 3 stages
2025-12-23 02:16:48 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 400 unique ids
2025-12-23 02:16:48 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:16:48 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors
2025-12-23 02:16:48 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:16:48 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red
2025-12-23 02:16:49 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:16:49 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red
2025-12-23 02:16:49 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:16:49 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red
2025-12-23 02:16:49 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:16:49 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 0
2025-12-23 02:16:49 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3242.78ms
2025-12-23 02:16:49 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 02:16:49 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 400 unique ids from 2 stages
2025-12-23 02:16:49 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 400 unique ids
2025-12-23 02:16:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 3 stages
2025-12-23 02:16:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='M·ªôt n√©t ƒë·∫πp truy·ªÅn th·ªëng c·ªßa Vi·ªát Nam ƒë∆∞·ª£c l√™n xu h∆∞·ªõng. C√≥ th·ªÉ th·∫•y ng√¥i l√†ng n√†y ƒëang ch√†o ƒë√≥n du kh√°ch', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:16:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='C·∫£nh quay t·ª´ tr√™n cao xu·ªëng c√≥ th·ªÉ th·∫•y h√¨nh ·∫£nh thu nh·ªè c·ªßa b·∫£n ƒë·ªì VI·ªát Nam v√† l√° c·ªù vi·ªát Nam. N·ªÅn c·ªßa h√¨nh ·∫£nh thu nh·ªè n√†y ch·ªß y·∫øu l√† m√†u ƒë·ªè

', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:16:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:16:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'M·ªôt n√©t ƒë·∫πp truy·ªÅn th·ªëng c·ªßa Vi·ªát Nam ƒë∆∞·ª£c l√™n xu h∆∞·ªõng. C√≥ th·ªÉ th·∫•y ng√¥i l√†ng n√†y ƒëang ch√†o ƒë√≥n du kh√°ch'
2025-12-23 02:16:58 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'M·ªôt n√©t ƒë·∫πp truy·ªÅn th·ªëng c·ªßa Vi·ªát Nam ƒë∆∞·ª£c l√™n xu h∆∞·ªõng. C√≥ th·ªÉ th·∫•y ng√¥i l√†ng n√†y ƒëang ch√†o ƒë√≥n du kh√°ch' ‚Üí 'A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors'
2025-12-23 02:16:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors'
2025-12-23 02:16:59 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:16:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors', Q1='A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors', Q2='A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors'
2025-12-23 02:16:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'C·∫£nh quay t·ª´ tr√™n cao xu·ªëng c√≥ th·ªÉ th·∫•y h√¨nh ·∫£nh thu nh·ªè c·ªßa b·∫£n ƒë·ªì VI·ªát Nam v√† l√° c·ªù vi·ªát Nam. N·ªÅn c·ªßa h√¨nh ·∫£nh thu nh·ªè n√†y ch·ªß y·∫øu l√† m√†u ƒë·ªè

'
2025-12-23 02:16:59 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh quay t·ª´ tr√™n cao xu·ªëng c√≥ th·ªÉ th·∫•y h√¨nh ·∫£nh thu nh·ªè c·ªßa b·∫£n ƒë·ªì VI·ªát Nam v√† l√° c·ªù vi·ªát Nam. N·ªÅn c·ªßa h√¨nh ·∫£nh thu nh·ªè n√†y ch·ªß y·∫øu l√† m√†u ƒë·ªè

' ‚Üí 'The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red'
2025-12-23 02:16:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red'
2025-12-23 02:16:59 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:16:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red', Q1='The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red', Q2='The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red'
2025-12-23 02:16:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: ''
2025-12-23 02:16:59 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 3 has no enabled methods
2025-12-23 02:16:59 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:16:59 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors
2025-12-23 02:16:59 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:16:59 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red
2025-12-23 02:16:59 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:16:59 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors
2025-12-23 02:17:00 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:17:00 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors
2025-12-23 02:17:00 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:17:00 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors
2025-12-23 02:17:00 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:17:00 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors
2025-12-23 02:17:00 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:17:00 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors
2025-12-23 02:17:00 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:17:00 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red
2025-12-23 02:17:01 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:17:01 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red
2025-12-23 02:17:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 0
2025-12-23 02:17:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 3 stages
2025-12-23 02:17:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='M·ªôt n√©t ƒë·∫πp truy·ªÅn th·ªëng c·ªßa Vi·ªát Nam ƒë∆∞·ª£c l√™n xu h∆∞·ªõng. C√≥ th·ªÉ th·∫•y ng√¥i l√†ng n√†y ƒëang ch√†o ƒë√≥n du kh√°ch', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:17:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='C·∫£nh quay t·ª´ tr√™n cao xu·ªëng c√≥ th·ªÉ th·∫•y h√¨nh ·∫£nh thu nh·ªè c·ªßa b·∫£n ƒë·ªì VI·ªát Nam v√† l√° c·ªù vi·ªát Nam. N·ªÅn c·ªßa h√¨nh ·∫£nh thu nh·ªè n√†y ch·ªß y·∫øu l√† m√†u ƒë·ªè', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:17:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:17:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'M·ªôt n√©t ƒë·∫πp truy·ªÅn th·ªëng c·ªßa Vi·ªát Nam ƒë∆∞·ª£c l√™n xu h∆∞·ªõng. C√≥ th·ªÉ th·∫•y ng√¥i l√†ng n√†y ƒëang ch√†o ƒë√≥n du kh√°ch'
2025-12-23 02:17:01 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'M·ªôt n√©t ƒë·∫πp truy·ªÅn th·ªëng c·ªßa Vi·ªát Nam ƒë∆∞·ª£c l√™n xu h∆∞·ªõng. C√≥ th·ªÉ th·∫•y ng√¥i l√†ng n√†y ƒëang ch√†o ƒë√≥n du kh√°ch' ‚Üí 'A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors'
2025-12-23 02:17:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors'
2025-12-23 02:17:02 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:17:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors', Q1='A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors', Q2='A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors'
2025-12-23 02:17:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'C·∫£nh quay t·ª´ tr√™n cao xu·ªëng c√≥ th·ªÉ th·∫•y h√¨nh ·∫£nh thu nh·ªè c·ªßa b·∫£n ƒë·ªì VI·ªát Nam v√† l√° c·ªù vi·ªát Nam. N·ªÅn c·ªßa h√¨nh ·∫£nh thu nh·ªè n√†y ch·ªß y·∫øu l√† m√†u ƒë·ªè'
2025-12-23 02:17:02 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh quay t·ª´ tr√™n cao xu·ªëng c√≥ th·ªÉ th·∫•y h√¨nh ·∫£nh thu nh·ªè c·ªßa b·∫£n ƒë·ªì VI·ªát Nam v√† l√° c·ªù vi·ªát Nam. N·ªÅn c·ªßa h√¨nh ·∫£nh thu nh·ªè n√†y ch·ªß y·∫øu l√† m√†u ƒë·ªè' ‚Üí 'The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red'
2025-12-23 02:17:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red'
2025-12-23 02:17:02 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:17:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red', Q1='The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red', Q2='The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red'
2025-12-23 02:17:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: ''
2025-12-23 02:17:02 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 3 has no enabled methods
2025-12-23 02:17:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:17:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 3 stages in 4065.39ms
2025-12-23 02:17:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 02:17:02 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 400 unique ids from 3 stages
2025-12-23 02:17:02 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 400 unique ids
2025-12-23 02:17:02 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:17:02 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors
2025-12-23 02:17:02 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:17:02 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors
2025-12-23 02:17:02 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:17:02 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red
2025-12-23 02:17:03 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:17:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors
2025-12-23 02:17:03 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:17:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red
2025-12-23 02:17:03 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:17:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors
2025-12-23 02:17:03 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:17:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red
2025-12-23 02:17:03 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:17:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors
2025-12-23 02:17:04 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:17:04 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors
2025-12-23 02:17:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-23 02:17:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:17:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 3 stages in 3045.82ms
2025-12-23 02:17:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-23 02:17:04 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 3 stages
2025-12-23 02:17:04 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 82 videos with results
2025-12-23 02:17:04 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 112 videos with results
2025-12-23 02:17:04 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 3: 0 videos with results
2025-12-23 02:17:04 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] No common videos across all stages
2025-12-23 02:17:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 0 valid tuples
2025-12-23 02:17:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 3 stages
2025-12-23 02:17:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='M·ªôt n√©t ƒë·∫πp truy·ªÅn th·ªëng c·ªßa Vi·ªát Nam ƒë∆∞·ª£c l√™n xu h∆∞·ªõng. C√≥ th·ªÉ th·∫•y ng√¥i l√†ng n√†y ƒëang ch√†o ƒë√≥n du kh√°ch', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:17:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='C·∫£nh quay t·ª´ tr√™n cao xu·ªëng c√≥ th·ªÉ th·∫•y h√¨nh ·∫£nh thu nh·ªè c·ªßa b·∫£n ƒë·ªì VI·ªát Nam v√† l√° c·ªù vi·ªát Nam. N·ªÅn c·ªßa h√¨nh ·∫£nh thu nh·ªè n√†y ch·ªß y·∫øu l√† m√†u ƒë·ªè

', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:17:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:17:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'M·ªôt n√©t ƒë·∫πp truy·ªÅn th·ªëng c·ªßa Vi·ªát Nam ƒë∆∞·ª£c l√™n xu h∆∞·ªõng. C√≥ th·ªÉ th·∫•y ng√¥i l√†ng n√†y ƒëang ch√†o ƒë√≥n du kh√°ch'
2025-12-23 02:17:06 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'M·ªôt n√©t ƒë·∫πp truy·ªÅn th·ªëng c·ªßa Vi·ªát Nam ƒë∆∞·ª£c l√™n xu h∆∞·ªõng. C√≥ th·ªÉ th·∫•y ng√¥i l√†ng n√†y ƒëang ch√†o ƒë√≥n du kh√°ch' ‚Üí 'A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors'
2025-12-23 02:17:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors'
2025-12-23 02:17:06 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:17:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors', Q1='A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors', Q2='A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors'
2025-12-23 02:17:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'C·∫£nh quay t·ª´ tr√™n cao xu·ªëng c√≥ th·ªÉ th·∫•y h√¨nh ·∫£nh thu nh·ªè c·ªßa b·∫£n ƒë·ªì VI·ªát Nam v√† l√° c·ªù vi·ªát Nam. N·ªÅn c·ªßa h√¨nh ·∫£nh thu nh·ªè n√†y ch·ªß y·∫øu l√† m√†u ƒë·ªè

'
2025-12-23 02:17:06 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh quay t·ª´ tr√™n cao xu·ªëng c√≥ th·ªÉ th·∫•y h√¨nh ·∫£nh thu nh·ªè c·ªßa b·∫£n ƒë·ªì VI·ªát Nam v√† l√° c·ªù vi·ªát Nam. N·ªÅn c·ªßa h√¨nh ·∫£nh thu nh·ªè n√†y ch·ªß y·∫øu l√† m√†u ƒë·ªè

' ‚Üí 'The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red'
2025-12-23 02:17:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red'
2025-12-23 02:17:07 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:17:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red', Q1='The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red', Q2='The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red'
2025-12-23 02:17:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: ''
2025-12-23 02:17:07 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 3 has no enabled methods
2025-12-23 02:17:07 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:17:07 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors
2025-12-23 02:17:07 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:17:07 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:17:07 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red
2025-12-23 02:17:07 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors
2025-12-23 02:17:07 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:17:07 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors
2025-12-23 02:17:07 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:17:07 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors
2025-12-23 02:17:07 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:17:07 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors
2025-12-23 02:17:08 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:17:08 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red
2025-12-23 02:17:08 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:17:08 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red
2025-12-23 02:17:08 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:17:08 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A traditional Vietnamese beauty is trending. This village can be seen welcoming visitors
2025-12-23 02:17:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 0
2025-12-23 02:17:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:17:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 3 stages in 3035.13ms
2025-12-23 02:17:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-23 02:17:09 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 3 stages
2025-12-23 02:17:09 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 73 videos with results
2025-12-23 02:17:09 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 109 videos with results
2025-12-23 02:17:09 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 3: 0 videos with results
2025-12-23 02:17:09 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] No common videos across all stages
2025-12-23 02:17:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 0 valid tuples
2025-12-23 02:17:15 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 3 stages
2025-12-23 02:17:15 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='ng√¥i l√†ng n√†y ƒëang ch√†o ƒë√≥n du kh√°ch', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:17:15 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='C·∫£nh quay t·ª´ tr√™n cao xu·ªëng c√≥ th·ªÉ th·∫•y h√¨nh ·∫£nh thu nh·ªè c·ªßa b·∫£n ƒë·ªì VI·ªát Nam v√† l√° c·ªù vi·ªát Nam. N·ªÅn c·ªßa h√¨nh ·∫£nh thu nh·ªè n√†y ch·ªß y·∫øu l√† m√†u ƒë·ªè', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:17:15 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:17:15 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'ng√¥i l√†ng n√†y ƒëang ch√†o ƒë√≥n du kh√°ch'
2025-12-23 02:17:16 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'ng√¥i l√†ng n√†y ƒëang ch√†o ƒë√≥n du kh√°ch' ‚Üí 'This village is welcoming visitors'
2025-12-23 02:17:16 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'This village is welcoming visitors'
2025-12-23 02:17:17 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:17:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='This village is welcoming visitors', Q1='This village is welcoming visitors', Q2='This village is welcoming visitors'
2025-12-23 02:17:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'C·∫£nh quay t·ª´ tr√™n cao xu·ªëng c√≥ th·ªÉ th·∫•y h√¨nh ·∫£nh thu nh·ªè c·ªßa b·∫£n ƒë·ªì VI·ªát Nam v√† l√° c·ªù vi·ªát Nam. N·ªÅn c·ªßa h√¨nh ·∫£nh thu nh·ªè n√†y ch·ªß y·∫øu l√† m√†u ƒë·ªè'
2025-12-23 02:17:17 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh quay t·ª´ tr√™n cao xu·ªëng c√≥ th·ªÉ th·∫•y h√¨nh ·∫£nh thu nh·ªè c·ªßa b·∫£n ƒë·ªì VI·ªát Nam v√† l√° c·ªù vi·ªát Nam. N·ªÅn c·ªßa h√¨nh ·∫£nh thu nh·ªè n√†y ch·ªß y·∫øu l√† m√†u ƒë·ªè' ‚Üí 'The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red'
2025-12-23 02:17:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red'
2025-12-23 02:17:17 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:17:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red', Q1='The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red', Q2='The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red'
2025-12-23 02:17:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: ''
2025-12-23 02:17:17 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 3 has no enabled methods
2025-12-23 02:17:17 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:17:17 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: This village is welcoming visitors
2025-12-23 02:17:17 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:17:17 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:17:17 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red
2025-12-23 02:17:17 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: This village is welcoming visitors
2025-12-23 02:17:18 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:17:18 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: This village is welcoming visitors
2025-12-23 02:17:18 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:17:18 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: This village is welcoming visitors
2025-12-23 02:17:18 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:17:18 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: This village is welcoming visitors
2025-12-23 02:17:18 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:17:18 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red
2025-12-23 02:17:18 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:17:18 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red
2025-12-23 02:17:19 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:17:19 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red
2025-12-23 02:17:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:17:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 0
2025-12-23 02:17:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 3 stages in 3947.41ms
2025-12-23 02:17:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-23 02:17:19 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 3 stages
2025-12-23 02:17:19 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 75 videos with results
2025-12-23 02:17:19 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 107 videos with results
2025-12-23 02:17:19 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 3: 0 videos with results
2025-12-23 02:17:19 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] No common videos across all stages
2025-12-23 02:17:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 0 valid tuples
2025-12-23 02:17:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 3 stages
2025-12-23 02:17:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='ng√¥i l√†ng n√†y ƒëang ch√†o ƒë√≥n du kh√°ch', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:17:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='h√¨nh ·∫£nh thu nh·ªè c·ªßa b·∫£n ƒë·ªì VI·ªát Nam v√† l√° c·ªù vi·ªát Nam. N·ªÅn c·ªßa h√¨nh ·∫£nh thu nh·ªè n√†y ch·ªß y·∫øu l√† m√†u ƒë·ªè', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:17:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:17:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'ng√¥i l√†ng n√†y ƒëang ch√†o ƒë√≥n du kh√°ch'
2025-12-23 02:17:26 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'ng√¥i l√†ng n√†y ƒëang ch√†o ƒë√≥n du kh√°ch' ‚Üí 'This village is welcoming visitors'
2025-12-23 02:17:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'This village is welcoming visitors'
2025-12-23 02:17:26 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:17:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='This village is welcoming visitors', Q1='This village is welcoming visitors', Q2='This village is welcoming visitors'
2025-12-23 02:17:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'h√¨nh ·∫£nh thu nh·ªè c·ªßa b·∫£n ƒë·ªì VI·ªát Nam v√† l√° c·ªù vi·ªát Nam. N·ªÅn c·ªßa h√¨nh ·∫£nh thu nh·ªè n√†y ch·ªß y·∫øu l√† m√†u ƒë·ªè'
2025-12-23 02:17:27 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'h√¨nh ·∫£nh thu nh·ªè c·ªßa b·∫£n ƒë·ªì VI·ªát Nam v√† l√° c·ªù vi·ªát Nam. N·ªÅn c·ªßa h√¨nh ·∫£nh thu nh·ªè n√†y ch·ªß y·∫øu l√† m√†u ƒë·ªè' ‚Üí 'Thumbnail image of Vietnam map and Vietnamese flag. The background of this thumbnail image is mostly red'
2025-12-23 02:17:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'Thumbnail image of Vietnam map and Vietnamese flag. The background of this thumbnail image is mostly red'
2025-12-23 02:17:27 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:17:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='Thumbnail image of Vietnam map and Vietnamese flag. The background of this thumbnail image is mostly red', Q1='Thumbnail image of Vietnam map and Vietnamese flag. The background of this thumbnail image is mostly red', Q2='Thumbnail image of Vietnam map and Vietnamese flag. The background of this thumbnail image is mostly red'
2025-12-23 02:17:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: ''
2025-12-23 02:17:27 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 3 has no enabled methods
2025-12-23 02:17:27 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:17:27 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: This village is welcoming visitors
2025-12-23 02:17:27 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:17:27 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: This village is welcoming visitors
2025-12-23 02:17:27 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:17:27 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Thumbnail image of Vietnam map and Vietnamese flag. The background of this thumbnail image is mostly red
2025-12-23 02:17:28 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:17:28 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: This village is welcoming visitors
2025-12-23 02:17:28 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:17:28 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Thumbnail image of Vietnam map and Vietnamese flag. The background of this thumbnail image is mostly red
2025-12-23 02:17:28 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:17:28 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: This village is welcoming visitors
2025-12-23 02:17:28 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:17:28 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: This village is welcoming visitors
2025-12-23 02:17:28 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:17:28 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Thumbnail image of Vietnam map and Vietnamese flag. The background of this thumbnail image is mostly red
2025-12-23 02:17:29 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:17:29 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: This village is welcoming visitors
2025-12-23 02:17:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 0
2025-12-23 02:17:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:17:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 3 stages in 4027.98ms
2025-12-23 02:17:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-23 02:17:29 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 3 stages
2025-12-23 02:17:29 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 83 videos with results
2025-12-23 02:17:29 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 145 videos with results
2025-12-23 02:17:29 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 3: 0 videos with results
2025-12-23 02:17:29 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] No common videos across all stages
2025-12-23 02:17:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 0 valid tuples
2025-12-23 02:17:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 3 stages
2025-12-23 02:17:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='ng√¥i l√†ng n√†y ƒëang ch√†o ƒë√≥n du kh√°ch', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:17:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='C·∫£nh quay t·ª´ tr√™n cao xu·ªëng c√≥ th·ªÉ th·∫•y h√¨nh ·∫£nh thu nh·ªè c·ªßa b·∫£n ƒë·ªì VI·ªát Nam v√† l√° c·ªù vi·ªát Nam.', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:17:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:17:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'ng√¥i l√†ng n√†y ƒëang ch√†o ƒë√≥n du kh√°ch'
2025-12-23 02:17:34 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'ng√¥i l√†ng n√†y ƒëang ch√†o ƒë√≥n du kh√°ch' ‚Üí 'This village is welcoming visitors'
2025-12-23 02:17:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'This village is welcoming visitors'
2025-12-23 02:17:34 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:17:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='This village is welcoming visitors', Q1='This village is welcoming visitors', Q2='This village is welcoming visitors'
2025-12-23 02:17:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'C·∫£nh quay t·ª´ tr√™n cao xu·ªëng c√≥ th·ªÉ th·∫•y h√¨nh ·∫£nh thu nh·ªè c·ªßa b·∫£n ƒë·ªì VI·ªát Nam v√† l√° c·ªù vi·ªát Nam.'
2025-12-23 02:17:35 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh quay t·ª´ tr√™n cao xu·ªëng c√≥ th·ªÉ th·∫•y h√¨nh ·∫£nh thu nh·ªè c·ªßa b·∫£n ƒë·ªì VI·ªát Nam v√† l√° c·ªù vi·ªát Nam.' ‚Üí 'The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag.'
2025-12-23 02:17:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag.'
2025-12-23 02:17:35 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:17:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag.', Q1='The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag.', Q2='The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag.'
2025-12-23 02:17:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: ''
2025-12-23 02:17:35 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 3 has no enabled methods
2025-12-23 02:17:35 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:17:35 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:17:35 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:17:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: This village is welcoming visitors
2025-12-23 02:17:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag.
2025-12-23 02:17:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: This village is welcoming visitors
2025-12-23 02:17:35 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:17:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: This village is welcoming visitors
2025-12-23 02:17:35 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:17:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: This village is welcoming visitors
2025-12-23 02:17:36 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:17:36 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: This village is welcoming visitors
2025-12-23 02:17:36 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:17:36 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag.
2025-12-23 02:17:36 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:17:36 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag.
2025-12-23 02:17:36 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:17:36 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: This village is welcoming visitors
2025-12-23 02:17:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-23 02:17:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:17:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 3 stages in 3241.02ms
2025-12-23 02:17:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-23 02:17:37 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 3 stages
2025-12-23 02:17:37 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 75 videos with results
2025-12-23 02:17:37 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 68 videos with results
2025-12-23 02:17:37 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 3: 0 videos with results
2025-12-23 02:17:37 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] No common videos across all stages
2025-12-23 02:17:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 0 valid tuples
2025-12-23 02:17:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 3 stages
2025-12-23 02:17:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='ng√¥i l√†ng n√†y ƒëang ch√†o ƒë√≥n du kh√°ch', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:17:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='C·∫£nh quay t·ª´ tr√™n cao xu·ªëng c√≥ th·ªÉ th·∫•y h√¨nh ·∫£nh thu nh·ªè c·ªßa b·∫£n ƒë·ªì VI·ªát Nam v√† l√° c·ªù vi·ªát Nam.', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:17:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:17:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'ng√¥i l√†ng n√†y ƒëang ch√†o ƒë√≥n du kh√°ch'
2025-12-23 02:17:38 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'ng√¥i l√†ng n√†y ƒëang ch√†o ƒë√≥n du kh√°ch' ‚Üí 'This village is welcoming visitors'
2025-12-23 02:17:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'This village is welcoming visitors'
2025-12-23 02:17:39 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:17:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='This village is welcoming visitors', Q1='This village is welcoming visitors', Q2='This village is welcoming visitors'
2025-12-23 02:17:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'C·∫£nh quay t·ª´ tr√™n cao xu·ªëng c√≥ th·ªÉ th·∫•y h√¨nh ·∫£nh thu nh·ªè c·ªßa b·∫£n ƒë·ªì VI·ªát Nam v√† l√° c·ªù vi·ªát Nam.'
2025-12-23 02:17:39 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh quay t·ª´ tr√™n cao xu·ªëng c√≥ th·ªÉ th·∫•y h√¨nh ·∫£nh thu nh·ªè c·ªßa b·∫£n ƒë·ªì VI·ªát Nam v√† l√° c·ªù vi·ªát Nam.' ‚Üí 'The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag.'
2025-12-23 02:17:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag.'
2025-12-23 02:17:39 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:17:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag.', Q1='The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag.', Q2='The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag.'
2025-12-23 02:17:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: ''
2025-12-23 02:17:39 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 3 has no enabled methods
2025-12-23 02:17:39 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:17:39 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: This village is welcoming visitors
2025-12-23 02:17:39 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:17:39 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:17:39 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: This village is welcoming visitors
2025-12-23 02:17:39 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag.
2025-12-23 02:17:40 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:17:40 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: This village is welcoming visitors
2025-12-23 02:17:40 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:17:40 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag.
2025-12-23 02:17:40 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:17:40 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: This village is welcoming visitors
2025-12-23 02:17:40 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:17:40 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag.
2025-12-23 02:17:40 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:17:40 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: This village is welcoming visitors
2025-12-23 02:17:41 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:17:41 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: This village is welcoming visitors
2025-12-23 02:17:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-23 02:17:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:17:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 3 stages in 3066.37ms
2025-12-23 02:17:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 02:17:41 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 400 unique ids from 3 stages
2025-12-23 02:17:41 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 400 unique ids
2025-12-23 02:20:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 3 stages
2025-12-23 02:20:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='ph·ªèng v·∫•n m·ªôt ng∆∞·ªùi l√†m trong l√†ng ngh·ªÅ n√†y. C√≥ th·ªÉ th·∫•y c√¥ ƒëang ng·ªìi x·ªïm v√† ƒë·ªôi n√≥n l√°', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:20:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:20:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:20:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'ph·ªèng v·∫•n m·ªôt ng∆∞·ªùi l√†m trong l√†ng ngh·ªÅ n√†y. C√≥ th·ªÉ th·∫•y c√¥ ƒëang ng·ªìi x·ªïm v√† ƒë·ªôi n√≥n l√°'
2025-12-23 02:20:47 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'ph·ªèng v·∫•n m·ªôt ng∆∞·ªùi l√†m trong l√†ng ngh·ªÅ n√†y. C√≥ th·ªÉ th·∫•y c√¥ ƒëang ng·ªìi x·ªïm v√† ƒë·ªôi n√≥n l√°' ‚Üí 'Interview someone who works in this craft village. She can be seen squatting and wearing a conical hat'
2025-12-23 02:20:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'Interview someone who works in this craft village. She can be seen squatting and wearing a conical hat'
2025-12-23 02:20:47 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:20:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='Interview someone who works in this craft village. She can be seen squatting and wearing a conical hat', Q1='Interview someone who works in this craft village. She can be seen squatting and wearing a conical hat', Q2='Interview someone who works in this craft village. She can be seen squatting and wearing a conical hat'
2025-12-23 02:20:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 02:20:47 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 02:20:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: ''
2025-12-23 02:20:47 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 3 has no enabled methods
2025-12-23 02:20:47 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:20:47 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:20:47 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Interview someone who works in this craft village. She can be seen squatting and wearing a conical hat
2025-12-23 02:20:47 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Interview someone who works in this craft village. She can be seen squatting and wearing a conical hat
2025-12-23 02:20:48 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:20:48 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Interview someone who works in this craft village. She can be seen squatting and wearing a conical hat
2025-12-23 02:20:48 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:20:48 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Interview someone who works in this craft village. She can be seen squatting and wearing a conical hat
2025-12-23 02:20:48 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:20:48 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Interview someone who works in this craft village. She can be seen squatting and wearing a conical hat
2025-12-23 02:20:49 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:20:49 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Interview someone who works in this craft village. She can be seen squatting and wearing a conical hat
2025-12-23 02:20:49 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 0
2025-12-23 02:20:49 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 3 stages in 3195.56ms
2025-12-23 02:20:49 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 02:20:49 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 3 stages
2025-12-23 02:20:49 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-23 02:22:24 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='C·∫£nh quay t·ª´ m·ªôt chi·∫øc ƒëi·ªán tho·∫°i, c√≥ th·ªÉ th·∫•y ƒë·ªëng ƒë·ªï n√°t nghi ng√∫t kh√≥i v√† c√≥ m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o xanh bi·ªÉn\n\n\n', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 02:22:24 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-23 02:22:24 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-23 02:22:24 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-23 02:22:26 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh quay t·ª´ m·ªôt chi·∫øc ƒëi·ªán tho·∫°i, c√≥ th·ªÉ th·∫•y ƒë·ªëng ƒë·ªï n√°t nghi ng√∫t kh√≥i v√† c√≥ m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o xanh bi·ªÉn' ‚Üí 'Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.'
2025-12-23 02:22:26 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.'
2025-12-23 02:22:26 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-23 02:22:29 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 175589:1.0000, 337104:0.9100, 675222:0.8970, 609598:0.8466, 141007:0.8155, 675202:0.8141, 675199:0.7735, 675201:0.7621, 464879:0.7555, 346543:0.7465
2025-12-23 02:22:29 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 141016:1.0000, 234753:0.9866, 346525:0.8972, 65036:0.8955, 174409:0.7988, 141008:0.7944, 41927:0.7813, 174293:0.7583, 251065:0.7343, 346526:0.6900
2025-12-23 02:22:29 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 9228:1.0000, 674872:0.8275, 675222:0.8106, 9227:0.7579, 141006:0.7381, 675175:0.6815, 61387:0.6293, 501394:0.6236, 112555:0.6074, 643103:0.6023
2025-12-23 02:22:29 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 174293:1.0000, 234753:0.9457, 141016:0.8883, 675222:0.8398, 65036:0.7569, 346525:0.7490, 141008:0.7415, 174409:0.7091, 41927:0.6133, 234747:0.5931
2025-12-23 02:22:29 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-23 02:22:29 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-23 02:22:29 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 02:22:29 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='C·∫£nh quay t·ª´ tr√™n cao xu·ªëng c√≥ th·ªÉ th·∫•y h√¨nh ·∫£nh thu nh·ªè c·ªßa b·∫£n ƒë·ªì VI·ªát Nam v√† l√° c·ªù vi·ªát Nam. N·ªÅn c·ªßa h√¨nh ·∫£nh thu nh·ªè n√†y ch·ªß y·∫øu l√† m√†u ƒë·ªè\n\n', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 02:22:29 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-23 02:22:29 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-23 02:22:29 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-23 02:22:29 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh quay t·ª´ tr√™n cao xu·ªëng c√≥ th·ªÉ th·∫•y h√¨nh ·∫£nh thu nh·ªè c·ªßa b·∫£n ƒë·ªì VI·ªát Nam v√† l√° c·ªù vi·ªát Nam. N·ªÅn c·ªßa h√¨nh ·∫£nh thu nh·ªè n√†y ch·ªß y·∫øu l√† m√†u ƒë·ªè' ‚Üí 'The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red'
2025-12-23 02:22:29 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red'
2025-12-23 02:22:29 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-23 02:22:30 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:22:30 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red
2025-12-23 02:22:30 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:22:30 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red
2025-12-23 02:22:30 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:22:30 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red
2025-12-23 02:22:30 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-23 02:22:30 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-23 02:22:30 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-23 02:22:30 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-23 02:22:30 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-23 02:22:30 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-23 02:22:30 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 02:22:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 3 stages
2025-12-23 02:22:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='m·ªôt chi·∫øc ƒëi·ªán tho·∫°i, c√≥ th·ªÉ th·∫•y ƒë·ªëng ƒë·ªï n√°t nghi ng√∫t kh√≥i v√† c√≥ m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o xanh bi·ªÉn', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:22:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:22:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:22:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'm·ªôt chi·∫øc ƒëi·ªán tho·∫°i, c√≥ th·ªÉ th·∫•y ƒë·ªëng ƒë·ªï n√°t nghi ng√∫t kh√≥i v√† c√≥ m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o xanh bi·ªÉn'
2025-12-23 02:22:32 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'm·ªôt chi·∫øc ƒëi·ªán tho·∫°i, c√≥ th·ªÉ th·∫•y ƒë·ªëng ƒë·ªï n√°t nghi ng√∫t kh√≥i v√† c√≥ m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o xanh bi·ªÉn' ‚Üí 'a phone, smoking ruins could be seen and there was a man wearing a blue shirt'
2025-12-23 02:22:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'a phone, smoking ruins could be seen and there was a man wearing a blue shirt'
2025-12-23 02:22:32 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:22:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='a phone, smoking ruins could be seen and there was a man wearing a blue shirt', Q1='a phone, smoking ruins could be seen and there was a man wearing a blue shirt', Q2='a phone, smoking ruins could be seen and there was a man wearing a blue shirt'
2025-12-23 02:22:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 02:22:32 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 02:22:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: ''
2025-12-23 02:22:32 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 3 has no enabled methods
2025-12-23 02:22:33 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='C·∫£nh quay t·ª´ tr√™n cao xu·ªëng c√≥ th·ªÉ th·∫•y h√¨nh ·∫£nh thu nh·ªè c·ªßa b·∫£n ƒë·ªì VI·ªát Nam v√† l√° c·ªù vi·ªát Nam. N·ªÅn c·ªßa h√¨nh ·∫£nh thu nh·ªè n√†y ch·ªß y·∫øu l√† m√†u ƒë·ªè\n\n', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 02:22:33 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-23 02:22:33 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-23 02:22:33 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-23 02:22:33 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:22:33 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: a phone, smoking ruins could be seen and there was a man wearing a blue shirt
2025-12-23 02:22:33 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh quay t·ª´ tr√™n cao xu·ªëng c√≥ th·ªÉ th·∫•y h√¨nh ·∫£nh thu nh·ªè c·ªßa b·∫£n ƒë·ªì VI·ªát Nam v√† l√° c·ªù vi·ªát Nam. N·ªÅn c·ªßa h√¨nh ·∫£nh thu nh·ªè n√†y ch·ªß y·∫øu l√† m√†u ƒë·ªè' ‚Üí 'The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red'
2025-12-23 02:22:33 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red'
2025-12-23 02:22:33 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-23 02:22:33 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:22:33 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red
2025-12-23 02:22:33 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:22:33 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: a phone, smoking ruins could be seen and there was a man wearing a blue shirt
2025-12-23 02:22:33 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:22:33 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red
2025-12-23 02:22:34 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:22:34 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red
2025-12-23 02:22:34 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-23 02:22:34 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-23 02:22:34 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-23 02:22:34 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-23 02:22:34 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-23 02:22:34 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-23 02:22:34 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 02:22:35 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:22:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: a phone, smoking ruins could be seen and there was a man wearing a blue shirt
2025-12-23 02:22:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:22:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 3 stages in 4234.37ms
2025-12-23 02:22:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 02:22:35 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 3 stages
2025-12-23 02:22:35 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-23 02:22:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 02:22:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='C·∫£nh quay t·ª´ tr√™n cao xu·ªëng c√≥ th·ªÉ th·∫•y h√¨nh ·∫£nh thu nh·ªè c·ªßa b·∫£n ƒë·ªì VI·ªát Nam v√† l√° c·ªù vi·ªát Nam. N·ªÅn c·ªßa h√¨nh ·∫£nh thu nh·ªè n√†y ch·ªß y·∫øu l√† m√†u ƒë·ªè

', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:22:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:22:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'C·∫£nh quay t·ª´ tr√™n cao xu·ªëng c√≥ th·ªÉ th·∫•y h√¨nh ·∫£nh thu nh·ªè c·ªßa b·∫£n ƒë·ªì VI·ªát Nam v√† l√° c·ªù vi·ªát Nam. N·ªÅn c·ªßa h√¨nh ·∫£nh thu nh·ªè n√†y ch·ªß y·∫øu l√† m√†u ƒë·ªè

'
2025-12-23 02:22:35 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh quay t·ª´ tr√™n cao xu·ªëng c√≥ th·ªÉ th·∫•y h√¨nh ·∫£nh thu nh·ªè c·ªßa b·∫£n ƒë·ªì VI·ªát Nam v√† l√° c·ªù vi·ªát Nam. N·ªÅn c·ªßa h√¨nh ·∫£nh thu nh·ªè n√†y ch·ªß y·∫øu l√† m√†u ƒë·ªè

' ‚Üí 'The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red'
2025-12-23 02:22:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red'
2025-12-23 02:22:36 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:22:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red', Q1='The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red', Q2='The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red'
2025-12-23 02:22:36 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 02:22:36 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 02:22:36 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:22:36 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red
2025-12-23 02:22:37 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:22:37 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red
2025-12-23 02:22:37 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:22:37 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The scene shot from above can see a miniature image of the map of Vietnam and the Vietnamese flag. The background of this thumbnail image is mostly red
2025-12-23 02:22:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:22:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2624.32ms
2025-12-23 02:22:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 02:22:38 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-23 02:22:38 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-23 02:22:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 3 stages
2025-12-23 02:22:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='c√≥ th·ªÉ th·∫•y ƒë·ªëng ƒë·ªï n√°t nghi ng√∫t kh√≥i v√† c√≥ m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o xanh bi·ªÉn', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:22:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:22:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:22:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'c√≥ th·ªÉ th·∫•y ƒë·ªëng ƒë·ªï n√°t nghi ng√∫t kh√≥i v√† c√≥ m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o xanh bi·ªÉn'
2025-12-23 02:22:38 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c√≥ th·ªÉ th·∫•y ƒë·ªëng ƒë·ªï n√°t nghi ng√∫t kh√≥i v√† c√≥ m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o xanh bi·ªÉn' ‚Üí 'Smoking ruins could be seen and there was a man wearing a blue shirt'
2025-12-23 02:22:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'Smoking ruins could be seen and there was a man wearing a blue shirt'
2025-12-23 02:22:39 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:22:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='Smoking ruins could be seen and there was a man wearing a blue shirt', Q1='Smoking ruins could be seen and there was a man wearing a blue shirt', Q2='Smoking ruins could be seen and there was a man wearing a blue shirt'
2025-12-23 02:22:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 02:22:39 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 02:22:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: ''
2025-12-23 02:22:39 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 3 has no enabled methods
2025-12-23 02:22:39 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:22:39 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Smoking ruins could be seen and there was a man wearing a blue shirt
2025-12-23 02:22:39 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:22:39 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Smoking ruins could be seen and there was a man wearing a blue shirt
2025-12-23 02:22:39 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:22:39 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Smoking ruins could be seen and there was a man wearing a blue shirt
2025-12-23 02:22:39 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:22:39 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Smoking ruins could be seen and there was a man wearing a blue shirt
2025-12-23 02:22:40 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:22:40 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Smoking ruins could be seen and there was a man wearing a blue shirt
2025-12-23 02:22:40 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:22:40 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Smoking ruins could be seen and there was a man wearing a blue shirt
2025-12-23 02:22:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-23 02:22:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 3 stages in 2636.49ms
2025-12-23 02:22:40 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 02:22:40 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 3 stages
2025-12-23 02:22:40 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-23 02:22:44 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='C·∫£nh quay t·ª´ m·ªôt chi·∫øc ƒëi·ªán tho·∫°i, c√≥ th·ªÉ th·∫•y ƒë·ªëng ƒë·ªï n√°t nghi ng√∫t kh√≥i v√† c√≥ m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o xanh bi·ªÉn\n\n', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 02:22:44 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-23 02:22:44 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-23 02:22:44 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-23 02:22:44 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh quay t·ª´ m·ªôt chi·∫øc ƒëi·ªán tho·∫°i, c√≥ th·ªÉ th·∫•y ƒë·ªëng ƒë·ªï n√°t nghi ng√∫t kh√≥i v√† c√≥ m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o xanh bi·ªÉn' ‚Üí 'Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.'
2025-12-23 02:22:44 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.'
2025-12-23 02:22:44 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-23 02:22:46 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 175589:1.0000, 337104:0.9100, 675222:0.8970, 609598:0.8466, 141007:0.8155, 675202:0.8141, 675199:0.7735, 675201:0.7621, 464879:0.7555, 346543:0.7465
2025-12-23 02:22:46 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 141016:1.0000, 234753:0.9866, 346525:0.8972, 65036:0.8955, 174409:0.7988, 141008:0.7944, 41927:0.7813, 174293:0.7583, 251065:0.7343, 346526:0.6900
2025-12-23 02:22:46 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 9228:1.0000, 674872:0.8275, 675222:0.8106, 9227:0.7579, 141006:0.7381, 675175:0.6815, 61387:0.6293, 501394:0.6236, 112555:0.6074, 643103:0.6023
2025-12-23 02:22:46 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 174293:1.0000, 234753:0.9457, 141016:0.8883, 675222:0.8398, 65036:0.7569, 346525:0.7490, 141008:0.7415, 174409:0.7091, 41927:0.6133, 234747:0.5931
2025-12-23 02:22:46 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-23 02:22:46 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-23 02:22:46 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 02:22:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 3 stages
2025-12-23 02:22:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='m·ªôt chi·∫øc ƒëi·ªán tho·∫°i, c√≥ th·ªÉ th·∫•y ƒë·ªëng ƒë·ªï n√°t nghi ng√∫t kh√≥i v√† c√≥ m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o xanh bi·ªÉn', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:22:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:22:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:22:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'm·ªôt chi·∫øc ƒëi·ªán tho·∫°i, c√≥ th·ªÉ th·∫•y ƒë·ªëng ƒë·ªï n√°t nghi ng√∫t kh√≥i v√† c√≥ m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o xanh bi·ªÉn'
2025-12-23 02:22:47 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'm·ªôt chi·∫øc ƒëi·ªán tho·∫°i, c√≥ th·ªÉ th·∫•y ƒë·ªëng ƒë·ªï n√°t nghi ng√∫t kh√≥i v√† c√≥ m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o xanh bi·ªÉn' ‚Üí 'a phone, smoking ruins could be seen and there was a man wearing a blue shirt'
2025-12-23 02:22:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'a phone, smoking ruins could be seen and there was a man wearing a blue shirt'
2025-12-23 02:22:47 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:22:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='a phone, smoking ruins could be seen and there was a man wearing a blue shirt', Q1='a phone, smoking ruins could be seen and there was a man wearing a blue shirt', Q2='a phone, smoking ruins could be seen and there was a man wearing a blue shirt'
2025-12-23 02:22:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 02:22:47 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 02:22:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: ''
2025-12-23 02:22:47 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 3 has no enabled methods
2025-12-23 02:22:48 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:22:48 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: a phone, smoking ruins could be seen and there was a man wearing a blue shirt
2025-12-23 02:22:48 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:22:48 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: a phone, smoking ruins could be seen and there was a man wearing a blue shirt
2025-12-23 02:22:48 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:22:48 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: a phone, smoking ruins could be seen and there was a man wearing a blue shirt
2025-12-23 02:22:48 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:22:48 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: a phone, smoking ruins could be seen and there was a man wearing a blue shirt
2025-12-23 02:22:48 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:22:48 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: a phone, smoking ruins could be seen and there was a man wearing a blue shirt
2025-12-23 02:22:49 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:22:49 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: a phone, smoking ruins could be seen and there was a man wearing a blue shirt
2025-12-23 02:22:49 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-23 02:22:49 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 3 stages in 2092.49ms
2025-12-23 02:22:49 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 02:22:49 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 3 stages
2025-12-23 02:22:49 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-23 02:23:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 02:23:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='C·∫£nh quay t·ª´ m·ªôt chi·∫øc ƒëi·ªán tho·∫°i, c√≥ th·ªÉ th·∫•y ƒë·ªëng ƒë·ªï n√°t nghi ng√∫t kh√≥i v√† c√≥ m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o xanh bi·ªÉn


', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:23:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='·∫£nh quay ti·∫øp theo ƒë√≥ chuy·ªÉn t·ª´ ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o ƒëen ƒëang ch·ªâ c·ª≠a s·ªï t·ªõi c·∫£nh tr∆∞·ªõc hi√™n nh√† ƒëi ra tr∆∞·ªõc c·ªïng c√≥ th·ªÉ th·∫•y m·ªôt chi·∫øc xe √¥ t√¥ v√† m·ªôt c√°i c·∫ßn c·∫©u', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:23:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'C·∫£nh quay t·ª´ m·ªôt chi·∫øc ƒëi·ªán tho·∫°i, c√≥ th·ªÉ th·∫•y ƒë·ªëng ƒë·ªï n√°t nghi ng√∫t kh√≥i v√† c√≥ m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o xanh bi·ªÉn


'
2025-12-23 02:23:33 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh quay t·ª´ m·ªôt chi·∫øc ƒëi·ªán tho·∫°i, c√≥ th·ªÉ th·∫•y ƒë·ªëng ƒë·ªï n√°t nghi ng√∫t kh√≥i v√† c√≥ m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o xanh bi·ªÉn


' ‚Üí 'Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.'
2025-12-23 02:23:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.'
2025-12-23 02:23:33 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:23:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.', Q1='Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.', Q2='Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.'
2025-12-23 02:23:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: '·∫£nh quay ti·∫øp theo ƒë√≥ chuy·ªÉn t·ª´ ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o ƒëen ƒëang ch·ªâ c·ª≠a s·ªï t·ªõi c·∫£nh tr∆∞·ªõc hi√™n nh√† ƒëi ra tr∆∞·ªõc c·ªïng c√≥ th·ªÉ th·∫•y m·ªôt chi·∫øc xe √¥ t√¥ v√† m·ªôt c√°i c·∫ßn c·∫©u'
2025-12-23 02:23:34 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: '·∫£nh quay ti·∫øp theo ƒë√≥ chuy·ªÉn t·ª´ ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o ƒëen ƒëang ch·ªâ c·ª≠a s·ªï t·ªõi c·∫£nh tr∆∞·ªõc hi√™n nh√† ƒëi ra tr∆∞·ªõc c·ªïng c√≥ th·ªÉ th·∫•y m·ªôt chi·∫øc xe √¥ t√¥ v√† m·ªôt c√°i c·∫ßn c·∫©u' ‚Üí 'The next shot then moves from the man in black pointing to the window to the front porch and to the front gate where you can see a car and a crane.'
2025-12-23 02:23:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'The next shot then moves from the man in black pointing to the window to the front porch and to the front gate where you can see a car and a crane.'
2025-12-23 02:23:34 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:23:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='The next shot then moves from the man in black pointing to the window to the front porch and to the front gate where you can see a car and a crane.', Q1='The next shot then moves from the man in black pointing to the window to the front porch and to the front gate where you can see a car and a crane.', Q2='The next shot then moves from the man in black pointing to the window to the front porch and to the front gate where you can see a car and a crane.'
2025-12-23 02:23:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 02:23:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='C·∫£nh quay t·ª´ m·ªôt chi·∫øc ƒëi·ªán tho·∫°i, c√≥ th·ªÉ th·∫•y ƒë·ªëng ƒë·ªï n√°t nghi ng√∫t kh√≥i v√† c√≥ m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o xanh bi·ªÉn

', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:23:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='C·∫£nh quay ti·∫øp theo ƒë√≥ chuy·ªÉn t·ª´ ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o ƒëen ƒëang ch·ªâ c·ª≠a s·ªï t·ªõi c·∫£nh tr∆∞·ªõc hi√™n nh√† ƒëi ra tr∆∞·ªõc c·ªïng c√≥ th·ªÉ th·∫•y m·ªôt chi·∫øc xe √¥ t√¥ v√† m·ªôt c√°i c·∫ßn c·∫©u

', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:23:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'C·∫£nh quay t·ª´ m·ªôt chi·∫øc ƒëi·ªán tho·∫°i, c√≥ th·ªÉ th·∫•y ƒë·ªëng ƒë·ªï n√°t nghi ng√∫t kh√≥i v√† c√≥ m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o xanh bi·ªÉn

'
2025-12-23 02:23:35 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:23:35 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:23:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.
2025-12-23 02:23:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The next shot then moves from the man in black pointing to the window to the front porch and to the front gate where you can see a car and a crane.
2025-12-23 02:23:35 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:23:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The next shot then moves from the man in black pointing to the window to the front porch and to the front gate where you can see a car and a crane.
2025-12-23 02:23:35 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh quay t·ª´ m·ªôt chi·∫øc ƒëi·ªán tho·∫°i, c√≥ th·ªÉ th·∫•y ƒë·ªëng ƒë·ªï n√°t nghi ng√∫t kh√≥i v√† c√≥ m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o xanh bi·ªÉn

' ‚Üí 'Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.'
2025-12-23 02:23:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.'
2025-12-23 02:23:35 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:23:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The next shot then moves from the man in black pointing to the window to the front porch and to the front gate where you can see a car and a crane.
2025-12-23 02:23:35 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:23:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.', Q1='Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.', Q2='Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.'
2025-12-23 02:23:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'C·∫£nh quay ti·∫øp theo ƒë√≥ chuy·ªÉn t·ª´ ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o ƒëen ƒëang ch·ªâ c·ª≠a s·ªï t·ªõi c·∫£nh tr∆∞·ªõc hi√™n nh√† ƒëi ra tr∆∞·ªõc c·ªïng c√≥ th·ªÉ th·∫•y m·ªôt chi·∫øc xe √¥ t√¥ v√† m·ªôt c√°i c·∫ßn c·∫©u

'
2025-12-23 02:23:35 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:23:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.
2025-12-23 02:23:35 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:23:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The next shot then moves from the man in black pointing to the window to the front porch and to the front gate where you can see a car and a crane.
2025-12-23 02:23:35 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:23:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.
2025-12-23 02:23:35 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:23:35 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The next shot then moves from the man in black pointing to the window to the front porch and to the front gate where you can see a car and a crane.
2025-12-23 02:23:36 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:23:36 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.
2025-12-23 02:23:37 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh quay ti·∫øp theo ƒë√≥ chuy·ªÉn t·ª´ ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o ƒëen ƒëang ch·ªâ c·ª≠a s·ªï t·ªõi c·∫£nh tr∆∞·ªõc hi√™n nh√† ƒëi ra tr∆∞·ªõc c·ªïng c√≥ th·ªÉ th·∫•y m·ªôt chi·∫øc xe √¥ t√¥ v√† m·ªôt c√°i c·∫ßn c·∫©u

' ‚Üí 'The next shot moves from the man in black pointing to the window to the front porch and out to the front gate where you can see a car and a crane.'
2025-12-23 02:23:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'The next shot moves from the man in black pointing to the window to the front porch and out to the front gate where you can see a car and a crane.'
2025-12-23 02:23:37 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:23:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='The next shot moves from the man in black pointing to the window to the front porch and out to the front gate where you can see a car and a crane.', Q1='The next shot moves from the man in black pointing to the window to the front porch and out to the front gate where you can see a car and a crane.', Q2='The next shot moves from the man in black pointing to the window to the front porch and out to the front gate where you can see a car and a crane.'
2025-12-23 02:23:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:23:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:23:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 5226.82ms
2025-12-23 02:23:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 02:23:37 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 400 unique ids from 2 stages
2025-12-23 02:23:37 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 400 unique ids
2025-12-23 02:23:37 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:23:37 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.
2025-12-23 02:23:37 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:23:37 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The next shot moves from the man in black pointing to the window to the front porch and out to the front gate where you can see a car and a crane.
2025-12-23 02:23:37 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:23:37 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The next shot moves from the man in black pointing to the window to the front porch and out to the front gate where you can see a car and a crane.
2025-12-23 02:23:37 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:23:37 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The next shot moves from the man in black pointing to the window to the front porch and out to the front gate where you can see a car and a crane.
2025-12-23 02:23:38 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:23:38 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.
2025-12-23 02:23:38 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:23:38 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:23:38 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.
2025-12-23 02:23:38 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The next shot moves from the man in black pointing to the window to the front porch and out to the front gate where you can see a car and a crane.
2025-12-23 02:23:38 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:23:38 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The next shot moves from the man in black pointing to the window to the front porch and out to the front gate where you can see a car and a crane.
2025-12-23 02:23:39 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:23:39 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.
2025-12-23 02:23:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:23:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:23:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 4369.91ms
2025-12-23 02:23:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 02:23:39 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 400 unique ids from 2 stages
2025-12-23 02:23:39 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 400 unique ids
2025-12-23 02:23:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 3 stages
2025-12-23 02:23:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='m·ªôt chi·∫øc ƒëi·ªán tho·∫°i, c√≥ th·ªÉ th·∫•y ƒë·ªëng ƒë·ªï n√°t nghi ng√∫t kh√≥i v√† c√≥ m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o xanh bi·ªÉn', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:23:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='chuy·ªÉn t·ª´ ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o ƒëen ƒëang ch·ªâ c·ª≠a s·ªï t·ªõi c·∫£nh tr∆∞·ªõc hi√™n nh√† ƒëi ra tr∆∞·ªõc c·ªïng c√≥ th·ªÉ th·∫•y m·ªôt chi·∫øc xe √¥ t√¥ v√† m·ªôt c√°i c·∫ßn c·∫©u', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:23:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:23:46 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'm·ªôt chi·∫øc ƒëi·ªán tho·∫°i, c√≥ th·ªÉ th·∫•y ƒë·ªëng ƒë·ªï n√°t nghi ng√∫t kh√≥i v√† c√≥ m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o xanh bi·ªÉn'
2025-12-23 02:23:47 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'm·ªôt chi·∫øc ƒëi·ªán tho·∫°i, c√≥ th·ªÉ th·∫•y ƒë·ªëng ƒë·ªï n√°t nghi ng√∫t kh√≥i v√† c√≥ m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o xanh bi·ªÉn' ‚Üí 'a phone, smoking ruins could be seen and there was a man wearing a blue shirt'
2025-12-23 02:23:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'a phone, smoking ruins could be seen and there was a man wearing a blue shirt'
2025-12-23 02:23:47 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:23:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='a phone, smoking ruins could be seen and there was a man wearing a blue shirt', Q1='a phone, smoking ruins could be seen and there was a man wearing a blue shirt', Q2='a phone, smoking ruins could be seen and there was a man wearing a blue shirt'
2025-12-23 02:23:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'chuy·ªÉn t·ª´ ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o ƒëen ƒëang ch·ªâ c·ª≠a s·ªï t·ªõi c·∫£nh tr∆∞·ªõc hi√™n nh√† ƒëi ra tr∆∞·ªõc c·ªïng c√≥ th·ªÉ th·∫•y m·ªôt chi·∫øc xe √¥ t√¥ v√† m·ªôt c√°i c·∫ßn c·∫©u'
2025-12-23 02:23:49 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'chuy·ªÉn t·ª´ ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o ƒëen ƒëang ch·ªâ c·ª≠a s·ªï t·ªõi c·∫£nh tr∆∞·ªõc hi√™n nh√† ƒëi ra tr∆∞·ªõc c·ªïng c√≥ th·ªÉ th·∫•y m·ªôt chi·∫øc xe √¥ t√¥ v√† m·ªôt c√°i c·∫ßn c·∫©u' ‚Üí 'Moving from the man in black pointing to the window to the front porch, going to the front gate, you can see a car and a crane.'
2025-12-23 02:23:49 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'Moving from the man in black pointing to the window to the front porch, going to the front gate, you can see a car and a crane.'
2025-12-23 02:23:49 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:23:49 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='Moving from the man in black pointing to the window to the front porch, going to the front gate, you can see a car and a crane.', Q1='Moving from the man in black pointing to the window to the front porch, going to the front gate, you can see a car and a crane.', Q2='Moving from the man in black pointing to the window to the front porch, going to the front gate, you can see a car and a crane.'
2025-12-23 02:23:49 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: ''
2025-12-23 02:23:49 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 3 has no enabled methods
2025-12-23 02:23:49 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:23:49 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Moving from the man in black pointing to the window to the front porch, going to the front gate, you can see a car and a crane.
2025-12-23 02:23:49 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:23:49 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: a phone, smoking ruins could be seen and there was a man wearing a blue shirt
2025-12-23 02:23:49 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:23:49 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Moving from the man in black pointing to the window to the front porch, going to the front gate, you can see a car and a crane.
2025-12-23 02:23:49 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:23:49 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: a phone, smoking ruins could be seen and there was a man wearing a blue shirt
2025-12-23 02:23:50 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:23:50 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: a phone, smoking ruins could be seen and there was a man wearing a blue shirt
2025-12-23 02:23:50 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:23:50 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Moving from the man in black pointing to the window to the front porch, going to the front gate, you can see a car and a crane.
2025-12-23 02:23:50 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:23:50 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Moving from the man in black pointing to the window to the front porch, going to the front gate, you can see a car and a crane.
2025-12-23 02:23:50 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:23:50 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: a phone, smoking ruins could be seen and there was a man wearing a blue shirt
2025-12-23 02:23:51 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:23:51 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: a phone, smoking ruins could be seen and there was a man wearing a blue shirt
2025-12-23 02:23:51 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:23:51 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:23:51 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 3 stages in 4289.59ms
2025-12-23 02:23:51 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 02:23:51 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 400 unique ids from 3 stages
2025-12-23 02:23:51 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 400 unique ids
2025-12-23 02:24:15 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 3 stages
2025-12-23 02:24:15 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='m·ªôt chi·∫øc ƒëi·ªán tho·∫°i, c√≥ th·ªÉ th·∫•y ƒë·ªëng ƒë·ªï n√°t nghi ng√∫t kh√≥i v√† c√≥ m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o xanh bi·ªÉn', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:24:15 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='chuy·ªÉn t·ª´ ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o ƒëen ƒëang ch·ªâ c·ª≠a s·ªï t·ªõi c·∫£nh tr∆∞·ªõc hi√™n nh√† ƒëi ra tr∆∞·ªõc c·ªïng c√≥ th·ªÉ th·∫•y m·ªôt chi·∫øc xe √¥ t√¥ v√† m·ªôt c√°i c·∫ßn c·∫©u', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:24:15 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:24:15 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'm·ªôt chi·∫øc ƒëi·ªán tho·∫°i, c√≥ th·ªÉ th·∫•y ƒë·ªëng ƒë·ªï n√°t nghi ng√∫t kh√≥i v√† c√≥ m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o xanh bi·ªÉn'
2025-12-23 02:24:15 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'm·ªôt chi·∫øc ƒëi·ªán tho·∫°i, c√≥ th·ªÉ th·∫•y ƒë·ªëng ƒë·ªï n√°t nghi ng√∫t kh√≥i v√† c√≥ m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o xanh bi·ªÉn' ‚Üí 'a phone, smoking ruins could be seen and there was a man wearing a blue shirt'
2025-12-23 02:24:15 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'a phone, smoking ruins could be seen and there was a man wearing a blue shirt'
2025-12-23 02:24:15 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:24:15 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='a phone, smoking ruins could be seen and there was a man wearing a blue shirt', Q1='a phone, smoking ruins could be seen and there was a man wearing a blue shirt', Q2='a phone, smoking ruins could be seen and there was a man wearing a blue shirt'
2025-12-23 02:24:15 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'chuy·ªÉn t·ª´ ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o ƒëen ƒëang ch·ªâ c·ª≠a s·ªï t·ªõi c·∫£nh tr∆∞·ªõc hi√™n nh√† ƒëi ra tr∆∞·ªõc c·ªïng c√≥ th·ªÉ th·∫•y m·ªôt chi·∫øc xe √¥ t√¥ v√† m·ªôt c√°i c·∫ßn c·∫©u'
2025-12-23 02:24:16 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'chuy·ªÉn t·ª´ ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o ƒëen ƒëang ch·ªâ c·ª≠a s·ªï t·ªõi c·∫£nh tr∆∞·ªõc hi√™n nh√† ƒëi ra tr∆∞·ªõc c·ªïng c√≥ th·ªÉ th·∫•y m·ªôt chi·∫øc xe √¥ t√¥ v√† m·ªôt c√°i c·∫ßn c·∫©u' ‚Üí 'Moving from the man in black pointing to the window to the front porch, going to the front gate, you can see a car and a crane.'
2025-12-23 02:24:16 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'Moving from the man in black pointing to the window to the front porch, going to the front gate, you can see a car and a crane.'
2025-12-23 02:24:16 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:24:16 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='Moving from the man in black pointing to the window to the front porch, going to the front gate, you can see a car and a crane.', Q1='Moving from the man in black pointing to the window to the front porch, going to the front gate, you can see a car and a crane.', Q2='Moving from the man in black pointing to the window to the front porch, going to the front gate, you can see a car and a crane.'
2025-12-23 02:24:16 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: ''
2025-12-23 02:24:16 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 3 has no enabled methods
2025-12-23 02:24:16 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:24:16 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:24:16 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: a phone, smoking ruins could be seen and there was a man wearing a blue shirt
2025-12-23 02:24:16 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Moving from the man in black pointing to the window to the front porch, going to the front gate, you can see a car and a crane.
2025-12-23 02:24:16 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:24:16 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Moving from the man in black pointing to the window to the front porch, going to the front gate, you can see a car and a crane.
2025-12-23 02:24:16 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:24:16 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Moving from the man in black pointing to the window to the front porch, going to the front gate, you can see a car and a crane.
2025-12-23 02:24:17 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:24:17 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: a phone, smoking ruins could be seen and there was a man wearing a blue shirt
2025-12-23 02:24:17 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:24:17 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: a phone, smoking ruins could be seen and there was a man wearing a blue shirt
2025-12-23 02:24:17 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:24:17 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: a phone, smoking ruins could be seen and there was a man wearing a blue shirt
2025-12-23 02:24:17 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:24:17 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: a phone, smoking ruins could be seen and there was a man wearing a blue shirt
2025-12-23 02:24:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:24:17 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:24:17 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Moving from the man in black pointing to the window to the front porch, going to the front gate, you can see a car and a crane.
2025-12-23 02:24:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:24:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 3 stages in 2622.06ms
2025-12-23 02:24:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-23 02:24:17 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 3 stages
2025-12-23 02:24:17 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 96 videos with results
2025-12-23 02:24:17 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 93 videos with results
2025-12-23 02:24:17 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 3: 0 videos with results
2025-12-23 02:24:17 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] No common videos across all stages
2025-12-23 02:24:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 0 valid tuples
2025-12-23 02:24:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 3 stages
2025-12-23 02:24:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='m·ªôt chi·∫øc ƒëi·ªán tho·∫°i, c√≥ th·ªÉ th·∫•y ƒë·ªëng ƒë·ªï n√°t nghi ng√∫t kh√≥i v√† c√≥ m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o xanh bi·ªÉn', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:24:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='chuy·ªÉn t·ª´ ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o ƒëen ƒëang ch·ªâ c·ª≠a s·ªï t·ªõi c·∫£nh tr∆∞·ªõc hi√™n nh√† ƒëi ra tr∆∞·ªõc c·ªïng c√≥ th·ªÉ th·∫•y m·ªôt chi·∫øc xe √¥ t√¥ v√† m·ªôt c√°i c·∫ßn c·∫©u', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:24:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:24:19 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'm·ªôt chi·∫øc ƒëi·ªán tho·∫°i, c√≥ th·ªÉ th·∫•y ƒë·ªëng ƒë·ªï n√°t nghi ng√∫t kh√≥i v√† c√≥ m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o xanh bi·ªÉn'
2025-12-23 02:24:20 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'm·ªôt chi·∫øc ƒëi·ªán tho·∫°i, c√≥ th·ªÉ th·∫•y ƒë·ªëng ƒë·ªï n√°t nghi ng√∫t kh√≥i v√† c√≥ m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o xanh bi·ªÉn' ‚Üí 'a phone, smoking ruins could be seen and there was a man wearing a blue shirt'
2025-12-23 02:24:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'a phone, smoking ruins could be seen and there was a man wearing a blue shirt'
2025-12-23 02:24:20 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:24:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='a phone, smoking ruins could be seen and there was a man wearing a blue shirt', Q1='a phone, smoking ruins could be seen and there was a man wearing a blue shirt', Q2='a phone, smoking ruins could be seen and there was a man wearing a blue shirt'
2025-12-23 02:24:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'chuy·ªÉn t·ª´ ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o ƒëen ƒëang ch·ªâ c·ª≠a s·ªï t·ªõi c·∫£nh tr∆∞·ªõc hi√™n nh√† ƒëi ra tr∆∞·ªõc c·ªïng c√≥ th·ªÉ th·∫•y m·ªôt chi·∫øc xe √¥ t√¥ v√† m·ªôt c√°i c·∫ßn c·∫©u'
2025-12-23 02:24:20 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'chuy·ªÉn t·ª´ ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o ƒëen ƒëang ch·ªâ c·ª≠a s·ªï t·ªõi c·∫£nh tr∆∞·ªõc hi√™n nh√† ƒëi ra tr∆∞·ªõc c·ªïng c√≥ th·ªÉ th·∫•y m·ªôt chi·∫øc xe √¥ t√¥ v√† m·ªôt c√°i c·∫ßn c·∫©u' ‚Üí 'Moving from the man in black pointing to the window to the front porch, going to the front gate, you can see a car and a crane.'
2025-12-23 02:24:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'Moving from the man in black pointing to the window to the front porch, going to the front gate, you can see a car and a crane.'
2025-12-23 02:24:20 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:24:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='Moving from the man in black pointing to the window to the front porch, going to the front gate, you can see a car and a crane.', Q1='Moving from the man in black pointing to the window to the front porch, going to the front gate, you can see a car and a crane.', Q2='Moving from the man in black pointing to the window to the front porch, going to the front gate, you can see a car and a crane.'
2025-12-23 02:24:20 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: ''
2025-12-23 02:24:20 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 3 has no enabled methods
2025-12-23 02:24:20 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:24:20 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:24:20 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Moving from the man in black pointing to the window to the front porch, going to the front gate, you can see a car and a crane.
2025-12-23 02:24:20 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:24:20 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Moving from the man in black pointing to the window to the front porch, going to the front gate, you can see a car and a crane.
2025-12-23 02:24:20 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: a phone, smoking ruins could be seen and there was a man wearing a blue shirt
2025-12-23 02:24:21 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:24:21 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Moving from the man in black pointing to the window to the front porch, going to the front gate, you can see a car and a crane.
2025-12-23 02:24:21 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:24:21 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: a phone, smoking ruins could be seen and there was a man wearing a blue shirt
2025-12-23 02:24:21 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:24:21 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Moving from the man in black pointing to the window to the front porch, going to the front gate, you can see a car and a crane.
2025-12-23 02:24:21 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:24:21 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Moving from the man in black pointing to the window to the front porch, going to the front gate, you can see a car and a crane.
2025-12-23 02:24:21 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:24:21 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: a phone, smoking ruins could be seen and there was a man wearing a blue shirt
2025-12-23 02:24:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:24:22 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:24:22 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: a phone, smoking ruins could be seen and there was a man wearing a blue shirt
2025-12-23 02:24:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:24:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 3 stages in 2493.47ms
2025-12-23 02:24:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 02:24:22 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 400 unique ids from 3 stages
2025-12-23 02:24:22 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 400 unique ids
2025-12-23 02:24:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 3 stages
2025-12-23 02:24:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='m·ªôt chi·∫øc ƒëi·ªán tho·∫°i, c√≥ th·ªÉ th·∫•y ƒë·ªëng ƒë·ªï n√°t nghi ng√∫t kh√≥i v√† c√≥ m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o xanh bi·ªÉn', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:24:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='chuy·ªÉn t·ª´ ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o ƒëen ƒëang ch·ªâ c·ª≠a s·ªï t·ªõi c·∫£nh tr∆∞·ªõc hi√™n nh√† ƒëi ra tr∆∞·ªõc c·ªïng c√≥ th·ªÉ th·∫•y m·ªôt chi·∫øc xe √¥ t√¥ v√† m·ªôt c√°i c·∫ßn c·∫©u', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:24:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='2 chi·∫øc xe m√°y m√†u tr·∫Øng v√† m·ªôt chi·∫øc xe m√°y m√†u ƒëen', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:24:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'm·ªôt chi·∫øc ƒëi·ªán tho·∫°i, c√≥ th·ªÉ th·∫•y ƒë·ªëng ƒë·ªï n√°t nghi ng√∫t kh√≥i v√† c√≥ m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o xanh bi·ªÉn'
2025-12-23 02:24:29 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'm·ªôt chi·∫øc ƒëi·ªán tho·∫°i, c√≥ th·ªÉ th·∫•y ƒë·ªëng ƒë·ªï n√°t nghi ng√∫t kh√≥i v√† c√≥ m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o xanh bi·ªÉn' ‚Üí 'a phone, smoking ruins could be seen and there was a man wearing a blue shirt'
2025-12-23 02:24:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'a phone, smoking ruins could be seen and there was a man wearing a blue shirt'
2025-12-23 02:24:29 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:24:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='a phone, smoking ruins could be seen and there was a man wearing a blue shirt', Q1='a phone, smoking ruins could be seen and there was a man wearing a blue shirt', Q2='a phone, smoking ruins could be seen and there was a man wearing a blue shirt'
2025-12-23 02:24:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'chuy·ªÉn t·ª´ ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o ƒëen ƒëang ch·ªâ c·ª≠a s·ªï t·ªõi c·∫£nh tr∆∞·ªõc hi√™n nh√† ƒëi ra tr∆∞·ªõc c·ªïng c√≥ th·ªÉ th·∫•y m·ªôt chi·∫øc xe √¥ t√¥ v√† m·ªôt c√°i c·∫ßn c·∫©u'
2025-12-23 02:24:29 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'chuy·ªÉn t·ª´ ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o ƒëen ƒëang ch·ªâ c·ª≠a s·ªï t·ªõi c·∫£nh tr∆∞·ªõc hi√™n nh√† ƒëi ra tr∆∞·ªõc c·ªïng c√≥ th·ªÉ th·∫•y m·ªôt chi·∫øc xe √¥ t√¥ v√† m·ªôt c√°i c·∫ßn c·∫©u' ‚Üí 'Moving from the man in black pointing to the window to the front porch, going to the front gate, you can see a car and a crane.'
2025-12-23 02:24:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'Moving from the man in black pointing to the window to the front porch, going to the front gate, you can see a car and a crane.'
2025-12-23 02:24:30 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:24:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='Moving from the man in black pointing to the window to the front porch, going to the front gate, you can see a car and a crane.', Q1='Moving from the man in black pointing to the window to the front porch, going to the front gate, you can see a car and a crane.', Q2='Moving from the man in black pointing to the window to the front porch, going to the front gate, you can see a car and a crane.'
2025-12-23 02:24:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: '2 chi·∫øc xe m√°y m√†u tr·∫Øng v√† m·ªôt chi·∫øc xe m√°y m√†u ƒëen'
2025-12-23 02:24:30 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 3 has no enabled methods
2025-12-23 02:24:30 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:24:30 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:24:30 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Moving from the man in black pointing to the window to the front porch, going to the front gate, you can see a car and a crane.
2025-12-23 02:24:30 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: a phone, smoking ruins could be seen and there was a man wearing a blue shirt
2025-12-23 02:24:30 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:24:30 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Moving from the man in black pointing to the window to the front porch, going to the front gate, you can see a car and a crane.
2025-12-23 02:24:30 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:24:30 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: a phone, smoking ruins could be seen and there was a man wearing a blue shirt
2025-12-23 02:24:30 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:24:30 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: a phone, smoking ruins could be seen and there was a man wearing a blue shirt
2025-12-23 02:24:31 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:24:31 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Moving from the man in black pointing to the window to the front porch, going to the front gate, you can see a car and a crane.
2025-12-23 02:24:31 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:24:31 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: a phone, smoking ruins could be seen and there was a man wearing a blue shirt
2025-12-23 02:24:31 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:24:31 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Moving from the man in black pointing to the window to the front porch, going to the front gate, you can see a car and a crane.
2025-12-23 02:24:31 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:24:31 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: a phone, smoking ruins could be seen and there was a man wearing a blue shirt
2025-12-23 02:24:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:24:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:24:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 3 stages in 2533.59ms
2025-12-23 02:24:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 02:24:31 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 400 unique ids from 3 stages
2025-12-23 02:24:31 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 400 unique ids
2025-12-23 02:24:43 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframe/L12/L12_V008/28738.webp
2025-12-23 02:24:43 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframe/L12/L12_V008/28738.webp -> /app/app/data/keyframe/L12/L12_V008/28738.webp
2025-12-23 02:24:43 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframe/L12/L12_V008/28738.webp
2025-12-23 02:24:43 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframe/L12/L12_V008/28738.webp -> /app/app/data/keyframe/L12/L12_V008/28738.webp
2025-12-23 02:24:44 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 02:24:44 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 02:24:44 - root - INFO - [IMAGE_SEARCH] Result #0: ID=346525, Path=/keyframe/L12/L12_V008/28738.webp, Score=0.9946586489677429
2025-12-23 02:24:44 - root - INFO - [IMAGE_SEARCH] Result #1: ID=346526, Path=/keyframe/L12/L12_V008/28746.webp, Score=0.9732385277748108
2025-12-23 02:24:44 - root - INFO - [IMAGE_SEARCH] Result #2: ID=346524, Path=/keyframe/L12/L12_V008/28730.webp, Score=0.9607800245285034
2025-12-23 02:24:44 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1131.04ms
2025-12-23 02:24:44 - root - INFO - [IMAGE_SEARCH] First result sample: {'id': 346525, 'keyframe_path': '/keyframe/L12/L12_V008/28738.webp', 'score': 0.9946586489677429, 'video': '', 'frame_idx': None}
2025-12-23 02:24:44 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 02:24:44 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 02:24:44 - root - INFO - [IMAGE_SEARCH] Result #0: ID=346525, Path=/keyframe/L12/L12_V008/28738.webp, Score=0.9946586489677429
2025-12-23 02:24:44 - root - INFO - [IMAGE_SEARCH] Result #1: ID=346526, Path=/keyframe/L12/L12_V008/28746.webp, Score=0.9732385277748108
2025-12-23 02:24:44 - root - INFO - [IMAGE_SEARCH] Result #2: ID=346524, Path=/keyframe/L12/L12_V008/28730.webp, Score=0.9607800245285034
2025-12-23 02:24:44 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1404.61ms
2025-12-23 02:24:44 - root - INFO - [IMAGE_SEARCH] First result sample: {'id': 346525, 'keyframe_path': '/keyframe/L12/L12_V008/28738.webp', 'score': 0.9946586489677429, 'video': '', 'frame_idx': None}
2025-12-23 02:24:55 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 3 stages
2025-12-23 02:24:55 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='C·∫£nh quay t·ª´ m·ªôt chi·∫øc ƒëi·ªán tho·∫°i, c√≥ th·ªÉ th·∫•y ƒë·ªëng ƒë·ªï n√°t nghi ng√∫t kh√≥i v√† c√≥ m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o xanh bi·ªÉn


', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:24:55 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='·∫£nh quay ti·∫øp theo ƒë√≥ chuy·ªÉn t·ª´ ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o ƒëen ƒëang ch·ªâ c·ª≠a s·ªï t·ªõi c·∫£nh tr∆∞·ªõc hi√™n nh√† ƒëi ra tr∆∞·ªõc c·ªïng c√≥ th·ªÉ th·∫•y m·ªôt chi·∫øc xe √¥ t√¥ v√† m·ªôt c√°i c·∫ßn c·∫©u', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:24:55 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='C·∫£nh b√† con xung quanh h√≥ng h·ªõt, c√≥ th·ªÉ th·∫•y 2 chi·∫øc xe m√°y m√†u tr·∫Øng v√† m·ªôt chi·∫øc xe m√°y m√†u ƒëen', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:24:55 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'C·∫£nh quay t·ª´ m·ªôt chi·∫øc ƒëi·ªán tho·∫°i, c√≥ th·ªÉ th·∫•y ƒë·ªëng ƒë·ªï n√°t nghi ng√∫t kh√≥i v√† c√≥ m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o xanh bi·ªÉn


'
2025-12-23 02:24:55 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh quay t·ª´ m·ªôt chi·∫øc ƒëi·ªán tho·∫°i, c√≥ th·ªÉ th·∫•y ƒë·ªëng ƒë·ªï n√°t nghi ng√∫t kh√≥i v√† c√≥ m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o xanh bi·ªÉn


' ‚Üí 'Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.'
2025-12-23 02:24:55 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.'
2025-12-23 02:24:55 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:24:55 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.', Q1='Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.', Q2='Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.'
2025-12-23 02:24:55 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: '·∫£nh quay ti·∫øp theo ƒë√≥ chuy·ªÉn t·ª´ ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o ƒëen ƒëang ch·ªâ c·ª≠a s·ªï t·ªõi c·∫£nh tr∆∞·ªõc hi√™n nh√† ƒëi ra tr∆∞·ªõc c·ªïng c√≥ th·ªÉ th·∫•y m·ªôt chi·∫øc xe √¥ t√¥ v√† m·ªôt c√°i c·∫ßn c·∫©u'
2025-12-23 02:24:56 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: '·∫£nh quay ti·∫øp theo ƒë√≥ chuy·ªÉn t·ª´ ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o ƒëen ƒëang ch·ªâ c·ª≠a s·ªï t·ªõi c·∫£nh tr∆∞·ªõc hi√™n nh√† ƒëi ra tr∆∞·ªõc c·ªïng c√≥ th·ªÉ th·∫•y m·ªôt chi·∫øc xe √¥ t√¥ v√† m·ªôt c√°i c·∫ßn c·∫©u' ‚Üí 'The next shot then moves from the man in black pointing to the window to the front porch and to the front gate where you can see a car and a crane.'
2025-12-23 02:24:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'The next shot then moves from the man in black pointing to the window to the front porch and to the front gate where you can see a car and a crane.'
2025-12-23 02:24:56 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:24:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='The next shot then moves from the man in black pointing to the window to the front porch and to the front gate where you can see a car and a crane.', Q1='The next shot then moves from the man in black pointing to the window to the front porch and to the front gate where you can see a car and a crane.', Q2='The next shot then moves from the man in black pointing to the window to the front porch and to the front gate where you can see a car and a crane.'
2025-12-23 02:24:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: 'C·∫£nh b√† con xung quanh h√≥ng h·ªõt, c√≥ th·ªÉ th·∫•y 2 chi·∫øc xe m√°y m√†u tr·∫Øng v√† m·ªôt chi·∫øc xe m√°y m√†u ƒëen'
2025-12-23 02:24:56 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh b√† con xung quanh h√≥ng h·ªõt, c√≥ th·ªÉ th·∫•y 2 chi·∫øc xe m√°y m√†u tr·∫Øng v√† m·ªôt chi·∫øc xe m√°y m√†u ƒëen' ‚Üí 'The surrounding people can see two white motorbikes and one black motorbike.'
2025-12-23 02:24:56 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 translated: 'The surrounding people can see two white motorbikes and one black motorbike.'
2025-12-23 02:24:57 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:24:57 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 queries: Q0='The surrounding people can see two white motorbikes and one black motorbike.', Q1='The surrounding people can see two white motorbikes and one black motorbike.', Q2='The surrounding people can see two white motorbikes and one black motorbike.'
2025-12-23 02:24:57 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:24:57 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:24:57 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:24:57 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The next shot then moves from the man in black pointing to the window to the front porch and to the front gate where you can see a car and a crane.
2025-12-23 02:24:57 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:24:57 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.
2025-12-23 02:24:57 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The next shot then moves from the man in black pointing to the window to the front porch and to the front gate where you can see a car and a crane.
2025-12-23 02:24:57 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The surrounding people can see two white motorbikes and one black motorbike.
2025-12-23 02:24:57 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:24:57 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:24:57 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.
2025-12-23 02:24:57 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The surrounding people can see two white motorbikes and one black motorbike.
2025-12-23 02:24:58 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:24:58 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The surrounding people can see two white motorbikes and one black motorbike.
2025-12-23 02:24:58 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:24:58 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.
2025-12-23 02:24:58 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:24:58 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The surrounding people can see two white motorbikes and one black motorbike.
2025-12-23 02:24:58 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:24:58 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.
2025-12-23 02:24:58 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:24:58 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The surrounding people can see two white motorbikes and one black motorbike.
2025-12-23 02:24:58 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:24:58 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The next shot then moves from the man in black pointing to the window to the front porch and to the front gate where you can see a car and a crane.
2025-12-23 02:24:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:24:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:24:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 Q0 results: 200, Q1: 0, Q2: 200
2025-12-23 02:24:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 3 stages in 4226.98ms
2025-12-23 02:24:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 02:24:59 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 600 unique ids from 3 stages
2025-12-23 02:24:59 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 600 unique ids
2025-12-23 02:25:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 3 stages
2025-12-23 02:25:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='C·∫£nh quay t·ª´ m·ªôt chi·∫øc ƒëi·ªán tho·∫°i, c√≥ th·ªÉ th·∫•y ƒë·ªëng ƒë·ªï n√°t nghi ng√∫t kh√≥i v√† c√≥ m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o xanh bi·ªÉn


', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:25:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='·∫£nh quay ti·∫øp theo ƒë√≥ chuy·ªÉn t·ª´ ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o ƒëen ƒëang ch·ªâ c·ª≠a s·ªï t·ªõi c·∫£nh tr∆∞·ªõc hi√™n nh√† ƒëi ra tr∆∞·ªõc c·ªïng c√≥ th·ªÉ th·∫•y m·ªôt chi·∫øc xe √¥ t√¥ v√† m·ªôt c√°i c·∫ßn c·∫©u', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:25:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='C·∫£nh b√† con xung quanh h√≥ng h·ªõt, c√≥ th·ªÉ th·∫•y 2 chi·∫øc xe m√°y m√†u tr·∫Øng v√† m·ªôt chi·∫øc xe m√°y m√†u ƒëen', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:25:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'C·∫£nh quay t·ª´ m·ªôt chi·∫øc ƒëi·ªán tho·∫°i, c√≥ th·ªÉ th·∫•y ƒë·ªëng ƒë·ªï n√°t nghi ng√∫t kh√≥i v√† c√≥ m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o xanh bi·ªÉn


'
2025-12-23 02:25:08 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh quay t·ª´ m·ªôt chi·∫øc ƒëi·ªán tho·∫°i, c√≥ th·ªÉ th·∫•y ƒë·ªëng ƒë·ªï n√°t nghi ng√∫t kh√≥i v√† c√≥ m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o xanh bi·ªÉn


' ‚Üí 'Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.'
2025-12-23 02:25:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.'
2025-12-23 02:25:09 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:25:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.', Q1='Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.', Q2='Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.'
2025-12-23 02:25:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: '·∫£nh quay ti·∫øp theo ƒë√≥ chuy·ªÉn t·ª´ ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o ƒëen ƒëang ch·ªâ c·ª≠a s·ªï t·ªõi c·∫£nh tr∆∞·ªõc hi√™n nh√† ƒëi ra tr∆∞·ªõc c·ªïng c√≥ th·ªÉ th·∫•y m·ªôt chi·∫øc xe √¥ t√¥ v√† m·ªôt c√°i c·∫ßn c·∫©u'
2025-12-23 02:25:09 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: '·∫£nh quay ti·∫øp theo ƒë√≥ chuy·ªÉn t·ª´ ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o ƒëen ƒëang ch·ªâ c·ª≠a s·ªï t·ªõi c·∫£nh tr∆∞·ªõc hi√™n nh√† ƒëi ra tr∆∞·ªõc c·ªïng c√≥ th·ªÉ th·∫•y m·ªôt chi·∫øc xe √¥ t√¥ v√† m·ªôt c√°i c·∫ßn c·∫©u' ‚Üí 'The next shot then moves from the man in black pointing to the window to the front porch and to the front gate where you can see a car and a crane.'
2025-12-23 02:25:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'The next shot then moves from the man in black pointing to the window to the front porch and to the front gate where you can see a car and a crane.'
2025-12-23 02:25:09 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:25:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='The next shot then moves from the man in black pointing to the window to the front porch and to the front gate where you can see a car and a crane.', Q1='The next shot then moves from the man in black pointing to the window to the front porch and to the front gate where you can see a car and a crane.', Q2='The next shot then moves from the man in black pointing to the window to the front porch and to the front gate where you can see a car and a crane.'
2025-12-23 02:25:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: 'C·∫£nh b√† con xung quanh h√≥ng h·ªõt, c√≥ th·ªÉ th·∫•y 2 chi·∫øc xe m√°y m√†u tr·∫Øng v√† m·ªôt chi·∫øc xe m√°y m√†u ƒëen'
2025-12-23 02:25:09 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh b√† con xung quanh h√≥ng h·ªõt, c√≥ th·ªÉ th·∫•y 2 chi·∫øc xe m√°y m√†u tr·∫Øng v√† m·ªôt chi·∫øc xe m√°y m√†u ƒëen' ‚Üí 'The surrounding people can see two white motorbikes and one black motorbike.'
2025-12-23 02:25:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 translated: 'The surrounding people can see two white motorbikes and one black motorbike.'
2025-12-23 02:25:10 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:25:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 queries: Q0='The surrounding people can see two white motorbikes and one black motorbike.', Q1='The surrounding people can see two white motorbikes and one black motorbike.', Q2='The surrounding people can see two white motorbikes and one black motorbike.'
2025-12-23 02:25:10 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:25:10 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.
2025-12-23 02:25:10 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:25:10 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:25:10 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:25:10 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:25:10 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.
2025-12-23 02:25:10 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The surrounding people can see two white motorbikes and one black motorbike.
2025-12-23 02:25:10 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The surrounding people can see two white motorbikes and one black motorbike.
2025-12-23 02:25:10 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The next shot then moves from the man in black pointing to the window to the front porch and to the front gate where you can see a car and a crane.
2025-12-23 02:25:10 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:25:10 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.
2025-12-23 02:25:10 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:25:10 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:25:10 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The surrounding people can see two white motorbikes and one black motorbike.
2025-12-23 02:25:10 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The next shot then moves from the man in black pointing to the window to the front porch and to the front gate where you can see a car and a crane.
2025-12-23 02:25:10 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:25:10 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.
2025-12-23 02:25:10 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:25:10 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The next shot then moves from the man in black pointing to the window to the front porch and to the front gate where you can see a car and a crane.
2025-12-23 02:25:11 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:25:11 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The next shot then moves from the man in black pointing to the window to the front porch and to the front gate where you can see a car and a crane.
2025-12-23 02:25:11 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:25:11 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The surrounding people can see two white motorbikes and one black motorbike.
2025-12-23 02:25:11 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:25:11 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.
2025-12-23 02:25:11 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:25:11 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The surrounding people can see two white motorbikes and one black motorbike.
2025-12-23 02:25:11 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:25:11 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:25:11 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The next shot then moves from the man in black pointing to the window to the front porch and to the front gate where you can see a car and a crane.
2025-12-23 02:25:11 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 0, Q2: 200
2025-12-23 02:25:12 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-23 02:25:12 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 3 stages in 3549.06ms
2025-12-23 02:25:12 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-23 02:25:12 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 3 stages
2025-12-23 02:25:12 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 86 videos with results
2025-12-23 02:25:12 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 84 videos with results
2025-12-23 02:25:12 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 3: 84 videos with results
2025-12-23 02:25:12 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 1 common videos across all stages
2025-12-23 02:25:12 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 2 valid tuples
2025-12-23 02:25:12 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 2 valid tuples
2025-12-23 02:25:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 3 stages
2025-12-23 02:25:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='c√≥ th·ªÉ th·∫•y ƒë·ªëng ƒë·ªï n√°t nghi ng√∫t kh√≥i v√† c√≥ m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o xanh bi·ªÉn', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:25:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o ƒëen ƒëang ch·ªâ c·ª≠a s·ªï ', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:25:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='c√°i c·∫ßn c·∫©u, 2 chi·∫øc xe m√°y m√†u tr·∫Øng v√† m·ªôt chi·∫øc xe m√°y m√†u ƒëen', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:25:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'c√≥ th·ªÉ th·∫•y ƒë·ªëng ƒë·ªï n√°t nghi ng√∫t kh√≥i v√† c√≥ m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o xanh bi·ªÉn'
2025-12-23 02:25:48 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c√≥ th·ªÉ th·∫•y ƒë·ªëng ƒë·ªï n√°t nghi ng√∫t kh√≥i v√† c√≥ m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o xanh bi·ªÉn' ‚Üí 'Smoking ruins could be seen and there was a man wearing a blue shirt'
2025-12-23 02:25:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'Smoking ruins could be seen and there was a man wearing a blue shirt'
2025-12-23 02:25:48 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:25:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='Smoking ruins could be seen and there was a man wearing a blue shirt', Q1='Smoking ruins could be seen and there was a man wearing a blue shirt', Q2='Smoking ruins could be seen and there was a man wearing a blue shirt'
2025-12-23 02:25:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o ƒëen ƒëang ch·ªâ c·ª≠a s·ªï '
2025-12-23 02:25:49 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o ƒëen ƒëang ch·ªâ c·ª≠a s·ªï ' ‚Üí 'The man in black is pointing to the window'
2025-12-23 02:25:49 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'The man in black is pointing to the window'
2025-12-23 02:25:50 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:25:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='The man in black is pointing to the window', Q1='The man in black is pointing to the window', Q2='The man in black is pointing to the window'
2025-12-23 02:25:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: 'c√°i c·∫ßn c·∫©u, 2 chi·∫øc xe m√°y m√†u tr·∫Øng v√† m·ªôt chi·∫øc xe m√°y m√†u ƒëen'
2025-12-23 02:25:51 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c√°i c·∫ßn c·∫©u, 2 chi·∫øc xe m√°y m√†u tr·∫Øng v√† m·ªôt chi·∫øc xe m√°y m√†u ƒëen' ‚Üí 'crane, 2 white motorbikes and a black motorbike'
2025-12-23 02:25:51 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 translated: 'crane, 2 white motorbikes and a black motorbike'
2025-12-23 02:25:51 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:25:51 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 queries: Q0='crane, 2 white motorbikes and a black motorbike', Q1='crane, 2 white motorbikes and a black motorbike', Q2='crane, 2 white motorbikes and a black motorbike'
2025-12-23 02:25:51 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframe/L22/L22_V028/18284.webp
2025-12-23 02:25:51 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframe/L22/L22_V028/18284.webp -> /app/app/data/keyframe/L22/L22_V028/18284.webp
2025-12-23 02:25:51 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframe/L22/L22_V028/18284.webp
2025-12-23 02:25:51 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframe/L22/L22_V028/18284.webp -> /app/app/data/keyframe/L22/L22_V028/18284.webp
2025-12-23 02:25:51 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:25:51 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:25:51 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Smoking ruins could be seen and there was a man wearing a blue shirt
2025-12-23 02:25:51 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The man in black is pointing to the window
2025-12-23 02:25:52 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:25:52 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:25:52 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The man in black is pointing to the window
2025-12-23 02:25:52 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: crane, 2 white motorbikes and a black motorbike
2025-12-23 02:25:52 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:25:52 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The man in black is pointing to the window
2025-12-23 02:25:52 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:25:52 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: crane, 2 white motorbikes and a black motorbike
2025-12-23 02:25:52 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:25:52 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: crane, 2 white motorbikes and a black motorbike
2025-12-23 02:25:52 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 02:25:52 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 02:25:52 - root - INFO - [IMAGE_SEARCH] Result #0: ID=674877, Path=/keyframe/L22/L22_V028/18284.webp, Score=0.9962934255599976
2025-12-23 02:25:52 - root - INFO - [IMAGE_SEARCH] Result #1: ID=674878, Path=/keyframe/L22/L22_V028/18324.webp, Score=0.9585477709770203
2025-12-23 02:25:52 - root - INFO - [IMAGE_SEARCH] Result #2: ID=675182, Path=/keyframe/L22/L22_V028/27414.webp, Score=0.954271674156189
2025-12-23 02:25:52 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1227.15ms
2025-12-23 02:25:52 - root - INFO - [IMAGE_SEARCH] First result sample: {'id': 674877, 'keyframe_path': '/keyframe/L22/L22_V028/18284.webp', 'score': 0.9962934255599976, 'video': '', 'frame_idx': None}
2025-12-23 02:25:53 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 02:25:53 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 02:25:53 - root - INFO - [IMAGE_SEARCH] Result #0: ID=674877, Path=/keyframe/L22/L22_V028/18284.webp, Score=0.9962934255599976
2025-12-23 02:25:53 - root - INFO - [IMAGE_SEARCH] Result #1: ID=674878, Path=/keyframe/L22/L22_V028/18324.webp, Score=0.9585477709770203
2025-12-23 02:25:53 - root - INFO - [IMAGE_SEARCH] Result #2: ID=675182, Path=/keyframe/L22/L22_V028/27414.webp, Score=0.954271674156189
2025-12-23 02:25:53 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1482.19ms
2025-12-23 02:25:53 - root - INFO - [IMAGE_SEARCH] First result sample: {'id': 674877, 'keyframe_path': '/keyframe/L22/L22_V028/18284.webp', 'score': 0.9962934255599976, 'video': '', 'frame_idx': None}
2025-12-23 02:25:53 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:25:53 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: crane, 2 white motorbikes and a black motorbike
2025-12-23 02:25:53 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:25:53 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Smoking ruins could be seen and there was a man wearing a blue shirt
2025-12-23 02:25:53 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:25:53 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The man in black is pointing to the window
2025-12-23 02:25:54 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:25:54 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Smoking ruins could be seen and there was a man wearing a blue shirt
2025-12-23 02:25:54 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:25:54 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The man in black is pointing to the window
2025-12-23 02:25:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:25:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:25:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 Q0 results: 200, Q1: 0, Q2: 200
2025-12-23 02:25:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 3 stages in 6952.10ms
2025-12-23 02:25:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 02:25:54 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 600 unique ids from 3 stages
2025-12-23 02:25:54 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 600 unique ids
2025-12-23 02:26:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 3 stages
2025-12-23 02:26:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='C·∫£nh quay t·ª´ m·ªôt chi·∫øc ƒëi·ªán tho·∫°i, c√≥ th·ªÉ th·∫•y ƒë·ªëng ƒë·ªï n√°t nghi ng√∫t kh√≥i v√† c√≥ m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o xanh bi·ªÉn

', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:26:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='C·∫£nh quay ti·∫øp theo ƒë√≥ chuy·ªÉn t·ª´ ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o ƒëen ƒëang ch·ªâ c·ª≠a s·ªï t·ªõi c·∫£nh tr∆∞·ªõc hi√™n nh√† ƒëi ra tr∆∞·ªõc c·ªïng c√≥ th·ªÉ th·∫•y m·ªôt chi·∫øc xe √¥ t√¥ v√† m·ªôt c√°i c·∫ßn c·∫©u

', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:26:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='C·∫£nh b√† con xung quanh h√≥ng h·ªõt, c√≥ th·ªÉ th·∫•y 2 chi·∫øc xe m√°y m√†u tr·∫Øng v√† m·ªôt chi·∫øc xe m√°y m√†u ƒëen

', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:26:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'C·∫£nh quay t·ª´ m·ªôt chi·∫øc ƒëi·ªán tho·∫°i, c√≥ th·ªÉ th·∫•y ƒë·ªëng ƒë·ªï n√°t nghi ng√∫t kh√≥i v√† c√≥ m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o xanh bi·ªÉn

'
2025-12-23 02:26:02 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh quay t·ª´ m·ªôt chi·∫øc ƒëi·ªán tho·∫°i, c√≥ th·ªÉ th·∫•y ƒë·ªëng ƒë·ªï n√°t nghi ng√∫t kh√≥i v√† c√≥ m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o xanh bi·ªÉn

' ‚Üí 'Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.'
2025-12-23 02:26:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.'
2025-12-23 02:26:02 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:26:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.', Q1='Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.', Q2='Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.'
2025-12-23 02:26:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'C·∫£nh quay ti·∫øp theo ƒë√≥ chuy·ªÉn t·ª´ ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o ƒëen ƒëang ch·ªâ c·ª≠a s·ªï t·ªõi c·∫£nh tr∆∞·ªõc hi√™n nh√† ƒëi ra tr∆∞·ªõc c·ªïng c√≥ th·ªÉ th·∫•y m·ªôt chi·∫øc xe √¥ t√¥ v√† m·ªôt c√°i c·∫ßn c·∫©u

'
2025-12-23 02:26:02 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh quay ti·∫øp theo ƒë√≥ chuy·ªÉn t·ª´ ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o ƒëen ƒëang ch·ªâ c·ª≠a s·ªï t·ªõi c·∫£nh tr∆∞·ªõc hi√™n nh√† ƒëi ra tr∆∞·ªõc c·ªïng c√≥ th·ªÉ th·∫•y m·ªôt chi·∫øc xe √¥ t√¥ v√† m·ªôt c√°i c·∫ßn c·∫©u

' ‚Üí 'The next shot moves from the man in black pointing to the window to the front porch and out to the front gate where you can see a car and a crane.'
2025-12-23 02:26:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'The next shot moves from the man in black pointing to the window to the front porch and out to the front gate where you can see a car and a crane.'
2025-12-23 02:26:03 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:26:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='The next shot moves from the man in black pointing to the window to the front porch and out to the front gate where you can see a car and a crane.', Q1='The next shot moves from the man in black pointing to the window to the front porch and out to the front gate where you can see a car and a crane.', Q2='The next shot moves from the man in black pointing to the window to the front porch and out to the front gate where you can see a car and a crane.'
2025-12-23 02:26:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: 'C·∫£nh b√† con xung quanh h√≥ng h·ªõt, c√≥ th·ªÉ th·∫•y 2 chi·∫øc xe m√°y m√†u tr·∫Øng v√† m·ªôt chi·∫øc xe m√°y m√†u ƒëen

'
2025-12-23 02:26:03 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh b√† con xung quanh h√≥ng h·ªõt, c√≥ th·ªÉ th·∫•y 2 chi·∫øc xe m√°y m√†u tr·∫Øng v√† m·ªôt chi·∫øc xe m√°y m√†u ƒëen

' ‚Üí 'The surrounding people can see two white motorbikes and one black motorbike.'
2025-12-23 02:26:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 translated: 'The surrounding people can see two white motorbikes and one black motorbike.'
2025-12-23 02:26:03 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:26:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 queries: Q0='The surrounding people can see two white motorbikes and one black motorbike.', Q1='The surrounding people can see two white motorbikes and one black motorbike.', Q2='The surrounding people can see two white motorbikes and one black motorbike.'
2025-12-23 02:26:03 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:26:03 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:26:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The surrounding people can see two white motorbikes and one black motorbike.
2025-12-23 02:26:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.
2025-12-23 02:26:03 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:26:03 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:26:03 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:26:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The next shot moves from the man in black pointing to the window to the front porch and out to the front gate where you can see a car and a crane.
2025-12-23 02:26:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The surrounding people can see two white motorbikes and one black motorbike.
2025-12-23 02:26:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.
2025-12-23 02:26:03 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:26:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The surrounding people can see two white motorbikes and one black motorbike.
2025-12-23 02:26:03 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:26:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.
2025-12-23 02:26:03 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:26:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The next shot moves from the man in black pointing to the window to the front porch and out to the front gate where you can see a car and a crane.
2025-12-23 02:26:04 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:26:04 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The surrounding people can see two white motorbikes and one black motorbike.
2025-12-23 02:26:04 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:26:04 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The next shot moves from the man in black pointing to the window to the front porch and out to the front gate where you can see a car and a crane.
2025-12-23 02:26:04 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:26:04 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.
2025-12-23 02:26:04 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:26:04 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The surrounding people can see two white motorbikes and one black motorbike.
2025-12-23 02:26:04 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:26:04 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The surrounding people can see two white motorbikes and one black motorbike.
2025-12-23 02:26:04 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:26:04 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The surrounding people can see two white motorbikes and one black motorbike.
2025-12-23 02:26:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 Q0 results: 200, Q1: 200, Q2: 0
2025-12-23 02:26:05 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:26:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:26:05 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The next shot moves from the man in black pointing to the window to the front porch and out to the front gate where you can see a car and a crane.
2025-12-23 02:26:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 0, Q2: 200
2025-12-23 02:26:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 3 stages in 3603.91ms
2025-12-23 02:26:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 02:26:05 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 600 unique ids from 3 stages
2025-12-23 02:26:05 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 600 unique ids
2025-12-23 02:26:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 3 stages
2025-12-23 02:26:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='C·∫£nh quay t·ª´ m·ªôt chi·∫øc ƒëi·ªán tho·∫°i, c√≥ th·ªÉ th·∫•y ƒë·ªëng ƒë·ªï n√°t nghi ng√∫t kh√≥i v√† c√≥ m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o xanh bi·ªÉn

', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:26:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='C·∫£nh quay ti·∫øp theo ƒë√≥ chuy·ªÉn t·ª´ ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o ƒëen ƒëang ch·ªâ c·ª≠a s·ªï t·ªõi c·∫£nh tr∆∞·ªõc hi√™n nh√† ƒëi ra tr∆∞·ªõc c·ªïng c√≥ th·ªÉ th·∫•y m·ªôt chi·∫øc xe √¥ t√¥ v√† m·ªôt c√°i c·∫ßn c·∫©u

', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:26:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='C·∫£nh b√† con xung quanh h√≥ng h·ªõt, c√≥ th·ªÉ th·∫•y 2 chi·∫øc xe m√°y m√†u tr·∫Øng v√† m·ªôt chi·∫øc xe m√°y m√†u ƒëen

', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:26:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'C·∫£nh quay t·ª´ m·ªôt chi·∫øc ƒëi·ªán tho·∫°i, c√≥ th·ªÉ th·∫•y ƒë·ªëng ƒë·ªï n√°t nghi ng√∫t kh√≥i v√† c√≥ m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o xanh bi·ªÉn

'
2025-12-23 02:26:47 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh quay t·ª´ m·ªôt chi·∫øc ƒëi·ªán tho·∫°i, c√≥ th·ªÉ th·∫•y ƒë·ªëng ƒë·ªï n√°t nghi ng√∫t kh√≥i v√† c√≥ m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o xanh bi·ªÉn

' ‚Üí 'Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.'
2025-12-23 02:26:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.'
2025-12-23 02:26:47 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:26:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.', Q1='Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.', Q2='Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.'
2025-12-23 02:26:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'C·∫£nh quay ti·∫øp theo ƒë√≥ chuy·ªÉn t·ª´ ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o ƒëen ƒëang ch·ªâ c·ª≠a s·ªï t·ªõi c·∫£nh tr∆∞·ªõc hi√™n nh√† ƒëi ra tr∆∞·ªõc c·ªïng c√≥ th·ªÉ th·∫•y m·ªôt chi·∫øc xe √¥ t√¥ v√† m·ªôt c√°i c·∫ßn c·∫©u

'
2025-12-23 02:26:47 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh quay ti·∫øp theo ƒë√≥ chuy·ªÉn t·ª´ ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o ƒëen ƒëang ch·ªâ c·ª≠a s·ªï t·ªõi c·∫£nh tr∆∞·ªõc hi√™n nh√† ƒëi ra tr∆∞·ªõc c·ªïng c√≥ th·ªÉ th·∫•y m·ªôt chi·∫øc xe √¥ t√¥ v√† m·ªôt c√°i c·∫ßn c·∫©u

' ‚Üí 'The next shot moves from the man in black pointing to the window to the front porch and out to the front gate where you can see a car and a crane.'
2025-12-23 02:26:47 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'The next shot moves from the man in black pointing to the window to the front porch and out to the front gate where you can see a car and a crane.'
2025-12-23 02:26:48 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:26:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='The next shot moves from the man in black pointing to the window to the front porch and out to the front gate where you can see a car and a crane.', Q1='The next shot moves from the man in black pointing to the window to the front porch and out to the front gate where you can see a car and a crane.', Q2='The next shot moves from the man in black pointing to the window to the front porch and out to the front gate where you can see a car and a crane.'
2025-12-23 02:26:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: 'C·∫£nh b√† con xung quanh h√≥ng h·ªõt, c√≥ th·ªÉ th·∫•y 2 chi·∫øc xe m√°y m√†u tr·∫Øng v√† m·ªôt chi·∫øc xe m√°y m√†u ƒëen

'
2025-12-23 02:26:48 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh b√† con xung quanh h√≥ng h·ªõt, c√≥ th·ªÉ th·∫•y 2 chi·∫øc xe m√°y m√†u tr·∫Øng v√† m·ªôt chi·∫øc xe m√°y m√†u ƒëen

' ‚Üí 'The surrounding people can see two white motorbikes and one black motorbike.'
2025-12-23 02:26:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 translated: 'The surrounding people can see two white motorbikes and one black motorbike.'
2025-12-23 02:26:48 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:26:48 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 queries: Q0='The surrounding people can see two white motorbikes and one black motorbike.', Q1='The surrounding people can see two white motorbikes and one black motorbike.', Q2='The surrounding people can see two white motorbikes and one black motorbike.'
2025-12-23 02:26:48 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:26:48 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:26:48 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.
2025-12-23 02:26:48 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:26:48 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The next shot moves from the man in black pointing to the window to the front porch and out to the front gate where you can see a car and a crane.
2025-12-23 02:26:48 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:26:48 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The next shot moves from the man in black pointing to the window to the front porch and out to the front gate where you can see a car and a crane.
2025-12-23 02:26:48 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The surrounding people can see two white motorbikes and one black motorbike.
2025-12-23 02:26:48 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:26:48 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The next shot moves from the man in black pointing to the window to the front porch and out to the front gate where you can see a car and a crane.
2025-12-23 02:26:48 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:26:48 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The surrounding people can see two white motorbikes and one black motorbike.
2025-12-23 02:26:49 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:26:49 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The surrounding people can see two white motorbikes and one black motorbike.
2025-12-23 02:26:49 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:26:49 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.
2025-12-23 02:26:49 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:26:49 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The next shot moves from the man in black pointing to the window to the front porch and out to the front gate where you can see a car and a crane.
2025-12-23 02:26:49 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:26:49 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.
2025-12-23 02:26:49 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:26:49 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The next shot moves from the man in black pointing to the window to the front porch and out to the front gate where you can see a car and a crane.
2025-12-23 02:26:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:26:50 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:26:50 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The surrounding people can see two white motorbikes and one black motorbike.
2025-12-23 02:26:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:26:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 Q0 results: 200, Q1: 0, Q2: 200
2025-12-23 02:26:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 3 stages in 3875.52ms
2025-12-23 02:26:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-23 02:26:50 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 3 stages
2025-12-23 02:26:50 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 90 videos with results
2025-12-23 02:26:50 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 81 videos with results
2025-12-23 02:26:50 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 3: 86 videos with results
2025-12-23 02:26:50 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 1 common videos across all stages
2025-12-23 02:26:50 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 0 valid tuples
2025-12-23 02:26:50 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 0 valid tuples
2025-12-23 02:27:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 3 stages
2025-12-23 02:27:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='c√≥ th·ªÉ th·∫•y ƒë·ªëng ƒë·ªï n√°t nghi ng√∫t kh√≥i v√† c√≥ m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o xanh bi·ªÉn', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:27:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o ƒëen ƒëang ch·ªâ c·ª≠a s·ªï ', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:27:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='c√°i c·∫ßn c·∫©u, 2 chi·∫øc xe m√°y m√†u tr·∫Øng v√† m·ªôt chi·∫øc xe m√°y m√†u ƒëen', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:27:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'c√≥ th·ªÉ th·∫•y ƒë·ªëng ƒë·ªï n√°t nghi ng√∫t kh√≥i v√† c√≥ m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o xanh bi·ªÉn'
2025-12-23 02:27:08 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c√≥ th·ªÉ th·∫•y ƒë·ªëng ƒë·ªï n√°t nghi ng√∫t kh√≥i v√† c√≥ m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o xanh bi·ªÉn' ‚Üí 'Smoking ruins could be seen and there was a man wearing a blue shirt'
2025-12-23 02:27:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'Smoking ruins could be seen and there was a man wearing a blue shirt'
2025-12-23 02:27:08 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:27:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='Smoking ruins could be seen and there was a man wearing a blue shirt', Q1='Smoking ruins could be seen and there was a man wearing a blue shirt', Q2='Smoking ruins could be seen and there was a man wearing a blue shirt'
2025-12-23 02:27:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o ƒëen ƒëang ch·ªâ c·ª≠a s·ªï '
2025-12-23 02:27:09 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o ƒëen ƒëang ch·ªâ c·ª≠a s·ªï ' ‚Üí 'The man in black is pointing to the window'
2025-12-23 02:27:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'The man in black is pointing to the window'
2025-12-23 02:27:09 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:27:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='The man in black is pointing to the window', Q1='The man in black is pointing to the window', Q2='The man in black is pointing to the window'
2025-12-23 02:27:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: 'c√°i c·∫ßn c·∫©u, 2 chi·∫øc xe m√°y m√†u tr·∫Øng v√† m·ªôt chi·∫øc xe m√°y m√†u ƒëen'
2025-12-23 02:27:09 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c√°i c·∫ßn c·∫©u, 2 chi·∫øc xe m√°y m√†u tr·∫Øng v√† m·ªôt chi·∫øc xe m√°y m√†u ƒëen' ‚Üí 'crane, 2 white motorbikes and a black motorbike'
2025-12-23 02:27:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 translated: 'crane, 2 white motorbikes and a black motorbike'
2025-12-23 02:27:09 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:27:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 queries: Q0='crane, 2 white motorbikes and a black motorbike', Q1='crane, 2 white motorbikes and a black motorbike', Q2='crane, 2 white motorbikes and a black motorbike'
2025-12-23 02:27:10 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:27:10 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The man in black is pointing to the window
2025-12-23 02:27:10 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:27:10 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:27:10 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:27:10 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: crane, 2 white motorbikes and a black motorbike
2025-12-23 02:27:10 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:27:10 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: crane, 2 white motorbikes and a black motorbike
2025-12-23 02:27:10 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Smoking ruins could be seen and there was a man wearing a blue shirt
2025-12-23 02:27:10 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Smoking ruins could be seen and there was a man wearing a blue shirt
2025-12-23 02:27:10 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:27:10 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Smoking ruins could be seen and there was a man wearing a blue shirt
2025-12-23 02:27:10 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:27:10 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:27:10 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: crane, 2 white motorbikes and a black motorbike
2025-12-23 02:27:10 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The man in black is pointing to the window
2025-12-23 02:27:10 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:27:10 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Smoking ruins could be seen and there was a man wearing a blue shirt
2025-12-23 02:27:10 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:27:10 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The man in black is pointing to the window
2025-12-23 02:27:10 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:27:10 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Smoking ruins could be seen and there was a man wearing a blue shirt
2025-12-23 02:27:10 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:27:10 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The man in black is pointing to the window
2025-12-23 02:27:10 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:27:10 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Smoking ruins could be seen and there was a man wearing a blue shirt
2025-12-23 02:27:11 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:27:11 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The man in black is pointing to the window
2025-12-23 02:27:11 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 0
2025-12-23 02:27:11 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:27:11 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: crane, 2 white motorbikes and a black motorbike
2025-12-23 02:27:11 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 3 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:27:12 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 0, Q2: 200
2025-12-23 02:27:12 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 3 stages in 3671.07ms
2025-12-23 02:27:12 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-23 02:27:12 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 3 stages
2025-12-23 02:27:12 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 83 videos with results
2025-12-23 02:27:12 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 109 videos with results
2025-12-23 02:27:12 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 3: 88 videos with results
2025-12-23 02:27:12 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 1 common videos across all stages
2025-12-23 02:27:12 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 0 valid tuples
2025-12-23 02:27:12 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 0 valid tuples
2025-12-23 02:28:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 02:28:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='C·∫£nh quay t·ª´ m·ªôt chi·∫øc ƒëi·ªán tho·∫°i, c√≥ th·ªÉ th·∫•y ƒë·ªëng ƒë·ªï n√°t nghi ng√∫t kh√≥i v√† c√≥ m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o xanh bi·ªÉn

Scores of tkis
', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:28:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:28:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'C·∫£nh quay t·ª´ m·ªôt chi·∫øc ƒëi·ªán tho·∫°i, c√≥ th·ªÉ th·∫•y ƒë·ªëng ƒë·ªï n√°t nghi ng√∫t kh√≥i v√† c√≥ m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o xanh bi·ªÉn

Scores of tkis
'
2025-12-23 02:28:22 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh quay t·ª´ m·ªôt chi·∫øc ƒëi·ªán tho·∫°i, c√≥ th·ªÉ th·∫•y ƒë·ªëng ƒë·ªï n√°t nghi ng√∫t kh√≥i v√† c√≥ m·ªôt ng∆∞·ªùi ƒë√†n √¥ng m·∫∑c √°o xanh bi·ªÉn

Scores of tkis
' ‚Üí 'Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.

Scores of tkis'
2025-12-23 02:28:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.

Scores of tkis'
2025-12-23 02:28:23 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:28:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.

Scores of tkis', Q1='Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.

Scores of tkis', Q2='Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.

Scores of tkis'
2025-12-23 02:28:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 02:28:23 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 02:28:23 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:28:23 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.

Scores of tkis
2025-12-23 02:28:23 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:28:23 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.

Scores of tkis
2025-12-23 02:28:24 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:28:24 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Footage taken from a phone shows smoking rubble and a man wearing a blue shirt.

Scores of tkis
2025-12-23 02:28:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:28:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3043.16ms
2025-12-23 02:28:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 02:28:25 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-23 02:28:25 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-23 02:29:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 3 stages
2025-12-23 02:29:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='m·ªôt ch√∫ ng·ª±a con c√≥ ƒë·ªëm tr·∫Øng ngay ƒë·ªânh ƒë·∫ßu b√™n c·∫°nh m·ªôt con ng·ª±a l·ªõn

', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:29:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:29:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:29:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'm·ªôt ch√∫ ng·ª±a con c√≥ ƒë·ªëm tr·∫Øng ngay ƒë·ªânh ƒë·∫ßu b√™n c·∫°nh m·ªôt con ng·ª±a l·ªõn

'
2025-12-23 02:29:25 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'm·ªôt ch√∫ ng·ª±a con c√≥ ƒë·ªëm tr·∫Øng ngay ƒë·ªânh ƒë·∫ßu b√™n c·∫°nh m·ªôt con ng·ª±a l·ªõn

' ‚Üí 'A foal with a white spot on the top of its head next to a big horse'
2025-12-23 02:29:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'A foal with a white spot on the top of its head next to a big horse'
2025-12-23 02:29:25 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:29:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='A foal with a white spot on the top of its head next to a big horse', Q1='A foal with a white spot on the top of its head next to a big horse', Q2='A foal with a white spot on the top of its head next to a big horse'
2025-12-23 02:29:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 02:29:25 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 02:29:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: ''
2025-12-23 02:29:25 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 3 has no enabled methods
2025-12-23 02:29:25 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='C·∫£nh b√† con xung quanh h√≥ng h·ªõt, c√≥ th·ªÉ th·∫•y 2 chi·∫øc xe m√°y m√†u tr·∫Øng v√† m·ªôt chi·∫øc xe m√°y m√†u ƒëen\n\n', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 02:29:25 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-23 02:29:25 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-23 02:29:25 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-23 02:29:25 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:29:25 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:29:25 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A foal with a white spot on the top of its head next to a big horse
2025-12-23 02:29:25 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A foal with a white spot on the top of its head next to a big horse
2025-12-23 02:29:26 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:29:26 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A foal with a white spot on the top of its head next to a big horse
2025-12-23 02:29:26 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh b√† con xung quanh h√≥ng h·ªõt, c√≥ th·ªÉ th·∫•y 2 chi·∫øc xe m√°y m√†u tr·∫Øng v√† m·ªôt chi·∫øc xe m√°y m√†u ƒëen' ‚Üí 'The surrounding people can see two white motorbikes and one black motorbike.'
2025-12-23 02:29:26 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'The surrounding people can see two white motorbikes and one black motorbike.'
2025-12-23 02:29:26 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-23 02:29:26 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:29:26 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A foal with a white spot on the top of its head next to a big horse
2025-12-23 02:29:26 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:29:26 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A foal with a white spot on the top of its head next to a big horse
2025-12-23 02:29:26 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:29:26 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A foal with a white spot on the top of its head next to a big horse
2025-12-23 02:29:28 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 176523:1.0000, 176525:0.9059, 176522:0.8796, 464639:0.8647, 176524:0.8510, 176527:0.8234, 81352:0.8117, 176503:0.8090, 176526:0.8061, 47141:0.8059
2025-12-23 02:29:28 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 565564:1.0000, 334568:0.8078, 248648:0.7955, 30582:0.7464, 334074:0.6657, 392237:0.5752, 675205:0.5532, 565565:0.5426, 637853:0.5386, 447961:0.5354
2025-12-23 02:29:28 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 593195:1.0000, 612366:0.7182, 180980:0.6334, 104465:0.5861, 288693:0.5771, 99402:0.5636, 400076:0.5554, 499730:0.5478, 99400:0.5216, 373082:0.5199
2025-12-23 02:29:28 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 565564:1.0000, 30582:0.7507, 334568:0.7341, 248648:0.7171, 334074:0.5466, 593195:0.5172, 334081:0.4831, 612366:0.4740, 367591:0.4164, 392237:0.4124
2025-12-23 02:29:28 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-23 02:29:28 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-23 02:29:28 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 02:29:28 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='C√≥ th·ªÉ th·∫•y m·ªôt ch√∫ ng·ª±a con c√≥ ƒë·ªëm tr·∫Øng ngay ƒë·ªânh ƒë·∫ßu b√™n c·∫°nh m·ªôt con ng·ª±a l·ªõn', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 02:29:28 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-23 02:29:28 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-23 02:29:28 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-23 02:29:28 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C√≥ th·ªÉ th·∫•y m·ªôt ch√∫ ng·ª±a con c√≥ ƒë·ªëm tr·∫Øng ngay ƒë·ªânh ƒë·∫ßu b√™n c·∫°nh m·ªôt con ng·ª±a l·ªõn' ‚Üí 'A foal with white spots on the top of its head can be seen next to an older horse'
2025-12-23 02:29:28 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'A foal with white spots on the top of its head can be seen next to an older horse'
2025-12-23 02:29:28 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-23 02:29:28 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:29:28 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A foal with white spots on the top of its head can be seen next to an older horse
2025-12-23 02:29:28 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:29:28 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A foal with white spots on the top of its head can be seen next to an older horse
2025-12-23 02:29:28 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:29:28 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A foal with white spots on the top of its head can be seen next to an older horse
2025-12-23 02:29:28 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-23 02:29:28 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-23 02:29:28 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-23 02:29:28 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-23 02:29:28 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-23 02:29:28 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-23 02:29:28 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 02:29:28 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-23 02:29:28 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 3 stages in 4065.48ms
2025-12-23 02:29:28 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-23 02:29:28 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 3 stages
2025-12-23 02:29:28 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 50 videos with results
2025-12-23 02:29:28 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 0 videos with results
2025-12-23 02:29:28 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 3: 0 videos with results
2025-12-23 02:29:28 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] No common videos across all stages
2025-12-23 02:29:28 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 0 valid tuples
2025-12-23 02:29:30 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='C√≥ th·ªÉ th·∫•y m·ªôt ch√∫ ng·ª±a con c√≥ ƒë·ªëm tr·∫Øng ngay ƒë·ªânh ƒë·∫ßu b√™n c·∫°nh m·ªôt con ng·ª±a l·ªõn', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 02:29:30 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-23 02:29:30 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-23 02:29:30 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-23 02:29:30 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C√≥ th·ªÉ th·∫•y m·ªôt ch√∫ ng·ª±a con c√≥ ƒë·ªëm tr·∫Øng ngay ƒë·ªânh ƒë·∫ßu b√™n c·∫°nh m·ªôt con ng·ª±a l·ªõn' ‚Üí 'A foal with white spots on the top of its head can be seen next to an older horse'
2025-12-23 02:29:30 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'A foal with white spots on the top of its head can be seen next to an older horse'
2025-12-23 02:29:30 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-23 02:29:32 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 666052:1.0000, 666053:0.9881, 666051:0.9248, 666080:0.8919, 666079:0.8893, 666055:0.8236, 666054:0.7608, 666056:0.7138, 618518:0.6716, 324095:0.6683
2025-12-23 02:29:32 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 666052:1.0000, 666051:0.9297, 666053:0.8229, 618518:0.7741, 618517:0.7631, 666080:0.7595, 666054:0.7558, 618519:0.7526, 666056:0.7484, 618527:0.7431
2025-12-23 02:29:32 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 666079:1.0000, 666080:0.9470, 666052:0.9208, 618508:0.9192, 666053:0.8856, 618530:0.8629, 618536:0.8613, 618529:0.8330, 618506:0.8241, 618507:0.8211
2025-12-23 02:29:32 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 666052:1.0000, 666051:0.8951, 666053:0.8698, 666080:0.8164, 666079:0.7692, 666054:0.7312, 618518:0.7227, 666055:0.6793, 666056:0.6748, 618527:0.6690
2025-12-23 02:29:32 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-23 02:29:32 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-23 02:29:32 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 02:29:32 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='C·∫£nh b√† con xung quanh h√≥ng h·ªõt, c√≥ th·ªÉ th·∫•y 2 chi·∫øc xe m√°y m√†u tr·∫Øng v√† m·ªôt chi·∫øc xe m√°y m√†u ƒëen\n\n', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 02:29:32 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-23 02:29:32 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-23 02:29:32 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-23 02:29:32 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh b√† con xung quanh h√≥ng h·ªõt, c√≥ th·ªÉ th·∫•y 2 chi·∫øc xe m√°y m√†u tr·∫Øng v√† m·ªôt chi·∫øc xe m√°y m√†u ƒëen' ‚Üí 'The surrounding people can see two white motorbikes and one black motorbike.'
2025-12-23 02:29:32 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'The surrounding people can see two white motorbikes and one black motorbike.'
2025-12-23 02:29:32 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-23 02:29:32 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:29:32 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The surrounding people can see two white motorbikes and one black motorbike.
2025-12-23 02:29:33 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:29:33 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The surrounding people can see two white motorbikes and one black motorbike.
2025-12-23 02:29:33 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:29:33 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The surrounding people can see two white motorbikes and one black motorbike.
2025-12-23 02:29:33 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-23 02:29:33 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-23 02:29:33 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-23 02:29:33 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-23 02:29:33 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-23 02:29:33 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-23 02:29:33 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 02:29:37 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='C·∫£nh b√† con xung quanh h√≥ng h·ªõt, c√≥ th·ªÉ th·∫•y 2 chi·∫øc xe m√°y m√†u tr·∫Øng v√† m·ªôt chi·∫øc xe m√°y m√†u ƒëen\n\n', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 02:29:37 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-23 02:29:37 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-23 02:29:37 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-23 02:29:37 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh b√† con xung quanh h√≥ng h·ªõt, c√≥ th·ªÉ th·∫•y 2 chi·∫øc xe m√°y m√†u tr·∫Øng v√† m·ªôt chi·∫øc xe m√°y m√†u ƒëen' ‚Üí 'The surrounding people can see two white motorbikes and one black motorbike.'
2025-12-23 02:29:37 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'The surrounding people can see two white motorbikes and one black motorbike.'
2025-12-23 02:29:37 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-23 02:29:39 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 176523:1.0000, 176525:0.9059, 176522:0.8796, 464639:0.8647, 176524:0.8510, 176527:0.8234, 81352:0.8117, 176503:0.8090, 176526:0.8061, 47141:0.8059
2025-12-23 02:29:39 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 565564:1.0000, 334568:0.8078, 248648:0.7955, 30582:0.7464, 334074:0.6657, 392237:0.5752, 675205:0.5532, 565565:0.5426, 637853:0.5386, 447961:0.5354
2025-12-23 02:29:39 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 593195:1.0000, 612366:0.7182, 180980:0.6334, 104465:0.5861, 288693:0.5771, 99402:0.5636, 400076:0.5554, 499730:0.5478, 99400:0.5216, 373082:0.5199
2025-12-23 02:29:39 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 565564:1.0000, 30582:0.7507, 334568:0.7341, 248648:0.7171, 334074:0.5466, 593195:0.5172, 334081:0.4831, 612366:0.4740, 367591:0.4164, 392237:0.4124
2025-12-23 02:29:39 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-23 02:29:39 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-23 02:29:39 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 02:29:42 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='C·∫£nh b√† con xung quanh h√≥ng h·ªõt, c√≥ th·ªÉ th·∫•y 2 chi·∫øc xe m√°y m√†u tr·∫Øng v√† m·ªôt chi·∫øc xe m√°y m√†u ƒëen\n\n', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 02:29:42 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-23 02:29:42 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-23 02:29:42 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-23 02:29:43 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh b√† con xung quanh h√≥ng h·ªõt, c√≥ th·ªÉ th·∫•y 2 chi·∫øc xe m√°y m√†u tr·∫Øng v√† m·ªôt chi·∫øc xe m√°y m√†u ƒëen' ‚Üí 'The surrounding people can see two white motorbikes and one black motorbike.'
2025-12-23 02:29:43 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'The surrounding people can see two white motorbikes and one black motorbike.'
2025-12-23 02:29:43 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-23 02:29:43 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:29:43 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The surrounding people can see two white motorbikes and one black motorbike.
2025-12-23 02:29:43 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:29:43 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The surrounding people can see two white motorbikes and one black motorbike.
2025-12-23 02:29:43 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:29:43 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The surrounding people can see two white motorbikes and one black motorbike.
2025-12-23 02:29:43 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-23 02:29:43 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-23 02:29:43 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-23 02:29:43 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-23 02:29:43 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-23 02:29:43 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-23 02:29:43 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 02:29:50 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='C·∫£nh b√† con xung quanh h√≥ng h·ªõt, c√≥ th·ªÉ th·∫•y 2 chi·∫øc xe m√°y m√†u tr·∫Øng v√† m·ªôt chi·∫øc xe m√°y m√†u ƒëen\n\n', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 02:29:50 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-23 02:29:50 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-23 02:29:50 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-23 02:29:51 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh b√† con xung quanh h√≥ng h·ªõt, c√≥ th·ªÉ th·∫•y 2 chi·∫øc xe m√°y m√†u tr·∫Øng v√† m·ªôt chi·∫øc xe m√°y m√†u ƒëen' ‚Üí 'The surrounding people can see two white motorbikes and one black motorbike.'
2025-12-23 02:29:51 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'The surrounding people can see two white motorbikes and one black motorbike.'
2025-12-23 02:29:51 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-23 02:29:53 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 176523:1.0000, 176525:0.9059, 176522:0.8796, 464639:0.8647, 176524:0.8510, 176527:0.8234, 81352:0.8117, 176503:0.8090, 176526:0.8061, 47141:0.8059
2025-12-23 02:29:53 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 565564:1.0000, 334568:0.8078, 248648:0.7955, 30582:0.7464, 334074:0.6657, 392237:0.5752, 675205:0.5532, 565565:0.5426, 637853:0.5386, 447961:0.5354
2025-12-23 02:29:53 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 593195:1.0000, 612366:0.7182, 180980:0.6334, 104465:0.5861, 288693:0.5771, 99402:0.5636, 400076:0.5554, 499730:0.5478, 99400:0.5216, 373082:0.5199
2025-12-23 02:29:53 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 565564:1.0000, 30582:0.7507, 334568:0.7341, 248648:0.7171, 334074:0.5466, 593195:0.5172, 334081:0.4831, 612366:0.4740, 367591:0.4164, 392237:0.4124
2025-12-23 02:29:53 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-23 02:29:53 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-23 02:29:53 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 02:30:02 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='C·∫£nh b√† con xung quanh h√≥ng h·ªõt, c√≥ th·ªÉ th·∫•y 2 chi·∫øc xe m√°y m√†u tr·∫Øng v√† m·ªôt chi·∫øc xe m√°y m√†u ƒëen\n\n', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 02:30:02 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-23 02:30:02 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-23 02:30:02 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-23 02:30:02 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh b√† con xung quanh h√≥ng h·ªõt, c√≥ th·ªÉ th·∫•y 2 chi·∫øc xe m√°y m√†u tr·∫Øng v√† m·ªôt chi·∫øc xe m√°y m√†u ƒëen' ‚Üí 'The surrounding people can see two white motorbikes and one black motorbike.'
2025-12-23 02:30:02 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'The surrounding people can see two white motorbikes and one black motorbike.'
2025-12-23 02:30:02 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-23 02:30:03 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:30:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The surrounding people can see two white motorbikes and one black motorbike.
2025-12-23 02:30:03 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:30:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The surrounding people can see two white motorbikes and one black motorbike.
2025-12-23 02:30:03 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:30:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The surrounding people can see two white motorbikes and one black motorbike.
2025-12-23 02:30:03 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-23 02:30:03 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-23 02:30:03 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-23 02:30:03 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-23 02:30:03 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-23 02:30:03 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-23 02:30:03 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 02:30:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 02:30:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='C·∫£nh b√† con xung quanh h√≥ng h·ªõt, c√≥ th·ªÉ th·∫•y 2 chi·∫øc xe m√°y m√†u tr·∫Øng v√† m·ªôt chi·∫øc xe m√°y m√†u ƒëen

', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:30:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:30:05 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'C·∫£nh b√† con xung quanh h√≥ng h·ªõt, c√≥ th·ªÉ th·∫•y 2 chi·∫øc xe m√°y m√†u tr·∫Øng v√† m·ªôt chi·∫øc xe m√°y m√†u ƒëen

'
2025-12-23 02:30:06 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh b√† con xung quanh h√≥ng h·ªõt, c√≥ th·ªÉ th·∫•y 2 chi·∫øc xe m√°y m√†u tr·∫Øng v√† m·ªôt chi·∫øc xe m√°y m√†u ƒëen

' ‚Üí 'The surrounding people can see two white motorbikes and one black motorbike.'
2025-12-23 02:30:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'The surrounding people can see two white motorbikes and one black motorbike.'
2025-12-23 02:30:06 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:30:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='The surrounding people can see two white motorbikes and one black motorbike.', Q1='The surrounding people can see two white motorbikes and one black motorbike.', Q2='The surrounding people can see two white motorbikes and one black motorbike.'
2025-12-23 02:30:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 02:30:06 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 02:30:06 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:30:06 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The surrounding people can see two white motorbikes and one black motorbike.
2025-12-23 02:30:07 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:30:07 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The surrounding people can see two white motorbikes and one black motorbike.
2025-12-23 02:30:07 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:30:07 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The surrounding people can see two white motorbikes and one black motorbike.
2025-12-23 02:30:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:30:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2556.46ms
2025-12-23 02:30:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 02:30:08 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-23 02:30:08 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-23 02:30:13 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='C·∫£nh b√† con xung quanh h√≥ng h·ªõt, c√≥ th·ªÉ th·∫•y 2 chi·∫øc xe m√°y m√†u tr·∫Øng v√† m·ªôt chi·∫øc xe m√°y m√†u ƒëen\n\n', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 02:30:13 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-23 02:30:13 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-23 02:30:13 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-23 02:30:13 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh b√† con xung quanh h√≥ng h·ªõt, c√≥ th·ªÉ th·∫•y 2 chi·∫øc xe m√°y m√†u tr·∫Øng v√† m·ªôt chi·∫øc xe m√°y m√†u ƒëen' ‚Üí 'The surrounding people can see two white motorbikes and one black motorbike.'
2025-12-23 02:30:13 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'The surrounding people can see two white motorbikes and one black motorbike.'
2025-12-23 02:30:13 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-23 02:30:14 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:30:14 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The surrounding people can see two white motorbikes and one black motorbike.
2025-12-23 02:30:14 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:30:14 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The surrounding people can see two white motorbikes and one black motorbike.
2025-12-23 02:30:14 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:30:14 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The surrounding people can see two white motorbikes and one black motorbike.
2025-12-23 02:30:14 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-23 02:30:14 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-23 02:30:14 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-23 02:30:14 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-23 02:30:14 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-23 02:30:14 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-23 02:30:14 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 02:30:16 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='C·∫£nh b√† con xung quanh h√≥ng h·ªõt, c√≥ th·ªÉ th·∫•y 2 chi·∫øc xe m√°y m√†u tr·∫Øng v√† m·ªôt chi·∫øc xe m√°y m√†u ƒëen\n\n', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 02:30:16 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-23 02:30:16 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-23 02:30:16 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-23 02:30:17 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C·∫£nh b√† con xung quanh h√≥ng h·ªõt, c√≥ th·ªÉ th·∫•y 2 chi·∫øc xe m√°y m√†u tr·∫Øng v√† m·ªôt chi·∫øc xe m√°y m√†u ƒëen' ‚Üí 'The surrounding people can see two white motorbikes and one black motorbike.'
2025-12-23 02:30:17 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'The surrounding people can see two white motorbikes and one black motorbike.'
2025-12-23 02:30:17 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-23 02:30:19 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 176523:1.0000, 176525:0.9059, 176522:0.8796, 464639:0.8647, 176524:0.8510, 176527:0.8234, 81352:0.8117, 176503:0.8090, 176526:0.8061, 47141:0.8059
2025-12-23 02:30:19 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 565564:1.0000, 334568:0.8078, 248648:0.7955, 30582:0.7464, 334074:0.6657, 392237:0.5752, 675205:0.5532, 565565:0.5426, 637853:0.5386, 447961:0.5354
2025-12-23 02:30:19 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 593195:1.0000, 612366:0.7182, 180980:0.6334, 104465:0.5861, 288693:0.5771, 99402:0.5636, 400076:0.5554, 499730:0.5478, 99400:0.5216, 373082:0.5199
2025-12-23 02:30:19 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 565564:1.0000, 30582:0.7507, 334568:0.7341, 248648:0.7171, 334074:0.5466, 593195:0.5172, 334081:0.4831, 612366:0.4740, 367591:0.4164, 392237:0.4124
2025-12-23 02:30:19 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-23 02:30:19 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-23 02:30:19 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 02:30:26 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='C√≥ th·ªÉ th·∫•y m·ªôt nh√≥m ng∆∞·ªùi m·∫∑c ƒë·ªì xanh ƒëang ti·∫øn h√†nh l√†m ƒëi·ªÅu g√¨ ƒë√≥ tr√™n ch√∫ ng·ª±a con n√†y\n\n', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 02:30:26 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-23 02:30:26 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-23 02:30:26 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-23 02:30:27 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C√≥ th·ªÉ th·∫•y m·ªôt nh√≥m ng∆∞·ªùi m·∫∑c ƒë·ªì xanh ƒëang ti·∫øn h√†nh l√†m ƒëi·ªÅu g√¨ ƒë√≥ tr√™n ch√∫ ng·ª±a con n√†y' ‚Üí 'A group of people dressed in blue can be seen doing something to this pony'
2025-12-23 02:30:27 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'A group of people dressed in blue can be seen doing something to this pony'
2025-12-23 02:30:27 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-23 02:30:27 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:30:27 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A group of people dressed in blue can be seen doing something to this pony
2025-12-23 02:30:27 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:30:27 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A group of people dressed in blue can be seen doing something to this pony
2025-12-23 02:30:27 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:30:27 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A group of people dressed in blue can be seen doing something to this pony
2025-12-23 02:30:27 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-23 02:30:27 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-23 02:30:27 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-23 02:30:27 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-23 02:30:27 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-23 02:30:27 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-23 02:30:27 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 02:30:31 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='C√≥ th·ªÉ th·∫•y m·ªôt nh√≥m ng∆∞·ªùi m·∫∑c ƒë·ªì xanh ƒëang ti·∫øn h√†nh l√†m ƒëi·ªÅu g√¨ ƒë√≥ tr√™n ch√∫ ng·ª±a con n√†y\n\n', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 02:30:31 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-23 02:30:31 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-23 02:30:31 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-23 02:30:31 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C√≥ th·ªÉ th·∫•y m·ªôt nh√≥m ng∆∞·ªùi m·∫∑c ƒë·ªì xanh ƒëang ti·∫øn h√†nh l√†m ƒëi·ªÅu g√¨ ƒë√≥ tr√™n ch√∫ ng·ª±a con n√†y' ‚Üí 'A group of people dressed in blue can be seen doing something to this pony'
2025-12-23 02:30:31 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'A group of people dressed in blue can be seen doing something to this pony'
2025-12-23 02:30:31 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-23 02:30:33 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 123281:1.0000, 507617:0.9854, 612899:0.9174, 507615:0.8714, 123280:0.7965, 547094:0.7754, 612900:0.7728, 651945:0.7122, 666075:0.6923, 507614:0.6876
2025-12-23 02:30:33 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 417003:1.0000, 631710:0.9750, 316081:0.8223, 541095:0.7994, 462789:0.7838, 81896:0.7234, 600058:0.7203, 541104:0.6967, 462788:0.6719, 541089:0.6682
2025-12-23 02:30:33 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 109265:1.0000, 567725:0.9447, 651945:0.8956, 259265:0.8925, 651944:0.8782, 423802:0.8619, 567726:0.8409, 465702:0.8121, 648434:0.8004, 465701:0.7863
2025-12-23 02:30:33 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 417003:1.0000, 123281:0.9771, 631710:0.9649, 666077:0.8105, 316081:0.7498, 507617:0.7493, 541095:0.7175, 462789:0.6955, 81896:0.6105, 600058:0.6061
2025-12-23 02:30:33 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-23 02:30:33 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-23 02:30:33 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 02:31:56 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='con ng·ª±a ƒë·ªëm tr·∫Øng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 02:31:56 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-23 02:31:56 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-23 02:31:56 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-23 02:31:57 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'con ng·ª±a ƒë·ªëm tr·∫Øng' ‚Üí 'white spotted horse'
2025-12-23 02:31:57 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'white spotted horse'
2025-12-23 02:31:57 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-23 02:31:57 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:31:57 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: white spotted horse
2025-12-23 02:31:57 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:31:57 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: white spotted horse
2025-12-23 02:31:57 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:31:57 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: white spotted horse
2025-12-23 02:31:57 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-23 02:31:57 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-23 02:31:57 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-23 02:31:57 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-23 02:31:57 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-23 02:31:57 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-23 02:31:57 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 02:32:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 02:32:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='con ng·ª±a ƒë·ªëm tr·∫Øng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:32:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:32:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'con ng·ª±a ƒë·ªëm tr·∫Øng'
2025-12-23 02:32:00 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'con ng·ª±a ƒë·ªëm tr·∫Øng' ‚Üí 'white spotted horse'
2025-12-23 02:32:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'white spotted horse'
2025-12-23 02:32:01 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:32:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='white spotted horse', Q1='white spotted horse', Q2='white spotted horse'
2025-12-23 02:32:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 02:32:01 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 02:32:01 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:32:01 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: white spotted horse
2025-12-23 02:32:02 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:32:02 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: white spotted horse
2025-12-23 02:32:02 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:32:02 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: white spotted horse
2025-12-23 02:32:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:32:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3041.73ms
2025-12-23 02:32:03 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 02:32:03 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-23 02:32:03 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-23 02:32:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 02:32:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='c√≥ th·ªÉ th·∫•y m·ªôt ch√∫ ng·ª±a con c√≥ ƒë·ªëm tr·∫Øng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:32:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:32:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'c√≥ th·ªÉ th·∫•y m·ªôt ch√∫ ng·ª±a con c√≥ ƒë·ªëm tr·∫Øng'
2025-12-23 02:32:26 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c√≥ th·ªÉ th·∫•y m·ªôt ch√∫ ng·ª±a con c√≥ ƒë·ªëm tr·∫Øng' ‚Üí 'A foal with white spots can be seen'
2025-12-23 02:32:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'A foal with white spots can be seen'
2025-12-23 02:32:26 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:32:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='A foal with white spots can be seen', Q1='A foal with white spots can be seen', Q2='A foal with white spots can be seen'
2025-12-23 02:32:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 02:32:26 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 02:32:26 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:32:26 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A foal with white spots can be seen
2025-12-23 02:32:26 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:32:26 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A foal with white spots can be seen
2025-12-23 02:32:26 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:32:26 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A foal with white spots can be seen
2025-12-23 02:32:26 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:32:26 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A foal with white spots can be seen
2025-12-23 02:32:27 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:32:27 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A foal with white spots can be seen
2025-12-23 02:32:27 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:32:27 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A foal with white spots can be seen
2025-12-23 02:32:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 0
2025-12-23 02:32:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3530.61ms
2025-12-23 02:32:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 02:32:27 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-23 02:32:27 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-23 02:35:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 3 stages
2025-12-23 02:35:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='c·∫£nh m·ªôt ki·∫øn tr√∫c gi·ªëng kim t·ª± th√°p ƒë∆∞·ª£c l√†m t·ª´ k√≠nh', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:35:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:35:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:35:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'c·∫£nh m·ªôt ki·∫øn tr√∫c gi·ªëng kim t·ª± th√°p ƒë∆∞·ª£c l√†m t·ª´ k√≠nh'
2025-12-23 02:35:24 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c·∫£nh m·ªôt ki·∫øn tr√∫c gi·ªëng kim t·ª± th√°p ƒë∆∞·ª£c l√†m t·ª´ k√≠nh' ‚Üí 'scene of a pyramid-like structure made from glass'
2025-12-23 02:35:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'scene of a pyramid-like structure made from glass'
2025-12-23 02:35:24 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:35:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='scene of a pyramid-like structure made from glass', Q1='scene of a pyramid-like structure made from glass', Q2='scene of a pyramid-like structure made from glass'
2025-12-23 02:35:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 02:35:24 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 02:35:24 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: ''
2025-12-23 02:35:24 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 3 has no enabled methods
2025-12-23 02:35:24 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:35:24 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: scene of a pyramid-like structure made from glass
2025-12-23 02:35:24 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='M·ªü ƒë·∫ßu l√† c·∫£nh m·ªôt ki·∫øn tr√∫c gi·ªëng kim t·ª± th√°p ƒë∆∞·ª£c l√†m t·ª´ k√≠nh', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 02:35:24 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-23 02:35:24 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-23 02:35:24 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-23 02:35:25 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:35:25 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: scene of a pyramid-like structure made from glass
2025-12-23 02:35:25 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:35:25 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: scene of a pyramid-like structure made from glass
2025-12-23 02:35:26 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'M·ªü ƒë·∫ßu l√† c·∫£nh m·ªôt ki·∫øn tr√∫c gi·ªëng kim t·ª± th√°p ƒë∆∞·ª£c l√†m t·ª´ k√≠nh' ‚Üí 'The opening scene shows a pyramid-like structure made from glass'
2025-12-23 02:35:26 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'The opening scene shows a pyramid-like structure made from glass'
2025-12-23 02:35:26 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-23 02:35:26 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:35:26 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The opening scene shows a pyramid-like structure made from glass
2025-12-23 02:35:26 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:35:26 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The opening scene shows a pyramid-like structure made from glass
2025-12-23 02:35:26 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:35:26 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The opening scene shows a pyramid-like structure made from glass
2025-12-23 02:35:26 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-23 02:35:26 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-23 02:35:26 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-23 02:35:26 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-23 02:35:26 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-23 02:35:26 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-23 02:35:26 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 02:35:26 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='M·ªü ƒë·∫ßu l√† c·∫£nh m·ªôt ki·∫øn tr√∫c gi·ªëng kim t·ª± th√°p ƒë∆∞·ª£c l√†m t·ª´ k√≠nh\n\n', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 02:35:26 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-23 02:35:26 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-23 02:35:26 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-23 02:35:27 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'M·ªü ƒë·∫ßu l√† c·∫£nh m·ªôt ki·∫øn tr√∫c gi·ªëng kim t·ª± th√°p ƒë∆∞·ª£c l√†m t·ª´ k√≠nh' ‚Üí 'The opening scene shows a pyramid-like structure made from glass'
2025-12-23 02:35:27 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'The opening scene shows a pyramid-like structure made from glass'
2025-12-23 02:35:27 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-23 02:35:29 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 153220:1.0000, 640377:0.9473, 640376:0.9249, 153251:0.8652, 192842:0.8482, 375817:0.8480, 692024:0.8477, 153259:0.8475, 153254:0.8226, 640384:0.8016
2025-12-23 02:35:29 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 567680:1.0000, 567659:0.9958, 567660:0.8502, 567653:0.8348, 567661:0.8275, 519528:0.7927, 639595:0.7847, 567654:0.7791, 519529:0.7572, 214869:0.7415
2025-12-23 02:35:29 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 153254:1.0000, 153185:0.8949, 153220:0.8688, 153259:0.8473, 192840:0.8068, 153251:0.7575, 153250:0.7422, 302569:0.7371, 640376:0.7350, 153183:0.7136
2025-12-23 02:35:29 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 640376:1.0000, 640377:0.9592, 519528:0.8943, 519529:0.8599, 567680:0.7861, 153251:0.7734, 639595:0.7671, 153220:0.7356, 21594:0.7151, 567659:0.6774
2025-12-23 02:35:29 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-23 02:35:29 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-23 02:35:29 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 02:35:29 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='M·ªü ƒë·∫ßu l√† c·∫£nh m·ªôt ki·∫øn tr√∫c gi·ªëng kim t·ª± th√°p ƒë∆∞·ª£c l√†m t·ª´ k√≠nh', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 02:35:29 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-23 02:35:29 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-23 02:35:29 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-23 02:35:30 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'M·ªü ƒë·∫ßu l√† c·∫£nh m·ªôt ki·∫øn tr√∫c gi·ªëng kim t·ª± th√°p ƒë∆∞·ª£c l√†m t·ª´ k√≠nh' ‚Üí 'The opening scene shows a pyramid-like structure made from glass'
2025-12-23 02:35:30 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'The opening scene shows a pyramid-like structure made from glass'
2025-12-23 02:35:30 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-23 02:35:30 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:35:30 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The opening scene shows a pyramid-like structure made from glass
2025-12-23 02:35:30 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:35:30 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The opening scene shows a pyramid-like structure made from glass
2025-12-23 02:35:30 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:35:30 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The opening scene shows a pyramid-like structure made from glass
2025-12-23 02:35:30 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-23 02:35:30 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-23 02:35:30 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-23 02:35:30 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-23 02:35:30 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-23 02:35:30 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-23 02:35:30 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 02:35:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:35:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 3 stages in 7647.46ms
2025-12-23 02:35:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-23 02:35:30 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 3 stages
2025-12-23 02:35:30 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 64 videos with results
2025-12-23 02:35:30 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 0 videos with results
2025-12-23 02:35:30 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 3: 0 videos with results
2025-12-23 02:35:30 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] No common videos across all stages
2025-12-23 02:35:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 0 valid tuples
2025-12-23 02:35:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 02:35:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='M·ªü ƒë·∫ßu l√† c·∫£nh m·ªôt ki·∫øn tr√∫c gi·ªëng kim t·ª± th√°p ƒë∆∞·ª£c l√†m t·ª´ k√≠nh', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:35:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:35:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'M·ªü ƒë·∫ßu l√† c·∫£nh m·ªôt ki·∫øn tr√∫c gi·ªëng kim t·ª± th√°p ƒë∆∞·ª£c l√†m t·ª´ k√≠nh'
2025-12-23 02:35:32 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'M·ªü ƒë·∫ßu l√† c·∫£nh m·ªôt ki·∫øn tr√∫c gi·ªëng kim t·ª± th√°p ƒë∆∞·ª£c l√†m t·ª´ k√≠nh' ‚Üí 'The opening scene shows a pyramid-like structure made from glass'
2025-12-23 02:35:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'The opening scene shows a pyramid-like structure made from glass'
2025-12-23 02:35:33 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:35:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='The opening scene shows a pyramid-like structure made from glass', Q1='The opening scene shows a pyramid-like structure made from glass', Q2='The opening scene shows a pyramid-like structure made from glass'
2025-12-23 02:35:33 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 02:35:33 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 02:35:33 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:35:33 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The opening scene shows a pyramid-like structure made from glass
2025-12-23 02:35:33 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:35:33 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The opening scene shows a pyramid-like structure made from glass
2025-12-23 02:35:34 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:35:34 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The opening scene shows a pyramid-like structure made from glass
2025-12-23 02:35:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:35:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3183.50ms
2025-12-23 02:35:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 02:35:35 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-23 02:35:35 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-23 02:36:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 3 stages
2025-12-23 02:36:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='c·∫£nh m·ªôt ki·∫øn tr√∫c gi·ªëng kim t·ª± th√°p ƒë∆∞·ª£c l√†m t·ª´ k√≠nh', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:36:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query=' t·∫°i m·ªôt s√¢n kh·∫•u bi·ªÉu di·ªÖn th·ªùi trang t·∫°i paris', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:36:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:36:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'c·∫£nh m·ªôt ki·∫øn tr√∫c gi·ªëng kim t·ª± th√°p ƒë∆∞·ª£c l√†m t·ª´ k√≠nh'
2025-12-23 02:36:35 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c·∫£nh m·ªôt ki·∫øn tr√∫c gi·ªëng kim t·ª± th√°p ƒë∆∞·ª£c l√†m t·ª´ k√≠nh' ‚Üí 'scene of a pyramid-like structure made from glass'
2025-12-23 02:36:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'scene of a pyramid-like structure made from glass'
2025-12-23 02:36:35 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:36:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='scene of a pyramid-like structure made from glass', Q1='scene of a pyramid-like structure made from glass', Q2='scene of a pyramid-like structure made from glass'
2025-12-23 02:36:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ' t·∫°i m·ªôt s√¢n kh·∫•u bi·ªÉu di·ªÖn th·ªùi trang t·∫°i paris'
2025-12-23 02:36:37 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: ' t·∫°i m·ªôt s√¢n kh·∫•u bi·ªÉu di·ªÖn th·ªùi trang t·∫°i paris' ‚Üí 'at a fashion show stage in Paris'
2025-12-23 02:36:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'at a fashion show stage in Paris'
2025-12-23 02:36:37 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:36:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='at a fashion show stage in Paris', Q1='at a fashion show stage in Paris', Q2='at a fashion show stage in Paris'
2025-12-23 02:36:37 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: ''
2025-12-23 02:36:37 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 3 has no enabled methods
2025-12-23 02:36:37 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:36:37 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: scene of a pyramid-like structure made from glass
2025-12-23 02:36:37 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:36:37 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: at a fashion show stage in Paris
2025-12-23 02:36:37 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:36:37 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: scene of a pyramid-like structure made from glass
2025-12-23 02:36:37 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:36:37 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: scene of a pyramid-like structure made from glass
2025-12-23 02:36:37 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:36:37 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: scene of a pyramid-like structure made from glass
2025-12-23 02:36:37 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:36:37 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: scene of a pyramid-like structure made from glass
2025-12-23 02:36:38 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:36:38 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: at a fashion show stage in Paris
2025-12-23 02:36:38 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:36:38 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: at a fashion show stage in Paris
2025-12-23 02:36:38 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:36:38 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: scene of a pyramid-like structure made from glass
2025-12-23 02:36:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 0
2025-12-23 02:36:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:36:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 3 stages in 4747.79ms
2025-12-23 02:36:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-23 02:36:39 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 3 stages
2025-12-23 02:36:39 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 51 videos with results
2025-12-23 02:36:39 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 66 videos with results
2025-12-23 02:36:39 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 3: 0 videos with results
2025-12-23 02:36:39 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] No common videos across all stages
2025-12-23 02:36:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 0 valid tuples
2025-12-23 02:36:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 3 stages
2025-12-23 02:36:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='c·∫£nh m·ªôt ki·∫øn tr√∫c gi·ªëng kim t·ª± th√°p ƒë∆∞·ª£c l√†m t·ª´ k√≠nh', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:36:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query=' t·∫°i m·ªôt s√¢n kh·∫•u bi·ªÉu di·ªÖn th·ªùi trang t·∫°i paris', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:36:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:36:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'c·∫£nh m·ªôt ki·∫øn tr√∫c gi·ªëng kim t·ª± th√°p ƒë∆∞·ª£c l√†m t·ª´ k√≠nh'
2025-12-23 02:36:42 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c·∫£nh m·ªôt ki·∫øn tr√∫c gi·ªëng kim t·ª± th√°p ƒë∆∞·ª£c l√†m t·ª´ k√≠nh' ‚Üí 'scene of a pyramid-like structure made from glass'
2025-12-23 02:36:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'scene of a pyramid-like structure made from glass'
2025-12-23 02:36:42 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:36:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='scene of a pyramid-like structure made from glass', Q1='scene of a pyramid-like structure made from glass', Q2='scene of a pyramid-like structure made from glass'
2025-12-23 02:36:42 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ' t·∫°i m·ªôt s√¢n kh·∫•u bi·ªÉu di·ªÖn th·ªùi trang t·∫°i paris'
2025-12-23 02:36:43 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: ' t·∫°i m·ªôt s√¢n kh·∫•u bi·ªÉu di·ªÖn th·ªùi trang t·∫°i paris' ‚Üí 'at a fashion show stage in Paris'
2025-12-23 02:36:43 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'at a fashion show stage in Paris'
2025-12-23 02:36:43 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:36:43 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='at a fashion show stage in Paris', Q1='at a fashion show stage in Paris', Q2='at a fashion show stage in Paris'
2025-12-23 02:36:43 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: ''
2025-12-23 02:36:43 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 3 has no enabled methods
2025-12-23 02:36:43 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:36:43 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: scene of a pyramid-like structure made from glass
2025-12-23 02:36:43 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:36:43 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:36:43 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: at a fashion show stage in Paris
2025-12-23 02:36:43 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: scene of a pyramid-like structure made from glass
2025-12-23 02:36:43 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:36:43 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: scene of a pyramid-like structure made from glass
2025-12-23 02:36:43 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:36:43 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: scene of a pyramid-like structure made from glass
2025-12-23 02:36:44 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:36:44 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: scene of a pyramid-like structure made from glass
2025-12-23 02:36:44 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:36:44 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: at a fashion show stage in Paris
2025-12-23 02:36:44 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:36:44 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: at a fashion show stage in Paris
2025-12-23 02:36:45 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:36:45 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: scene of a pyramid-like structure made from glass
2025-12-23 02:36:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 0
2025-12-23 02:36:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:36:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 3 stages in 4114.24ms
2025-12-23 02:36:45 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 02:36:45 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 400 unique ids from 3 stages
2025-12-23 02:36:45 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 400 unique ids
2025-12-23 02:37:12 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 3 stages
2025-12-23 02:37:12 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='c·∫£nh m·ªôt ki·∫øn tr√∫c gi·ªëng kim t·ª± th√°p ƒë∆∞·ª£c l√†m t·ª´ k√≠nh', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:37:12 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query=' t·∫°i m·ªôt s√¢n kh·∫•u bi·ªÉu di·ªÖn th·ªùi trang t·∫°i paris', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:37:12 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:37:12 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'c·∫£nh m·ªôt ki·∫øn tr√∫c gi·ªëng kim t·ª± th√°p ƒë∆∞·ª£c l√†m t·ª´ k√≠nh'
2025-12-23 02:37:13 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c·∫£nh m·ªôt ki·∫øn tr√∫c gi·ªëng kim t·ª± th√°p ƒë∆∞·ª£c l√†m t·ª´ k√≠nh' ‚Üí 'scene of a pyramid-like structure made from glass'
2025-12-23 02:37:13 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'scene of a pyramid-like structure made from glass'
2025-12-23 02:37:13 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:37:13 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='scene of a pyramid-like structure made from glass', Q1='scene of a pyramid-like structure made from glass', Q2='scene of a pyramid-like structure made from glass'
2025-12-23 02:37:13 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ' t·∫°i m·ªôt s√¢n kh·∫•u bi·ªÉu di·ªÖn th·ªùi trang t·∫°i paris'
2025-12-23 02:37:14 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: ' t·∫°i m·ªôt s√¢n kh·∫•u bi·ªÉu di·ªÖn th·ªùi trang t·∫°i paris' ‚Üí 'at a fashion show stage in Paris'
2025-12-23 02:37:14 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'at a fashion show stage in Paris'
2025-12-23 02:37:14 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:37:14 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='at a fashion show stage in Paris', Q1='at a fashion show stage in Paris', Q2='at a fashion show stage in Paris'
2025-12-23 02:37:14 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: ''
2025-12-23 02:37:14 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 3 has no enabled methods
2025-12-23 02:37:15 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:37:15 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:37:15 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: scene of a pyramid-like structure made from glass
2025-12-23 02:37:15 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: scene of a pyramid-like structure made from glass
2025-12-23 02:37:15 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:37:15 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: at a fashion show stage in Paris
2025-12-23 02:37:15 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:37:15 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: scene of a pyramid-like structure made from glass
2025-12-23 02:37:15 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:37:15 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: at a fashion show stage in Paris
2025-12-23 02:37:15 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:37:15 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: scene of a pyramid-like structure made from glass
2025-12-23 02:37:15 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:37:15 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: at a fashion show stage in Paris
2025-12-23 02:37:15 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:37:15 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: scene of a pyramid-like structure made from glass
2025-12-23 02:37:16 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:37:16 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: scene of a pyramid-like structure made from glass
2025-12-23 02:37:16 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 0
2025-12-23 02:37:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:37:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 3 stages in 4625.48ms
2025-12-23 02:37:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-23 02:37:17 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 3 stages
2025-12-23 02:37:17 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 73 videos with results
2025-12-23 02:37:17 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 51 videos with results
2025-12-23 02:37:17 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 3: 0 videos with results
2025-12-23 02:37:17 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] No common videos across all stages
2025-12-23 02:37:17 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 0 valid tuples
2025-12-23 02:37:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 3 stages
2025-12-23 02:37:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='c·∫£nh m·ªôt ki·∫øn tr√∫c gi·ªëng kim t·ª± th√°p ƒë∆∞·ª£c l√†m t·ª´ k√≠nh', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:37:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='m·ªôt s√¢n kh·∫•u bi·ªÉu di·ªÖn th·ªùi trang t·∫°i paris', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:37:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:37:59 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'c·∫£nh m·ªôt ki·∫øn tr√∫c gi·ªëng kim t·ª± th√°p ƒë∆∞·ª£c l√†m t·ª´ k√≠nh'
2025-12-23 02:38:01 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c·∫£nh m·ªôt ki·∫øn tr√∫c gi·ªëng kim t·ª± th√°p ƒë∆∞·ª£c l√†m t·ª´ k√≠nh' ‚Üí 'scene of a pyramid-like structure made from glass'
2025-12-23 02:38:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'scene of a pyramid-like structure made from glass'
2025-12-23 02:38:01 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:38:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='scene of a pyramid-like structure made from glass', Q1='scene of a pyramid-like structure made from glass', Q2='scene of a pyramid-like structure made from glass'
2025-12-23 02:38:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'm·ªôt s√¢n kh·∫•u bi·ªÉu di·ªÖn th·ªùi trang t·∫°i paris'
2025-12-23 02:38:02 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'm·ªôt s√¢n kh·∫•u bi·ªÉu di·ªÖn th·ªùi trang t·∫°i paris' ‚Üí 'a fashion show stage in paris'
2025-12-23 02:38:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'a fashion show stage in paris'
2025-12-23 02:38:02 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:38:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='a fashion show stage in paris', Q1='a fashion show stage in paris', Q2='a fashion show stage in paris'
2025-12-23 02:38:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: ''
2025-12-23 02:38:02 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 3 has no enabled methods
2025-12-23 02:38:02 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:38:02 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:38:02 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:38:02 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: scene of a pyramid-like structure made from glass
2025-12-23 02:38:02 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: a fashion show stage in paris
2025-12-23 02:38:02 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: scene of a pyramid-like structure made from glass
2025-12-23 02:38:02 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:38:02 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: scene of a pyramid-like structure made from glass
2025-12-23 02:38:02 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:38:02 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: scene of a pyramid-like structure made from glass
2025-12-23 02:38:02 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:38:02 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: scene of a pyramid-like structure made from glass
2025-12-23 02:38:03 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:38:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: a fashion show stage in paris
2025-12-23 02:38:03 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:38:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: a fashion show stage in paris
2025-12-23 02:38:04 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:38:04 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: a fashion show stage in paris
2025-12-23 02:38:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:38:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 0
2025-12-23 02:38:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 3 stages in 5336.54ms
2025-12-23 02:38:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-23 02:38:04 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 3 stages
2025-12-23 02:38:04 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 51 videos with results
2025-12-23 02:38:04 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 61 videos with results
2025-12-23 02:38:04 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 3: 0 videos with results
2025-12-23 02:38:04 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] No common videos across all stages
2025-12-23 02:38:04 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 0 valid tuples
2025-12-23 02:38:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 3 stages
2025-12-23 02:38:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='c·∫£nh m·ªôt ki·∫øn tr√∫c gi·ªëng kim t·ª± th√°p ƒë∆∞·ª£c l√†m t·ª´ k√≠nh', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:38:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='m·ªôt s√¢n kh·∫•u bi·ªÉu di·ªÖn th·ªùi trang t·∫°i paris', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:38:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:38:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'c·∫£nh m·ªôt ki·∫øn tr√∫c gi·ªëng kim t·ª± th√°p ƒë∆∞·ª£c l√†m t·ª´ k√≠nh'
2025-12-23 02:38:07 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c·∫£nh m·ªôt ki·∫øn tr√∫c gi·ªëng kim t·ª± th√°p ƒë∆∞·ª£c l√†m t·ª´ k√≠nh' ‚Üí 'scene of a pyramid-like structure made from glass'
2025-12-23 02:38:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'scene of a pyramid-like structure made from glass'
2025-12-23 02:38:07 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:38:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='scene of a pyramid-like structure made from glass', Q1='scene of a pyramid-like structure made from glass', Q2='scene of a pyramid-like structure made from glass'
2025-12-23 02:38:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'm·ªôt s√¢n kh·∫•u bi·ªÉu di·ªÖn th·ªùi trang t·∫°i paris'
2025-12-23 02:38:07 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'm·ªôt s√¢n kh·∫•u bi·ªÉu di·ªÖn th·ªùi trang t·∫°i paris' ‚Üí 'a fashion show stage in paris'
2025-12-23 02:38:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'a fashion show stage in paris'
2025-12-23 02:38:08 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:38:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='a fashion show stage in paris', Q1='a fashion show stage in paris', Q2='a fashion show stage in paris'
2025-12-23 02:38:08 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: ''
2025-12-23 02:38:08 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 3 has no enabled methods
2025-12-23 02:38:08 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:38:08 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: scene of a pyramid-like structure made from glass
2025-12-23 02:38:08 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:38:08 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: a fashion show stage in paris
2025-12-23 02:38:08 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:38:08 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: scene of a pyramid-like structure made from glass
2025-12-23 02:38:08 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:38:08 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: scene of a pyramid-like structure made from glass
2025-12-23 02:38:08 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:38:08 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: scene of a pyramid-like structure made from glass
2025-12-23 02:38:08 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:38:08 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: scene of a pyramid-like structure made from glass
2025-12-23 02:38:09 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:38:09 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: a fashion show stage in paris
2025-12-23 02:38:09 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:38:09 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: a fashion show stage in paris
2025-12-23 02:38:09 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:38:09 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: scene of a pyramid-like structure made from glass
2025-12-23 02:38:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-23 02:38:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:38:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 3 stages in 3168.71ms
2025-12-23 02:38:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 02:38:10 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 400 unique ids from 3 stages
2025-12-23 02:38:10 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 400 unique ids
2025-12-23 02:39:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 3 stages
2025-12-23 02:39:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='kim t·ª± th√°p ƒë∆∞·ª£c l√†m t·ª´ k√≠nh', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:39:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='s√¢n kh·∫•u bi·ªÉu di·ªÖn th·ªùi trang t·∫°i paris', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:39:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:39:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'kim t·ª± th√°p ƒë∆∞·ª£c l√†m t·ª´ k√≠nh'
2025-12-23 02:39:28 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'kim t·ª± th√°p ƒë∆∞·ª£c l√†m t·ª´ k√≠nh' ‚Üí 'The pyramid is made from glass'
2025-12-23 02:39:28 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'The pyramid is made from glass'
2025-12-23 02:39:29 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:39:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='The pyramid is made from glass', Q1='The pyramid is made from glass', Q2='The pyramid is made from glass'
2025-12-23 02:39:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 's√¢n kh·∫•u bi·ªÉu di·ªÖn th·ªùi trang t·∫°i paris'
2025-12-23 02:39:30 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¢n kh·∫•u bi·ªÉu di·ªÖn th·ªùi trang t·∫°i paris' ‚Üí 'Fashion show stage in paris'
2025-12-23 02:39:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'Fashion show stage in paris'
2025-12-23 02:39:30 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:39:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='Fashion show stage in paris', Q1='Fashion show stage in paris', Q2='Fashion show stage in paris'
2025-12-23 02:39:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: ''
2025-12-23 02:39:30 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 3 has no enabled methods
2025-12-23 02:39:30 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:39:30 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Fashion show stage in paris
2025-12-23 02:39:30 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:39:30 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The pyramid is made from glass
2025-12-23 02:39:30 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:39:30 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The pyramid is made from glass
2025-12-23 02:39:30 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:39:30 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Fashion show stage in paris
2025-12-23 02:39:30 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:39:30 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The pyramid is made from glass
2025-12-23 02:39:31 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:39:31 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Fashion show stage in paris
2025-12-23 02:39:31 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:39:31 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Fashion show stage in paris
2025-12-23 02:39:31 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:39:31 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Fashion show stage in paris
2025-12-23 02:39:32 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:39:32 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Fashion show stage in paris
2025-12-23 02:39:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 0, Q2: 200
2025-12-23 02:39:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:39:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 3 stages in 5192.93ms
2025-12-23 02:39:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 02:39:32 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 400 unique ids from 3 stages
2025-12-23 02:39:32 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 400 unique ids
2025-12-23 02:39:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 3 stages
2025-12-23 02:39:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='kim t·ª± th√°p ƒë∆∞·ª£c l√†m t·ª´ k√≠nh', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:39:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='s√¢n kh·∫•u bi·ªÉu di·ªÖn th·ªùi trang t·∫°i paris', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:39:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2: id=3, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:39:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'kim t·ª± th√°p ƒë∆∞·ª£c l√†m t·ª´ k√≠nh'
2025-12-23 02:39:38 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'kim t·ª± th√°p ƒë∆∞·ª£c l√†m t·ª´ k√≠nh' ‚Üí 'The pyramid is made from glass'
2025-12-23 02:39:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'The pyramid is made from glass'
2025-12-23 02:39:38 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:39:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='The pyramid is made from glass', Q1='The pyramid is made from glass', Q2='The pyramid is made from glass'
2025-12-23 02:39:38 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 's√¢n kh·∫•u bi·ªÉu di·ªÖn th·ªùi trang t·∫°i paris'
2025-12-23 02:39:39 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¢n kh·∫•u bi·ªÉu di·ªÖn th·ªùi trang t·∫°i paris' ‚Üí 'Fashion show stage in paris'
2025-12-23 02:39:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'Fashion show stage in paris'
2025-12-23 02:39:39 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:39:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='Fashion show stage in paris', Q1='Fashion show stage in paris', Q2='Fashion show stage in paris'
2025-12-23 02:39:39 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 3: ''
2025-12-23 02:39:39 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 3 has no enabled methods
2025-12-23 02:39:39 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:39:39 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The pyramid is made from glass
2025-12-23 02:39:39 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:39:39 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Fashion show stage in paris
2025-12-23 02:39:39 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:39:39 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The pyramid is made from glass
2025-12-23 02:39:39 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:39:39 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The pyramid is made from glass
2025-12-23 02:39:39 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:39:39 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The pyramid is made from glass
2025-12-23 02:39:39 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:39:39 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The pyramid is made from glass
2025-12-23 02:39:40 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:39:40 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Fashion show stage in paris
2025-12-23 02:39:40 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:39:40 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Fashion show stage in paris
2025-12-23 02:39:40 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:39:40 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Fashion show stage in paris
2025-12-23 02:39:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:39:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-23 02:39:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 3 stages in 3240.93ms
2025-12-23 02:39:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-23 02:39:41 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 3 stages
2025-12-23 02:39:41 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 57 videos with results
2025-12-23 02:39:41 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 58 videos with results
2025-12-23 02:39:41 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 3: 0 videos with results
2025-12-23 02:39:41 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] No common videos across all stages
2025-12-23 02:39:41 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 0 valid tuples
2025-12-23 02:39:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 02:39:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='kim t·ª± th√°p ƒë∆∞·ª£c l√†m t·ª´ k√≠nh', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:39:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='s√¢n kh·∫•u bi·ªÉu di·ªÖn th·ªùi trang t·∫°i paris', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:39:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'kim t·ª± th√°p ƒë∆∞·ª£c l√†m t·ª´ k√≠nh'
2025-12-23 02:39:58 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'kim t·ª± th√°p ƒë∆∞·ª£c l√†m t·ª´ k√≠nh' ‚Üí 'The pyramid is made from glass'
2025-12-23 02:39:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'The pyramid is made from glass'
2025-12-23 02:39:58 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:39:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='The pyramid is made from glass', Q1='The pyramid is made from glass', Q2='The pyramid is made from glass'
2025-12-23 02:39:58 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 's√¢n kh·∫•u bi·ªÉu di·ªÖn th·ªùi trang t·∫°i paris'
2025-12-23 02:40:00 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¢n kh·∫•u bi·ªÉu di·ªÖn th·ªùi trang t·∫°i paris' ‚Üí 'Fashion show stage in paris'
2025-12-23 02:40:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'Fashion show stage in paris'
2025-12-23 02:40:00 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:40:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='Fashion show stage in paris', Q1='Fashion show stage in paris', Q2='Fashion show stage in paris'
2025-12-23 02:40:00 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:40:00 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The pyramid is made from glass
2025-12-23 02:40:00 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:40:00 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The pyramid is made from glass
2025-12-23 02:40:00 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:40:00 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Fashion show stage in paris
2025-12-23 02:40:00 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:40:00 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The pyramid is made from glass
2025-12-23 02:40:00 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:40:00 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Fashion show stage in paris
2025-12-23 02:40:00 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:40:00 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The pyramid is made from glass
2025-12-23 02:40:01 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:40:01 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: Fashion show stage in paris
2025-12-23 02:40:01 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:40:01 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The pyramid is made from glass
2025-12-23 02:40:02 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:40:02 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Fashion show stage in paris
2025-12-23 02:40:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:40:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-23 02:40:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 4155.82ms
2025-12-23 02:40:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-23 02:40:02 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 2 stages
2025-12-23 02:40:02 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 79 videos with results
2025-12-23 02:40:02 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 64 videos with results
2025-12-23 02:40:02 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 3 common videos across all stages
2025-12-23 02:40:02 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 18 valid tuples
2025-12-23 02:40:02 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 18 valid tuples
2025-12-23 02:40:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 02:40:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='m·ªôt ki·∫øn tr√∫c gi·ªëng kim t·ª± th√°p ƒë∆∞·ª£c l√†m t·ª´ k√≠nh', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:40:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='s√¢n kh·∫•u bi·ªÉu di·ªÖn th·ªùi trang', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:40:25 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'm·ªôt ki·∫øn tr√∫c gi·ªëng kim t·ª± th√°p ƒë∆∞·ª£c l√†m t·ª´ k√≠nh'
2025-12-23 02:40:26 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'm·ªôt ki·∫øn tr√∫c gi·ªëng kim t·ª± th√°p ƒë∆∞·ª£c l√†m t·ª´ k√≠nh' ‚Üí 'a pyramid-like structure made from glass'
2025-12-23 02:40:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'a pyramid-like structure made from glass'
2025-12-23 02:40:26 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:40:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='a pyramid-like structure made from glass', Q1='a pyramid-like structure made from glass', Q2='a pyramid-like structure made from glass'
2025-12-23 02:40:26 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 's√¢n kh·∫•u bi·ªÉu di·ªÖn th·ªùi trang'
2025-12-23 02:40:27 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¢n kh·∫•u bi·ªÉu di·ªÖn th·ªùi trang' ‚Üí 'fashion show stage'
2025-12-23 02:40:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'fashion show stage'
2025-12-23 02:40:27 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:40:27 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='fashion show stage', Q1='fashion show stage', Q2='fashion show stage'
2025-12-23 02:40:27 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:40:27 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: a pyramid-like structure made from glass
2025-12-23 02:40:27 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:40:27 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: fashion show stage
2025-12-23 02:40:27 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:40:27 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: a pyramid-like structure made from glass
2025-12-23 02:40:28 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:40:28 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: a pyramid-like structure made from glass
2025-12-23 02:40:28 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:40:28 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: a pyramid-like structure made from glass
2025-12-23 02:40:28 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:40:28 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: a pyramid-like structure made from glass
2025-12-23 02:40:28 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:40:28 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: fashion show stage
2025-12-23 02:40:28 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:40:28 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: fashion show stage
2025-12-23 02:40:29 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:40:29 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: fashion show stage
2025-12-23 02:40:29 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:40:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-23 02:40:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 4318.81ms
2025-12-23 02:40:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-23 02:40:30 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 2 stages
2025-12-23 02:40:30 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 52 videos with results
2025-12-23 02:40:30 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 56 videos with results
2025-12-23 02:40:30 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 2 common videos across all stages
2025-12-23 02:40:30 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Found 5 valid tuples
2025-12-23 02:40:30 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 5 valid tuples
2025-12-23 02:41:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 02:41:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='M·ªü ƒë·∫ßu l√† c·∫£nh m·ªôt ki·∫øn tr√∫c gi·ªëng kim t·ª± th√°p ƒë∆∞·ª£c l√†m t·ª´ k√≠nh

', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:41:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='Bi·ªÉu di·ªÖn th·ªùi trang', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:41:09 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'M·ªü ƒë·∫ßu l√† c·∫£nh m·ªôt ki·∫øn tr√∫c gi·ªëng kim t·ª± th√°p ƒë∆∞·ª£c l√†m t·ª´ k√≠nh

'
2025-12-23 02:41:10 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'M·ªü ƒë·∫ßu l√† c·∫£nh m·ªôt ki·∫øn tr√∫c gi·ªëng kim t·ª± th√°p ƒë∆∞·ª£c l√†m t·ª´ k√≠nh

' ‚Üí 'The opening scene shows a pyramid-like structure made from glass'
2025-12-23 02:41:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'The opening scene shows a pyramid-like structure made from glass'
2025-12-23 02:41:10 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:41:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='The opening scene shows a pyramid-like structure made from glass', Q1='The opening scene shows a pyramid-like structure made from glass', Q2='The opening scene shows a pyramid-like structure made from glass'
2025-12-23 02:41:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: 'Bi·ªÉu di·ªÖn th·ªùi trang'
2025-12-23 02:41:10 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'Bi·ªÉu di·ªÖn th·ªùi trang' ‚Üí 'Fashion show'
2025-12-23 02:41:10 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 translated: 'Fashion show'
2025-12-23 02:41:11 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:41:11 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 queries: Q0='Fashion show', Q1='Fashion show', Q2='Fashion show'
2025-12-23 02:41:11 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:41:11 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The opening scene shows a pyramid-like structure made from glass
2025-12-23 02:41:11 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:41:11 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: Fashion show
2025-12-23 02:41:11 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:41:11 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The opening scene shows a pyramid-like structure made from glass
2025-12-23 02:41:11 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:41:11 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The opening scene shows a pyramid-like structure made from glass
2025-12-23 02:41:11 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:41:11 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The opening scene shows a pyramid-like structure made from glass
2025-12-23 02:41:11 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:41:11 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The opening scene shows a pyramid-like structure made from glass
2025-12-23 02:41:12 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:41:12 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The opening scene shows a pyramid-like structure made from glass
2025-12-23 02:41:12 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:41:12 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The opening scene shows a pyramid-like structure made from glass
2025-12-23 02:41:12 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-23 02:41:12 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:41:12 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: Fashion show
2025-12-23 02:41:13 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 2 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:41:13 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3524.12ms
2025-12-23 02:41:13 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 02:41:13 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 400 unique ids from 2 stages
2025-12-23 02:41:13 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 400 unique ids
2025-12-23 02:42:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 02:42:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='m·ªôt Cu·ªôc H·ªçp v·ªÅ ph√≤ng ch·ªëng tham nh≈©ng ti√™u c·ª±c c√≥ li√™n quan t·ªõi V·∫°n Th·ªãnh Ph√°t, SCB', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:42:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:42:00 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'm·ªôt Cu·ªôc H·ªçp v·ªÅ ph√≤ng ch·ªëng tham nh≈©ng ti√™u c·ª±c c√≥ li√™n quan t·ªõi V·∫°n Th·ªãnh Ph√°t, SCB'
2025-12-23 02:42:01 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'm·ªôt Cu·ªôc H·ªçp v·ªÅ ph√≤ng ch·ªëng tham nh≈©ng ti√™u c·ª±c c√≥ li√™n quan t·ªõi V·∫°n Th·ªãnh Ph√°t, SCB' ‚Üí 'A meeting on anti-corruption related to Van Thinh Phat, SCB'
2025-12-23 02:42:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'A meeting on anti-corruption related to Van Thinh Phat, SCB'
2025-12-23 02:42:01 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:42:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='A meeting on anti-corruption related to Van Thinh Phat, SCB', Q1='A meeting on anti-corruption related to Van Thinh Phat, SCB', Q2='A meeting on anti-corruption related to Van Thinh Phat, SCB'
2025-12-23 02:42:01 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 02:42:01 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 02:42:01 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:42:01 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A meeting on anti-corruption related to Van Thinh Phat, SCB
2025-12-23 02:42:01 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:42:01 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: A meeting on anti-corruption related to Van Thinh Phat, SCB
2025-12-23 02:42:02 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:42:02 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A meeting on anti-corruption related to Van Thinh Phat, SCB
2025-12-23 02:42:02 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:42:02 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A meeting on anti-corruption related to Van Thinh Phat, SCB
2025-12-23 02:42:02 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:42:02 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: A meeting on anti-corruption related to Van Thinh Phat, SCB
2025-12-23 02:42:03 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:42:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: A meeting on anti-corruption related to Van Thinh Phat, SCB
2025-12-23 02:42:03 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='C√≥ th·ªÉ th·∫•y ƒë√¢y l√† m·ªôt Cu·ªôc H·ªçp v·ªÅ ph√≤ng ch·ªëng tham nh≈©ng ti√™u c·ª±c c√≥ li√™n quan t·ªõi V·∫°n Th·ªãnh Ph√°t, SCB\n\n', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 02:42:03 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-23 02:42:03 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-23 02:42:03 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-23 02:42:03 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C√≥ th·ªÉ th·∫•y ƒë√¢y l√† m·ªôt Cu·ªôc H·ªçp v·ªÅ ph√≤ng ch·ªëng tham nh≈©ng ti√™u c·ª±c c√≥ li√™n quan t·ªõi V·∫°n Th·ªãnh Ph√°t, SCB' ‚Üí 'It can be seen that this is a negative anti-corruption meeting related to Van Thinh Phat and SCB.'
2025-12-23 02:42:03 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'It can be seen that this is a negative anti-corruption meeting related to Van Thinh Phat and SCB.'
2025-12-23 02:42:03 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-23 02:42:06 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 62086:1.0000, 194687:0.9020, 309624:0.8992, 344667:0.8643, 112922:0.8000, 594891:0.7849, 493134:0.7800, 356631:0.7639, 537973:0.7401, 309637:0.7273
2025-12-23 02:42:06 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 74412:1.0000, 74416:0.9733, 74396:0.9367, 309623:0.9339, 172221:0.9169, 10563:0.8694, 214166:0.8637, 213000:0.8414, 74417:0.8376, 364463:0.8348
2025-12-23 02:42:06 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 309623:1.0000, 10564:0.9530, 309627:0.9265, 194687:0.9102, 346226:0.8374, 309624:0.8041, 483311:0.7521, 356632:0.7496, 241006:0.7402, 309637:0.7368
2025-12-23 02:42:06 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 309623:1.0000, 309627:0.8742, 309624:0.8457, 309637:0.7625, 74412:0.7551, 10563:0.6625, 74398:0.6043, 74413:0.5788, 194687:0.5278, 74417:0.5278
2025-12-23 02:42:06 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-23 02:42:06 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-23 02:42:06 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 02:42:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 0
2025-12-23 02:42:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 5068.63ms
2025-12-23 02:42:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: tuple
2025-12-23 02:42:06 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Tuple mode: finding tuples from 2 stages
2025-12-23 02:42:06 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 1: 80 videos with results
2025-12-23 02:42:06 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] Stage 2: 0 videos with results
2025-12-23 02:42:06 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] No common videos across all stages
2025-12-23 02:42:06 - app.routers.search_multistage - INFO - [MULTISTAGE] Tuple mode: 0 valid tuples
2025-12-23 02:42:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 02:42:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, objects=[]
2025-12-23 02:42:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:42:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: ''
2025-12-23 02:42:07 - app.services.gemini.query_augmentation - WARNING - [QUERY AUG] Empty query, returning original
2025-12-23 02:42:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='', Q1='', Q2=''
2025-12-23 02:42:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 02:42:07 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 02:42:07 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.067s]
2025-12-23 02:42:07 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.064s]
2025-12-23 02:42:07 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.066s]
2025-12-23 02:42:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 02:42:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 88.70ms
2025-12-23 02:42:07 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 02:42:07 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-23 02:42:07 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-23 02:42:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 02:42:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='C√≥ th·ªÉ th·∫•y ƒë√¢y l√† m·ªôt Cu·ªôc H·ªçp v·ªÅ ph√≤ng ch·ªëng tham nh≈©ng ti√™u c·ª±c c√≥ li√™n quan t·ªõi V·∫°n Th·ªãnh Ph√°t, SCB', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:42:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 02:42:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'C√≥ th·ªÉ th·∫•y ƒë√¢y l√† m·ªôt Cu·ªôc H·ªçp v·ªÅ ph√≤ng ch·ªëng tham nh≈©ng ti√™u c·ª±c c√≥ li√™n quan t·ªõi V·∫°n Th·ªãnh Ph√°t, SCB'
2025-12-23 02:42:32 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C√≥ th·ªÉ th·∫•y ƒë√¢y l√† m·ªôt Cu·ªôc H·ªçp v·ªÅ ph√≤ng ch·ªëng tham nh≈©ng ti√™u c·ª±c c√≥ li√™n quan t·ªõi V·∫°n Th·ªãnh Ph√°t, SCB' ‚Üí 'It can be seen that this is a negative anti-corruption meeting related to Van Thinh Phat and SCB.'
2025-12-23 02:42:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'It can be seen that this is a negative anti-corruption meeting related to Van Thinh Phat and SCB.'
2025-12-23 02:42:32 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 02:42:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='It can be seen that this is a negative anti-corruption meeting related to Van Thinh Phat and SCB.', Q1='It can be seen that this is a negative anti-corruption meeting related to Van Thinh Phat and SCB.', Q2='It can be seen that this is a negative anti-corruption meeting related to Van Thinh Phat and SCB.'
2025-12-23 02:42:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 02:42:32 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 02:42:33 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:42:33 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: It can be seen that this is a negative anti-corruption meeting related to Van Thinh Phat and SCB.
2025-12-23 02:42:33 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:42:33 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: It can be seen that this is a negative anti-corruption meeting related to Van Thinh Phat and SCB.
2025-12-23 02:42:33 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:42:33 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: It can be seen that this is a negative anti-corruption meeting related to Van Thinh Phat and SCB.
2025-12-23 02:42:33 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:42:33 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: It can be seen that this is a negative anti-corruption meeting related to Van Thinh Phat and SCB.
2025-12-23 02:42:33 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:42:33 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: It can be seen that this is a negative anti-corruption meeting related to Van Thinh Phat and SCB.
2025-12-23 02:42:33 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:42:33 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: It can be seen that this is a negative anti-corruption meeting related to Van Thinh Phat and SCB.
2025-12-23 02:42:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-23 02:42:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2047.87ms
2025-12-23 02:42:34 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 02:42:34 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-23 02:42:34 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-23 02:42:52 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='C√≥ th·ªÉ th·∫•y ƒë√¢y l√† m·ªôt Cu·ªôc H·ªçp v·ªÅ ph√≤ng ch·ªëng tham nh≈©ng ti√™u c·ª±c c√≥ li√™n quan t·ªõi V·∫°n Th·ªãnh Ph√°t, SCB\n\n', ocrText='SCB', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 02:42:52 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-23 02:42:52 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-23 02:42:52 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr', 'multimodal'}, Total: 2
2025-12-23 02:42:53 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C√≥ th·ªÉ th·∫•y ƒë√¢y l√† m·ªôt Cu·ªôc H·ªçp v·ªÅ ph√≤ng ch·ªëng tham nh≈©ng ti√™u c·ª±c c√≥ li√™n quan t·ªõi V·∫°n Th·ªãnh Ph√°t, SCB' ‚Üí 'It can be seen that this is a negative anti-corruption meeting related to Van Thinh Phat and SCB.'
2025-12-23 02:42:53 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'It can be seen that this is a negative anti-corruption meeting related to Van Thinh Phat and SCB.'
2025-12-23 02:42:53 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'SCB'
2025-12-23 02:42:53 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-23 02:42:55 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 62086:1.0000, 194687:0.9020, 309624:0.8992, 344667:0.8643, 112922:0.8000, 594891:0.7849, 493134:0.7800, 356631:0.7639, 537973:0.7401, 309637:0.7273
2025-12-23 02:42:55 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 74412:1.0000, 74416:0.9733, 74396:0.9367, 309623:0.9339, 172221:0.9169, 10563:0.8694, 214166:0.8637, 213000:0.8414, 74417:0.8376, 364463:0.8348
2025-12-23 02:42:55 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 309623:1.0000, 10564:0.9530, 309627:0.9265, 194687:0.9102, 346226:0.8374, 309624:0.8041, 483311:0.7521, 356632:0.7496, 241006:0.7402, 309637:0.7368
2025-12-23 02:42:55 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 309623:1.0000, 309627:0.8742, 309624:0.8457, 309637:0.7625, 74412:0.7551, 10563:0.6625, 74398:0.6043, 74413:0.5788, 194687:0.5278, 74417:0.5278
2025-12-23 02:42:55 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'SCB'
2025-12-23 02:42:55 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.016s]
2025-12-23 02:42:55 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 277085:0.9906, 167033:0.9632, 167034:0.9632, 167081:0.9529, 167082:0.9529, 1132:0.9490, 167083:0.9458, 106515:0.9435, 106516:0.9435, 68574:0.9242
2025-12-23 02:42:55 - app.routers.search - INFO - [ENSEMBLE] Check: 2 enabled methods, per_method_results keys: ['multimodal', 'ocr']
2025-12-23 02:42:55 - app.routers.search - INFO - [ENSEMBLE] Ensembling 2 methods: {'ocr', 'multimodal'}
2025-12-23 02:42:55 - app.routers.search - INFO - [ENSEMBLE] Final ensemble top results: 309623:0.5000, 277085:0.4953, 167033:0.4816, 167034:0.4816, 167081:0.4764, 167082:0.4764, 1132:0.4745, 167083:0.4729, 106515:0.4718, 106516:0.4718, 68574:0.4621, 1444:0.4621, 113796:0.4613, 1458:0.4458, 309627:0.4371, 289965:0.4349, 1445:0.4308, 603964:0.4241, 603965:0.4241, 603966:0.4241
2025-12-23 02:42:55 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 02:43:12 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='C√≥ th·ªÉ th·∫•y ƒë√¢y l√† m·ªôt Cu·ªôc H·ªçp v·ªÅ ph√≤ng ch·ªëng tham nh≈©ng ti√™u c·ª±c c√≥ li√™n quan t·ªõi V·∫°n Th·ªãnh Ph√°t, SCB\n\n', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 02:43:12 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-23 02:43:12 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-23 02:43:12 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr', 'multimodal'}, Total: 2
2025-12-23 02:43:12 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C√≥ th·ªÉ th·∫•y ƒë√¢y l√† m·ªôt Cu·ªôc H·ªçp v·ªÅ ph√≤ng ch·ªëng tham nh≈©ng ti√™u c·ª±c c√≥ li√™n quan t·ªõi V·∫°n Th·ªãnh Ph√°t, SCB' ‚Üí 'It can be seen that this is a negative anti-corruption meeting related to Van Thinh Phat and SCB.'
2025-12-23 02:43:12 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'It can be seen that this is a negative anti-corruption meeting related to Van Thinh Phat and SCB.'
2025-12-23 02:43:12 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-23 02:43:13 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 02:43:13 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: It can be seen that this is a negative anti-corruption meeting related to Van Thinh Phat and SCB.
2025-12-23 02:43:13 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 02:43:13 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: It can be seen that this is a negative anti-corruption meeting related to Van Thinh Phat and SCB.
2025-12-23 02:43:13 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 02:43:13 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: It can be seen that this is a negative anti-corruption meeting related to Van Thinh Phat and SCB.
2025-12-23 02:43:13 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-23 02:43:13 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-23 02:43:13 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-23 02:43:13 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-23 02:43:13 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'It can be seen that this is a negative anti-corruption meeting related to Van Thinh Phat and SCB.'
2025-12-23 02:43:13 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.108s]
2025-12-23 02:43:13 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 215769:0.9428, 87156:0.9318, 87157:0.9164, 275181:0.9163, 87158:0.9067, 87152:0.9067, 87153:0.9028, 87154:0.9028, 87155:0.9028, 371668:0.8945
2025-12-23 02:43:13 - app.routers.search - INFO - [ENSEMBLE] Check: 2 enabled methods, per_method_results keys: ['multimodal', 'ocr']
2025-12-23 02:43:13 - app.routers.search - INFO - [ENSEMBLE] Ensembling 2 methods: {'ocr', 'multimodal'}
2025-12-23 02:43:13 - app.routers.search - INFO - [ENSEMBLE] Final ensemble top results: 215769:0.4714, 87156:0.4659, 87157:0.4582, 275181:0.4581, 87158:0.4534, 87152:0.4533, 87153:0.4514, 87154:0.4514, 87155:0.4514, 371668:0.4472, 435606:0.4472, 275182:0.4472, 637267:0.4451, 435607:0.4345, 595117:0.4322, 225053:0.4322, 225054:0.4322, 225055:0.4322, 225056:0.4322, 262829:0.4306
2025-12-23 02:43:13 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 02:43:14 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='C√≥ th·ªÉ th·∫•y ƒë√¢y l√† m·ªôt Cu·ªôc H·ªçp v·ªÅ ph√≤ng ch·ªëng tham nh≈©ng ti√™u c·ª±c c√≥ li√™n quan t·ªõi V·∫°n Th·ªãnh Ph√°t, SCB\n\n', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 02:43:14 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-23 02:43:14 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-23 02:43:14 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-23 02:43:15 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'C√≥ th·ªÉ th·∫•y ƒë√¢y l√† m·ªôt Cu·ªôc H·ªçp v·ªÅ ph√≤ng ch·ªëng tham nh≈©ng ti√™u c·ª±c c√≥ li√™n quan t·ªõi V·∫°n Th·ªãnh Ph√°t, SCB' ‚Üí 'It can be seen that this is a negative anti-corruption meeting related to Van Thinh Phat and SCB.'
2025-12-23 02:43:15 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'It can be seen that this is a negative anti-corruption meeting related to Van Thinh Phat and SCB.'
2025-12-23 02:43:15 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-23 02:43:17 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 62086:1.0000, 194687:0.9020, 309624:0.8992, 344667:0.8643, 112922:0.8000, 594891:0.7849, 493134:0.7800, 356631:0.7639, 537973:0.7401, 309637:0.7273
2025-12-23 02:43:17 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 74412:1.0000, 74416:0.9733, 74396:0.9367, 309623:0.9339, 172221:0.9169, 10563:0.8694, 214166:0.8637, 213000:0.8414, 74417:0.8376, 364463:0.8348
2025-12-23 02:43:17 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 309623:1.0000, 10564:0.9530, 309627:0.9265, 194687:0.9102, 346226:0.8374, 309624:0.8041, 483311:0.7521, 356632:0.7496, 241006:0.7402, 309637:0.7368
2025-12-23 02:43:17 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 309623:1.0000, 309627:0.8742, 309624:0.8457, 309637:0.7625, 74412:0.7551, 10563:0.6625, 74398:0.6043, 74413:0.5788, 194687:0.5278, 74417:0.5278
2025-12-23 02:43:17 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-23 02:43:17 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-23 02:43:17 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 03:08:12 - root - INFO - [IMAGE_SEARCH] Uploaded image: pasted-image-1766459291512.png
2025-12-23 03:08:12 - root - INFO - [IMAGE_SEARCH] Calling model server: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image
2025-12-23 03:08:14 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 03:08:14 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 03:08:14 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1850.89ms
2025-12-23 03:14:02 - root - INFO - [IMAGE_SEARCH] Uploaded image: pasted-image-1766459641770.png
2025-12-23 03:14:02 - root - INFO - [IMAGE_SEARCH] Calling model server: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image
2025-12-23 03:14:04 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 03:14:04 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 03:14:04 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1591.52ms
2025-12-23 03:14:05 - root - INFO - [IMAGE_SEARCH] Uploaded image: pasted-image-1766459642258.png
2025-12-23 03:14:05 - root - INFO - [IMAGE_SEARCH] Calling model server: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image
2025-12-23 03:14:06 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 03:14:06 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 03:14:06 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1500.60ms
2025-12-23 03:14:08 - root - INFO - [IMAGE_SEARCH] Uploaded image: pasted-image-1766459600625.png
2025-12-23 03:14:08 - root - INFO - [IMAGE_SEARCH] Calling model server: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image
2025-12-23 03:14:09 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 03:14:09 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 03:14:09 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1415.85ms
2025-12-23 03:15:48 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='Gi√° xƒÉng gi·∫£m g·∫ßn 300 ƒë·ªìng', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 03:15:48 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-23 03:15:48 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-23 03:15:48 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-23 03:15:48 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'Gi√° xƒÉng gi·∫£m g·∫ßn 300 ƒë·ªìng'
2025-12-23 03:15:48 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'Gi√° xƒÉng gi·∫£m g·∫ßn 300 ƒë·ªìng'
2025-12-23 03:15:48 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.093s]
2025-12-23 03:15:48 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 142109:0.9547, 175075:0.9547, 175077:0.9475, 175074:0.9454, 175076:0.9454, 142110:0.9347, 142111:0.9347, 142889:0.9347, 142890:0.9347, 174709:0.9347
2025-12-23 03:15:48 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-23 03:15:48 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-23 03:15:48 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 03:16:47 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='t√†u b·ªã r√≤ r·ªâ', ocrText='', toggles={'multimodal': False, 'ic': False, 'asr': True, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 03:16:47 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: text
2025-12-23 03:16:47 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': True, 'ocr': False, 'objectFilter': False}
2025-12-23 03:16:47 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'asr'}, Total: 1
2025-12-23 03:16:47 - app.routers.search - INFO - [ENSEMBLE] Running ASR search
2025-12-23 03:16:47 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.038s]
2025-12-23 03:16:47 - app.routers.search - INFO - [ENSEMBLE] ASR top results (scaled): 77556:0.9864, 68067:0.9818, 188404:0.9701, 213839:0.9655, 32433:0.9583, 9365:0.9582, 57653:0.9556, 115503:0.9502, 186289:0.9454, 217755:0.9439
2025-12-23 03:16:47 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['asr']
2025-12-23 03:16:47 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['asr']
2025-12-23 03:16:47 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 03:16:58 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='nh·∫≠n ƒë·ªãnh n·∫øu ', ocrText='', toggles={'multimodal': False, 'ic': False, 'asr': True, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 03:16:58 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: text
2025-12-23 03:16:58 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': True, 'ocr': False, 'objectFilter': False}
2025-12-23 03:16:58 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'asr'}, Total: 1
2025-12-23 03:16:58 - app.routers.search - INFO - [ENSEMBLE] Running ASR search
2025-12-23 03:16:58 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.033s]
2025-12-23 03:16:58 - app.routers.search - INFO - [ENSEMBLE] ASR top results (scaled): 93328:0.9988, 150058:0.9638, 7135:0.9461, 206392:0.9461, 67443:0.9319, 124478:0.9049, 6226:0.8831, 157184:0.8831, 185504:0.8811, 206333:0.8583
2025-12-23 03:16:58 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['asr']
2025-12-23 03:16:58 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['asr']
2025-12-23 03:16:58 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 03:17:06 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='nh·∫≠n ƒë·ªãnh n·∫øu to√†n b·ªô ', ocrText='', toggles={'multimodal': False, 'ic': False, 'asr': True, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 03:17:06 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: text
2025-12-23 03:17:06 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': True, 'ocr': False, 'objectFilter': False}
2025-12-23 03:17:06 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'asr'}, Total: 1
2025-12-23 03:17:06 - app.routers.search - INFO - [ENSEMBLE] Running ASR search
2025-12-23 03:17:06 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.022s]
2025-12-23 03:17:06 - app.routers.search - INFO - [ENSEMBLE] ASR top results (scaled): 185504:0.9941, 93328:0.9703, 128958:0.9656, 84968:0.9433, 199247:0.9227, 18784:0.8876, 191953:0.8795, 206426:0.8761, 109946:0.8724, 156537:0.8537
2025-12-23 03:17:06 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['asr']
2025-12-23 03:17:06 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['asr']
2025-12-23 03:17:06 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 03:19:37 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='·ª¶y ban ch√¢u √¢u ƒëi·ªÅu ch·ªânh ', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 03:19:37 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-23 03:19:37 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-23 03:19:37 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-23 03:19:37 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): '·ª¶y ban ch√¢u √¢u ƒëi·ªÅu ch·ªânh '
2025-12-23 03:19:37 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: '·ª¶y ban ch√¢u √¢u ƒëi·ªÅu ch·ªânh '
2025-12-23 03:19:37 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.039s]
2025-12-23 03:19:37 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 442615:0.9692, 442215:0.9586, 442216:0.9586, 442217:0.9524, 442616:0.9524, 442617:0.9524, 571722:0.8936, 442213:0.8631, 571720:0.8495, 442614:0.8492
2025-12-23 03:19:37 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-23 03:19:37 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-23 03:19:37 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 03:19:38 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='ph√°t hi·ªán n√†y ƒë∆∞·ª£c cho l√† mang t√≠nh', ocrText='', toggles={'multimodal': False, 'ic': False, 'asr': True, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 03:19:38 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: text
2025-12-23 03:19:38 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': True, 'ocr': False, 'objectFilter': False}
2025-12-23 03:19:38 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'asr'}, Total: 1
2025-12-23 03:19:38 - app.routers.search - INFO - [ENSEMBLE] Running ASR search
2025-12-23 03:19:39 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.062s]
2025-12-23 03:19:39 - app.routers.search - INFO - [ENSEMBLE] ASR top results (scaled): 145095:1.0000, 106389:0.9365, 190219:0.9033, 24737:0.9028, 52587:0.8957, 18815:0.8799, 25791:0.8450, 204057:0.8406, 99001:0.8330, 94001:0.8193
2025-12-23 03:19:39 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['asr']
2025-12-23 03:19:39 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['asr']
2025-12-23 03:19:39 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 03:19:43 - root - INFO - [IMAGE_SEARCH] Uploaded image: pasted-image-1766459933452.png
2025-12-23 03:19:43 - root - INFO - [IMAGE_SEARCH] Calling model server: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image
2025-12-23 03:19:45 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 03:19:45 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 03:19:45 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1846.08ms
2025-12-23 03:20:38 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='s√¥ng', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 03:20:38 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-23 03:20:38 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-23 03:20:38 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-23 03:20:38 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-23 03:20:38 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'river'
2025-12-23 03:20:38 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-23 03:20:38 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 03:20:38 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: river
2025-12-23 03:20:38 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 03:20:38 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: river
2025-12-23 03:20:38 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 03:20:38 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: river
2025-12-23 03:20:38 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-23 03:20:38 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-23 03:20:38 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-23 03:20:38 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-23 03:20:38 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-23 03:20:38 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-23 03:20:38 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 03:20:51 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 03:20:51 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='s√¥ng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 03:20:51 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 03:20:51 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 's√¥ng'
2025-12-23 03:20:52 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 's√¥ng' ‚Üí 'river'
2025-12-23 03:20:52 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'river'
2025-12-23 03:20:52 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 03:20:52 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='river', Q1='river', Q2='river'
2025-12-23 03:20:52 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 03:20:52 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 03:20:52 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 03:20:52 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: river
2025-12-23 03:20:53 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 03:20:53 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: river
2025-12-23 03:20:53 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 03:20:53 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: river
2025-12-23 03:20:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 03:20:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2811.62ms
2025-12-23 03:20:54 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 03:20:54 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-23 03:20:54 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-23 03:21:03 - root - INFO - [IMAGE_SEARCH] Uploaded image: pasted-image-1766460020218.png
2025-12-23 03:21:03 - root - INFO - [IMAGE_SEARCH] Calling model server: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image
2025-12-23 03:21:05 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 03:21:05 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 03:21:05 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1590.40ms
2025-12-23 03:22:28 - root - INFO - [IMAGE_SEARCH] Uploaded image: pasted-image-1766460104832.png
2025-12-23 03:22:28 - root - INFO - [IMAGE_SEARCH] Calling model server: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image
2025-12-23 03:22:29 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 03:22:29 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 03:22:30 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1616.81ms
2025-12-23 03:22:33 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='TƒÉng c∆∞·ªùng ki·ªÉm tra gi√°m s√°t vi·ªác t·ªï ch·ª©c cho tr·∫ª em', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 03:22:33 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-23 03:22:33 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-23 03:22:33 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-23 03:22:33 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'TƒÉng c∆∞·ªùng ki·ªÉm tra gi√°m s√°t vi·ªác t·ªï ch·ª©c cho tr·∫ª em'
2025-12-23 03:22:33 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'TƒÉng c∆∞·ªùng ki·ªÉm tra gi√°m s√°t vi·ªác t·ªï ch·ª©c cho tr·∫ª em'
2025-12-23 03:22:33 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.107s]
2025-12-23 03:22:33 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 358524:0.9519, 359150:0.9511, 359151:0.9511, 327632:0.9457, 327633:0.9457, 358527:0.9457, 358528:0.9457, 359149:0.9457, 359152:0.9457, 358525:0.9401
2025-12-23 03:22:33 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-23 03:22:33 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-23 03:22:33 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 03:22:33 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='c·ª©u nh∆∞ng ƒë√£ t·ª≠ vong vƒ©nh long', ocrText='', toggles={'multimodal': False, 'ic': False, 'asr': True, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 03:22:33 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: text
2025-12-23 03:22:33 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': True, 'ocr': False, 'objectFilter': False}
2025-12-23 03:22:33 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'asr'}, Total: 1
2025-12-23 03:22:33 - app.routers.search - INFO - [ENSEMBLE] Running ASR search
2025-12-23 03:22:33 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.041s]
2025-12-23 03:22:33 - app.routers.search - INFO - [ENSEMBLE] ASR top results (scaled): 167820:0.9980, 118087:0.9809, 98116:0.9480, 132618:0.9330, 118099:0.8796, 11098:0.8649, 110509:0.8649, 14743:0.8440, 155776:0.8413, 134196:0.8412
2025-12-23 03:22:33 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['asr']
2025-12-23 03:22:33 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['asr']
2025-12-23 03:22:33 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 03:24:57 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframe/L12/L12_V020/20976.webp
2025-12-23 03:24:57 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframe/L12/L12_V020/20976.webp -> /app/app/data/keyframe/L12/L12_V020/20976.webp
2025-12-23 03:24:57 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframe/L12/L12_V020/20976.webp
2025-12-23 03:24:57 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframe/L12/L12_V020/20976.webp -> /app/app/data/keyframe/L12/L12_V020/20976.webp
2025-12-23 03:24:58 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 03:24:58 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 03:24:58 - root - INFO - [IMAGE_SEARCH] Result #0: ID=359143, Path=/keyframe/L12/L12_V020/20976.webp, Score=0.9970155954360962
2025-12-23 03:24:58 - root - INFO - [IMAGE_SEARCH] Result #1: ID=359142, Path=/keyframe/L12/L12_V020/20936.webp, Score=0.9913234710693359
2025-12-23 03:24:58 - root - INFO - [IMAGE_SEARCH] Result #2: ID=594860, Path=/keyframe/L20/L20_V011/7407.webp, Score=0.9163179397583008
2025-12-23 03:24:58 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1176.95ms
2025-12-23 03:24:58 - root - INFO - [IMAGE_SEARCH] First result sample: {'id': 359143, 'keyframe_path': '/keyframe/L12/L12_V020/20976.webp', 'score': 0.9970155954360962, 'video': '', 'frame_idx': None}
2025-12-23 03:24:59 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 03:24:59 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 03:24:59 - root - INFO - [IMAGE_SEARCH] Result #0: ID=359143, Path=/keyframe/L12/L12_V020/20976.webp, Score=0.9970155954360962
2025-12-23 03:24:59 - root - INFO - [IMAGE_SEARCH] Result #1: ID=359142, Path=/keyframe/L12/L12_V020/20936.webp, Score=0.9913234710693359
2025-12-23 03:24:59 - root - INFO - [IMAGE_SEARCH] Result #2: ID=594860, Path=/keyframe/L20/L20_V011/7407.webp, Score=0.9163179397583008
2025-12-23 03:24:59 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1444.69ms
2025-12-23 03:24:59 - root - INFO - [IMAGE_SEARCH] First result sample: {'id': 359143, 'keyframe_path': '/keyframe/L12/L12_V020/20976.webp', 'score': 0.9970155954360962, 'video': '', 'frame_idx': None}
2025-12-23 03:26:50 - root - INFO - [IMAGE_SEARCH] Uploaded image: pasted-image-1766460366751.png
2025-12-23 03:26:50 - root - INFO - [IMAGE_SEARCH] Calling model server: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image
2025-12-23 03:26:50 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='14 thuy·ªÅn vi√™n', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 03:26:50 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-23 03:26:50 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-23 03:26:50 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-23 03:26:50 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): '14 thuy·ªÅn vi√™n'
2025-12-23 03:26:50 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: '14 thuy·ªÅn vi√™n'
2025-12-23 03:26:50 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.063s]
2025-12-23 03:26:50 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 27550:0.9787, 108833:0.9695, 80464:0.9695, 80465:0.9695, 306953:0.9571, 108830:0.9213, 522197:0.9212, 108832:0.9166, 124668:0.9078, 124669:0.9078
2025-12-23 03:26:50 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-23 03:26:50 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-23 03:26:50 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 03:26:51 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 03:26:51 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 03:26:51 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1636.80ms
2025-12-23 03:26:55 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='gi·∫≠n qu√° m·∫•t kh√¥ng t·ª©c t·ªëc', ocrText='', toggles={'multimodal': False, 'ic': False, 'asr': True, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 03:26:55 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: text
2025-12-23 03:26:55 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': True, 'ocr': False, 'objectFilter': False}
2025-12-23 03:26:55 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'asr'}, Total: 1
2025-12-23 03:26:55 - app.routers.search - INFO - [ENSEMBLE] Running ASR search
2025-12-23 03:26:55 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/asr/_search [status:200 duration:0.028s]
2025-12-23 03:26:55 - app.routers.search - INFO - [ENSEMBLE] ASR top results (scaled): 28270:0.9974, 188475:0.9865, 41872:0.9560, 23391:0.9483, 57335:0.9163, 203416:0.9159, 125316:0.9137, 87761:0.9136, 56918:0.9087, 49608:0.8942
2025-12-23 03:26:55 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['asr']
2025-12-23 03:26:55 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['asr']
2025-12-23 03:26:55 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 03:27:32 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='14 thuy·ªÅn vi√™n k√™u g·ªçi h·ªó tr·ª£', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 03:27:32 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-23 03:27:32 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-23 03:27:32 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-23 03:27:32 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): '14 thuy·ªÅn vi√™n k√™u g·ªçi h·ªó tr·ª£'
2025-12-23 03:27:32 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: '14 thuy·ªÅn vi√™n k√™u g·ªçi h·ªó tr·ª£'
2025-12-23 03:27:32 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.069s]
2025-12-23 03:27:32 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 303827:0.9873, 86946:0.9732, 86945:0.9534, 86947:0.9534, 86944:0.9446, 303290:0.9328, 303826:0.9263, 86942:0.9232, 351589:0.9189, 303568:0.9147
2025-12-23 03:27:32 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-23 03:27:32 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-23 03:27:32 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 03:27:32 - root - INFO - [IMAGE_SEARCH] Uploaded image: pasted-image-1766460408373.png
2025-12-23 03:27:32 - root - INFO - [IMAGE_SEARCH] Calling model server: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image
2025-12-23 03:27:33 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 03:27:33 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 03:27:33 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1421.17ms
2025-12-23 03:28:10 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='b√¨nh ƒë·ªãnh', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 03:28:10 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-23 03:28:10 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-23 03:28:10 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-23 03:28:10 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'b√¨nh ƒë·ªãnh'
2025-12-23 03:28:10 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'b√¨nh ƒë·ªãnh'
2025-12-23 03:28:10 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.026s]
2025-12-23 03:28:10 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 268672:0.9856, 216615:0.9576, 216616:0.9488, 268670:0.9307, 216613:0.9267, 216614:0.9267, 54863:0.9042, 80467:0.9034, 80468:0.9034, 346294:0.8869
2025-12-23 03:28:10 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-23 03:28:10 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-23 03:28:10 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 03:29:43 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='14 thuy·ªÅn vi√™n k√™u g·ªçi h·ªó tr·ª£', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 03:29:43 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-23 03:29:43 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-23 03:29:43 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-23 03:29:43 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): '14 thuy·ªÅn vi√™n k√™u g·ªçi h·ªó tr·ª£'
2025-12-23 03:29:43 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: '14 thuy·ªÅn vi√™n k√™u g·ªçi h·ªó tr·ª£'
2025-12-23 03:29:44 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.075s]
2025-12-23 03:29:44 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 303827:0.9873, 86946:0.9732, 86945:0.9534, 86947:0.9534, 86944:0.9446, 303290:0.9328, 303826:0.9263, 86942:0.9232, 351589:0.9189, 303568:0.9147
2025-12-23 03:29:44 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-23 03:29:44 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-23 03:29:44 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 03:34:43 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='ƒê·ªìng nai gi·∫£i quy·∫øt nh·ªØng h·∫°n', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 03:34:43 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-23 03:34:43 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-23 03:34:43 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-23 03:34:43 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'ƒê·ªìng nai gi·∫£i quy·∫øt nh·ªØng h·∫°n'
2025-12-23 03:34:43 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'ƒê·ªìng nai gi·∫£i quy·∫øt nh·ªØng h·∫°n'
2025-12-23 03:34:43 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.071s]
2025-12-23 03:34:43 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 313699:0.9867, 313700:0.9867, 314169:0.9867, 314168:0.9841, 314170:0.9778, 314167:0.9739, 314171:0.9593, 313694:0.9532, 313695:0.9532, 314166:0.9532
2025-12-23 03:34:43 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-23 03:34:43 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-23 03:34:43 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 03:34:43 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='htv9 6:34', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 03:34:43 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-23 03:34:43 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-23 03:34:43 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-23 03:34:43 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'htv9 6:34'
2025-12-23 03:34:43 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'htv9 6:34'
2025-12-23 03:34:44 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.026s]
2025-12-23 03:34:44 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 394139:0.9893, 389365:0.9837, 448171:0.9651, 448175:0.9651, 168786:0.9576, 444126:0.9503, 679458:0.9463, 184153:0.9252, 679497:0.9243, 444127:0.9046
2025-12-23 03:34:44 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-23 03:34:44 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-23 03:34:44 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 03:34:52 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='ƒê·ªìng Nai: gi·∫£i quy·∫øt nh·ªØng', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 03:34:52 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-23 03:34:52 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-23 03:34:52 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-23 03:34:52 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'ƒê·ªìng Nai: gi·∫£i quy·∫øt nh·ªØng'
2025-12-23 03:34:52 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'ƒê·ªìng Nai: gi·∫£i quy·∫øt nh·ªØng'
2025-12-23 03:34:52 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.063s]
2025-12-23 03:34:52 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 313699:0.9859, 313700:0.9859, 314169:0.9859, 314168:0.9825, 314170:0.9737, 314167:0.9681, 314171:0.9455, 313694:0.9357, 313695:0.9357, 314166:0.9357
2025-12-23 03:34:52 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-23 03:34:52 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-23 03:34:52 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 03:34:59 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='4 ng∆∞·ªùi ƒë√†n √¥ng nh√¨n l√™n m≈© tr·∫Øng', ocrText='ƒê·ªìng nai gi·∫£i quy·∫øt nh·ªØng h·∫°n', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 03:34:59 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-23 03:34:59 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-23 03:34:59 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-23 03:35:00 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: '4 ng∆∞·ªùi ƒë√†n √¥ng nh√¨n l√™n m≈© tr·∫Øng' ‚Üí '4 men look up at the white hat'
2025-12-23 03:35:00 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: '4 men look up at the white hat'
2025-12-23 03:35:00 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'ƒê·ªìng nai gi·∫£i quy·∫øt nh·ªØng h·∫°n'
2025-12-23 03:35:00 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'ƒê·ªìng nai gi·∫£i quy·∫øt nh·ªØng h·∫°n'
2025-12-23 03:35:00 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.047s]
2025-12-23 03:35:00 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 313699:0.9867, 313700:0.9867, 314169:0.9867, 314168:0.9841, 314170:0.9778, 314167:0.9739, 314171:0.9593, 313694:0.9532, 313695:0.9532, 314166:0.9532
2025-12-23 03:35:00 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-23 03:35:00 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-23 03:35:00 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 03:35:03 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='4 ng∆∞·ªùi ƒë√†n √¥ng nh√¨n l√™n m≈© tr·∫Øng', ocrText='ƒê·ªìng nai gi·∫£i quy·∫øt nh·ªØng h·∫°n', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 03:35:03 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-23 03:35:03 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-23 03:35:03 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr', 'multimodal'}, Total: 2
2025-12-23 03:35:03 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: '4 ng∆∞·ªùi ƒë√†n √¥ng nh√¨n l√™n m≈© tr·∫Øng' ‚Üí '4 men look up at the white hat'
2025-12-23 03:35:03 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: '4 men look up at the white hat'
2025-12-23 03:35:03 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'ƒê·ªìng nai gi·∫£i quy·∫øt nh·ªØng h·∫°n'
2025-12-23 03:35:03 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-23 03:35:03 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 03:35:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: 4 men look up at the white hat
2025-12-23 03:35:03 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 03:35:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: 4 men look up at the white hat
2025-12-23 03:35:03 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 03:35:03 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: 4 men look up at the white hat
2025-12-23 03:35:03 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-23 03:35:03 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-23 03:35:03 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-23 03:35:03 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-23 03:35:03 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'ƒê·ªìng nai gi·∫£i quy·∫øt nh·ªØng h·∫°n'
2025-12-23 03:35:03 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.054s]
2025-12-23 03:35:03 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 313699:0.9867, 313700:0.9867, 314169:0.9867, 314168:0.9841, 314170:0.9778, 314167:0.9739, 314171:0.9593, 313694:0.9532, 313695:0.9532, 314166:0.9532
2025-12-23 03:35:03 - app.routers.search - INFO - [ENSEMBLE] Check: 2 enabled methods, per_method_results keys: ['multimodal', 'ocr']
2025-12-23 03:35:03 - app.routers.search - INFO - [ENSEMBLE] Ensembling 2 methods: {'ocr', 'multimodal'}
2025-12-23 03:35:03 - app.routers.search - INFO - [ENSEMBLE] Final ensemble top results: 313699:0.4934, 313700:0.4934, 314169:0.4934, 314168:0.4921, 314170:0.4889, 314167:0.4870, 314171:0.4796, 313694:0.4766, 313695:0.4766, 314166:0.4766, 314164:0.4732, 314165:0.4655, 313693:0.4334, 96876:0.3687, 96877:0.3687, 287408:0.3622, 287100:0.3489, 357158:0.3452, 287097:0.3388, 313697:0.3348
2025-12-23 03:35:03 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 03:35:06 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='4 ng∆∞·ªùi ƒë√†n √¥ng nh√¨n l√™n m≈© tr·∫Øng', ocrText='ƒê·ªìng nai gi·∫£i quy·∫øt nh·ªØng h·∫°n', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 03:35:06 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-23 03:35:06 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-23 03:35:06 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-23 03:35:07 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: '4 ng∆∞·ªùi ƒë√†n √¥ng nh√¨n l√™n m≈© tr·∫Øng' ‚Üí '4 men look up at the white hat'
2025-12-23 03:35:07 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: '4 men look up at the white hat'
2025-12-23 03:35:07 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'ƒê·ªìng nai gi·∫£i quy·∫øt nh·ªØng h·∫°n'
2025-12-23 03:35:07 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'ƒê·ªìng nai gi·∫£i quy·∫øt nh·ªØng h·∫°n'
2025-12-23 03:35:07 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.081s]
2025-12-23 03:35:07 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 313699:0.9867, 313700:0.9867, 314169:0.9867, 314168:0.9841, 314170:0.9778, 314167:0.9739, 314171:0.9593, 313694:0.9532, 313695:0.9532, 314166:0.9532
2025-12-23 03:35:07 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-23 03:35:07 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-23 03:35:07 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 03:35:12 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='4 ng∆∞·ªùi ƒë√†n √¥ng nh√¨n l√™n m≈© tr·∫Øng', ocrText='ƒê·ªìng nai gi·∫£i quy·∫øt nh·ªØng h·∫°n', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 03:35:12 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-23 03:35:12 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-23 03:35:12 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-23 03:35:13 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: '4 ng∆∞·ªùi ƒë√†n √¥ng nh√¨n l√™n m≈© tr·∫Øng' ‚Üí '4 men look up at the white hat'
2025-12-23 03:35:13 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: '4 men look up at the white hat'
2025-12-23 03:35:13 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-23 03:35:15 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 433815:1.0000, 433816:0.9228, 615624:0.9217, 313695:0.8800, 313694:0.8387, 433814:0.8152, 311923:0.8035, 615625:0.7990, 583308:0.7667, 384704:0.7387
2025-12-23 03:35:15 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 384704:1.0000, 442061:0.9415, 464365:0.9280, 17846:0.8167, 511670:0.8032, 418347:0.7863, 17845:0.7769, 479529:0.7659, 669679:0.7592, 75168:0.7511
2025-12-23 03:35:15 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 28114:1.0000, 669530:0.9869, 215871:0.8661, 178972:0.8000, 28113:0.7882, 529083:0.7719, 215872:0.7547, 433814:0.7453, 430006:0.7340, 234746:0.7197
2025-12-23 03:35:15 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 384704:1.0000, 433816:0.7938, 615625:0.7871, 442061:0.7487, 433815:0.7269, 464365:0.7035, 615624:0.6761, 433814:0.6750, 384705:0.6395, 311923:0.5795
2025-12-23 03:35:15 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-23 03:35:15 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-23 03:35:15 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 03:36:37 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='htv9 6:34:45', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 03:36:37 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-23 03:36:37 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-23 03:36:37 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-23 03:36:37 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'htv9 6:34:45'
2025-12-23 03:36:37 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'htv9 6:34:45'
2025-12-23 03:36:37 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.020s]
2025-12-23 03:36:37 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 679619:0.9872, 381471:0.9570, 381472:0.9570, 499090:0.9397, 219676:0.9032, 571674:0.8588, 571675:0.8588, 571676:0.8588, 500169:0.8411, 514804:0.8117
2025-12-23 03:36:37 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-23 03:36:37 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-23 03:36:37 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 03:36:58 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='4 ng∆∞·ªùi ƒë√†n √¥ng m≈© tr·∫Øng', ocrText='htv9 6:34:45', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 03:36:58 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-23 03:36:58 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-23 03:36:58 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr', 'multimodal'}, Total: 2
2025-12-23 03:36:59 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: '4 ng∆∞·ªùi ƒë√†n √¥ng m≈© tr·∫Øng' ‚Üí '4 men with white hats'
2025-12-23 03:36:59 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: '4 men with white hats'
2025-12-23 03:36:59 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'htv9 6:34:45'
2025-12-23 03:36:59 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-23 03:36:59 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 03:36:59 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: 4 men with white hats
2025-12-23 03:36:59 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 03:36:59 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: 4 men with white hats
2025-12-23 03:36:59 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 03:36:59 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: 4 men with white hats
2025-12-23 03:36:59 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-23 03:36:59 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-23 03:36:59 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-23 03:36:59 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-23 03:36:59 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'htv9 6:34:45'
2025-12-23 03:36:59 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.031s]
2025-12-23 03:36:59 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 679619:0.9872, 381471:0.9570, 381472:0.9570, 499090:0.9397, 219676:0.9032, 571674:0.8588, 571675:0.8588, 571676:0.8588, 500169:0.8411, 514804:0.8117
2025-12-23 03:36:59 - app.routers.search - INFO - [ENSEMBLE] Check: 2 enabled methods, per_method_results keys: ['multimodal', 'ocr']
2025-12-23 03:36:59 - app.routers.search - INFO - [ENSEMBLE] Ensembling 2 methods: {'ocr', 'multimodal'}
2025-12-23 03:36:59 - app.routers.search - INFO - [ENSEMBLE] Final ensemble top results: 679619:0.4936, 381471:0.4785, 381472:0.4785, 499090:0.4698, 219676:0.4516, 571674:0.4294, 571675:0.4294, 571676:0.4294, 500169:0.4206, 514804:0.4059, 571672:0.4059, 315607:0.4031, 426111:0.3922, 426112:0.3922, 586917:0.3922, 172137:0.3922, 679612:0.3792, 679616:0.3792, 679617:0.3792, 135060:0.3780
2025-12-23 03:36:59 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 03:37:04 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='b·ªìn ng∆∞·ªùi ƒë√†n √¥ng m≈© tr·∫Øng', ocrText='htv9 6:34:45', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 03:37:04 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-23 03:37:04 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-23 03:37:04 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr', 'multimodal'}, Total: 2
2025-12-23 03:37:06 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'b·ªìn ng∆∞·ªùi ƒë√†n √¥ng m≈© tr·∫Øng' ‚Üí 'White hat man tank'
2025-12-23 03:37:06 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'White hat man tank'
2025-12-23 03:37:06 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'htv9 6:34:45'
2025-12-23 03:37:06 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-23 03:37:08 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 566649:1.0000, 566648:0.9304, 671762:0.8871, 566645:0.8313, 131509:0.7985, 566644:0.7714, 566647:0.7588, 671763:0.7420, 327693:0.6939, 538450:0.6872
2025-12-23 03:37:08 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 663958:1.0000, 663955:0.9249, 663959:0.8662, 663957:0.8486, 197705:0.8248, 284125:0.8144, 663956:0.8138, 197715:0.8017, 6238:0.7932, 476615:0.7674
2025-12-23 03:37:08 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 560206:1.0000, 383684:0.7251, 538448:0.6870, 560205:0.6643, 538451:0.6594, 538449:0.6587, 701488:0.5399, 130296:0.5031, 560207:0.4918, 82701:0.4837
2025-12-23 03:37:08 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 663958:1.0000, 131509:0.9270, 264163:0.9145, 560206:0.8878, 663955:0.8871, 538448:0.8829, 538449:0.8562, 131455:0.8244, 671762:0.8237, 663959:0.7990
2025-12-23 03:37:08 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'htv9 6:34:45'
2025-12-23 03:37:08 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.014s]
2025-12-23 03:37:08 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 679619:0.9872, 381471:0.9570, 381472:0.9570, 499090:0.9397, 219676:0.9032, 571674:0.8588, 571675:0.8588, 571676:0.8588, 500169:0.8411, 514804:0.8117
2025-12-23 03:37:08 - app.routers.search - INFO - [ENSEMBLE] Check: 2 enabled methods, per_method_results keys: ['multimodal', 'ocr']
2025-12-23 03:37:08 - app.routers.search - INFO - [ENSEMBLE] Ensembling 2 methods: {'ocr', 'multimodal'}
2025-12-23 03:37:08 - app.routers.search - INFO - [ENSEMBLE] Final ensemble top results: 663958:0.5000, 679619:0.4936, 381471:0.4785, 381472:0.4785, 499090:0.4698, 131509:0.4635, 264163:0.4572, 219676:0.4516, 560206:0.4439, 663955:0.4436, 538448:0.4415, 571674:0.4294, 571675:0.4294, 571676:0.4294, 538449:0.4281, 500169:0.4206, 131455:0.4122, 671762:0.4119, 514804:0.4059, 571672:0.4059
2025-12-23 03:37:08 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 03:37:11 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='b·ªìn ng∆∞·ªùi ƒë√†n √¥ng m≈© tr·∫Øng', ocrText='htv9 6:34:45', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 03:37:11 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-23 03:37:11 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-23 03:37:11 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-23 03:37:11 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'b·ªìn ng∆∞·ªùi ƒë√†n √¥ng m≈© tr·∫Øng' ‚Üí 'White hat man tank'
2025-12-23 03:37:11 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'White hat man tank'
2025-12-23 03:37:11 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-23 03:37:11 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 03:37:11 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: White hat man tank
2025-12-23 03:37:12 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 03:37:12 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: White hat man tank
2025-12-23 03:37:12 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 03:37:12 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: White hat man tank
2025-12-23 03:37:12 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-23 03:37:12 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-23 03:37:12 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-23 03:37:12 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-23 03:37:12 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-23 03:37:12 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-23 03:37:12 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 03:37:14 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='b·ªìn ng∆∞·ªùi ƒë√†n √¥ng m≈© tr·∫Øng', ocrText='htv9 6:34:45', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 03:37:14 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-23 03:37:14 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-23 03:37:14 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-23 03:37:14 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'b·ªìn ng∆∞·ªùi ƒë√†n √¥ng m≈© tr·∫Øng' ‚Üí 'White hat man tank'
2025-12-23 03:37:14 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'White hat man tank'
2025-12-23 03:37:14 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-23 03:37:16 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 566649:1.0000, 566648:0.9304, 671762:0.8871, 566645:0.8313, 131509:0.7985, 566644:0.7714, 566647:0.7588, 671763:0.7420, 327693:0.6939, 538450:0.6872
2025-12-23 03:37:16 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 663958:1.0000, 663955:0.9249, 663959:0.8662, 663957:0.8486, 197705:0.8248, 284125:0.8144, 663956:0.8138, 197715:0.8017, 6238:0.7932, 476615:0.7674
2025-12-23 03:37:16 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 560206:1.0000, 383684:0.7251, 538448:0.6870, 560205:0.6643, 538451:0.6594, 538449:0.6587, 701488:0.5399, 130296:0.5031, 560207:0.4918, 82701:0.4837
2025-12-23 03:37:16 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 663958:1.0000, 131509:0.9270, 264163:0.9145, 560206:0.8878, 663955:0.8871, 538448:0.8829, 538449:0.8562, 131455:0.8244, 671762:0.8237, 663959:0.7990
2025-12-23 03:37:16 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-23 03:37:16 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-23 03:37:16 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 03:38:29 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='ki·ªÉm tra x·ª≠ l√Ω', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 03:38:29 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-23 03:38:29 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-23 03:38:29 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-23 03:38:29 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'ki·ªÉm tra x·ª≠ l√Ω'
2025-12-23 03:38:29 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'ki·ªÉm tra x·ª≠ l√Ω'
2025-12-23 03:38:29 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.029s]
2025-12-23 03:38:29 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 216330:0.9867, 27617:0.9277, 80556:0.9114, 80557:0.9114, 166554:0.9045, 80558:0.8908, 335205:0.8901, 351380:0.8901, 351691:0.8901, 447319:0.8901
2025-12-23 03:38:29 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-23 03:38:29 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-23 03:38:29 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 03:38:30 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='Ki·ªÉm tra x·ª≠ l√Ω v·ª• 42 t·ª∑', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 03:38:30 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-23 03:38:30 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-23 03:38:30 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-23 03:38:30 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'Ki·ªÉm tra x·ª≠ l√Ω v·ª• 42 t·ª∑'
2025-12-23 03:38:30 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'Ki·ªÉm tra x·ª≠ l√Ω v·ª• 42 t·ª∑'
2025-12-23 03:38:30 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.024s]
2025-12-23 03:38:30 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 216003:0.9656, 508767:0.9585, 508768:0.9583, 216001:0.9576, 216002:0.9576, 27617:0.9568, 447134:0.9368, 27616:0.9367, 28409:0.9241, 28410:0.9241
2025-12-23 03:38:30 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-23 03:38:30 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-23 03:38:30 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 03:38:34 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='ki·ªÉm tra x·ª≠ l√Ω ', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 03:38:34 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-23 03:38:34 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-23 03:38:34 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-23 03:38:34 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'ki·ªÉm tra x·ª≠ l√Ω '
2025-12-23 03:38:34 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'ki·ªÉm tra x·ª≠ l√Ω '
2025-12-23 03:38:34 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.023s]
2025-12-23 03:38:34 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 216330:0.9867, 27617:0.9277, 80556:0.9114, 80557:0.9114, 166554:0.9045, 80558:0.8908, 335205:0.8901, 351380:0.8901, 351691:0.8901, 447319:0.8901
2025-12-23 03:38:34 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-23 03:38:34 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-23 03:38:34 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 03:38:39 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='ki·ªÉm tra x·ª≠ l√Ω 4.541', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 03:38:39 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-23 03:38:39 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-23 03:38:39 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-23 03:38:39 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'ki·ªÉm tra x·ª≠ l√Ω 4.541'
2025-12-23 03:38:39 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'ki·ªÉm tra x·ª≠ l√Ω 4.541'
2025-12-23 03:38:39 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.029s]
2025-12-23 03:38:39 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 79266:0.9945, 79267:0.9945, 79268:0.9945, 79269:0.9894, 79273:0.9876, 79270:0.9856, 79271:0.9809, 79272:0.9750, 216330:0.7996, 27617:0.6763
2025-12-23 03:38:39 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-23 03:38:39 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-23 03:38:39 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 03:42:31 - root - INFO - [IMAGE_SEARCH] Uploaded image: pasted-image-1766461308352.png
2025-12-23 03:42:31 - root - INFO - [IMAGE_SEARCH] Calling model server: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image
2025-12-23 03:42:32 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='B·∫Øc giang kh·ªüi t·ªë ƒë√≥i t∆∞·ª£ng ƒë√¢m xe', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 03:42:32 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-23 03:42:32 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-23 03:42:32 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-23 03:42:32 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'B·∫Øc giang kh·ªüi t·ªë ƒë√≥i t∆∞·ª£ng ƒë√¢m xe'
2025-12-23 03:42:32 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'B·∫Øc giang kh·ªüi t·ªë ƒë√≥i t∆∞·ª£ng ƒë√¢m xe'
2025-12-23 03:42:32 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.063s]
2025-12-23 03:42:32 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 80215:0.9831, 80216:0.9736, 79262:0.9674, 29553:0.9227, 79257:0.9013, 80217:0.9013, 79263:0.8756, 79264:0.8756, 79265:0.8756, 79258:0.8655
2025-12-23 03:42:32 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-23 03:42:32 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-23 03:42:32 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 03:42:33 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 03:42:33 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 03:42:33 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1608.30ms
2025-12-23 03:43:01 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='The bou named Miles', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 03:43:01 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-23 03:43:01 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-23 03:43:01 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-23 03:43:01 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'The bou named Miles'
2025-12-23 03:43:01 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'The bou named Miles'
2025-12-23 03:43:01 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.027s]
2025-12-23 03:43:01 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 294785:0.9994, 294784:0.9992, 398927:0.9938, 545325:0.8798, 545326:0.8798, 656911:0.8243, 174049:0.8145, 656912:0.7990, 551304:0.7943, 117671:0.7920
2025-12-23 03:43:01 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-23 03:43:01 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-23 03:43:01 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 03:43:02 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='the bou, named miles', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 03:43:02 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-23 03:43:02 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-23 03:43:02 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-23 03:43:02 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'the bou, named miles'
2025-12-23 03:43:02 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'the bou, named miles'
2025-12-23 03:43:02 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.017s]
2025-12-23 03:43:02 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 294785:0.9994, 294784:0.9992, 398927:0.9938, 545325:0.8798, 545326:0.8798, 656911:0.8243, 174049:0.8145, 656912:0.7990, 551304:0.7943, 117671:0.7920
2025-12-23 03:43:02 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-23 03:43:02 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-23 03:43:02 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 03:43:03 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='the boy name miles', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 03:43:03 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-23 03:43:03 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-23 03:43:03 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-23 03:43:03 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'the boy name miles'
2025-12-23 03:43:03 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'the boy name miles'
2025-12-23 03:43:03 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.028s]
2025-12-23 03:43:03 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 294785:0.9984, 294784:0.9978, 398927:0.9566, 174049:0.9249, 53891:0.8891, 18374:0.8759, 28208:0.8586, 28209:0.8586, 465568:0.8438, 343584:0.8405
2025-12-23 03:43:03 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-23 03:43:03 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-23 03:43:03 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 03:43:05 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='the boy, named miles', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 03:43:05 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-23 03:43:05 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-23 03:43:05 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-23 03:43:05 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'the boy, named miles'
2025-12-23 03:43:05 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'the boy, named miles'
2025-12-23 03:43:05 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.019s]
2025-12-23 03:43:05 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 294785:0.9995, 294784:0.9994, 398927:0.9936, 483065:0.8454, 656911:0.8217, 174049:0.8118, 3563:0.8108, 656912:0.7962, 117671:0.7891, 3564:0.7814
2025-12-23 03:43:05 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-23 03:43:05 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-23 03:43:05 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 03:43:22 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframe/L10/L10_V018/14675.webp
2025-12-23 03:43:22 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframe/L10/L10_V018/14675.webp -> /app/app/data/keyframe/L10/L10_V018/14675.webp
2025-12-23 03:43:23 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframe/L10/L10_V018/14675.webp
2025-12-23 03:43:23 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframe/L10/L10_V018/14675.webp -> /app/app/data/keyframe/L10/L10_V018/14675.webp
2025-12-23 03:43:23 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 03:43:24 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 03:43:24 - root - INFO - [IMAGE_SEARCH] Result #0: ID=294785, Path=/keyframe/L10/L10_V018/14675.webp, Score=0.9977231621742249
2025-12-23 03:43:24 - root - INFO - [IMAGE_SEARCH] Result #1: ID=294786, Path=/keyframe/L10/L10_V018/14715.webp, Score=0.9753698110580444
2025-12-23 03:43:24 - root - INFO - [IMAGE_SEARCH] Result #2: ID=294690, Path=/keyframe/L10/L10_V018/11802.webp, Score=0.9333310127258301
2025-12-23 03:43:24 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1137.68ms
2025-12-23 03:43:24 - root - INFO - [IMAGE_SEARCH] First result sample: {'id': 294785, 'keyframe_path': '/keyframe/L10/L10_V018/14675.webp', 'score': 0.9977231621742249, 'video': '', 'frame_idx': None}
2025-12-23 03:43:24 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 03:43:24 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 03:43:24 - root - INFO - [IMAGE_SEARCH] Result #0: ID=294785, Path=/keyframe/L10/L10_V018/14675.webp, Score=0.9977231621742249
2025-12-23 03:43:24 - root - INFO - [IMAGE_SEARCH] Result #1: ID=294786, Path=/keyframe/L10/L10_V018/14715.webp, Score=0.9753698110580444
2025-12-23 03:43:24 - root - INFO - [IMAGE_SEARCH] Result #2: ID=294690, Path=/keyframe/L10/L10_V018/11802.webp, Score=0.9333310127258301
2025-12-23 03:43:24 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1382.02ms
2025-12-23 03:43:24 - root - INFO - [IMAGE_SEARCH] First result sample: {'id': 294785, 'keyframe_path': '/keyframe/L10/L10_V018/14675.webp', 'score': 0.9977231621742249, 'video': '', 'frame_idx': None}
2025-12-23 03:43:37 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframe/L10/L10_V018/14675.webp
2025-12-23 03:43:37 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframe/L10/L10_V018/14675.webp -> /app/app/data/keyframe/L10/L10_V018/14675.webp
2025-12-23 03:43:37 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframe/L10/L10_V018/14675.webp
2025-12-23 03:43:37 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframe/L10/L10_V018/14675.webp -> /app/app/data/keyframe/L10/L10_V018/14675.webp
2025-12-23 03:43:38 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 03:43:38 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 03:43:38 - root - INFO - [IMAGE_SEARCH] Result #0: ID=294785, Path=/keyframe/L10/L10_V018/14675.webp, Score=0.9977231621742249
2025-12-23 03:43:38 - root - INFO - [IMAGE_SEARCH] Result #1: ID=294786, Path=/keyframe/L10/L10_V018/14715.webp, Score=0.9753698110580444
2025-12-23 03:43:38 - root - INFO - [IMAGE_SEARCH] Result #2: ID=294690, Path=/keyframe/L10/L10_V018/11802.webp, Score=0.9333310127258301
2025-12-23 03:43:38 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1235.72ms
2025-12-23 03:43:38 - root - INFO - [IMAGE_SEARCH] First result sample: {'id': 294785, 'keyframe_path': '/keyframe/L10/L10_V018/14675.webp', 'score': 0.9977231621742249, 'video': '', 'frame_idx': None}
2025-12-23 03:43:38 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 03:43:38 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 03:43:38 - root - INFO - [IMAGE_SEARCH] Result #0: ID=294785, Path=/keyframe/L10/L10_V018/14675.webp, Score=0.9977231621742249
2025-12-23 03:43:38 - root - INFO - [IMAGE_SEARCH] Result #1: ID=294786, Path=/keyframe/L10/L10_V018/14715.webp, Score=0.9753698110580444
2025-12-23 03:43:38 - root - INFO - [IMAGE_SEARCH] Result #2: ID=294690, Path=/keyframe/L10/L10_V018/11802.webp, Score=0.9333310127258301
2025-12-23 03:43:38 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1451.72ms
2025-12-23 03:43:38 - root - INFO - [IMAGE_SEARCH] First result sample: {'id': 294785, 'keyframe_path': '/keyframe/L10/L10_V018/14675.webp', 'score': 0.9977231621742249, 'video': '', 'frame_idx': None}
2025-12-23 03:46:07 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframe/L10/L10_V018/14675.webp
2025-12-23 03:46:07 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframe/L10/L10_V018/14675.webp -> /app/app/data/keyframe/L10/L10_V018/14675.webp
2025-12-23 03:46:07 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframe/L10/L10_V018/14675.webp
2025-12-23 03:46:07 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframe/L10/L10_V018/14675.webp -> /app/app/data/keyframe/L10/L10_V018/14675.webp
2025-12-23 03:46:08 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 03:46:08 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 03:46:08 - root - INFO - [IMAGE_SEARCH] Result #0: ID=294785, Path=/keyframe/L10/L10_V018/14675.webp, Score=0.9977231621742249
2025-12-23 03:46:08 - root - INFO - [IMAGE_SEARCH] Result #1: ID=294786, Path=/keyframe/L10/L10_V018/14715.webp, Score=0.9753698110580444
2025-12-23 03:46:08 - root - INFO - [IMAGE_SEARCH] Result #2: ID=294690, Path=/keyframe/L10/L10_V018/11802.webp, Score=0.9333310127258301
2025-12-23 03:46:08 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1043.22ms
2025-12-23 03:46:08 - root - INFO - [IMAGE_SEARCH] First result sample: {'id': 294785, 'keyframe_path': '/keyframe/L10/L10_V018/14675.webp', 'score': 0.9977231621742249, 'video': '', 'frame_idx': None}
2025-12-23 03:46:09 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 03:46:09 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 03:46:09 - root - INFO - [IMAGE_SEARCH] Result #0: ID=294785, Path=/keyframe/L10/L10_V018/14675.webp, Score=0.9977231621742249
2025-12-23 03:46:09 - root - INFO - [IMAGE_SEARCH] Result #1: ID=294786, Path=/keyframe/L10/L10_V018/14715.webp, Score=0.9753698110580444
2025-12-23 03:46:09 - root - INFO - [IMAGE_SEARCH] Result #2: ID=294690, Path=/keyframe/L10/L10_V018/11802.webp, Score=0.9333310127258301
2025-12-23 03:46:09 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1429.28ms
2025-12-23 03:46:09 - root - INFO - [IMAGE_SEARCH] First result sample: {'id': 294785, 'keyframe_path': '/keyframe/L10/L10_V018/14675.webp', 'score': 0.9977231621742249, 'video': '', 'frame_idx': None}
2025-12-23 03:48:30 - root - INFO - [IMAGE_SEARCH] Uploaded image: pasted-image-1766461667170.png
2025-12-23 03:48:30 - root - INFO - [IMAGE_SEARCH] Calling model server: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image
2025-12-23 03:48:31 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 03:48:32 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 03:48:32 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1531.17ms
2025-12-23 03:48:32 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='B·ªô giao th√¥ng v·∫≠n t·∫£i ƒë·ªÅ xu√¢t m·ªü r·ªông v√† √°p d·ª•ng', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 03:48:32 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-23 03:48:32 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-23 03:48:32 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-23 03:48:32 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'B·ªô giao th√¥ng v·∫≠n t·∫£i ƒë·ªÅ xu√¢t m·ªü r·ªông v√† √°p d·ª•ng'
2025-12-23 03:48:32 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'B·ªô giao th√¥ng v·∫≠n t·∫£i ƒë·ªÅ xu√¢t m·ªü r·ªông v√† √°p d·ª•ng'
2025-12-23 03:48:33 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.080s]
2025-12-23 03:48:33 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 47334:0.9814, 47335:0.9775, 47966:0.9769, 47965:0.9729, 47967:0.9571, 47970:0.9481, 47971:0.9481, 47972:0.9481, 47333:0.9440, 47337:0.9404
2025-12-23 03:48:33 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-23 03:48:33 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-23 03:48:33 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 03:48:33 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='thu ph√≠ kh√¥ng d·ª´ng t·∫°i c√°c s√¢n bay', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 03:48:33 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-23 03:48:33 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-23 03:48:33 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-23 03:48:33 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'thu ph√≠ kh√¥ng d·ª´ng t·∫°i c√°c s√¢n bay'
2025-12-23 03:48:33 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'thu ph√≠ kh√¥ng d·ª´ng t·∫°i c√°c s√¢n bay'
2025-12-23 03:48:33 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.093s]
2025-12-23 03:48:33 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 47335:0.9484, 47336:0.9289, 47337:0.9162, 334185:0.9150, 334186:0.9150, 334187:0.9150, 47334:0.9063, 47968:0.8917, 47969:0.8917, 47338:0.8856
2025-12-23 03:48:33 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-23 03:48:33 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-23 03:48:33 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 03:51:08 - root - INFO - [IMAGE_SEARCH] Uploaded image: pasted-image-1766461825218.png
2025-12-23 03:51:08 - root - INFO - [IMAGE_SEARCH] Calling model server: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image
2025-12-23 03:51:10 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 03:51:10 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 03:51:10 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1496.72ms
2025-12-23 03:51:11 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='22 tri·ªáu ng∆∞·ªùi ch√¢u m·ªπ ph·∫£i tha h∆∞∆°ng', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 03:51:11 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-23 03:51:11 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-23 03:51:11 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-23 03:51:11 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): '22 tri·ªáu ng∆∞·ªùi ch√¢u m·ªπ ph·∫£i tha h∆∞∆°ng'
2025-12-23 03:51:11 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: '22 tri·ªáu ng∆∞·ªùi ch√¢u m·ªπ ph·∫£i tha h∆∞∆°ng'
2025-12-23 03:51:11 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.070s]
2025-12-23 03:51:11 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 452255:0.9751, 452257:0.9649, 463643:0.9637, 452256:0.9570, 463642:0.9560, 463117:0.9526, 463118:0.9478, 463644:0.9426, 463645:0.9426, 463646:0.9426
2025-12-23 03:51:11 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-23 03:51:11 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-23 03:51:11 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 03:51:11 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='', ocrText='v·∫•n ƒë·ªÅ ng∆∞·ªùi di c∆∞ 22', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 03:51:11 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ocr
2025-12-23 03:51:11 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': False, 'ic': False, 'asr': False, 'ocr': True, 'objectFilter': False}
2025-12-23 03:51:11 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'ocr'}, Total: 1
2025-12-23 03:51:11 - app.routers.search - INFO - [ENSEMBLE] Using OCR text (no translation): 'v·∫•n ƒë·ªÅ ng∆∞·ªùi di c∆∞ 22'
2025-12-23 03:51:11 - app.routers.search - INFO - [ENSEMBLE] Running OCR search with text: 'v·∫•n ƒë·ªÅ ng∆∞·ªùi di c∆∞ 22'
2025-12-23 03:51:11 - elastic_transport.transport - INFO - POST http://elasticsearch:9200/ocr/_search [status:200 duration:0.028s]
2025-12-23 03:51:11 - app.routers.search - INFO - [ENSEMBLE] OCR top results (scaled): 30392:0.9753, 588520:0.9705, 588521:0.9705, 392503:0.9648, 37991:0.9559, 392504:0.9313, 463117:0.9202, 186656:0.9154, 463118:0.8987, 463638:0.8987
2025-12-23 03:51:11 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['ocr']
2025-12-23 03:51:11 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['ocr']
2025-12-23 03:51:11 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 03:53:26 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='c√°i h·ªôp v√† c√°i b·ªãch m√†u ƒëen ph√°t s√°ng', ocrText='v·∫•n ƒë·ªÅ ng∆∞·ªùi di c∆∞ 22', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 03:53:26 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-23 03:53:26 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-23 03:53:26 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-23 03:53:27 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c√°i h·ªôp v√† c√°i b·ªãch m√†u ƒëen ph√°t s√°ng' ‚Üí 'The black box and bag glow'
2025-12-23 03:53:27 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'The black box and bag glow'
2025-12-23 03:53:27 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-23 03:53:28 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 03:53:28 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The black box and bag glow
2025-12-23 03:53:28 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 03:53:28 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The black box and bag glow
2025-12-23 03:53:28 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 03:53:28 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The black box and bag glow
2025-12-23 03:53:28 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-23 03:53:28 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-23 03:53:28 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-23 03:53:28 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-23 03:53:28 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-23 03:53:28 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-23 03:53:28 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 03:53:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 03:53:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='c√°i h·ªôp v√† c√°i b·ªãch m√†u ƒëen ph√°t s√°ng', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 03:53:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 03:53:31 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'c√°i h·ªôp v√† c√°i b·ªãch m√†u ƒëen ph√°t s√°ng'
2025-12-23 03:53:32 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'c√°i h·ªôp v√† c√°i b·ªãch m√†u ƒëen ph√°t s√°ng' ‚Üí 'The black box and bag glow'
2025-12-23 03:53:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'The black box and bag glow'
2025-12-23 03:53:32 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 03:53:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='The black box and bag glow', Q1='The black box and bag glow', Q2='The black box and bag glow'
2025-12-23 03:53:32 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 03:53:32 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 03:53:32 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 03:53:32 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The black box and bag glow
2025-12-23 03:53:34 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 03:53:34 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The black box and bag glow
2025-12-23 03:53:34 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 03:53:34 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The black box and bag glow
2025-12-23 03:53:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 200, Q1: 200, Q2: 200
2025-12-23 03:53:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 3402.98ms
2025-12-23 03:53:35 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 03:53:35 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-23 03:53:35 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-23 03:56:24 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='test', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 03:56:24 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-23 03:56:24 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-23 03:56:24 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-23 03:56:24 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-23 03:56:24 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 03:56:24 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: test
2025-12-23 03:56:24 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 03:56:24 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: test
2025-12-23 03:56:24 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 03:56:24 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: test
2025-12-23 03:56:24 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-23 03:56:24 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-23 03:56:24 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-23 03:56:24 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-23 03:56:24 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-23 03:56:24 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-23 03:56:24 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 03:56:28 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='t·∫øt', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 03:56:28 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-23 03:56:28 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-23 03:56:28 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-23 03:56:29 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 't·∫øt' ‚Üí 'Tet'
2025-12-23 03:56:29 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'Tet'
2025-12-23 03:56:29 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-23 03:56:32 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 223871:1.0000, 189778:0.9944, 189774:0.9022, 204475:0.8831, 223870:0.8765, 207233:0.8746, 189773:0.8695, 259490:0.8498, 189777:0.8357, 207232:0.8329
2025-12-23 03:56:32 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 302837:1.0000, 199171:0.9977, 210941:0.9131, 199170:0.8702, 393428:0.8606, 612442:0.8546, 612438:0.8513, 612444:0.8429, 198221:0.7987, 199169:0.7863
2025-12-23 03:56:32 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 250755:1.0000, 231938:0.9886, 257374:0.9827, 299950:0.9212, 231909:0.9194, 260896:0.9096, 244976:0.8826, 183348:0.8690, 154118:0.8476, 250756:0.8261
2025-12-23 03:56:32 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 302837:1.0000, 199171:0.9965, 210941:0.8691, 199170:0.8045, 393428:0.7900, 612442:0.7810, 612438:0.7760, 612444:0.7633, 198221:0.6968, 199169:0.6781
2025-12-23 03:56:32 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-23 03:56:32 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-23 03:56:32 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 03:56:33 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='t·∫øt m√∫a l√¢n', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 03:56:33 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-23 03:56:33 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-23 03:56:33 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-23 03:56:34 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 't·∫øt m√∫a l√¢n' ‚Üí 'lion dance festival'
2025-12-23 03:56:34 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'lion dance festival'
2025-12-23 03:56:34 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-23 03:56:34 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 03:56:34 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: lion dance festival
2025-12-23 03:56:34 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 03:56:34 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: lion dance festival
2025-12-23 03:56:34 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 03:56:34 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: lion dance festival
2025-12-23 03:56:34 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-23 03:56:34 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-23 03:56:34 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-23 03:56:34 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-23 03:56:34 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-23 03:56:34 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-23 03:56:34 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 03:56:37 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='t·∫øt m√∫a l√¢n', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 03:56:37 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-23 03:56:37 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-23 03:56:37 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-23 03:56:37 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 't·∫øt m√∫a l√¢n' ‚Üí 'lion dance festival'
2025-12-23 03:56:37 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'lion dance festival'
2025-12-23 03:56:37 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-23 03:56:39 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 696168:1.0000, 696942:0.6278, 698483:0.5931, 689246:0.5563, 701536:0.5436, 701506:0.5195, 689248:0.4789, 696268:0.4718, 700338:0.4606, 701549:0.4554
2025-12-23 03:56:39 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 271610:1.0000, 154171:0.8400, 296997:0.6617, 254067:0.6476, 154170:0.6064, 689323:0.5943, 693354:0.5935, 687024:0.5526, 693353:0.5451, 687745:0.5329
2025-12-23 03:56:39 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 689056:1.0000, 698172:0.9482, 701372:0.8639, 697670:0.8038, 694547:0.7739, 697484:0.7448, 694745:0.7432, 701348:0.7317, 699739:0.7107, 695312:0.7092
2025-12-23 03:56:39 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 271610:1.0000, 154171:0.7783, 696168:0.5645, 296997:0.5314, 254067:0.5118, 154170:0.4547, 689323:0.4379, 693354:0.4368, 687024:0.3802, 693353:0.3698
2025-12-23 03:56:39 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-23 03:56:39 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-23 03:56:39 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 03:56:48 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframe/L24/L24_V026/4932.webp
2025-12-23 03:56:48 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframe/L24/L24_V026/4932.webp -> /app/app/data/keyframe/L24/L24_V026/4932.webp
2025-12-23 03:56:48 - root - INFO - [IMAGE_SEARCH] Searching for similar images to: /keyframe/L24/L24_V026/4932.webp
2025-12-23 03:56:48 - root - INFO - [IMAGE_SEARCH] Converted path: /keyframe/L24/L24_V026/4932.webp -> /app/app/data/keyframe/L24/L24_V026/4932.webp
2025-12-23 03:56:49 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 03:56:49 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 03:56:49 - root - INFO - [IMAGE_SEARCH] Result #0: ID=695487, Path=/keyframe/L24/L24_V026/4932.webp, Score=0.9963202476501465
2025-12-23 03:56:49 - root - INFO - [IMAGE_SEARCH] Result #1: ID=695486, Path=/keyframe/L24/L24_V026/4892.webp, Score=0.9856014251708984
2025-12-23 03:56:49 - root - INFO - [IMAGE_SEARCH] Result #2: ID=695488, Path=/keyframe/L24/L24_V026/4972.webp, Score=0.9812895059585571
2025-12-23 03:56:49 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1277.02ms
2025-12-23 03:56:49 - root - INFO - [IMAGE_SEARCH] First result sample: {'id': 695487, 'keyframe_path': '/keyframe/L24/L24_V026/4932.webp', 'score': 0.9963202476501465, 'video': '', 'frame_idx': None}
2025-12-23 03:56:50 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 03:56:50 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 03:56:50 - root - INFO - [IMAGE_SEARCH] Result #0: ID=695487, Path=/keyframe/L24/L24_V026/4932.webp, Score=0.9963202476501465
2025-12-23 03:56:50 - root - INFO - [IMAGE_SEARCH] Result #1: ID=695486, Path=/keyframe/L24/L24_V026/4892.webp, Score=0.9856014251708984
2025-12-23 03:56:50 - root - INFO - [IMAGE_SEARCH] Result #2: ID=695488, Path=/keyframe/L24/L24_V026/4972.webp, Score=0.9812895059585571
2025-12-23 03:56:50 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1628.96ms
2025-12-23 03:56:50 - root - INFO - [IMAGE_SEARCH] First result sample: {'id': 695487, 'keyframe_path': '/keyframe/L24/L24_V026/4932.webp', 'score': 0.9963202476501465, 'video': '', 'frame_idx': None}
2025-12-23 03:57:03 - root - INFO - [IMAGE_SEARCH] Uploaded image: pasted-image-1766462180264.png
2025-12-23 03:57:03 - root - INFO - [IMAGE_SEARCH] Calling model server: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image
2025-12-23 03:57:05 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 03:57:05 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 03:57:05 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1706.13ms
2025-12-23 03:57:15 - root - INFO - [IMAGE_SEARCH] Uploaded image: pasted-image-1766462191600.png
2025-12-23 03:57:15 - root - INFO - [IMAGE_SEARCH] Calling model server: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image
2025-12-23 03:57:16 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='con l√¢n c√≥ m√†u tr·∫Øng ƒëen v√†ng, th·ªùi ƒëi·ªÉm bu·ªïi t·ªëi', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 03:57:16 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-23 03:57:16 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-23 03:57:16 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-23 03:57:18 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'con l√¢n c√≥ m√†u tr·∫Øng ƒëen v√†ng, th·ªùi ƒëi·ªÉm bu·ªïi t·ªëi' ‚Üí 'The unicorn is white, black and yellow, at night'
2025-12-23 03:57:18 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'The unicorn is white, black and yellow, at night'
2025-12-23 03:57:18 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-23 03:57:18 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 03:57:18 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The unicorn is white, black and yellow, at night
2025-12-23 03:57:18 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 03:57:18 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The unicorn is white, black and yellow, at night
2025-12-23 03:57:18 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 03:57:18 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The unicorn is white, black and yellow, at night
2025-12-23 03:57:18 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 
2025-12-23 03:57:18 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 
2025-12-23 03:57:18 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 
2025-12-23 03:57:18 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 
2025-12-23 03:57:18 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-23 03:57:18 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-23 03:57:18 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 03:57:18 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 03:57:18 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 03:57:18 - app.routers.search - INFO - [ENSEMBLE DEBUG] Received queries: [QuerySection(query='t·∫øt m√∫a l√¢n m√†u tr·∫Øng bu·ªïi t·ªëi', ocrText='', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, selectedObjects=[])]
2025-12-23 03:57:18 - app.routers.search - INFO - [ENSEMBLE DEBUG] Method: ensemble
2025-12-23 03:57:18 - app.routers.search - INFO - [ENSEMBLE DEBUG] Query section toggles: {'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}
2025-12-23 03:57:18 - app.routers.search - INFO - [ENSEMBLE] Enabled methods: {'multimodal'}, Total: 1
2025-12-23 03:57:19 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 't·∫øt m√∫a l√¢n m√†u tr·∫Øng bu·ªïi t·ªëi' ‚Üí 'white lion dance festival at night'
2025-12-23 03:57:19 - app.routers.search - INFO - [TRANSLATE] Using translated query for non-ASR methods: 'white lion dance festival at night'
2025-12-23 03:57:19 - app.routers.search - INFO - [ENSEMBLE] ‚ö° Running SINGLE-PASS multimodal search (no augmentation)
2025-12-23 03:57:21 - app.routers.search - INFO - [ENSEMBLE] CLIP top results: 698181:1.0000, 701491:0.8533, 701498:0.8385, 701478:0.8180, 701460:0.7686, 698171:0.7564, 701522:0.7194, 700681:0.6859, 698175:0.6552, 696022:0.6507
2025-12-23 03:57:21 - app.routers.search - INFO - [ENSEMBLE] BEiT3 top results: 697732:1.0000, 293600:0.9573, 698161:0.8532, 697745:0.8269, 698067:0.8132, 701490:0.7934, 220925:0.7874, 701103:0.7738, 698047:0.7361, 698162:0.7155
2025-12-23 03:57:21 - app.routers.search - INFO - [ENSEMBLE] BIGG top results: 697484:1.0000, 691346:0.9234, 691343:0.9208, 691352:0.8957, 698163:0.8849, 691344:0.8532, 698174:0.8467, 697483:0.8455, 697478:0.8065, 698172:0.7993
2025-12-23 03:57:21 - app.routers.search - INFO - [ENSEMBLE] Multimodal ensemble top results: 697732:1.0000, 698172:0.9703, 293600:0.9360, 698161:0.9123, 701491:0.8096, 698177:0.7623, 698145:0.7435, 697745:0.7406, 698162:0.6945, 220925:0.6815
2025-12-23 03:57:21 - app.routers.search - INFO - [ENSEMBLE] Check: 1 enabled methods, per_method_results keys: ['multimodal']
2025-12-23 03:57:21 - app.routers.search - INFO - [ENSEMBLE] Single method - using results directly from: ['multimodal']
2025-12-23 03:57:21 - app.routers.search - INFO - [ENSEMBLE] Mode=E, always returning per_method_results for mode switching flexibility
2025-12-23 03:57:21 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 6364.66ms
2025-12-23 03:57:21 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing 2 stages
2025-12-23 03:57:21 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 0: id=1, query='con l√¢n c√≥ m√†u tr·∫Øng ƒëen v√†ng, th·ªùi ƒëi·ªÉm bu·ªïi t·ªëi', toggles={'multimodal': True, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 03:57:21 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1: id=2, query='', toggles={'multimodal': False, 'ic': False, 'asr': False, 'ocr': False, 'objectFilter': False}, objects=[]
2025-12-23 03:57:21 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 1: 'con l√¢n c√≥ m√†u tr·∫Øng ƒëen v√†ng, th·ªùi ƒëi·ªÉm bu·ªïi t·ªëi'
2025-12-23 03:57:21 - app.utils.translator - INFO - [TRANSLATE] Vietnamese ‚Üí English: 'con l√¢n c√≥ m√†u tr·∫Øng ƒëen v√†ng, th·ªùi ƒëi·ªÉm bu·ªïi t·ªëi' ‚Üí 'The unicorn is white, black and yellow, at night'
2025-12-23 03:57:21 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 translated: 'The unicorn is white, black and yellow, at night'
2025-12-23 03:57:22 - app.services.gemini.query_augmentation - ERROR - [QUERY AUG] Generation failed: 400 API key not valid. Please pass a valid API key. [reason: "API_KEY_INVALID"
domain: "googleapis.com"
metadata {
  key: "service"
  value: "generativelanguage.googleapis.com"
}
, locale: "en-US"
message: "API key not valid. Please pass a valid API key."
]
2025-12-23 03:57:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 queries: Q0='The unicorn is white, black and yellow, at night', Q1='The unicorn is white, black and yellow, at night', Q2='The unicorn is white, black and yellow, at night'
2025-12-23 03:57:22 - app.routers.search_multistage - INFO - [MULTISTAGE] Processing stage 2: ''
2025-12-23 03:57:22 - app.routers.search_multistage - WARNING - [MULTISTAGE] Stage 2 has no enabled methods
2025-12-23 03:57:22 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 03:57:22 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The unicorn is white, black and yellow, at night
2025-12-23 03:57:22 - app.services.method.clip_client - ERROR - Error extracting CLIP text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/clip/text
2025-12-23 03:57:22 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] CLIP returned empty embedding for query: The unicorn is white, black and yellow, at night
2025-12-23 03:57:22 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 03:57:22 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The unicorn is white, black and yellow, at night
2025-12-23 03:57:22 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 03:57:22 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The unicorn is white, black and yellow, at night
2025-12-23 03:57:23 - app.services.method.beit3_client - ERROR - Error extracting BEiT3 text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/beit3/text
2025-12-23 03:57:23 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BEiT3 returned empty embedding for query: The unicorn is white, black and yellow, at night
2025-12-23 03:57:23 - app.services.method.bigg_client - ERROR - Error extracting CLIP bigG text embedding: 404 Client Error: Not Found for url: https://d07968124bc9.ngrok-free.app/embedding/bigg/text
2025-12-23 03:57:23 - app.services.method.multimodel_search - WARNING - [MULTIMODEL] BIGG returned empty embedding for query: The unicorn is white, black and yellow, at night
2025-12-23 03:57:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Stage 1 Q0 results: 0, Q1: 200, Q2: 200
2025-12-23 03:57:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Completed 2 stages in 2126.53ms
2025-12-23 03:57:23 - app.routers.search_multistage - INFO - [MULTISTAGE] Performing temporal aggregation mode: id
2025-12-23 03:57:23 - app.utils.temporal_aggregation - INFO - [TEMPORAL_AGG] ID mode: aggregated 200 unique ids from 2 stages
2025-12-23 03:57:23 - app.routers.search_multistage - INFO - [MULTISTAGE] ID aggregation: 200 unique ids
2025-12-23 03:58:31 - root - INFO - [IMAGE_SEARCH] Uploaded image: pasted-image-1766462267779.png
2025-12-23 03:58:31 - root - INFO - [IMAGE_SEARCH] Calling model server: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image
2025-12-23 03:58:32 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 200 OK"
2025-12-23 03:58:32 - root - INFO - [IMAGE_SEARCH] Got embedding dimension: 1024
2025-12-23 03:58:32 - root - INFO - [IMAGE_SEARCH] Found 200 similar images in 1746.15ms
2025-12-23 06:24:17 - root - INFO - [IMAGE_SEARCH] Uploaded image: pasted-image-1766471075188.png
2025-12-23 06:24:17 - root - INFO - [IMAGE_SEARCH] Calling model server: https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image
2025-12-23 06:24:17 - httpx - INFO - HTTP Request: POST https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image "HTTP/1.1 404 Not Found"
2025-12-23 06:24:17 - root - ERROR - [IMAGE_SEARCH] Model server HTTP error: HTTPStatusError - Client error '404 Not Found' for url 'https://fetching-federico-ruffianly.ngrok-free.dev/embedding/clip/image'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404
2025-12-23 06:24:17 - root - ERROR - [IMAGE_SEARCH] Response status: 404
2025-12-23 06:24:17 - root - ERROR - [IMAGE_SEARCH] Response body: <!DOCTYPE html>
<html class="h-full" lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="preload" href="https://assets.ngrok.com/fonts/euclid-square/EuclidSquare-Regular-WebS.woff" as="font" type="font/woff" crossorigin="anonymous" />
    <link rel="preload" href="https://assets.ngrok.com/fonts/euclid-square/EuclidSquare-RegularItalic-WebS.woff" as="font" type="font/woff" crossorigin="anonymous" />
  
